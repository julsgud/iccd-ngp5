!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=t("angular"),o=n(i),s=t("./config/app.constants"),a=n(s),u=t("./config/app.config"),l=n(u),c=t("./config/app.run"),h=n(c);t("angular-ui-router"),t("angular-youtube-mb"),t("./config/app.templates"),t("./layout"),t("./components"),t("./home"),t("./sketches"),t("./services");var p=["ui.router","youtube-embed","templates","app.layout","app.components","app.home","app.sketches","app.services"];window.app=o["default"].module("app",p),o["default"].module("app").constant("AppConstants",a["default"]),o["default"].module("app").config(l["default"]),o["default"].module("app").run(h["default"]),o["default"].bootstrap(document,["app"],{strictDi:!0})},{"./components":2,"./config/app.config":4,"./config/app.constants":5,"./config/app.run":6,"./config/app.templates":7,"./home":10,"./layout":13,"./services":14,"./sketches":20,angular:25,"angular-ui-router":22,"angular-youtube-mb":23}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("angular"),o=n(i),s=t("./p5.directive"),a=n(s),u=o["default"].module("app.components",[]);u.directive("p5",a["default"]),r["default"]=u},{"./p5.directive":3,angular:25}],3:[function(t,e,r){"use strict";function n(t,e,r){"ngInject";return{restrict:"E",scope:{sketch:"="},link:function(t,e,n){var i=r();t.$watch("sketch",function(t){i.init(t,e[0])}),t.$on("$destroy",function(){i.destroy()})}}}n.$inject=["$window","$state","p5Wrapper"],Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],4:[function(t,e,r){"use strict";function n(t,e){"ngInject";t.state("app",{"abstract":!0,templateUrl:"layout/app-view.html"}),e.otherwise("/")}n.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={appName:"iccd",SC:"https://soundcloud.com/i-can-chase-dragons/"};r["default"]=n},{}],6:[function(t,e,r){"use strict";function n(t,e,r){"ngInject";e.$on("$stateChangeSuccess",function(t,r){e.setPageTitle(r.title)}),e.$on("$stateChangeError",function(t,e){console.error(e)}),e.setPageTitle=function(r){e.pageTitle=t.appName,r&&(e.pageTitle+=" — ",e.pageTitle+=r)}}function i(t){"ngInject";t.initialize({client_id:"40663c6e7e46ace3c3db0209c8bf9389",redirect_uri:"http://example.com/callback"})}n.$inject=["AppConstants","$rootScope","SC"],i.$inject=["SC"],Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],7:[function(t,e,r){"use strict";angular.module("templates",[]).run(["$templateCache",function(t){t.put("index.html",'<!doctype html>\n<html class=\'no-js\' lang="">\n    <head>\n        <meta charset="utf-8">\n        <meta http-equiv="x-ua-compatible" content="ie-edge">\n        <title ng-bind="pageTitle"></title>\n        <meta name="description" content="">\n        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">\n        <!-- <link rel="stylesheet" type="text/css" href="MyFontsWebfontsKit.css"> -->\n        <link rel="stylesheet" href="main.css">\n    </head>\n    <body>\n        <!-- app -->\n        <div ui-view class="flex"></div>\n\n        <!-- analytics -->\n        <script>\n            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=\n            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;\n            e=o.createElement(i);r=o.getElementsByTagName(i)[0];\n            e.src=\'https://www.google-analytics.com/analytics.js\';\n            r.parentNode.insertBefore(e,r)}(window,document,\'script\',\'ga\'));\n            ga(\'create\',\'UA-XXXXX-X\',\'auto\');ga(\'send\',\'pageview\');\n        </script>\n        <!-- app scripts -->\n        <script src="https://www.youtube.com/iframe_api"></script>\n        <script src="app.js"></script>\n    </body>\n</html>'),t.put("MyFontsWebfontsKit/StartHere.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"\n	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n<title>MyFontsWebfontsKit</title>\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>\n\n<!--\n/**\n * @license\n * MyFonts Webfont Build ID 3221118, 2016-05-18T19:02:48-0400\n * \n * The fonts listed in this notice are subject to the End User License\n * Agreement(s) entered into by the website owner. All other parties are \n * explicitly restricted from using the Licensed Webfonts(s).\n * \n * You may obtain a valid license at the URLs below.\n * \n * Webfont: TabacGlamG1SemiBold by Suitcase Type Foundry\n * URL: http://www.myfonts.com/fonts/suitcase/tabac-glam/g1-semi-bold/\n * Copyright: Copyright (c) 2015 by Tomas Brousil. All rights reserved.\n * Licensed pageviews: 10,000\n * \n * \n * License: http://www.myfonts.com/viewlicense?type=web&buildid=3221118\n * \n * © 2016 MyFonts Inc\n*/\n\n-->\n\n<!-- 1. load the webfonts -->\n<link rel="stylesheet" type="text/css" href="MyFontsWebfontsKit.css"/>\n\n<!-- 2. set up some css styles using the webfonts -->\n<style type="text/css">\n.TabacGlamG1SemiBold { font-family: TabacGlamG1SemiBold; }\n</style>\n\n\n<!-- not relevant to webfonts. just example code highlighting. -->\n<script type="text/javascript" src="Start here files/highlight.js"></script>\n<script type="text/javascript">\n  hljs.initHighlightingOnLoad();\n</script>\n\n<!-- also not relavent to webfonts. just layout css for this doc. -->\n<link rel="stylesheet" type="text/css" href="Start here files/layout.css">\n\n\n</head>\n<body>\n<div id="header"><br/>\n  <img src="Start here files/header.png" alt="MyFonts Webfonts" style="padding-bottom: 12px;" width="720" border="0" height="66"/>\n</div>\n<div id="main_container">\n		\n<div id="headline">\n<h2 class="webfont-article-block">MyFontsWebfontsKit</h2>\n<div class="container-article"><p style="font-size:36px;line-height:40px;">\n  <span class="TabacGlamG1SemiBold" contenteditable="true">TabacGlamG1SemiBold </span>\n</div>\n</div>\n<div id="webfont_instructions">\n	<h1>How To:</h1>\n	<p>The MyFonts Webfonts Kit is a collection of code and font files which allow all modern browsers to use webfonts in a standardized way.  \n	All you need to do is copy and paste some sample code, and make some edits to your CSS.  Three simple steps then you\'re on your way.</p>\n	\n	<h2>1. Upload your Kit</h2>\n\n	<p><strong>Upload the contents of the Kit to your server.</strong> This is\n	typically done using some type of FTP program — the same way that you upload images and other files\n	to your website. Typically it is easiest if you upload all the files and folders to\n	the root folder of your site.  You can alternately create a subfolder (or use an existing one) and put\n	the Kit there, put them wherever you want.  Be sure to make note of the location you\'ll need it in step two. </p>\n\n	<p><em>Note: You do not need to upload the <code>StartHere.html</code> file or\n	the <code>Start here files</code> folder.</em> </p>\n\n	<h2>2. Edit your site</h2>\n\n	<p><strong>Include a reference to the Kit. </strong> Locate the CSS file in the Kit’s main folder.  You should place a reference to this file in the\n	<code>head</code> section of your website’s HTML code. Make\n	sure that the reference appears on <strong>all</strong> HTML pages of your site.</p>\n\n	<p>This will link the webfonts from the Kit to your website. \n	If you uploaded the Kit to the root folder of your site, then\n	you can just copy and paste the code below into your site\'s \n	<code>head</code>. If you uploaded the Kit to a\n	subfolder, you’ll need to adjust the path to the font files in the CSS file. </p>\n\n	<pre><code class="html">&lt;!--\n/**\n * @license\n * MyFonts Webfont Build ID 3221118, 2016-05-18T19:02:48-0400\n * \n * The fonts listed in this notice are subject to the End User License\n * Agreement(s) entered into by the website owner. All other parties are \n * explicitly restricted from using the Licensed Webfonts(s).\n * \n * You may obtain a valid license at the URLs below.\n * \n * Webfont: TabacGlamG1SemiBold by Suitcase Type Foundry\n * URL: http://www.myfonts.com/fonts/suitcase/tabac-glam/g1-semi-bold/\n * Copyright: Copyright (c) 2015 by Tomas Brousil. All rights reserved.\n * Licensed pageviews: 10,000\n * \n * \n * License: http://www.myfonts.com/viewlicense?type=web&amp;buildid=3221118\n * \n * © 2016 MyFonts Inc\n*/\n\n--&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;MyFontsWebfontsKit.css&quot;&gt;\n</code></pre>\n	\n	<h2>3. Edit your CSS</h2>\n\n	<p><strong>Now for the fun part!</strong>\n	You\'ll need to assign the webfonts (font-family) to tags, classes and other CSS selectors.\n	You need to decide where on your site you would like to use the webfonts.  \n	Using CSS, you can assign webfonts to specific areas of your site.  \n	There are several ways to do it, here are the basics and we’ll explore more advanced options in the \'Sample code\' section below. </p>\n\n	<p>A simple method is to make a new class selector and\n	then assign the family names of the webfonts.  Whereever you want to use TabacGlamG1SemiBold just assign the class in your HTML. Here’s how it is done: </p>\n	\n	\n	<pre><code class="css">.TabacGlamG1SemiBold { \n	font-family: TabacGlamG1SemiBold;\n	font-weight: normal;\n	font-style: normal;\n}\n</code></pre>\n</div>\n<div id="webfont_code">\n	<h1>Sample CSS</h1>\n	<p><strong>Lets look at some fancy</strong> ways you can use CSS &amp; CSS selectors to apply webfonts to your site!\n	</p>\n	\n	<p>If you\'d like to assign a font to the entire site, simply use the <code>body</code> tag selector in your stylesheet.</p>\n	\n	 \n	<pre><code class="css">body { font-family: TabacGlamG1SemiBold; }</code></pre>\n\n	<p>If you’d like all <strong>headings</strong> to be formatted using this\n	webfont, you need to assign it to the <code>h1…h5</code> elements.  \n	Remember to assign the weight and style of the font, especially if you don\'t have the entire family.\n	Use the following CSS declaration in the stylesheet for your website: </p>\n\n \n	<pre><code class="css">h1, h2, h3, h4, h5 { \n	font-family: TabacGlamG1SemiBold; \n	font-weight: normal; \n	font-style: normal; \n}</code></pre>\n\n	<p>You can also assign the webfont to a specific HTML <strong>class</strong>, which will allow\n	you to easily mix different webfonts on the same page. Use the following CSS\n	declaration in the stylesheet for your website: </p>\n\n	\n	<pre><code class="css">.TabacGlamG1SemiBold { \n	font-family: TabacGlamG1SemiBold;\n	font-weight: normal;\n	font-style: normal;\n}\n</code></pre>\n\n	<p>Then, use the class as follows in the <code>body</code> section of your HTML: </p>\n\n		<pre><code class="html">&lt;p class=&quot;TabacGlamG1SemiBold&quot;&gt;Hello World!&lt;/p&gt;</code></pre>\n\n	<p>You can use any valid CSS selector (such as an HTML tag name, a class or an\n	ID, or a combination of those) if you want to format a specific portion of the\n	document.  There are tons of different things you can do with CSS, so have some fun!</p>\n	\n</div>\n\n<div id="webfont_troubleshooting">\n	\n	<h1>Webfont Kit Troubleshooting</h1>\n	\n	<p><strong>So it\'s not working, bummer.</strong>  Here are some tricks and tips to make this process a little easier.</p>\n	\n	<h3>Webfonts not working at all?</h3><p>\n	This is usually a problem with the path to either your CSS file or the actual font files referenced by the CSS file.  Double check all your paths and make sure that you\'re pointing to the locations which you uploaded the kit to.\n	It also might be worth double checking your CSS inside of a debugging tool such as Firebug (for Firefox) or Chrome Developer tools.\n	</p>\n\n	<h3>Webfonts not working on an iPhone or other iDevice?</h3><p>\n	This happens frequently when using IIS as a webserver. IIS will not serve file types (MIME types) it is unfamilar with, so\n	you must set the MIME type for SVG to "image/svg+xml" in the server settings.</p>\n\n	<h3>Webfonts not working in Firefox or IE9+?</h3><p>\n	Newer versions of Firefox and Internet Explorer have cross domain restrictions on font loading.\n	This is a security feature which can get really frustrating if you\'re not aware of it.  The best thing to do is to host the font on the same domain,\n	however if you have to host it on a different subdomain or on a CDN service you can get around this issue by adding a custom header, something like \'Access-Control-Allow-Origin: *\'\n	this <a href=\'http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default/\'>article</a> explains it in detail.\n	Your other option is to rebuild your webfont kit with Data URI encoded TTF\'s, it\'s an option under the Advanced section in our kit builder.</p>\n	\n	<h3>The WOFF file isn\'t loading</h3><p>\n	This happens frequently when using IIS as a webserver also, IIS will not serve file types (MIME types) it is unfamilar with, so\n	you must set the MIME type for WOFF to "application/font-woff" in the server settings.</p>\n	</div>\n\n<div id="webfont_specimen">\n	<div class="clearer">&nbsp;</div>\n	\n		  <div class="clearer">&nbsp;</div>\n  <div class="webfont-sample-block">\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:72px;">TabacGlamG1SemiBold</p>\n  </div>\n  <div class="webfont-sample-block nowrap">\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:36px;"><span>36 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:30px;"><span>30 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:24px;"><span>24 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:21px;"><span>21 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:18px;"><span>18 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:14px;"><span>14 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:12px;"><span>12 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:10px;"><span>10 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n  </div>\n  <div class="webfont-twocolumns">\n    <p class="TabacGlamG1SemiBold">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla arcu nisi, fringilla nec pharetra ac, dictum eget lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam viverra lectus nec erat viverra gravida. Nulla leo dolor, tristique elementum tempor sed, malesuada eget libero. Praesent congue, ipsum nec elementum tristique, dui enim fermentum nunc, in eleifend felis arcu at nulla. In augue massa, lobortis in fermentum non, euismod vel libero. </p>\n  </div>\n  <div class="webfont-twocolumns last">\n    <p class="TabacGlamG1SemiBold">Mauris feugiat porta tincidunt. Cras eget dui diam, a viverra tortor. Proin dictum, diam ut vulputate imperdiet, enim nulla blandit est, in accumsan erat nisl in dolor. Nunc ante orci, tincidunt non luctus quis, congue a sem. Nulla non vehicula nisi. Vestibulum suscipit egestas massa eget convallis. Curabitur sapien magna, imperdiet eu consequat non, bibendum vel magna. Nulla neque lectus, lacinia vitae commodo scelerisque, tempus sit amet tellus. In semper arcu ut massa egestas posuere. </p>\n  </div>\n  <div class="clearer">&nbsp;</div>\n    </div>\n\n\n</div>\n</body>\n</html>\n'),t.put("home/home.html",'<div class="container">\n    <div class="video-container"> \n        <div id="player"></div>\n        <!-- <iframe width="$ctrl.width" height="$ctrl.height" class="player" frameborder="0"\n            src="http://www.youtube.com/embed/RDXwUfiiZk4?autoplay=0&autohide=1&showinfo=0">\n        </iframe> -->\n    </div>\n    <p5 sketch=\'$ctrl.current\' id="p5canvas" class="p5canvas"> </p5>\n</div>'),t.put("layout/app-view.html",'<div ui-view class="flex"></div>'),t.put("layout/footer.html",'<footer>\n  <div class="container">\n    <a class="title" ng-bind="::$ctrl.title1 | uppercase"></a>\n    <a class="title" ng-bind="::$ctrl.title2 | uppercase"></a>\n  </div>\n</footer>'),t.put("layout/header.html",'<header>\n	<p class=""> I CAN CHASE </p>\n	<p class=""> DRAGONS </p>\n</header>\n'),t.put("styles/StartHere.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"\n	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n<title>MyFontsWebfontsKit</title>\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>\n\n<!--\n/**\n * @license\n * MyFonts Webfont Build ID 3221118, 2016-05-18T19:02:48-0400\n * \n * The fonts listed in this notice are subject to the End User License\n * Agreement(s) entered into by the website owner. All other parties are \n * explicitly restricted from using the Licensed Webfonts(s).\n * \n * You may obtain a valid license at the URLs below.\n * \n * Webfont: TabacGlamG1SemiBold by Suitcase Type Foundry\n * URL: http://www.myfonts.com/fonts/suitcase/tabac-glam/g1-semi-bold/\n * Copyright: Copyright (c) 2015 by Tomas Brousil. All rights reserved.\n * Licensed pageviews: 10,000\n * \n * \n * License: http://www.myfonts.com/viewlicense?type=web&buildid=3221118\n * \n * © 2016 MyFonts Inc\n*/\n\n-->\n\n<!-- 1. load the webfonts -->\n<link rel="stylesheet" type="text/css" href="MyFontsWebfontsKit.css"/>\n\n<!-- 2. set up some css styles using the webfonts -->\n<style type="text/css">\n.TabacGlamG1SemiBold { font-family: TabacGlamG1SemiBold; }\n</style>\n\n\n<!-- not relevant to webfonts. just example code highlighting. -->\n<script type="text/javascript" src="Start here files/highlight.js"></script>\n<script type="text/javascript">\n  hljs.initHighlightingOnLoad();\n</script>\n\n<!-- also not relavent to webfonts. just layout css for this doc. -->\n<link rel="stylesheet" type="text/css" href="Start here files/layout.css">\n\n\n</head>\n<body>\n<div id="header"><br/>\n  <img src="Start here files/header.png" alt="MyFonts Webfonts" style="padding-bottom: 12px;" width="720" border="0" height="66"/>\n</div>\n<div id="main_container">\n		\n<div id="headline">\n<h2 class="webfont-article-block">MyFontsWebfontsKit</h2>\n<div class="container-article"><p style="font-size:36px;line-height:40px;">\n  <span class="TabacGlamG1SemiBold" contenteditable="true">TabacGlamG1SemiBold </span>\n</div>\n</div>\n<div id="webfont_instructions">\n	<h1>How To:</h1>\n	<p>The MyFonts Webfonts Kit is a collection of code and font files which allow all modern browsers to use webfonts in a standardized way.  \n	All you need to do is copy and paste some sample code, and make some edits to your CSS.  Three simple steps then you\'re on your way.</p>\n	\n	<h2>1. Upload your Kit</h2>\n\n	<p><strong>Upload the contents of the Kit to your server.</strong> This is\n	typically done using some type of FTP program — the same way that you upload images and other files\n	to your website. Typically it is easiest if you upload all the files and folders to\n	the root folder of your site.  You can alternately create a subfolder (or use an existing one) and put\n	the Kit there, put them wherever you want.  Be sure to make note of the location you\'ll need it in step two. </p>\n\n	<p><em>Note: You do not need to upload the <code>StartHere.html</code> file or\n	the <code>Start here files</code> folder.</em> </p>\n\n	<h2>2. Edit your site</h2>\n\n	<p><strong>Include a reference to the Kit. </strong> Locate the CSS file in the Kit’s main folder.  You should place a reference to this file in the\n	<code>head</code> section of your website’s HTML code. Make\n	sure that the reference appears on <strong>all</strong> HTML pages of your site.</p>\n\n	<p>This will link the webfonts from the Kit to your website. \n	If you uploaded the Kit to the root folder of your site, then\n	you can just copy and paste the code below into your site\'s \n	<code>head</code>. If you uploaded the Kit to a\n	subfolder, you’ll need to adjust the path to the font files in the CSS file. </p>\n\n	<pre><code class="html">&lt;!--\n/**\n * @license\n * MyFonts Webfont Build ID 3221118, 2016-05-18T19:02:48-0400\n * \n * The fonts listed in this notice are subject to the End User License\n * Agreement(s) entered into by the website owner. All other parties are \n * explicitly restricted from using the Licensed Webfonts(s).\n * \n * You may obtain a valid license at the URLs below.\n * \n * Webfont: TabacGlamG1SemiBold by Suitcase Type Foundry\n * URL: http://www.myfonts.com/fonts/suitcase/tabac-glam/g1-semi-bold/\n * Copyright: Copyright (c) 2015 by Tomas Brousil. All rights reserved.\n * Licensed pageviews: 10,000\n * \n * \n * License: http://www.myfonts.com/viewlicense?type=web&amp;buildid=3221118\n * \n * © 2016 MyFonts Inc\n*/\n\n--&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;MyFontsWebfontsKit.css&quot;&gt;\n</code></pre>\n	\n	<h2>3. Edit your CSS</h2>\n\n	<p><strong>Now for the fun part!</strong>\n	You\'ll need to assign the webfonts (font-family) to tags, classes and other CSS selectors.\n	You need to decide where on your site you would like to use the webfonts.  \n	Using CSS, you can assign webfonts to specific areas of your site.  \n	There are several ways to do it, here are the basics and we’ll explore more advanced options in the \'Sample code\' section below. </p>\n\n	<p>A simple method is to make a new class selector and\n	then assign the family names of the webfonts.  Whereever you want to use TabacGlamG1SemiBold just assign the class in your HTML. Here’s how it is done: </p>\n	\n	\n	<pre><code class="css">.TabacGlamG1SemiBold { \n	font-family: TabacGlamG1SemiBold;\n	font-weight: normal;\n	font-style: normal;\n}\n</code></pre>\n</div>\n<div id="webfont_code">\n	<h1>Sample CSS</h1>\n	<p><strong>Lets look at some fancy</strong> ways you can use CSS &amp; CSS selectors to apply webfonts to your site!\n	</p>\n	\n	<p>If you\'d like to assign a font to the entire site, simply use the <code>body</code> tag selector in your stylesheet.</p>\n	\n	 \n	<pre><code class="css">body { font-family: TabacGlamG1SemiBold; }</code></pre>\n\n	<p>If you’d like all <strong>headings</strong> to be formatted using this\n	webfont, you need to assign it to the <code>h1…h5</code> elements.  \n	Remember to assign the weight and style of the font, especially if you don\'t have the entire family.\n	Use the following CSS declaration in the stylesheet for your website: </p>\n\n \n	<pre><code class="css">h1, h2, h3, h4, h5 { \n	font-family: TabacGlamG1SemiBold; \n	font-weight: normal; \n	font-style: normal; \n}</code></pre>\n\n	<p>You can also assign the webfont to a specific HTML <strong>class</strong>, which will allow\n	you to easily mix different webfonts on the same page. Use the following CSS\n	declaration in the stylesheet for your website: </p>\n\n	\n	<pre><code class="css">.TabacGlamG1SemiBold { \n	font-family: TabacGlamG1SemiBold;\n	font-weight: normal;\n	font-style: normal;\n}\n</code></pre>\n\n	<p>Then, use the class as follows in the <code>body</code> section of your HTML: </p>\n\n		<pre><code class="html">&lt;p class=&quot;TabacGlamG1SemiBold&quot;&gt;Hello World!&lt;/p&gt;</code></pre>\n\n	<p>You can use any valid CSS selector (such as an HTML tag name, a class or an\n	ID, or a combination of those) if you want to format a specific portion of the\n	document.  There are tons of different things you can do with CSS, so have some fun!</p>\n	\n</div>\n\n<div id="webfont_troubleshooting">\n	\n	<h1>Webfont Kit Troubleshooting</h1>\n	\n	<p><strong>So it\'s not working, bummer.</strong>  Here are some tricks and tips to make this process a little easier.</p>\n	\n	<h3>Webfonts not working at all?</h3><p>\n	This is usually a problem with the path to either your CSS file or the actual font files referenced by the CSS file.  Double check all your paths and make sure that you\'re pointing to the locations which you uploaded the kit to.\n	It also might be worth double checking your CSS inside of a debugging tool such as Firebug (for Firefox) or Chrome Developer tools.\n	</p>\n\n	<h3>Webfonts not working on an iPhone or other iDevice?</h3><p>\n	This happens frequently when using IIS as a webserver. IIS will not serve file types (MIME types) it is unfamilar with, so\n	you must set the MIME type for SVG to "image/svg+xml" in the server settings.</p>\n\n	<h3>Webfonts not working in Firefox or IE9+?</h3><p>\n	Newer versions of Firefox and Internet Explorer have cross domain restrictions on font loading.\n	This is a security feature which can get really frustrating if you\'re not aware of it.  The best thing to do is to host the font on the same domain,\n	however if you have to host it on a different subdomain or on a CDN service you can get around this issue by adding a custom header, something like \'Access-Control-Allow-Origin: *\'\n	this <a href=\'http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default/\'>article</a> explains it in detail.\n	Your other option is to rebuild your webfont kit with Data URI encoded TTF\'s, it\'s an option under the Advanced section in our kit builder.</p>\n	\n	<h3>The WOFF file isn\'t loading</h3><p>\n	This happens frequently when using IIS as a webserver also, IIS will not serve file types (MIME types) it is unfamilar with, so\n	you must set the MIME type for WOFF to "application/font-woff" in the server settings.</p>\n	</div>\n\n<div id="webfont_specimen">\n	<div class="clearer">&nbsp;</div>\n	\n		  <div class="clearer">&nbsp;</div>\n  <div class="webfont-sample-block">\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:72px;">TabacGlamG1SemiBold</p>\n  </div>\n  <div class="webfont-sample-block nowrap">\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:36px;"><span>36 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:30px;"><span>30 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:24px;"><span>24 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:21px;"><span>21 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:18px;"><span>18 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:14px;"><span>14 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:12px;"><span>12 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n    <p class="TabacGlamG1SemiBold webfont-sample" style="font-size:10px;"><span>10 </span>A very bad quack might jinx zippy fowls. Pellentesque ac felis eu tortor convallis iaculis vitae eget neque. Sed leo est, volutpat sed laoreet non, convallis at metus. Nam facilisis risus eget orci posuere sodales. Aliquam eleifend quam vel ipsum euismod aliquam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ut ultrices tellus. Aliquam quis metus diam, id commodo mi. Aenean ac urna mi, sit amet gravida lacus. Aliquam urna nunc, pulvinar vel egestas ac, tincidunt non dui. Maecenas in orci sit amet lacus mollis viverra eu vitae arcu. Vestibulum eros quam, viverra et fermentum ac, ultrices sit amet risus. Nulla tristique magna vel urna tempus cursus. </p>\n  </div>\n  <div class="webfont-twocolumns">\n    <p class="TabacGlamG1SemiBold">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla arcu nisi, fringilla nec pharetra ac, dictum eget lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam viverra lectus nec erat viverra gravida. Nulla leo dolor, tristique elementum tempor sed, malesuada eget libero. Praesent congue, ipsum nec elementum tristique, dui enim fermentum nunc, in eleifend felis arcu at nulla. In augue massa, lobortis in fermentum non, euismod vel libero. </p>\n  </div>\n  <div class="webfont-twocolumns last">\n    <p class="TabacGlamG1SemiBold">Mauris feugiat porta tincidunt. Cras eget dui diam, a viverra tortor. Proin dictum, diam ut vulputate imperdiet, enim nulla blandit est, in accumsan erat nisl in dolor. Nunc ante orci, tincidunt non luctus quis, congue a sem. Nulla non vehicula nisi. Vestibulum suscipit egestas massa eget convallis. Curabitur sapien magna, imperdiet eu consequat non, bibendum vel magna. Nulla neque lectus, lacinia vitae commodo scelerisque, tempus sit amet tellus. In semper arcu ut massa egestas posuere. </p>\n  </div>\n  <div class="clearer">&nbsp;</div>\n    </div>\n\n\n</div>\n</body>\n</html>\n');
}])},{}],8:[function(t,e,r){"use strict";function n(t){"ngInject";t.state("app.home",{url:"/",controller:"HomeCtrl",controllerAs:"$ctrl",templateUrl:"home/home.html",title:null})}n.$inject=["$stateProvider"],Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n},{}],9:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function o(t,e){"ngInject";n(this,o),this.current="GoldCoast",this.appName=t.appName};i.$inject=["AppConstants","$scope"],r["default"]=i},{}],10:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("angular"),o=n(i),s=t("./home.config"),a=n(s),u=t("./home.controller"),l=n(u),c=o["default"].module("app.home",[]);c.config(a["default"]),c.controller("HomeCtrl",l["default"]),r["default"]=c},{"./home.config":8,"./home.controller":9,angular:25}],11:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function s(t){"ngInject";n(this,s),this.title1=t.title1,this.title2=t.title2};i.$inject=["GoldCoast"];var o={controller:i,templateUrl:"layout/footer.html"};r["default"]=o},{}],12:[function(t,e,r){"use strict";function n(){"ngInject";this.title="I Can Chase Dragons",console.log("Header says hi")}Object.defineProperty(r,"__esModule",{value:!0});var i={controller:n,templateUrl:"layout/header.html"};r["default"]=i},{}],13:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("angular"),o=n(i),s=t("./header.component"),a=n(s),u=t("./footer.component"),l=n(u),c=o["default"].module("app.layout",[]);c.component("appHeader",a["default"]),c.component("appFooter",l["default"]),r["default"]=c},{"./footer.component":11,"./header.component":12,angular:25}],14:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("angular"),o=n(i),s=t("./p5Wrapper.service"),a=n(s),u=t("./p5Library.service"),l=n(u),c=t("./soundcloud.service"),h=n(c),p=o["default"].module("app.services",[]);p.factory("p5Wrapper",a["default"]),p.factory("p5",l["default"]),p.factory("SC",h["default"]),r["default"]=p},{"./p5Library.service":15,"./p5Wrapper.service":16,"./soundcloud.service":17,angular:25}],15:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(){"ngInject";return s["default"]}Object.defineProperty(r,"__esModule",{value:!0});var o=t("p5.sound"),s=n(o);r["default"]=i},{"p5.sound":27}],16:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){"ngInject";var e={init:function(e,r){this.destroy(),e&&(t.has(e)&&(e=t.get(e)),this.instance=new s["default"](e,r))},destroy:function(){this.instance&&(this.instance.remove(),this.instance=null)}};return function(){return Object.create(e)}}i.$inject=["$injector"],Object.defineProperty(r,"__esModule",{value:!0});var o=t("p5"),s=n(o);r["default"]=i},{p5:28}],17:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(){"ngInject";return s["default"]}Object.defineProperty(r,"__esModule",{value:!0});var o=t("soundcloud"),s=n(o);r["default"]=i},{soundcloud:29}],18:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(){"ngInject";return function(t){function e(e){r(e);for(var i=0;i<S.length;i++)g=t.width/2,y=t.height/2,S[i].draw(t,g,y,w),S[i].growAndFade(t,p,d,e.maxSize);n(e)}function r(t){0===S.length?S.push(new s["default"]):S.length<8&&S[S.length-1].size>=t.maxSize/8&&S.push(new s["default"])}function n(t){S[0].size>=t.maxSize&&S.shift()}function i(t,e,r){for(;T.length>0;)T.pop();T.push(new u["default"](t.nameSize,"I CAN CHASE",t.posX,t.frame,w)),T.push(new u["default"](t.nameSize,"DRAGONS",t.posX,t.frame+t.nameSize,w))}function o(t,e,r){for(;E.length>0;)E.pop();E.push(new u["default"](t.songNameSize,"GOLD",e-t.posX,r-t.frame-t.songNameSize,w)),E.push(new u["default"](t.songNameSize,"COAST",e-t.posX,r-t.frame,w))}function a(){_=!0}function l(t,e,r){var n={};return"portrait"===t?480>=e?(n.nameSize=r/22,n.songNameSize=r/15,n.frame=r/10,n.maxSize=e-e/10*2,n.posX=e/2,n.posY=r/2):1024>=e?(n.nameSize=r/21,n.songNameSize=r/13,n.frame=r/8,n.maxSize=e-e/10*2.5,n.posX=e/2,n.posY=r/2):(n.nameSize=r/17,n.songNameSize=r/10,n.frame=r/5,n.maxSize=e-e/10*2.5,n.posX=e/2,n.posY=r/2):"landscape"===t&&(480>=e||(1024>=e?(n.nameSize=r/21,n.songNameSize=r/13,n.frame=r/8,n.maxSize=r-r/5,n.posX=e/2):(n.nameSize=r/17,n.songNameSize=r/10,n.frame=r/8,n.maxSize=r-r/5,n.posX=e/2))),n}function c(t,e){var r=void 0;return r=t>e?"landscape":"portrait"}function h(){v=!0;var e=(t.width/3).toString(),r=(t.height/3).toString();b=new YT.Player("player",{height:r,width:e,videoId:"2MWrSoX2v70",playerVars:{showinfo:"0",color:"white",controls:"2"},events:{onStateChange:a}})}var p=64,f=void 0,d=3.8,m=void 0,g=void 0,y=void 0,v=!1,_=!1,b=void 0,w={r:163,g:107,b:82,a:255},x={r:58,g:68,b:157,a:200},S=[],T=[],E=[];t.setup=function(){f=t.loadFont("fonts/312E5B_0_0.ttf"),t.textFont(f);var e=t.createCanvas(t.windowWidth,t.windowHeight);e["class"]("p5canvas"),t.frameRate(p),t.smooth(),m=l(c(t.width,t.height),t.width,t.height),i(m,t.width,t.height),o(m,t.width,t.height)},t.draw=function(){t.background(x.r,x.g,x.b),t.noStroke(),e(m),t.fill(x.r,x.g,x.b,x.a),t.rect(0,t.height/2,t.width,t.height/2),255===T[0].alpha?T.forEach(function(e){return e.draw(t)}):T.forEach(function(e){return e.fadeIn(t,.5*d,p)}),255===E[0].alpha?E.forEach(function(e){return e.draw(t)}):E.forEach(function(e){return e.fadeIn(t,.8*d,p)})},t.windowResized=function(){t.resizeCanvas(t.windowWidth,t.windowHeight),m=l(c(t.width,t.height),t.width,t.height),i(m,t.width,t.height),o(m,t.width,t.height)},t.mousePressed=function(){},t.mouseReleased=function(){if(v){for(;S.length>0;)S.pop();console.log("video already loaded")}else{for(;S.length>0;)S.pop();h(),m.maxSize="portrait"===c(t.width,t.height)?1.2*t.width:1.2*t.height,console.log(m.maxSize)}},t.touchEnded=function(){if(v){for(;S.length>0;)S.pop();console.log("video already loaded")}else{for(;S.length>0;)S.pop();h(),m.maxSize="portrait"===c(t.width,t.height)?1.2*t.width:1.2*t.height,console.log(m.maxSize)}}}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("./gold-coast/circle.class"),s=n(o),a=t("./text.class"),u=n(a);r["default"]=i},{"./gold-coast/circle.class":19,"./text.class":21}],19:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.size=0,this.alpha=255}return i(t,[{key:"draw",value:function(t,e,r,n){t.fill(n.r,n.g,n.b,this.alpha),t.ellipse(e,r,this.size,this.size)}},{key:"growAndFade",value:function(t,e,r,n){var i=r*e,o=n/i;this.size+=o;var s=255/i;this.alpha-=s}}]),t}();r["default"]=o},{}],20:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("angular"),o=n(i),s=t("./gold-coast.service"),a=n(s),u=o["default"].module("app.sketches",[]);u.factory("GoldCoast",a["default"]),r["default"]=u},{"./gold-coast.service":18,angular:25}],21:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r,i,o,s){n(this,t),this.text=r,this.textSize=e,this.x=i,this.y=o,this.color=s,this.alpha=0}return i(t,[{key:"draw",value:function(t){t.textSize(this.textSize),t.textAlign(t.CENTER,t.CENTER),t.fill(this.color.r,this.color.g,this.color.b,this.alpha),t.text(this.text,this.x,this.y)}},{key:"fadeIn",value:function(t,e,r){t.textSize(this.textSize),t.textAlign(t.CENTER,t.CENTER),t.fill(this.color.r,this.color.g,this.color.b,this.alpha),t.text(this.text,this.x,this.y),this.alpha+=255/(e*r)}}]),t}();r["default"]=o},{}],22:[function(t,e,r){"undefined"!=typeof e&&"undefined"!=typeof r&&e.exports===r&&(e.exports="ui.router"),function(t,e,r){"use strict";function n(t,e){return G(new(G(function(){},{prototype:t})),e)}function i(t){return q(arguments,function(e){e!==t&&q(e,function(e,r){t.hasOwnProperty(r)||(t[r]=e)})}),t}function o(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function s(t){if(Object.keys)return Object.keys(t);var e=[];return q(t,function(t,r){e.push(r)}),e}function a(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var r=t.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=r);r>n;n++)if(n in t&&t[n]===e)return n;return-1}function u(t,e,r,n){var i,u=o(r,n),l={},c=[];for(var h in u)if(u[h]&&u[h].params&&(i=s(u[h].params),i.length))for(var p in i)a(c,i[p])>=0||(c.push(i[p]),l[i[p]]=t[i[p]]);return G({},l,e)}function l(t,e,r){if(!r){r=[];for(var n in t)r.push(n)}for(var i=0;i<r.length;i++){var o=r[i];if(t[o]!=e[o])return!1}return!0}function c(t,e){var r={};return q(t,function(t){r[t]=e[t]}),r}function h(t){var e={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return q(r,function(r){r in t&&(e[r]=t[r])}),e}function p(t){var e={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in t)-1==a(r,n)&&(e[n]=t[n]);return e}function f(t,e){var r=H(t),n=r?[]:{};return q(t,function(t,i){e(t,i)&&(n[r?n.length:i]=t)}),n}function d(t,e){var r=H(t)?[]:{};return q(t,function(t,n){r[n]=e(t,n)}),r}function m(t,e){var n=1,o=2,u={},l=[],c=u,h=G(t.when(u),{$$promises:u,$$values:u});this.study=function(u){function f(t,r){if(v[r]!==o){if(y.push(r),v[r]===n)throw y.splice(0,a(y,r)),new Error("Cyclic dependency: "+y.join(" -> "));if(v[r]=n,U(t))g.push(r,[function(){return e.get(t)}],l);else{var i=e.annotate(t);q(i,function(t){t!==r&&u.hasOwnProperty(t)&&f(u[t],t)}),g.push(r,t,i)}y.pop(),v[r]=o}}function d(t){return B(t)&&t.then&&t.$$promises}if(!B(u))throw new Error("'invocables' must be an object");var m=s(u||{}),g=[],y=[],v={};return q(u,f),u=y=v=null,function(n,o,s){function a(){--b||(w||i(_,o.$$values),y.$$values=_,y.$$promises=y.$$promises||!0,delete y.$$inheritedValues,f.resolve(_))}function u(t){y.$$failure=t,f.reject(t)}function l(r,i,o){function l(t){h.reject(t),u(t)}function c(){if(!L(y.$$failure))try{h.resolve(e.invoke(i,s,_)),h.promise.then(function(t){_[r]=t,a()},l)}catch(t){l(t)}}var h=t.defer(),p=0;q(o,function(t){v.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(p++,v[t].then(function(e){_[t]=e,--p||c()},l))}),p||c(),v[r]=h.promise}if(d(n)&&s===r&&(s=o,o=n,n=null),n){if(!B(n))throw new Error("'locals' must be an object")}else n=c;if(o){if(!d(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=h;var f=t.defer(),y=f.promise,v=y.$$promises={},_=G({},n),b=1+g.length/3,w=!1;if(L(o.$$failure))return u(o.$$failure),y;o.$$inheritedValues&&i(_,p(o.$$inheritedValues,m)),G(v,o.$$promises),o.$$values?(w=i(_,p(o.$$values,m)),y.$$inheritedValues=p(o.$$values,m),a()):(o.$$inheritedValues&&(y.$$inheritedValues=p(o.$$inheritedValues,m)),o.then(a,u));for(var x=0,S=g.length;S>x;x+=3)n.hasOwnProperty(g[x])?a():l(g[x],g[x+1],g[x+2]);return y}},this.resolve=function(t,e,r,n){return this.study(t)(e,r,n)}}function g(t,e,r){this.fromConfig=function(t,e,r){return L(t.template)?this.fromString(t.template,e):L(t.templateUrl)?this.fromUrl(t.templateUrl,e):L(t.templateProvider)?this.fromProvider(t.templateProvider,e,r):null},this.fromString=function(t,e){return F(t)?t(e):t},this.fromUrl=function(r,n){return F(r)&&(r=r(n)),null==r?null:t.get(r,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,n){return r.invoke(t,null,n||{params:e})}}function y(t,e,i){function o(e,r,n,i){if(g.push(e),d[e])return d[e];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(m[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return m[e]=new z.Param(e,r,n,i),m[e]}function s(t,e,r,n){var i=["",""],o=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return o;switch(r){case!1:i=["(",")"+(n?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+r+"|",")?"]}return o+i[0]+e+i[1]}function a(i,o){var s,a,u,l,c;return s=i[2]||i[3],c=e.params[s],u=t.substring(p,i.index),a=o?i[4]:i[4]||("*"==i[1]?".*":null),a&&(l=z.type(a)||n(z.type("string"),{pattern:new RegExp(a,e.caseInsensitive?"i":r)})),{id:s,regexp:a,segment:u,type:l,cfg:c}}e=G({params:{}},B(e)?e:{});var u,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h="^",p=0,f=this.segments=[],d=i?i.params:{},m=this.params=i?i.params.$$new():new z.ParamSet,g=[];this.source=t;for(var y,v,_;(u=l.exec(t))&&(y=a(u,!1),!(y.segment.indexOf("?")>=0));)v=o(y.id,y.type,y.cfg,"path"),h+=s(y.segment,v.type.pattern.source,v.squash,v.isOptional),f.push(y.segment),p=l.lastIndex;_=t.substring(p);var b=_.indexOf("?");if(b>=0){var w=this.sourceSearch=_.substring(b);if(_=_.substring(0,b),this.sourcePath=t.substring(0,p+b),w.length>0)for(p=0;u=c.exec(w);)y=a(u,!0),v=o(y.id,y.type,y.cfg,"search"),p=l.lastIndex}else this.sourcePath=t,this.sourceSearch="";h+=s(_)+(e.strict===!1?"/?":"")+"$",f.push(_),this.regexp=new RegExp(h,e.caseInsensitive?"i":r),this.prefix=f[0],this.$$paramNames=g}function v(t){G(this,t)}function _(){function t(t){return null!=t?t.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):t}function i(t){return null!=t?t.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):t}function o(){return{strict:m,caseInsensitive:p}}function u(t){return F(t)||H(t)&&F(t[t.length-1])}function l(){for(;x.length;){var t=x.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(b[t.name],h.invoke(t.def))}}function c(t){G(this,t||{})}z=this;var h,p=!1,m=!0,g=!1,b={},w=!0,x=[],S={string:{encode:t,decode:i,is:function(t){return null==t||!L(t)||"string"==typeof t},pattern:/[^\/]*/},"int":{encode:t,decode:function(t){return parseInt(t,10)},is:function(t){return L(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return t===!0||t===!1},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):r},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):r},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^\/]*/},any:{encode:e.identity,decode:e.identity,equals:e.equals,pattern:/.*/}};_.$$getDefaultValue=function(t){if(!u(t.value))return t.value;if(!h)throw new Error("Injectable functions cannot be called at configuration time");return h.invoke(t.value)},this.caseInsensitive=function(t){return L(t)&&(p=t),p},this.strictMode=function(t){return L(t)&&(m=t),m},this.defaultSquashPolicy=function(t){if(!L(t))return g;if(t!==!0&&t!==!1&&!U(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return g=t,t},this.compile=function(t,e){return new y(t,G(o(),e))},this.isMatcher=function(t){if(!B(t))return!1;var e=!0;return q(y.prototype,function(r,n){F(r)&&(e=e&&L(t[n])&&F(t[n]))}),e},this.type=function(t,e,r){if(!L(e))return b[t];if(b.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return b[t]=new v(G({name:t},e)),r&&(x.push({name:t,def:r}),w||l()),this},q(S,function(t,e){b[e]=new v(G({name:e},t))}),b=n(b,{}),this.$get=["$injector",function(t){return h=t,w=!1,l(),q(S,function(t,e){b[e]||(b[e]=new v(t))}),this}],this.Param=function(t,n,i,o){function l(t){var e=B(t)?s(t):[],r=-1===a(e,"value")&&-1===a(e,"type")&&-1===a(e,"squash")&&-1===a(e,"array");return r&&(t={value:t}),t.$$fn=u(t.value)?t.value:function(){return t.value},t}function c(r,n,i){if(r.type&&n)throw new Error("Param '"+t+"' has two type configurations.");return n?n:r.type?e.isString(r.type)?b[r.type]:r.type instanceof v?r.type:new v(r.type):"config"===i?b.any:b.string}function p(){var e={array:"search"===o?"auto":!1},r=t.match(/\[\]$/)?{array:!0}:{};return G(e,r,i).array}function m(t,e){var r=t.squash;if(!e||r===!1)return!1;if(!L(r)||null==r)return g;if(r===!0||U(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function y(t,e,n,i){var o,s,u=[{from:"",to:n||e?r:""},{from:null,to:n||e?r:""}];return o=H(t.replace)?t.replace:[],U(i)&&o.push({from:i,to:r}),s=d(o,function(t){return t.from}),f(u,function(t){return-1===a(s,t.from)}).concat(o)}function _(){if(!h)throw new Error("Injectable functions cannot be called at configuration time");var t=h.invoke(i.$$fn);if(null!==t&&t!==r&&!S.type.is(t))throw new Error("Default value ("+t+") for parameter '"+S.id+"' is not an instance of Type ("+S.type.name+")");return t}function w(t){function e(t){return function(e){return e.from===t}}function r(t){var r=d(f(S.replace,e(t)),function(t){return t.to});return r.length?r[0]:t}return t=r(t),L(t)?S.type.$normalize(t):_()}function x(){return"{Param:"+t+" "+n+" squash: '"+A+"' optional: "+E+"}"}var S=this;i=l(i),n=c(i,n,o);var T=p();n=T?n.$asArray(T,"search"===o):n,"string"!==n.name||T||"path"!==o||i.value!==r||(i.value="");var E=i.value!==r,A=m(i,E),C=y(i,T,E,A);G(this,{id:t,type:n,location:o,array:T,squash:A,replace:C,isOptional:E,value:w,dynamic:r,config:i,toString:x})},c.prototype={$$new:function(){return n(this,G(new c,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],r=this,n=s(c.prototype);r;)e.push(r),r=r.$$parent;return e.reverse(),q(e,function(e){q(s(e),function(e){-1===a(t,e)&&-1===a(n,e)&&t.push(e)})}),t},$$values:function(t){var e={},r=this;return q(r.$$keys(),function(n){e[n]=r[n].value(t&&t[n])}),e},$$equals:function(t,e){var r=!0,n=this;return q(n.$$keys(),function(i){var o=t&&t[i],s=e&&e[i];n[i].type.equals(o,s)||(r=!1)}),r},$$validates:function(t){var n,i,o,s,a,u=this.$$keys();for(n=0;n<u.length&&(i=this[u[n]],o=t[u[n]],o!==r&&null!==o||!i.isOptional);n++){if(s=i.type.$normalize(o),!i.type.is(s))return!1;if(a=i.type.encode(s),e.isString(a)&&!i.type.pattern.exec(a))return!1}return!0},$$parent:r},this.ParamSet=c}function b(t,n){function i(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,r){return e["$"===r?0:Number(r)]})}function s(t,e,r){if(!r)return!1;var n=t.invoke(e,e,{$match:r});return L(n)?n:!0}function a(n,i,o,s,a){function p(t,e,r){return"/"===g?t:e?g.slice(0,-1)+t:r?g.slice(1)+t:t}function f(t){function e(t){var e=t(o,n);return e?(U(e)&&n.replace().url(e),!0):!1}if(!t||!t.defaultPrevented){m&&n.url()===m;m=r;var i,s=l.length;for(i=0;s>i;i++)if(e(l[i]))return;c&&e(c)}}function d(){return u=u||i.$on("$locationChangeSuccess",f)}var m,g=s.baseHref(),y=n.url();return h||d(),{sync:function(){f()},listen:function(){return d()},update:function(t){return t?void(y=n.url()):void(n.url()!==y&&(n.url(y),n.replace()))},push:function(t,e,i){var o=t.format(e||{});null!==o&&e&&e["#"]&&(o+="#"+e["#"]),n.url(o),m=i&&i.$$avoidResync?n.url():r,i&&i.replace&&n.replace()},href:function(r,i,o){if(!r.validates(i))return null;var s=t.html5Mode();e.isObject(s)&&(s=s.enabled),s=s&&a.history;var u=r.format(i);if(o=o||{},s||null===u||(u="#"+t.hashPrefix()+u),null!==u&&i&&i["#"]&&(u+="#"+i["#"]),u=p(u,s,o.absolute),!o.absolute||!u)return u;var l=!s&&u?"/":"",c=n.port();return c=80===c||443===c?"":":"+c,[n.protocol(),"://",n.host(),c,l,u].join("")}}}var u,l=[],c=null,h=!1;this.rule=function(t){if(!F(t))throw new Error("'rule' must be a function");return l.push(t),this},this.otherwise=function(t){if(U(t)){var e=t;t=function(){return e}}else if(!F(t))throw new Error("'rule' must be a function");return c=t,this},this.when=function(t,e){var r,a=U(e);if(U(t)&&(t=n.compile(t)),!a&&!F(e)&&!H(e))throw new Error("invalid 'handler' in when()");var u={matcher:function(t,e){return a&&(r=n.compile(e),e=["$match",function(t){return r.format(t)}]),G(function(r,n){return s(r,e,t.exec(n.path(),n.search()))},{prefix:U(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(r=e,e=["$match",function(t){return o(r,t)}]),G(function(r,n){return s(r,e,t.exec(n.path()))},{prefix:i(t)})}},l={matcher:n.isMatcher(t),regex:t instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===r&&(t=!0),h=t},this.$get=a,a.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function w(t,i){function o(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function p(t,e){if(!t)return r;var n=U(t),i=n?t:t.name,s=o(i);if(s){if(!e)throw new Error("No reference point given for path '"+i+"'");e=p(e);for(var a=i.split("."),u=0,l=a.length,c=e;l>u;u++)if(""!==a[u]||0!==u){if("^"!==a[u])break;if(!c.parent)throw new Error("Path '"+i+"' not valid for state '"+e.name+"'");c=c.parent}else c=e;a=a.slice(u).join("."),i=c.name+(c.name&&a?".":"")+a}var h=E[i];return!h||!n&&(n||h!==t&&h.self!==t)?r:h}function f(t,e){A[t]||(A[t]=[]),A[t].push(e)}function m(t){for(var e=A[t]||[];e.length;)g(e.shift())}function g(e){e=n(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var r=e.name;if(!U(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(E.hasOwnProperty(r))throw new Error("State '"+r+"' is already defined");var i=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):U(e.parent)?e.parent:B(e.parent)&&U(e.parent.name)?e.parent.name:"";if(i&&!E[i])return f(i,e.self);for(var o in M)F(M[o])&&(e[o]=M[o](e,M.$delegates[o]));return E[r]=e,!e[C]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,r){T.$current.navigable==e&&l(t,r)||T.transitionTo(e,t,{inherit:!0,location:!1})}]),m(r),e}function y(t){return t.indexOf("*")>-1}function v(t){for(var e=t.split("."),r=T.$current.name.split("."),n=0,i=e.length;i>n;n++)"*"===e[n]&&(r[n]="*");return"**"===e[0]&&(r=r.slice(a(r,e[1])),r.unshift("**")),"**"===e[e.length-1]&&(r.splice(a(r,e[e.length-2])+1,Number.MAX_VALUE),r.push("**")),e.length!=r.length?!1:r.join("")===e.join("")}function _(t,e){return U(t)&&!L(e)?M[t]:F(e)&&U(t)?(M[t]&&!M.$delegates[t]&&(M.$delegates[t]=M[t]),M[t]=e,this):this}function b(t,e){return B(t)?e=t:e.name=t,g(e),this}function w(t,i,o,a,h,f,m,g,_){function b(e,r,n,o){var s=t.$broadcast("$stateNotFound",e,r,n);if(s.defaultPrevented)return m.update(),R;if(!s.retry)return null;if(o.$retry)return m.update(),P;var a=T.transition=i.when(s.retry);return a.then(function(){return a!==T.transition?A:(e.options.$retry=!0,T.transitionTo(e.to,e.toParams,e.options))},function(){return R}),m.update(),a}function w(t,r,n,s,u,l){function p(){var r=[];return q(t.views,function(n,i){var s=n.resolve&&n.resolve!==t.resolve?n.resolve:{};s.$template=[function(){return o.load(i,{view:n,locals:u.globals,params:f,notify:l.notify})||""}],r.push(h.resolve(s,u.globals,u.resolve,t).then(function(r){if(F(n.controllerProvider)||H(n.controllerProvider)){var o=e.extend({},s,u.globals);r.$$controller=a.invoke(n.controllerProvider,null,o)}else r.$$controller=n.controller;r.$$state=t,r.$$controllerAs=n.controllerAs,u[i]=r}))}),i.all(r).then(function(){return u.globals})}var f=n?r:c(t.params.$$keys(),r),d={$stateParams:f};u.resolve=h.resolve(t.resolve,d,u.resolve,t);var m=[u.resolve.then(function(t){u.globals=t})];return s&&m.push(s),i.all(m).then(p).then(function(t){return u})}var A=i.reject(new Error("transition superseded")),M=i.reject(new Error("transition prevented")),R=i.reject(new Error("transition aborted")),P=i.reject(new Error("transition failed"));return S.locals={resolve:null,globals:{$stateParams:{}}},T={params:{},current:S.self,$current:S,transition:null},T.reload=function(t){return T.transitionTo(T.current,f,{reload:t||!0,inherit:!1,notify:!0})},T.go=function(t,e,r){return T.transitionTo(t,e,G({inherit:!0,relative:T.$current},r))},T.transitionTo=function(e,r,o){r=r||{},o=G({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var s,l=T.$current,h=T.params,d=l.path,g=p(e,o.relative),y=r["#"];if(!L(g)){var v={to:e,toParams:r,options:o},_=b(v,l.self,h,o);if(_)return _;if(e=v.to,r=v.toParams,o=v.options,g=p(e,o.relative),!L(g)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(g[C])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(r=u(f,r||{},T.$current,g)),!g.params.$$validates(r))return P;r=g.params.$$values(r),e=g;var E=e.path,R=0,I=E[R],O=S.locals,D=[];if(o.reload){if(U(o.reload)||B(o.reload)){if(B(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var k=o.reload===!0?d[0]:p(o.reload);if(o.reload&&!k)throw new Error("No such reload state '"+(U(o.reload)?o.reload:o.reload.name)+"'");for(;I&&I===d[R]&&I!==k;)O=D[R]=I.locals,R++,I=E[R]}}else for(;I&&I===d[R]&&I.ownParams.$$equals(r,h);)O=D[R]=I.locals,R++,I=E[R];if(x(e,r,l,h,O,o))return y&&(r["#"]=y),T.params=r,V(T.params,f),V(c(e.params.$$keys(),f),e.locals.globals.$stateParams),o.location&&e.navigable&&e.navigable.url&&(m.push(e.navigable.url,r,{$$avoidResync:!0,replace:"replace"===o.location}),m.update(!0)),T.transition=null,i.when(T.current);if(r=c(e.params.$$keys(),r||{}),y&&(r["#"]=y),o.notify&&t.$broadcast("$stateChangeStart",e.self,r,l.self,h,o).defaultPrevented)return t.$broadcast("$stateChangeCancel",e.self,r,l.self,h),null==T.transition&&m.update(),M;for(var $=i.when(O),N=R;N<E.length;N++,I=E[N])O=D[N]=n(O),$=w(I,r,I===e,$,O,o);var F=T.transition=$.then(function(){var n,i,s;if(T.transition!==F)return A;for(n=d.length-1;n>=R;n--)s=d[n],s.self.onExit&&a.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(n=R;n<E.length;n++)i=E[n],i.locals=D[n],i.self.onEnter&&a.invoke(i.self.onEnter,i.self,i.locals.globals);return T.transition!==F?A:(T.$current=e,T.current=e.self,T.params=r,V(T.params,f),T.transition=null,o.location&&e.navigable&&m.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,r,l.self,h),m.update(!0),T.current)},function(n){return T.transition!==F?A:(T.transition=null,s=t.$broadcast("$stateChangeError",e.self,r,l.self,h,n),s.defaultPrevented||m.update(),i.reject(n))});return F},T.is=function(t,e,n){n=G({relative:T.$current},n||{});var i=p(t,n.relative);return L(i)?T.$current!==i?!1:e?l(i.params.$$values(e),f):!0:r},T.includes=function(t,e,n){if(n=G({relative:T.$current},n||{}),U(t)&&y(t)){if(!v(t))return!1;t=T.$current.name}var i=p(t,n.relative);return L(i)?L(T.$current.includes[i.name])?e?l(i.params.$$values(e),f,s(e)):!0:!1:r},T.href=function(t,e,n){n=G({lossy:!0,inherit:!0,absolute:!1,relative:T.$current},n||{});var i=p(t,n.relative);if(!L(i))return null;n.inherit&&(e=u(f,e||{},T.$current,i));var o=i&&n.lossy?i.navigable:i;return o&&o.url!==r&&null!==o.url?m.href(o.url,c(i.params.$$keys().concat("#"),e||{}),{absolute:n.absolute}):null},T.get=function(t,e){if(0===arguments.length)return d(s(E),function(t){return E[t].self});var r=p(t,e||T.$current);return r&&r.self?r.self:null},T}function x(t,e,r,n,i,o){function s(t,e,r){function n(e){return"search"!=t.params[e].location}var i=t.params.$$keys().filter(n),o=h.apply({},[t.params].concat(i)),s=new z.ParamSet(o);return s.$$equals(e,r)}return!o.reload&&t===r&&(i===r.locals||t.self.reloadOnSearch===!1&&s(r,n,e))?!0:void 0}var S,T,E={},A={},C="abstract",M={parent:function(t){if(L(t.parent)&&t.parent)return p(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?p(e[1]):S},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=n(t.parent.data,t.data)),t.data},url:function(t){var e=t.url,r={params:t.params||{}};if(U(e))return"^"==e.charAt(0)?i.compile(e.substring(1),r):(t.parent.navigable||S).url.concat(e,r);if(!e||i.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new z.ParamSet;return q(t.params||{},function(t,r){e[r]||(e[r]=new z.Param(r,null,t,"config"))}),e},params:function(t){var e=h(t.ownParams,t.ownParams.$$keys());return t.parent&&t.parent.params?G(t.parent.params.$$new(),e):new z.ParamSet},views:function(t){var e={};return q(L(t.views)?t.views:{"":t},function(r,n){n.indexOf("@")<0&&(n+="@"+t.parent.name),e[n]=r}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?G({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};S=g({name:"",url:"^",views:null,"abstract":!0}),S.navigable=null,this.decorator=_,this.state=b,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function t(t,e){return{load:function(t,r){var n,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=G(i,r),r.view&&(n=e.fromConfig(r.view,r.params,r.locals)),n}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function S(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,r){return t?e:function(t){return r(function(){t[0].scrollIntoView()},0,!1)}}]}function T(t,r,n,i){function o(){return r.has?function(t){return r.has(t)?r.get(t):null}:function(t){try{return r.get(t)}catch(e){return null}}}function s(t,r){function n(t){return 1===W&&Y>=4?!!l.enabled(t):1===W&&Y>=2?!!l.enabled():!!u}var i={enter:function(t,e,r){e.after(t),r()},leave:function(t,e){t.remove(),e()}};if(t.noanimation)return i;if(l)return{enter:function(t,r,o){n(t)?e.version.minor>2?l.enter(t,null,r).then(o):l.enter(t,null,r,o):i.enter(t,r,o)},leave:function(t,r){n(t)?e.version.minor>2?l.leave(t).then(r):l.leave(t,r):i.leave(t,r)}};if(u){var o=u&&u(r,t);return{enter:function(t,e,r){o.enter(t,null,e),r()},leave:function(t,e){o.leave(t),e()}}}return i}var a=o(),u=a("$animator"),l=a("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,o,a){return function(r,o,u){function l(){function t(){e&&e.remove(),r&&r.$destroy()}var e=h,r=f;r&&(r._willBeDestroyed=!0),p?(y.leave(p,function(){t(),h=null}),h=p):(t(),h=null),p=null,f=null}function c(s){var c,h=A(r,u,o,i),v=h&&t.$current&&t.$current.locals[h];if((s||v!==d)&&!r._willBeDestroyed){c=r.$new(),d=t.$current.locals[h],c.$emit("$viewContentLoading",h);var _=a(c,function(t){y.enter(t,o,function(){f&&f.$emit("$viewContentAnimationEnded"),(e.isDefined(g)&&!g||r.$eval(g))&&n(t)}),l()});p=_,f=c,f.$emit("$viewContentLoaded",h),f.$eval(m)}}var h,p,f,d,m=u.onload||"",g=u.autoscroll,y=s(u,r);
r.$on("$stateChangeSuccess",function(){c(!1)}),c(!0)}}};return c}function E(t,e,r,n){return{restrict:"ECA",priority:-400,compile:function(i){var o=i.html();return function(i,s,a){var u=r.$current,l=A(i,a,s,n),c=u&&u.locals[l];if(c){s.data("$uiView",{name:l,state:c.$$state}),s.html(c.$template?c.$template:o);var h=t(s.contents());if(c.$$controller){c.$scope=i,c.$element=s;var p=e(c.$$controller,c);c.$$controllerAs&&(i[c.$$controllerAs]=p),s.data("$ngControllerController",p),s.children().data("$ngControllerController",p)}h(i)}}}}}function A(t,e,r,n){var i=n(e.uiView||e.name||"")(t),o=r.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function C(t,e){var r,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t=e+"("+n[1]+")"),r=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+t+"'");return{state:r[1],paramExpr:r[3]||null}}function M(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function R(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function P(t,e,r,n,i){return function(o){var s=o.which||o.button,a=i();if(!(s>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var u=r(function(){e.go(a.state,a.params,a.options)});o.preventDefault();var l=n.isAnchor&&!a.href?1:0;o.preventDefault=function(){l--<=0&&r.cancel(u)}}}}function I(t,e){return{relative:M(t)||e.$current,inherit:!0}}function O(t,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,s){var a=C(o.uiSref,t.current.name),u={state:a.state,href:null,params:null},l=R(i),c=s[1]||s[0];u.options=G(I(i,t),o.uiSrefOpts?n.$eval(o.uiSrefOpts):{});var h=function(r){r&&(u.params=e.copy(r)),u.href=t.href(a.state,u.params,u.options),c&&c.$$addStateInfo(a.state,u.params),null!==u.href&&o.$set(l.attr,u.href)};a.paramExpr&&(n.$watch(a.paramExpr,function(t){t!==u.params&&h(t)},!0),u.params=e.copy(n.$eval(a.paramExpr))),h(),l.clickable&&i.bind("click",P(i,t,r,l,function(){return u}))}}}function D(t,e){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,n,i,o){function s(e){h.state=e[0],h.params=e[1],h.options=e[2],h.href=t.href(h.state,h.params,h.options),u&&u.$$addStateInfo(h.state,h.params),h.href&&i.$set(a.attr,h.href)}var a=R(n),u=o[1]||o[0],l=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],c="["+l.map(function(t){return t||"null"}).join(", ")+"]",h={state:null,params:null,options:null,href:null};r.$watch(c,s,!0),s(r.$eval(c)),a.clickable&&n.bind("click",P(n,t,e,a,function(){return h}))}}}function k(t,e,r){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(e,n,i,o){function s(e,r,i){var o=t.get(e,M(n)),s=a(e,r);m.push({state:o||{name:e},params:r,hash:s}),g[s]=i}function a(t,r){if(!U(t))throw new Error("state should be a string");return B(r)?t+j(r):(r=e.$eval(r),B(r)?t+j(r):t)}function u(){for(var t=0;t<m.length;t++)h(m[t].state,m[t].params)?l(n,g[m[t].hash]):c(n,g[m[t].hash]),p(m[t].state,m[t].params)?l(n,f):c(n,f)}function l(t,e){o(function(){t.addClass(e)})}function c(t,e){t.removeClass(e)}function h(e,r){return t.includes(e.name,r)}function p(e,r){return t.is(e.name,r)}var f,d,m=[],g={};f=r(i.uiSrefActiveEq||"",!1)(e);try{d=e.$eval(i.uiSrefActive)}catch(y){}d=d||r(i.uiSrefActive||"",!1)(e),B(d)&&q(d,function(r,n){if(U(r)){var i=C(r,t.current.name);s(i.state,e.$eval(i.paramExpr),n)}}),this.$$addStateInfo=function(t,e){B(d)&&m.length>0||(s(t,e,d),u())},e.$on("$stateChangeSuccess",u),u()}]}}function $(t){var e=function(e,r){return t.is(e,r)};return e.$stateful=!0,e}function N(t){var e=function(e,r,n){return t.includes(e,r,n)};return e.$stateful=!0,e}var L=e.isDefined,F=e.isFunction,U=e.isString,B=e.isObject,H=e.isArray,q=e.forEach,G=e.extend,V=e.copy,j=e.toJson;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),m.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",m),g.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",g);var z;y.prototype.concat=function(t,e){var r={caseInsensitive:z.caseInsensitive(),strict:z.strictMode(),squash:z.defaultSquashPolicy()};return new y(this.sourcePath+t+this.sourceSearch,G(r,e),this)},y.prototype.toString=function(){return this.source},y.prototype.exec=function(t,e){function r(t){function e(t){return t.split("").reverse().join("")}function r(t){return t.replace(/\\-/g,"-")}var n=e(t).split(/-(?!\\)/),i=d(n,e);return d(i,r).reverse()}var n=this.regexp.exec(t);if(!n)return null;e=e||{};var i,o,s,a=this.parameters(),u=a.length,l=this.segments.length-1,c={};if(l!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var h,p;for(i=0;l>i;i++){for(s=a[i],h=this.params[s],p=n[i+1],o=0;o<h.replace.length;o++)h.replace[o].from===p&&(p=h.replace[o].to);p&&h.array===!0&&(p=r(p)),L(p)&&(p=h.type.decode(p)),c[s]=h.value(p)}for(;u>i;i++){for(s=a[i],c[s]=this.params[s].value(e[s]),h=this.params[s],p=e[s],o=0;o<h.replace.length;o++)h.replace[o].from===p&&(p=h.replace[o].to);L(p)&&(p=h.type.decode(p)),c[s]=h.value(p)}return c},y.prototype.parameters=function(t){return L(t)?this.params[t]||null:this.$$paramNames},y.prototype.validates=function(t){return this.params.$$validates(t)},y.prototype.format=function(t){function e(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}t=t||{};var r=this.segments,n=this.parameters(),i=this.params;if(!this.validates(t))return null;var o,s=!1,a=r.length-1,u=n.length,l=r[0];for(o=0;u>o;o++){var c=a>o,h=n[o],p=i[h],f=p.value(t[h]),m=p.isOptional&&p.type.equals(p.value(),f),g=m?p.squash:!1,y=p.type.encode(f);if(c){var v=r[o+1],_=o+1===a;if(g===!1)null!=y&&(l+=H(y)?d(y,e).join("-"):encodeURIComponent(y)),l+=v;else if(g===!0){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=v.match(b)[1]}else U(g)&&(l+=g+v);_&&p.squash===!0&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==y||m&&g!==!1)continue;if(H(y)||(y=[y]),0===y.length)continue;y=d(y,encodeURIComponent).join("&"+h+"="),l+=(s?"&":"?")+(h+"="+y),s=!0}}return l},v.prototype.is=function(t,e){return!0},v.prototype.encode=function(t,e){return t},v.prototype.decode=function(t,e){return t},v.prototype.equals=function(t,e){return t==e},v.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},v.prototype.pattern=/.*/,v.prototype.toString=function(){return"{Type:"+this.name+"}"},v.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},v.prototype.$asArray=function(t,e){function n(t,e){function n(t,e){return function(){return t[e].apply(t,arguments)}}function i(t){return H(t)?t:L(t)?[t]:[]}function o(t){switch(t.length){case 0:return r;case 1:return"auto"===e?t[0]:t;default:return t}}function s(t){return!t}function a(t,e){return function(r){if(H(r)&&0===r.length)return r;r=i(r);var n=d(r,t);return e===!0?0===f(n,s).length:o(n)}}function u(t){return function(e,r){var n=i(e),o=i(r);if(n.length!==o.length)return!1;for(var s=0;s<n.length;s++)if(!t(n[s],o[s]))return!1;return!0}}this.encode=a(n(t,"encode")),this.decode=a(n(t,"decode")),this.is=a(n(t,"is"),!0),this.equals=u(n(t,"equals")),this.pattern=t.pattern,this.$normalize=a(n(t,"$normalize")),this.name=t.name,this.$arrayMode=e}if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new n(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",_),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),b.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",b),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",w),x.$inject=[],e.module("ui.router.state").provider("$view",x),e.module("ui.router.state").provider("$uiViewScroll",S);var W=e.version.major,Y=e.version.minor;T.$inject=["$state","$injector","$uiViewScroll","$interpolate"],E.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",T),e.module("ui.router.state").directive("uiView",E),O.$inject=["$state","$timeout"],D.$inject=["$state","$timeout"],k.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",O).directive("uiSrefActive",k).directive("uiSrefActiveEq",k).directive("uiState",D),$.$inject=["$state"],N.$inject=["$state"],e.module("ui.router.state").filter("isState",$).filter("includedByState",N)}(window,window.angular)},{}],23:[function(t,e,r){angular.module("youtube-embed",["ng"]).service("youtubeEmbedUtils",["$window","$rootScope",function(t,e){function r(t,e){return t.indexOf(e)>-1}function n(){e.$apply(function(){i.ready=!0})}var i={},o=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,s=/t=(\d+)[ms]?(\d+)?s?/;if(i.getIdFromURL=function(t){var e=t.replace(o,"$1");if(r(e,";")){var n=e.split(";");if(r(n[1],"%")){var i=decodeURIComponent(e.split(";")[1]);e=("http://youtube.com"+i).replace(o,"$1")}else e=n[0]}else r(e,"#")&&(e=e.split("#")[0]);return e},i.getTimeFromURL=function(t){t=t||"";var e=t.match(s);if(!e)return 0;var n=e[0],i=e[1],o=e[2];return"undefined"!=typeof o?(o=parseInt(o,10),i=parseInt(i,10)):r(n,"m")?(i=parseInt(i,10),o=0):(o=parseInt(i,10),i=0),o+60*i},i.ready=!1,"undefined"==typeof YT){t.onYouTubeIframeAPIReady=n;var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(a,u)}else YT.loaded?i.ready=!0:YT.ready(n);return i}]).directive("youtubeVideo",["youtubeEmbedUtils",function(t){var e=1,r={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},n="youtube.player.";return{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(i,o,s){function a(){var t=Array.prototype.slice.call(arguments);i.$apply(function(){i.$emit.apply(i,t)})}function u(t){var e=r[t.data];"undefined"!=typeof e&&a(n+e,i.player,t),i.$apply(function(){i.player.currentState=e})}function l(t){a(n+"ready",i.player,t)}function c(t){a(n+"error",i.player,t)}function h(){var t=angular.copy(i.playerVars);t.start=t.start||i.urlStartTime;var e=new YT.Player(f,{height:i.playerHeight,width:i.playerWidth,videoId:i.videoId,playerVars:t,events:{onReady:l,onStateChange:u,onError:c}});return e.id=f,e}function p(){(i.videoId||i.playerVars.list)&&(i.player&&"function"==typeof i.player.destroy&&i.player.destroy(),i.player=h())}i.utils=t;var f=s.playerId||o[0].id||"unique-youtube-embed-id-"+e++;o[0].id=f,i.playerHeight=i.playerHeight||390,i.playerWidth=i.playerWidth||640,i.playerVars=i.playerVars||{};var d=i.$watch(function(){return i.utils.ready&&("undefined"!=typeof i.videoUrl||"undefined"!=typeof i.videoId||"undefined"!=typeof i.playerVars.list)},function(t){t&&(d(),"undefined"!=typeof i.videoUrl?i.$watch("videoUrl",function(t){i.videoId=i.utils.getIdFromURL(t),i.urlStartTime=i.utils.getTimeFromURL(t),p()}):"undefined"!=typeof i.videoId?i.$watch("videoId",function(){i.urlStartTime=null,p()}):i.$watch("playerVars.list",function(){i.urlStartTime=null,p()}))});i.$watchCollection(["playerHeight","playerWidth"],function(){i.player&&i.player.setSize(i.playerWidth,i.playerHeight)}),i.$on("$destroy",function(){i.player&&i.player.destroy()})}}}])},{}],24:[function(t,e,r){!function(t){"use strict";function e(t,e){return e=e||Error,function(){var r,n,i=2,o=arguments,s=o[0],a="["+(t?t+":":"")+s+"] ",u=o[1];for(a+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),r=e+i;return r<o.length?vt(o[r]):t}),a+="\nhttp://errors.angularjs.org/1.5.5/"+(t?t+"/":"")+s,n=i,r="?";n<o.length;n++,r="&")a+=r+"p"+(n-i)+"="+encodeURIComponent(vt(o[n]));return new e(a)}}function r(t){if(null==t||A(t))return!1;if(zn(t)||w(t)||$n&&t instanceof $n)return!0;var e="length"in Object(t)&&t.length;return x(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function n(t,e,i){var o,s;if(t)if(T(t))for(o in t)"prototype"==o||"length"==o||"name"==o||t.hasOwnProperty&&!t.hasOwnProperty(o)||e.call(i,t[o],o,t);else if(zn(t)||r(t)){var a="object"!=typeof t;for(o=0,s=t.length;s>o;o++)(a||o in t)&&e.call(i,t[o],o,t)}else if(t.forEach&&t.forEach!==n)t.forEach(e,i,t);else if(b(t))for(o in t)e.call(i,t[o],o,t);else if("function"==typeof t.hasOwnProperty)for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t);else for(o in t)Rn.call(t,o)&&e.call(i,t[o],o,t);return t}function i(t,e,r){for(var n=Object.keys(t).sort(),i=0;i<n.length;i++)e.call(r,t[n[i]],n[i]);return n}function o(t){return function(e,r){t(r,e)}}function s(){return++jn}function a(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function u(t,e,r){for(var n=t.$$hashKey,i=0,o=e.length;o>i;++i){var s=e[i];if(_(s)||T(s))for(var l=Object.keys(s),c=0,h=l.length;h>c;c++){var p=l[c],f=s[p];r&&_(f)?S(f)?t[p]=new Date(f.valueOf()):E(f)?t[p]=new RegExp(f):f.nodeName?t[p]=f.cloneNode(!0):$(f)?t[p]=f.clone():(_(t[p])||(t[p]=zn(f)?[]:{}),u(t[p],[f],!0)):t[p]=f}}return a(t,n),t}function l(t){return u(t,Fn.call(arguments,1),!1)}function c(t){return u(t,Fn.call(arguments,1),!0)}function h(t){return parseInt(t,10)}function p(t,e){return l(Object.create(t),e)}function f(){}function d(t){return t}function m(t){return function(){return t}}function g(t){return T(t.toString)&&t.toString!==Hn}function y(t){return"undefined"==typeof t}function v(t){return"undefined"!=typeof t}function _(t){return null!==t&&"object"==typeof t}function b(t){return null!==t&&"object"==typeof t&&!qn(t)}function w(t){return"string"==typeof t}function x(t){return"number"==typeof t}function S(t){return"[object Date]"===Hn.call(t)}function T(t){return"function"==typeof t}function E(t){return"[object RegExp]"===Hn.call(t)}function A(t){return t&&t.window===t}function C(t){return t&&t.$evalAsync&&t.$watch}function M(t){return"[object File]"===Hn.call(t)}function R(t){return"[object FormData]"===Hn.call(t)}function P(t){return"[object Blob]"===Hn.call(t)}function I(t){return"boolean"==typeof t}function O(t){return t&&T(t.then)}function D(t){return t&&x(t.length)&&Wn.test(Hn.call(t))}function k(t){return"[object ArrayBuffer]"===Hn.call(t)}function $(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function N(t){var e,r={},n=t.split(",");for(e=0;e<n.length;e++)r[n[e]]=!0;return r}function L(t){return Pn(t.nodeName||t[0]&&t[0].nodeName)}function F(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),r}function U(t,e){function r(t,e){var r,n=e.$$hashKey;if(zn(t))for(var o=0,s=t.length;s>o;o++)e.push(i(t[o]));else if(b(t))for(r in t)e[r]=i(t[r]);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=i(t[r]));else for(r in t)Rn.call(t,r)&&(e[r]=i(t[r]));return a(e,n),e}function i(t){if(!_(t))return t;var e=s.indexOf(t);if(-1!==e)return u[e];if(A(t)||C(t))throw Gn("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=o(t);return void 0===i&&(i=zn(t)?[]:Object.create(qn(t)),n=!0),s.push(t),u.push(i),n?r(t,i):i}function o(t){switch(Hn.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(i(t.buffer));case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var r=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return r.lastIndex=t.lastIndex,r;case"[object Blob]":return new t.constructor([t],{type:t.type})}return T(t.cloneNode)?t.cloneNode(!0):void 0}var s=[],u=[];if(e){if(D(e)||k(e))throw Gn("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw Gn("cpi","Can't copy! Source and destination are identical.");return zn(e)?e.length=0:n(e,function(t,r){"$$hashKey"!==r&&delete e[r]}),s.push(t),u.push(e),r(t,e)}return i(t)}function B(t,e){if(zn(t)){e=e||[];for(var r=0,n=t.length;n>r;r++)e[r]=t[r]}else if(_(t)){e=e||{};for(var i in t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i])}return e||t}function H(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r,n,i,o=typeof t,s=typeof e;if(o==s&&"object"==o){if(!zn(t)){if(S(t))return S(e)?H(t.getTime(),e.getTime()):!1;if(E(t))return E(e)?t.toString()==e.toString():!1;if(C(t)||C(e)||A(t)||A(e)||zn(e)||S(e)||E(e))return!1;i=mt();for(n in t)if("$"!==n.charAt(0)&&!T(t[n])){if(!H(t[n],e[n]))return!1;i[n]=!0}for(n in e)if(!(n in i)&&"$"!==n.charAt(0)&&v(e[n])&&!T(e[n]))return!1;return!0}if(!zn(e))return!1;if((r=t.length)==e.length){for(n=0;r>n;n++)if(!H(t[n],e[n]))return!1;return!0}}return!1}function q(t,e,r){return t.concat(Fn.call(e,r))}function G(t,e){return Fn.call(t,e||0)}function V(t,e){var r=arguments.length>2?G(arguments,2):[];return!T(e)||e instanceof RegExp?e:r.length?function(){return arguments.length?e.apply(t,q(r,arguments,0)):e.apply(t,r)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function j(e,r){var n=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:A(r)?n="$WINDOW":r&&t.document===r?n="$DOCUMENT":C(r)&&(n="$SCOPE"),n}function z(t,e){return y(t)?void 0:(x(e)||(e=e?2:null),JSON.stringify(t,j,e))}function W(t){return w(t)?JSON.parse(t):t}function Y(t,e){t=t.replace(Qn,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(r)?e:r}function X(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function K(t,e,r){r=r?-1:1;var n=t.getTimezoneOffset(),i=Y(e,n);return X(t,r*(i-n))}function Z(t){t=$n(t).clone();try{t.empty()}catch(e){}var r=$n("<div>").append(t).html();try{return t[0].nodeType===ii?Pn(r):r.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Pn(e)})}catch(e){return Pn(r)}}function Q(t){try{return decodeURIComponent(t)}catch(e){}}function J(t){var e={};return n((t||"").split("&"),function(t){var r,n,i;t&&(n=t=t.replace(/\+/g,"%20"),r=t.indexOf("="),-1!==r&&(n=t.substring(0,r),i=t.substring(r+1)),n=Q(n),v(n)&&(i=v(i)?Q(i):!0,Rn.call(e,n)?zn(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i))}),e}function tt(t){var e=[];return n(t,function(t,r){zn(t)?n(t,function(t){e.push(rt(r,!0)+(t===!0?"":"="+rt(t,!0)))}):e.push(rt(r,!0)+(t===!0?"":"="+rt(t,!0)))}),e.length?e.join("&"):""}function et(t){return rt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function rt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function nt(t,e){var r,n,i=Jn.length;for(n=0;i>n;++n)if(r=Jn[n]+e,w(r=t.getAttribute(r)))return r;return null}function it(t,e){var r,i,o={};n(Jn,function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,i=t.getAttribute(n))}),n(Jn,function(e){var n,o=e+"app";!r&&(n=t.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r&&(o.strictDi=null!==nt(r,"strict-di"),e(r,i?[i]:[],o))}function ot(e,r,i){_(i)||(i={});var o={strictDi:!1};i=l(o,i);var s=function(){if(e=$n(e),e.injector()){var n=e[0]===t.document?"document":Z(e);throw Gn("btstrpd","App already bootstrapped with this element '{0}'",n.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var o=re(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,r,n){t.$apply(function(){e.data("$injector",n),r(e)(t)})}]),o},a=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&a.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!u.test(t.name)?s():(t.name=t.name.replace(u,""),Vn.resumeBootstrap=function(t){return n(t,function(t){r.push(t)}),s()},void(T(Vn.resumeDeferredBootstrap)&&Vn.resumeDeferredBootstrap()))}function st(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function at(t){var e=Vn.element(t).injector();if(!e)throw Gn("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ut(t,e){return e=e||"_",t.replace(ti,function(t,r){return(r?e:"")+t.toLowerCase()})}function lt(){var e;if(!ei){var r=Zn();Nn=y(r)?t.jQuery:r?t[r]:void 0,Nn&&Nn.fn.on?($n=Nn,l(Nn.fn,{scope:Si.scope,isolateScope:Si.isolateScope,controller:Si.controller,injector:Si.injector,inheritedData:Si.inheritedData}),e=Nn.cleanData,Nn.cleanData=function(t){for(var r,n,i=0;null!=(n=t[i]);i++)r=Nn._data(n,"events"),r&&r.$destroy&&Nn(n).triggerHandler("$destroy");e(t)}):$n=Rt,Vn.element=$n,ei=!0}}function ct(t,e,r){if(!t)throw Gn("areq","Argument '{0}' is {1}",e||"?",r||"required");return t}function ht(t,e,r){return r&&zn(t)&&(t=t[t.length-1]),ct(T(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function pt(t,e){if("hasOwnProperty"===t)throw Gn("badname","hasOwnProperty is not a valid {0} name",e)}function ft(t,e,r){if(!e)return t;for(var n,i=e.split("."),o=t,s=i.length,a=0;s>a;a++)n=i[a],t&&(t=(o=t)[n]);return!r&&T(t)?V(o,t):t}function dt(t){for(var e,r=t[0],n=t[t.length-1],i=1;r!==n&&(r=r.nextSibling);i++)(e||t[i]!==r)&&(e||(e=$n(Fn.call(t,0,i))),e.push(r));return e||t}function mt(){return Object.create(null)}function gt(t){function r(t,e,r){return t[e]||(t[e]=r())}var n=e("$injector"),i=e("ng"),o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||e,r(o,"module",function(){var t={};return function(e,o,s){var a=function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name",e)};return a(e,"module"),o&&t.hasOwnProperty(e)&&(t[e]=null),r(t,e,function(){function t(t,e,r,n){return n||(n=i),function(){return n[r||"push"]([t,e,arguments]),c}}function r(t,r){return function(n,o){return o&&T(o)&&(o.$$moduleName=e),i.push([t,r,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var i=[],a=[],u=[],l=t("$injector","invoke","push",a),c={_invokeQueue:i,_configBlocks:a,_runBlocks:u,requires:o,name:e,provider:r("$provide","provider"),factory:r("$provide","factory"),service:r("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:r("$provide","decorator"),animation:r("$animateProvider","register"),filter:r("$filterProvider","register"),controller:r("$controllerProvider","register"),directive:r("$compileProvider","directive"),component:r("$compileProvider","component"),config:l,run:function(t){return u.push(t),this}};return s&&l(s),c})}})}function yt(t){var e=[];return JSON.stringify(t,function(t,r){if(r=j(t,r),_(r)){if(e.indexOf(r)>=0)return"...";e.push(r)}return r})}function vt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):y(t)?"undefined":"string"!=typeof t?yt(t):t}function _t(r){l(r,{bootstrap:ot,copy:U,extend:l,merge:c,equals:H,element:$n,forEach:n,injector:re,noop:f,bind:V,toJson:z,fromJson:W,identity:d,isUndefined:y,isDefined:v,isString:w,isFunction:T,isObject:_,isNumber:x,isElement:$,isArray:zn,version:ui,isDate:S,lowercase:Pn,uppercase:In,callbacks:{counter:0},getTestability:at,$$minErr:e,$$csp:Kn,reloadWithDebugInfo:st}),(Ln=gt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:xr}),t.provider("$compile",fe).directive({a:Io,input:Ko,textarea:Ko,form:No,script:js,select:Ys,style:Ks,option:Xs,ngBind:Jo,ngBindHtml:es,ngBindTemplate:ts,ngClass:ns,ngClassEven:os,ngClassOdd:is,ngCloak:ss,ngController:as,ngForm:Lo,ngHide:Fs,ngIf:cs,ngInclude:hs,ngInit:fs,ngNonBindable:Rs,ngPluralize:Ds,ngRepeat:ks,ngShow:Ls,ngStyle:Us,ngSwitch:Bs,ngSwitchWhen:Hs,ngSwitchDefault:qs,ngOptions:Os,ngTransclude:Vs,ngModel:As,ngList:ds,ngChange:rs,pattern:Qs,ngPattern:Qs,required:Zs,ngRequired:Zs,minlength:ta,ngMinlength:ta,maxlength:Js,ngMaxlength:Js,ngValue:Qo,ngModelOptions:Ms}).directive({ngInclude:ps}).directive(Oo).directive(us),t.provider({$anchorScroll:ne,$animate:Ui,$animateCss:qi,$$animateJs:Li,$$animateQueue:Fi,$$AnimateRunner:Hi,$$animateAsyncRun:Bi,$browser:le,$cacheFactory:ce,$controller:_e,$document:be,$exceptionHandler:we,$filter:Nr,$$forceReflow:Yi,$interpolate:$e,$interval:Ne,$http:Ie,$httpParamSerializer:Se,$httpParamSerializerJQLike:Te,$httpBackend:De,$xhrFactory:Oe,$location:Ke,$log:Ze,$parse:gr,$rootScope:wr,$q:yr,$$q:vr,$sce:Ar,$sceDelegate:Er,$sniffer:Cr,$templateCache:he,$templateRequest:Mr,$$testability:Rr,$timeout:Pr,$window:Dr,$$rAF:br,$$jqLite:Kt,$$HashMap:Ci,$$cookieReader:$r})}])}function bt(){return++ci}function wt(t){return t.replace(fi,function(t,e,r,n){return n?r.toUpperCase():r}).replace(di,"Moz$1")}function xt(t){return!vi.test(t)}function St(t){var e=t.nodeType;return e===ri||!e||e===si}function Tt(t){for(var e in li[t.ng339])return!0;return!1}function Et(t){for(var e=0,r=t.length;r>e;e++)Dt(t[e])}function At(t,e){var r,i,o,s,a=e.createDocumentFragment(),u=[];if(xt(t))u.push(e.createTextNode(t));else{for(r=r||a.appendChild(e.createElement("div")),i=(_i.exec(t)||["",""])[1].toLowerCase(),o=wi[i]||wi._default,r.innerHTML=o[1]+t.replace(bi,"<$1></$2>")+o[2],s=o[0];s--;)r=r.lastChild;u=q(u,r.childNodes),r=a.firstChild,r.textContent=""}return a.textContent="",a.innerHTML="",n(u,function(t){a.appendChild(t)}),a}function Ct(e,r){r=r||t.document;var n;return(n=yi.exec(e))?[r.createElement(n[1])]:(n=At(e,r))?n.childNodes:[]}function Mt(t,e){var r=t.parentNode;r&&r.replaceChild(e,t),e.appendChild(t)}function Rt(t){if(t instanceof Rt)return t;var e;if(w(t)&&(t=Yn(t),e=!0),!(this instanceof Rt)){if(e&&"<"!=t.charAt(0))throw gi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Rt(t)}e?Ut(this,Ct(t)):Ut(this,t)}function Pt(t){return t.cloneNode(!0)}function It(t,e){if(e||Dt(t),t.querySelectorAll)for(var r=t.querySelectorAll("*"),n=0,i=r.length;i>n;n++)Dt(r[n])}function Ot(t,e,r,i){if(v(i))throw gi("offargs","jqLite#off() does not support the `selector` argument");var o=kt(t),s=o&&o.events,a=o&&o.handle;if(a)if(e){var u=function(e){var n=s[e];v(r)&&F(n||[],r),v(r)&&n&&n.length>0||(pi(t,e,a),delete s[e])};n(e.split(" "),function(t){u(t),mi[t]&&u(mi[t])})}else for(e in s)"$destroy"!==e&&pi(t,e,a),delete s[e]}function Dt(t,e){var r=t.ng339,n=r&&li[r];if(n){if(e)return void delete n.data[e];n.handle&&(n.events.$destroy&&n.handle({},"$destroy"),Ot(t)),delete li[r],t.ng339=void 0}}function kt(t,e){var r=t.ng339,n=r&&li[r];return e&&!n&&(t.ng339=r=bt(),n=li[r]={events:{},data:{},handle:void 0}),n}function $t(t,e,r){if(St(t)){var n=v(r),i=!n&&e&&!_(e),o=!e,s=kt(t,!i),a=s&&s.data;if(n)a[e]=r;else{if(o)return a;if(i)return a&&a[e];l(a,e)}}}function Nt(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function Lt(t,e){e&&t.setAttribute&&n(e.split(" "),function(e){t.setAttribute("class",Yn((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Yn(e)+" "," ")))})}function Ft(t,e){if(e&&t.setAttribute){var r=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");n(e.split(" "),function(t){t=Yn(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),t.setAttribute("class",Yn(r))}}function Ut(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var r=e.length;if("number"==typeof r&&e.window!==e){if(r)for(var n=0;r>n;n++)t[t.length++]=e[n]}else t[t.length++]=e}}function Bt(t,e){return Ht(t,"$"+(e||"ngController")+"Controller")}function Ht(t,e,r){t.nodeType==si&&(t=t.documentElement);for(var n=zn(e)?e:[e];t;){for(var i=0,o=n.length;o>i;i++)if(v(r=$n.data(t,n[i])))return r;t=t.parentNode||t.nodeType===ai&&t.host}}function qt(t){for(It(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Gt(t,e){e||It(t);var r=t.parentNode;r&&r.removeChild(t)}function Vt(e,r){r=r||t,"complete"===r.document.readyState?r.setTimeout(e):$n(r).on("load",e)}function jt(t,e){var r=Ti[e.toLowerCase()];return r&&Ei[L(t)]&&r}function zt(t){return Ai[t]}function Wt(t,e){var r=function(r,n){r.isDefaultPrevented=function(){return r.defaultPrevented};var i=e[n||r.type],o=i?i.length:0;if(o){if(y(r.immediatePropagationStopped)){var s=r.stopImmediatePropagation;r.stopImmediatePropagation=function(){r.immediatePropagationStopped=!0,r.stopPropagation&&r.stopPropagation(),s&&s.call(r)}}r.isImmediatePropagationStopped=function(){return r.immediatePropagationStopped===!0};var a=i.specialHandlerWrapper||Yt;o>1&&(i=B(i));for(var u=0;o>u;u++)r.isImmediatePropagationStopped()||a(t,r,i[u])}};return r.elem=t,r}function Yt(t,e,r){r.call(t,e)}function Xt(t,e,r){var n=e.relatedTarget;n&&(n===t||xi.call(t,n))||r.call(t,e)}function Kt(){this.$get=function(){return l(Rt,{hasClass:function(t,e){return t.attr&&(t=t[0]),Nt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Ft(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Lt(t,e)}})}}function Zt(t,e){var r=t&&t.$$hashKey;if(r)return"function"==typeof r&&(r=t.$$hashKey()),r;var n=typeof t;return r="function"==n||"object"==n&&null!==t?t.$$hashKey=n+":"+(e||s)():n+":"+t}function Qt(t,e){if(e){var r=0;this.nextUid=function(){return++r}}n(t,this.put,this)}function Jt(t){var e=Function.prototype.toString.call(t).replace(Oi,""),r=e.match(Mi)||e.match(Ri);return r}function te(t){var e=Jt(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ee(t,e,r){var i,o,s;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw w(r)&&r||(r=t.name||te(t)),Di("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",r);o=Jt(t),n(o[1].split(Pi),function(t){t.replace(Ii,function(t,e,r){i.push(r)})})}t.$inject=i}}else zn(t)?(s=t.length-1,ht(t[s],"fn"),i=t.slice(0,s)):ht(t,"fn",!0);return i}function re(t,e){function r(t){return function(e,r){return _(e)?void n(e,o(t)):t(e,r)}}function i(t,e){if(pt(t,"service"),(T(e)||zn(e))&&(e=S.instantiate(e)),!e.$get)throw Di("pget","Provider '{0}' must define $get factory method.",t);return x[t+g]=e}function s(t,e){return function(){var r=C.invoke(e,this);if(y(r))throw Di("undef","Provider '{0}' must return a value from $get factory method.",t);return r}}function a(t,e,r){return i(t,{$get:r!==!1?s(t,e):e})}function u(t,e){return a(t,["$injector",function(t){return t.instantiate(e)}])}function l(t,e){return a(t,m(e),!1)}function c(t,e){pt(t,"constant"),x[t]=e,E[t]=e}function h(t,e){var r=S.get(t+g),n=r.$get;r.$get=function(){var t=C.invoke(n,r);return C.invoke(e,null,{$delegate:t})}}function p(t){ct(y(t)||zn(t),"modulesToLoad","not an array");var e,r=[];return n(t,function(t){function n(t){var e,r;for(e=0,r=t.length;r>e;e++){var n=t[e],i=S.get(n[0]);i[n[1]].apply(i,n[2])}}if(!b.get(t)){b.put(t,!0);try{w(t)?(e=Ln(t),r=r.concat(p(e.requires)).concat(e._runBlocks),n(e._invokeQueue),n(e._configBlocks)):T(t)?r.push(S.invoke(t)):zn(t)?r.push(S.invoke(t)):ht(t,"module")}catch(i){throw zn(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Di("modulerr","Failed to instantiate module {0} due to:\n{1}",t,i.stack||i.message||i)}}}),r}function f(t,r){function n(e,n){if(t.hasOwnProperty(e)){if(t[e]===d)throw Di("cdep","Circular dependency found: {0}",e+" <- "+v.join(" <- "));return t[e]}try{
return v.unshift(e),t[e]=d,t[e]=r(e,n)}catch(i){throw t[e]===d&&delete t[e],i}finally{v.shift()}}function i(t,r,i){for(var o=[],s=re.$$annotate(t,e,i),a=0,u=s.length;u>a;a++){var l=s[a];if("string"!=typeof l)throw Di("itkn","Incorrect injection token! Expected service name as string, got {0}",l);o.push(r&&r.hasOwnProperty(l)?r[l]:n(l,i))}return o}function o(t){return 11>=kn?!1:"function"==typeof t&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(t))}function s(t,e,r,n){"string"==typeof r&&(n=r,r=null);var s=i(t,r,n);return zn(t)&&(t=t[t.length-1]),o(t)?(s.unshift(null),new(Function.prototype.bind.apply(t,s))):t.apply(e,s)}function a(t,e,r){var n=zn(t)?t[t.length-1]:t,o=i(t,e,r);return o.unshift(null),new(Function.prototype.bind.apply(n,o))}return{invoke:s,instantiate:a,get:n,annotate:re.$$annotate,has:function(e){return x.hasOwnProperty(e+g)||t.hasOwnProperty(e)}}}e=e===!0;var d={},g="Provider",v=[],b=new Qt([],!0),x={$provide:{provider:r(i),factory:r(a),service:r(u),value:r(l),constant:r(c),decorator:h}},S=x.$injector=f(x,function(t,e){throw Vn.isString(e)&&v.push(e),Di("unpr","Unknown provider: {0}",v.join(" <- "))}),E={},A=f(E,function(t,e){var r=S.get(t+g,e);return C.invoke(r.$get,r,void 0,t)}),C=A;x["$injector"+g]={$get:m(A)};var M=p(t);return C=A.get("$injector"),C.strictDi=e,n(M,function(t){t&&C.invoke(t)}),C}function ne(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,r,n){function i(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===L(t)?(e=t,!0):void 0}),e}function o(){var t=a.yOffset;if(T(t))t=t();else if($(t)){var r=t[0],n=e.getComputedStyle(r);t="fixed"!==n.position?0:r.getBoundingClientRect().bottom}else x(t)||(t=0);return t}function s(t){if(t){t.scrollIntoView();var r=o();if(r){var n=t.getBoundingClientRect().top;e.scrollBy(0,n-r)}}else e.scrollTo(0,0)}function a(t){t=w(t)?t:r.hash();var e;t?(e=u.getElementById(t))?s(e):(e=i(u.getElementsByName(t)))?s(e):"top"===t&&s(null):s(null)}var u=e.document;return t&&n.$watch(function(){return r.hash()},function(t,e){t===e&&""===t||Vt(function(){n.$evalAsync(a)})}),a}]}function ie(t,e){return t||e?t?e?(zn(t)&&(t=t.join(" ")),zn(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function oe(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.nodeType===$i)return r}}function se(t){w(t)&&(t=t.split(" "));var e=mt();return n(t,function(t){t.length&&(e[t]=!0)}),e}function ae(t){return _(t)?t:{}}function ue(t,e,r,i){function o(t){try{t.apply(null,G(arguments,1))}finally{if(v--,0===v)for(;_.length;)try{_.pop()()}catch(e){r.error(e)}}}function s(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}function a(){T=null,u(),l()}function u(){b=E(),b=y(b)?null:b,H(b,M)&&(b=M),M=b}function l(){x===c.url()&&w===b||(x=c.url(),w=b,n(A,function(t){t(c.url(),b)}))}var c=this,h=t.location,p=t.history,d=t.setTimeout,m=t.clearTimeout,g={};c.isMock=!1;var v=0,_=[];c.$$completeOutstandingRequest=o,c.$$incOutstandingRequestCount=function(){v++},c.notifyWhenNoOutstandingRequests=function(t){0===v?t():_.push(t)};var b,w,x=h.href,S=e.find("base"),T=null,E=i.history?function(){try{return p.state}catch(t){}}:f;u(),w=b,c.url=function(e,r,n){if(y(n)&&(n=null),h!==t.location&&(h=t.location),p!==t.history&&(p=t.history),e){var o=w===n;if(x===e&&(!i.history||o))return c;var a=x&&He(x)===He(e);return x=e,w=n,!i.history||a&&o?(a&&!T||(T=e),r?h.replace(e):a?h.hash=s(e):h.href=e,h.href!==e&&(T=e)):(p[r?"replaceState":"pushState"](n,"",e),u(),w=b),c}return T||h.href.replace(/%27/g,"'")},c.state=function(){return b};var A=[],C=!1,M=null;c.onUrlChange=function(e){return C||(i.history&&$n(t).on("popstate",a),$n(t).on("hashchange",a),C=!0),A.push(e),e},c.$$applicationDestroyed=function(){$n(t).off("hashchange popstate",a)},c.$$checkUrlChange=l,c.baseHref=function(){var t=S.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},c.defer=function(t,e){var r;return v++,r=d(function(){delete g[r],o(t)},e||0),g[r]=!0,r},c.defer.cancel=function(t){return g[t]?(delete g[t],m(t),o(f),!0):!1}}function le(){this.$get=["$window","$log","$sniffer","$document",function(t,e,r,n){return new ue(t,n,e,r)}]}function ce(){this.$get=function(){function t(t,n){function i(t){t!=p&&(f?f==t&&(f=t.n):f=t,o(t.n,t.p),o(t,p),p=t,p.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in r)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var s=0,a=l({},n,{id:t}),u=mt(),c=n&&n.capacity||Number.MAX_VALUE,h=mt(),p=null,f=null;return r[t]={put:function(t,e){if(!y(e)){if(c<Number.MAX_VALUE){var r=h[t]||(h[t]={key:t});i(r)}return t in u||s++,u[t]=e,s>c&&this.remove(f.key),e}},get:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;e==p&&(p=e.p),e==f&&(f=e.n),o(e.n,e.p),delete h[t]}t in u&&(delete u[t],s--)},removeAll:function(){u=mt(),s=0,h=mt(),p=f=null},destroy:function(){u=null,a=null,h=null,delete r[t]},info:function(){return l({},a,{size:s})}}}var r={};return t.info=function(){var t={};return n(r,function(e,r){t[r]=e.info()}),t},t.get=function(t){return r[t]},t}}function he(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function pe(){}function fe(e,r){function i(t,e,r){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=mt();return n(t,function(t,n){if(t in E)return void(o[n]=E[t]);var s=t.match(i);if(!s)throw Gi("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,n,t,r?"controller bindings definition":"isolate scope definition");o[n]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||n},s[4]&&(E[t]=o[n])}),o}function s(t,e){var r={isolateScope:null,bindToController:null};if(_(t.scope)&&(t.bindToController===!0?(r.bindToController=i(t.scope,e,!0),r.isolateScope={}):r.isolateScope=i(t.scope,e,!1)),_(t.bindToController)&&(r.bindToController=i(t.bindToController,e,!0)),_(r.bindToController)){var n=t.controller,o=t.controllerAs;if(!n)throw Gi("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!ve(n,o))throw Gi("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return r}function a(t){var e=t.charAt(0);if(!e||e!==Pn(e))throw Gi("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Gi("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var u={},c="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,g=/(([\w\-]+)(?:\:([^;]+))?;?)/,b=N("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,S=/^(on[a-z]+|formaction)$/,E=mt();this.directive=function R(t,r){return pt(t,"directive"),w(t)?(a(t),ct(r,"directiveFactory"),u.hasOwnProperty(t)||(u[t]=[],e.factory(t+c,["$injector","$exceptionHandler",function(e,r){var i=[];return n(u[t],function(n,o){try{var s=e.invoke(n);T(s)?s={compile:m(s)}:!s.compile&&s.link&&(s.compile=m(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",s.$$moduleName=n.$$moduleName,i.push(s)}catch(a){r(a)}}),i}])),u[t].push(r)):n(t,o(R)),this},this.component=function(t,e){function r(t){function r(e){return T(e)||zn(e)?function(r,n){return t.invoke(e,this,{$element:r,$attrs:n})}:e}var o=e.template||e.templateUrl?e.template:"",s={controller:i,controllerAs:ve(e.controller)||e.controllerAs||"$ctrl",template:r(o),templateUrl:r(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return n(e,function(t,e){"$"===e.charAt(0)&&(s[e]=t)}),s}var i=e.controller||function(){};return n(e,function(t,e){"$"===e.charAt(0)&&(r[e]=t,T(i)&&(i[e]=t))}),r.$inject=["$injector"],this.directive(t,r)},this.aHrefSanitizationWhitelist=function(t){return v(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return v(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var A=!0;this.debugInfoEnabled=function(t){return v(t)?(A=t,this):A};var M=10;this.onChangesTtl=function(t){return arguments.length?(M=t,this):M},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,r,i,o,a,m,v,E,R,P){function O(){try{if(!--_t)throw gt=void 0,Gi("infchng","{0} $onChanges() iterations reached. Aborting!\n",M);v.$apply(function(){for(var t=0,e=gt.length;e>t;++t)gt[t]();gt=void 0})}finally{_t++}}function D(t,e){if(e){var r,n,i,o=Object.keys(e);for(r=0,n=o.length;n>r;r++)i=o[r],this[i]=e[i]}else this.$attr={};this.$$element=t}function k(t,e,r){vt.innerHTML="<span "+e+">";var n=vt.firstChild.attributes,i=n[0];n.removeNamedItem(i.name),i.value=r,t.attributes.setNamedItem(i)}function $(t,e){try{t.addClass(e)}catch(r){}}function N(e,r,n,i,o){e instanceof $n||(e=$n(e));for(var s=/\S+/,a=0,u=e.length;u>a;a++){var l=e[a];l.nodeType===ii&&l.nodeValue.match(s)&&Mt(l,e[a]=t.document.createElement("span"))}var c=B(e,r,e,n,i,o);N.$$addScopeClass(e);var h=null;return function(t,r,n){ct(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new()),n=n||{};var i=n.parentBoundTranscludeFn,s=n.transcludeControllers,a=n.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),h||(h=U(a));var u;if(u="html"!==h?$n(st(h,$n("<div>").append(e).html())):r?Si.clone.call(e):e,s)for(var l in s)u.data("$"+l+"Controller",s[l].instance);return N.$$addScopeInfo(u,t),r&&r(u,t),c&&c(t,u,u,i),u}}function U(t){var e=t&&t[0];return e&&"foreignobject"!==L(e)&&Hn.call(e).match(/SVG/)?"svg":"html"}function B(t,e,r,n,i,o){function s(t,r,n,i){var o,s,a,u,l,c,h,p,m;if(f){var g=r.length;for(m=new Array(g),l=0;l<d.length;l+=3)h=d[l],m[h]=r[h]}else m=r;for(l=0,c=d.length;c>l;)a=m[d[l++]],o=d[l++],s=d[l++],o?(o.scope?(u=t.$new(),N.$$addScopeInfo($n(a),u)):u=t,p=o.transcludeOnThisElement?q(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?q(t,e):null,o(s,u,a,n,p)):s&&s(t,a.childNodes,void 0,i)}for(var a,u,l,c,h,p,f,d=[],m=0;m<t.length;m++)a=new D,u=V(t[m],[],a,0===m?n:void 0,i),l=u.length?Y(u,t[m],a,e,r,null,[],[],o):null,l&&l.scope&&N.$$addScopeClass(a.$$element),h=l&&l.terminal||!(c=t[m].childNodes)||!c.length?null:B(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||h)&&(d.push(m,l,h),p=!0,f=f||l),o=null;return p?s:null}function q(t,e,r){function n(n,i,o,s,a){return n||(n=t.$new(!1,a),n.$$transcluded=!0),e(n,i,{parentBoundTranscludeFn:r,transcludeControllers:o,futureParentElement:s})}var i=n.$$slots=mt();for(var o in e.$$slots)e.$$slots[o]?i[o]=q(t,e.$$slots[o],r):i[o]=null;return n}function V(t,e,r,n,i){var o,s,a=t.nodeType,u=r.$attr;switch(a){case ri:J(e,me(L(t)),"E",n,i);for(var l,c,p,f,d,m,y=t.attributes,v=0,b=y&&y.length;b>v;v++){var x=!1,S=!1;l=y[v],c=l.name,d=Yn(l.value),f=me(c),(m=Tt.test(f))&&(c=c.replace(ji,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var T=f.match(Et);T&&tt(T[1])&&(x=c,S=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),p=me(c.toLowerCase()),u[p]=c,!m&&r.hasOwnProperty(p)||(r[p]=d,jt(t,p)&&(r[p]=!0)),lt(t,e,d,p,m),J(e,p,"A",n,i,x,S)}if(s=t.className,_(s)&&(s=s.animVal),w(s)&&""!==s)for(;o=g.exec(s);)p=me(o[2]),J(e,p,"C",n,i)&&(r[p]=Yn(o[3])),s=s.substr(o.index+o[0].length);break;case ii:if(11===kn)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===ii;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);ot(e,t.nodeValue);break;case oi:try{o=h.exec(t.nodeValue),o&&(p=me(o[1]),J(e,p,"M",n,i)&&(r[p]=Yn(o[2])))}catch(E){}}return e.sort(nt),e}function j(t,e,r){var n=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Gi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,r);t.nodeType==ri&&(t.hasAttribute(e)&&i++,t.hasAttribute(r)&&i--),n.push(t),t=t.nextSibling}while(i>0)}else n.push(t);return $n(n)}function z(t,e,r){return function(n,i,o,s,a){return i=j(i[0],e,r),t(n,i,o,s,a)}}function W(t,e,r,n,i,o){var s;return t?N(e,r,n,i,o):function(){return s||(s=N(e,r,n,i,o),e=r=o=null),s.apply(this,arguments)}}function Y(t,e,r,o,s,a,u,c,h){function p(t,e,r,n){t&&(r&&(t=z(t,r,n)),t.require=d.require,t.directiveName=m,(E===d||d.$$isolateScope)&&(t=pt(t,{isolateScope:!0})),u.push(t)),e&&(r&&(e=z(e,r,n)),e.require=d.require,e.directiveName=m,(E===d||d.$$isolateScope)&&(e=pt(e,{isolateScope:!0})),c.push(e))}function f(t,i,o,s,a){function h(t,e,r,n){var i;if(C(t)||(n=r,r=e,e=t,t=void 0),I&&(i=v),r||(r=I?w.parent():w),!n)return a(t,e,i,r,F);var o=a.$$slots[n];if(o)return o(t,e,i,r,F);if(y(o))throw Gi("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,Z(w))}var p,f,d,m,g,v,b,w,M,R;e===o?(M=r,w=r.$$element):(w=$n(o),M=new D(w,r)),g=i,E?m=i.$new(!0):x&&(g=i.$parent),a&&(b=h,b.$$boundTransclude=a,b.isSlotFilled=function(t){return!!a.$$slots[t]}),S&&(v=K(w,M,b,S,m,i,E)),E&&(N.$$addScopeInfo(w,m,!0,!(A&&(A===E||A===E.$$originalDirective))),N.$$addScopeClass(w,!0),m.$$isolateBindings=E.$$isolateBindings,R=dt(i,M,m,m.$$isolateBindings,E),R.removeWatches&&m.$on("$destroy",R.removeWatches));for(var P in v){var O=S[P],k=v[P],$=O.$$bindings.bindToController;k.identifier&&$?k.bindingInfo=dt(g,M,k.instance,$,O):k.bindingInfo={};var L=k();L!==k.instance&&(k.instance=L,w.data("$"+O.name+"Controller",L),k.bindingInfo.removeWatches&&k.bindingInfo.removeWatches(),k.bindingInfo=dt(g,M,k.instance,$,O))}for(n(S,function(t,e){var r=t.require;t.bindToController&&!zn(r)&&_(r)&&l(v[e].instance,X(e,r,w,v))}),n(v,function(t){var e=t.instance;T(e.$onChanges)&&e.$onChanges(t.bindingInfo.initialChanges),T(e.$onInit)&&e.$onInit(),T(e.$onDestroy)&&g.$on("$destroy",function(){e.$onDestroy()})}),p=0,f=u.length;f>p;p++)d=u[p],ft(d,d.isolateScope?m:i,w,M,d.require&&X(d.directiveName,d.require,w,v),b);var F=i;for(E&&(E.template||null===E.templateUrl)&&(F=m),t&&t(F,o.childNodes,void 0,a),p=c.length-1;p>=0;p--)d=c[p],ft(d,d.isolateScope?m:i,w,M,d.require&&X(d.directiveName,d.require,w,v),b);n(v,function(t){var e=t.instance;T(e.$postLink)&&e.$postLink()})}h=h||{};for(var d,m,g,v,b,w=-Number.MAX_VALUE,x=h.newScopeDirective,S=h.controllerDirectives,E=h.newIsolateScopeDirective,A=h.templateDirective,M=h.nonTlbTranscludeDirective,R=!1,P=!1,I=h.hasElementTranscludeDirective,O=r.$$element=$n(e),k=a,$=o,F=!1,U=!1,B=0,H=t.length;H>B;B++){d=t[B];var q=d.$$start,Y=d.$$end;if(q&&(O=j(e,q,Y)),g=void 0,w>d.priority)break;if((b=d.scope)&&(d.templateUrl||(_(b)?(it("new/isolated scope",E||x,d,O),E=d):it("new/isolated scope",E,d,O)),x=x||d),m=d.name,!F&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var J,tt=B+1;J=t[tt++];)if(J.transclude&&!J.$$tlb||J.replace&&(J.templateUrl||J.template)){U=!0;break}F=!0}if(!d.templateUrl&&d.controller&&(b=d.controller,S=S||mt(),it("'"+m+"' controller",S[m],d,O),S[m]=d),b=d.transclude)if(R=!0,d.$$tlb||(it("transclusion",M,d,O),M=d),"element"==b)I=!0,w=d.priority,g=O,O=r.$$element=$n(N.$$createComment(m,r[m])),e=O[0],ht(s,G(g),e),g[0].$$parentNode=g[0].parentNode,$=W(U,g,o,w,k&&k.name,{nonTlbTranscludeDirective:M});else{var nt=mt();if(g=$n(Pt(e)).contents(),_(b)){g=[];var ot=mt(),at=mt();n(b,function(t,e){var r="?"===t.charAt(0);t=r?t.substring(1):t,ot[t]=e,nt[e]=null,at[e]=r}),n(O.contents(),function(t){var e=ot[me(L(t))];e?(at[e]=!0,nt[e]=nt[e]||[],nt[e].push(t)):g.push(t)}),n(at,function(t,e){if(!t)throw Gi("reqslot","Required transclusion slot `{0}` was not filled.",e)});for(var ut in nt)nt[ut]&&(nt[ut]=W(U,nt[ut],o))}O.empty(),$=W(U,g,o,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope}),$.$$slots=nt}if(d.template)if(P=!0,it("template",A,d,O),A=d,b=T(d.template)?d.template(O,r):d.template,b=St(b),d.replace){if(k=d,g=xt(b)?[]:ye(st(d.templateNamespace,Yn(b))),e=g[0],1!=g.length||e.nodeType!==ri)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");ht(s,O,e);var lt={$attr:{}},ct=V(e,[],lt),gt=t.splice(B+1,t.length-(B+1));(E||x)&&Q(ct,E,x),t=t.concat(ct).concat(gt),et(r,lt),H=t.length}else O.html(b);if(d.templateUrl)P=!0,it("template",A,d,O),A=d,d.replace&&(k=d),f=rt(t.splice(B,t.length-B),O,r,s,R&&$,u,c,{controllerDirectives:S,newScopeDirective:x!==d&&x,newIsolateScopeDirective:E,templateDirective:A,nonTlbTranscludeDirective:M}),H=t.length;else if(d.compile)try{v=d.compile(O,r,$),T(v)?p(null,v,q,Y):v&&p(v.pre,v.post,q,Y)}catch(yt){i(yt,Z(O))}d.terminal&&(f.terminal=!0,w=Math.max(w,d.priority))}return f.scope=x&&x.scope===!0,f.transcludeOnThisElement=R,f.templateOnThisElement=P,f.transclude=$,h.hasElementTranscludeDirective=I,f}function X(t,e,r,i){var o;if(w(e)){var s=e.match(x),a=e.substring(s[0].length),u=s[1]||s[3],l="?"===s[2];if("^^"===u?r=r.parent():(o=i&&i[a],o=o&&o.instance),!o){var c="$"+a+"Controller";o=u?r.inheritedData(c):r.data(c)}if(!o&&!l)throw Gi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(zn(e)){o=[];for(var h=0,p=e.length;p>h;h++)o[h]=X(t,e[h],r,i)}else _(e)&&(o={},n(e,function(e,n){o[n]=X(t,e,r,i)}));return o||null}function K(t,e,r,n,i,o,s){var a=mt();for(var u in n){var l=n[u],c={$scope:l===s||l.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:r},h=l.controller;"@"==h&&(h=e[l.name]);var p=m(h,c,!0,l.controllerAs);a[l.name]=p,t.data("$"+l.name+"Controller",p.instance)}return a}function Q(t,e,r){for(var n=0,i=t.length;i>n;n++)t[n]=p(t[n],{$$isolateScope:e,$$newScope:r})}function J(t,r,n,o,a,l,h){if(r===a)return null;var f=null;if(u.hasOwnProperty(r))for(var d,m=e.get(r+c),g=0,v=m.length;v>g;g++)try{if(d=m[g],(y(o)||o>d.priority)&&-1!=d.restrict.indexOf(n)){if(l&&(d=p(d,{$$start:l,$$end:h})),!d.$$bindings){var b=d.$$bindings=s(d,d.name);_(b.isolateScope)&&(d.$$isolateBindings=b.isolateScope)}t.push(d),f=d}}catch(w){i(w)}return f}function tt(t){if(u.hasOwnProperty(t))for(var r,n=e.get(t+c),i=0,o=n.length;o>i;i++)if(r=n[i],r.multiElement)return!0;return!1}function et(t,e){var r=e.$attr,i=t.$attr,o=t.$$element;n(t,function(n,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==n&&(n+=("style"===i?";":" ")+e[i]),t.$set(i,n,!0,r[i]))}),n(e,function(e,n){"class"==n?($(o,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==n?(o.attr("style",o.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==n.charAt(0)||t.hasOwnProperty(n)||(t[n]=e,i[n]=r[n])})}function rt(t,e,r,i,s,a,u,l){var c,h,f=[],d=e[0],m=t.shift(),g=p(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),y=T(m.templateUrl)?m.templateUrl(e,r):m.templateUrl,v=m.templateNamespace;return e.empty(),o(y).then(function(o){var p,b,w,x;if(o=St(o),m.replace){if(w=xt(o)?[]:ye(st(v,Yn(o))),p=w[0],1!=w.length||p.nodeType!==ri)throw Gi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,y);b={$attr:{}},ht(i,e,p);var S=V(p,[],b);_(m.scope)&&Q(S,!0),t=S.concat(t),et(r,b)}else p=d,e.html(o);for(t.unshift(g),c=Y(t,p,r,s,e,m,a,u,l),n(i,function(t,r){t==p&&(i[r]=e[0])}),h=B(e[0].childNodes,s);f.length;){var T=f.shift(),E=f.shift(),A=f.shift(),C=f.shift(),M=e[0];if(!T.$$destroyed){if(E!==d){var R=E.className;l.hasElementTranscludeDirective&&m.replace||(M=Pt(p)),ht(A,$n(E),M),$($n(M),R)}x=c.transcludeOnThisElement?q(T,c.transclude,C):C,c(h,T,M,i,x)}}f=null}),function(t,e,r,n,i){var o=i;e.$$destroyed||(f?f.push(e,r,n,o):(c.transcludeOnThisElement&&(o=q(e,c.transclude,i)),c(h,e,r,n,o)))}}function nt(t,e){var r=e.priority-t.priority;return 0!==r?r:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function it(t,e,r,n){function i(t){return t?" (module: "+t+")":""}if(e)throw Gi("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),r.name,i(r.$$moduleName),t,Z(n))}function ot(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&N.$$addBindingClass(e),function(t,e){var i=e.parent();r||N.$$addBindingClass(i),N.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function st(e,r){switch(e=Pn(e||"html")){case"svg":case"math":var n=t.document.createElement("div");return n.innerHTML="<"+e+">"+r+"</"+e+">",n.childNodes[0].childNodes;default:return r}}function at(t,e){if("srcdoc"==e)return E.HTML;var r=L(t);return"xlinkHref"==e||"form"==r&&"action"==e||"img"!=r&&("src"==e||"ngSrc"==e)?E.RESOURCE_URL:void 0}function lt(t,e,n,i,o){var s=at(t,i);o=b[i]||o;var a=r(n,!0,s,o);if(a){if("multiple"===i&&"select"===L(t))throw Gi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){var l=u.$$observers||(u.$$observers=mt());if(S.test(i))throw Gi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[i];c!==n&&(a=c&&r(c,!0,s,o),n=c),a&&(u[i]=a(t),(l[i]||(l[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(a,function(t,e){"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function ht(e,r,n){var i,o,s=r[0],a=r.length,u=s.parentNode;if(e)for(i=0,o=e.length;o>i;i++)if(e[i]==s){e[i++]=n;for(var l=i,c=l+a-1,h=e.length;h>l;l++,c++)h>c?e[l]=e[c]:delete e[l];e.length-=a-1,e.context===s&&(e.context=n);break}u&&u.replaceChild(n,s);var p=t.document.createDocumentFragment();for(i=0;a>i;i++)p.appendChild(r[i]);for($n.hasData(s)&&($n.data(n,$n.data(s)),$n(s).off("$destroy")),$n.cleanData(p.querySelectorAll("*")),i=1;a>i;i++)delete r[i];r[0]=n,r.length=1}function pt(t,e){return l(function(){return t.apply(null,arguments)},t,e)}function ft(t,e,r,n,o,s){try{t(e,r,n,o,s)}catch(a){i(a,Z(r))}}function dt(t,e,i,o,s){function u(e,r,n){T(i.$onChanges)&&r!==n&&(gt||(t.$$postDigest(O),gt=[]),c||(c={},gt.push(l)),c[e]&&(n=c[e].previousValue),c[e]=new de(n,r))}function l(){i.$onChanges(c),c=void 0}var c,h=[],p={};return n(o,function(n,o){var l,c,d,m,g,y=n.attrName,v=n.optional,_=n.mode;switch(_){case"@":v||Rn.call(e,y)||(i[o]=e[y]=void 0),e.$observe(y,function(t){if(w(t)||I(t)){var e=i[o];u(o,t,e),i[o]=t}}),e.$$observers[y].$$scope=t,l=e[y],w(l)?i[o]=r(l)(t):I(l)&&(i[o]=l),p[o]=new de(Vi,i[o]);break;case"=":if(!Rn.call(e,y)){if(v)break;e[y]=void 0}if(v&&!e[y])break;c=a(e[y]),m=c.literal?H:function(t,e){return t===e||t!==t&&e!==e},d=c.assign||function(){throw l=i[o]=c(t),Gi("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[y],y,s.name)},l=i[o]=c(t);var b=function(e){return m(e,i[o])||(m(e,l)?d(t,e=i[o]):i[o]=e),l=e};b.$stateful=!0,g=n.collection?t.$watchCollection(e[y],b):t.$watch(a(e[y],b),null,c.literal),h.push(g);break;case"<":if(!Rn.call(e,y)){if(v)break;e[y]=void 0}if(v&&!e[y])break;c=a(e[y]),i[o]=c(t),p[o]=new de(Vi,i[o]),g=t.$watch(c,function(t,e){t===e&&(e=i[o]),u(o,t,e),i[o]=t},c.literal),h.push(g);break;case"&":if(c=e.hasOwnProperty(y)?a(e[y]):f,c===f&&v)break;i[o]=function(e){return c(t,e)}}}),{initialChanges:p,removeWatches:h.length&&function(){for(var t=0,e=h.length;e>t;++t)h[t]()}}}var gt,yt=/^\w/,vt=t.document.createElement("div"),_t=M;D.prototype={$normalize:me,$addClass:function(t){t&&t.length>0&&R.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&R.removeClass(this.$$element,t)},$updateClass:function(t,e){var r=ge(t,e);r&&r.length&&R.addClass(this.$$element,r);var n=ge(e,t);n&&n.length&&R.removeClass(this.$$element,n)},$set:function(t,e,r,o){var s,a=this.$$element[0],u=jt(a,t),l=zt(t),c=t;if(u?(this.$$element.prop(t,e),o=u):l&&(this[l]=e,c=l),this[t]=e,o?this.$attr[t]=o:(o=this.$attr[t],o||(this.$attr[t]=o=ut(t,"-"))),s=L(this.$$element),"a"===s&&("href"===t||"xlinkHref"===t)||"img"===s&&"src"===t)this[t]=e=P(e,"src"===t);else if("img"===s&&"srcset"===t){for(var h="",p=Yn(e),f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,d=/\s/.test(p)?f:/(,)/,m=p.split(d),g=Math.floor(m.length/2),v=0;g>v;v++){var _=2*v;h+=P(Yn(m[_]),!0),h+=" "+Yn(m[_+1])}var b=Yn(m[2*v]).split(/\s/);h+=P(Yn(b[0]),!0),2===b.length&&(h+=" "+Yn(b[1])),this[t]=e=h}r!==!1&&(null===e||y(e)?this.$$element.removeAttr(o):yt.test(o)?this.$$element.attr(o,e):k(this.$$element[0],o,e));var w=this.$$observers;w&&n(w[c],function(t){try{t(e)}catch(r){i(r)}})},$observe:function(t,e){var r=this,n=r.$$observers||(r.$$observers=mt()),i=n[t]||(n[t]=[]);return i.push(e),v.$evalAsync(function(){i.$$inter||!r.hasOwnProperty(t)||y(r[t])||e(r[t])}),function(){F(i,e)}}};var bt=r.startSymbol(),wt=r.endSymbol(),St="{{"==bt&&"}}"==wt?d:function(t){return t.replace(/\{\{/g,bt).replace(/}}/g,wt)},Tt=/^ngAttr[A-Z]/,Et=/^(.+)Start$/;return N.$$addBindingInfo=A?function(t,e){var r=t.data("$binding")||[];zn(e)?r=r.concat(e):r.push(e),t.data("$binding",r)}:f,N.$$addBindingClass=A?function(t){$(t,"ng-binding")}:f,N.$$addScopeInfo=A?function(t,e,r,n){var i=r?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:f,N.$$addScopeClass=A?function(t,e){$(t,e?"ng-isolate-scope":"ng-scope")}:f,N.$$createComment=function(e,r){var n="";return A&&(n=" "+(e||"")+": "+(r||"")+" "),t.document.createComment(n)},N}]}function de(t,e){this.previousValue=t,this.currentValue=e}function me(t){return wt(t.replace(ji,""))}function ge(t,e){var r="",n=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<n.length;o++){for(var s=n[o],a=0;a<i.length;a++)if(s==i[a])continue t;r+=(r.length>0?" ":"")+s}return r}function ye(t){t=$n(t);var e=t.length;if(1>=e)return t;for(;e--;){var r=t[e];r.nodeType===oi&&Un.call(t,e,1)}return t}function ve(t,e){if(e&&w(e))return e;if(w(t)){var r=Wi.exec(t);if(r)return r[3]}}function _e(){var t={},r=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,r){pt(e,"controller"),_(e)?l(t,e):t[e]=r},this.allowGlobals=function(){r=!0},this.$get=["$injector","$window",function(n,i){function o(t,r,n,i){if(!t||!_(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,r);t.$scope[r]=n}return function(e,s,a,u){var c,h,p,f;if(a=a===!0,u&&w(u)&&(f=u),w(e)){if(h=e.match(Wi),!h)throw zi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);p=h[1],f=f||h[3],e=t.hasOwnProperty(p)?t[p]:ft(s.$scope,p,!0)||(r?ft(i,p,!0):void 0),ht(e,p,!0)}if(a){var d=(zn(e)?e[e.length-1]:e).prototype;c=Object.create(d||null),f&&o(s,f,c,p||e.name);var m;return m=l(function(){var t=n.invoke(e,c,s,p);return t!==c&&(_(t)||T(t))&&(c=t,f&&o(s,f,c,p||e.name)),c},{instance:c,identifier:f})}return c=n.instantiate(e,s,p),f&&o(s,f,c,p||e.name),c}}]}function be(){this.$get=["$window",function(t){return $n(t.document)}]}function we(){this.$get=["$log",function(t){return function(e,r){t.error.apply(t,arguments)}}]}function xe(t){return _(t)?S(t)?t.toISOString():z(t):t}function Se(){this.$get=function(){return function(t){if(!t)return"";var e=[];return i(t,function(t,r){null===t||y(t)||(zn(t)?n(t,function(t){e.push(rt(r)+"="+rt(xe(t)))}):e.push(rt(r)+"="+rt(xe(t))))}),e.join("&")}}}function Te(){this.$get=function(){return function(t){function e(t,o,s){null===t||y(t)||(zn(t)?n(t,function(t,r){e(t,o+"["+(_(t)?r:"")+"]")}):_(t)&&!S(t)?i(t,function(t,r){e(t,o+(s?"":"[")+r+(s?"":"]"))}):r.push(rt(o)+"="+rt(xe(t))))}if(!t)return"";var r=[];return e(t,"",!0),r.join("&")}}}function Ee(t,e){if(w(t)){var r=t.replace(Ji,"").trim();if(r){var n=e("Content-Type");(n&&0===n.indexOf(Xi)||Ae(r))&&(t=W(r))}}return t}function Ae(t){var e=t.match(Zi);return e&&Qi[e[0]].test(t)}function Ce(t){function e(t,e){t&&(i[t]=i[t]?i[t]+", "+e:e)}var r,i=mt();return w(t)?n(t.split("\n"),function(t){r=t.indexOf(":"),e(Pn(Yn(t.substr(0,r))),Yn(t.substr(r+1)))}):_(t)&&n(t,function(t,r){e(Pn(r),Yn(t))}),i}function Me(t){var e;return function(r){if(e||(e=Ce(t)),r){var n=e[Pn(r)];return void 0===n&&(n=null),n}return e}}function Re(t,e,r,i){return T(i)?i(t,e,r):(n(i,function(n){t=n(t,e,r)}),t)}function Pe(t){return t>=200&&300>t}function Ie(){var t=this.defaults={transformResponse:[Ee],transformRequest:[function(t){return!_(t)||M(t)||P(t)||R(t)?t:z(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:B(Ki),put:B(Ki),patch:B(Ki)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},r=!1;this.useApplyAsync=function(t){return v(t)?(r=!!t,this):r};var i=!0;this.useLegacyPromiseExtensions=function(t){return v(t)?(i=!!t,this):i};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,a,u,c,h,p){function f(r){function o(t){var e=l({},t);return e.data=Re(t.data,t.headers,t.status,u.transformResponse),Pe(t.status)?e:h.reject(e)}function s(t,e){var r,i={};return n(t,function(t,n){T(t)?(r=t(e),null!=r&&(i[n]=r)):i[n]=t}),i}function a(e){var r,n,i,o=t.headers,a=l({},e.headers);o=l({},o.common,o[Pn(e.method)]);t:for(r in o){n=Pn(r);for(i in a)if(Pn(i)===n)continue t;a[r]=o[r]}return s(a,B(e))}if(!_(r))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!w(r.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",r.url);var u=l({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},r);u.headers=a(r),u.method=In(u.method),u.paramSerializer=w(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var c=function(e){var r=e.headers,i=Re(e.data,Me(r),void 0,e.transformRequest);return y(i)&&n(r,function(t,e){"content-type"===Pn(e)&&delete r[e]}),y(e.withCredentials)&&!y(t.withCredentials)&&(e.withCredentials=t.withCredentials),g(e,i).then(o,o)},f=[c,void 0],d=h.when(u);for(n(S,function(t){(t.request||t.requestError)&&f.unshift(t.request,t.requestError),(t.response||t.responseError)&&f.push(t.response,t.responseError)});f.length;){var m=f.shift(),v=f.shift();d=d.then(m,v)}return i?(d.success=function(t){return ht(t,"fn"),d.then(function(e){t(e.data,e.status,e.headers,u)}),d},d.error=function(t){return ht(t,"fn"),d.then(null,function(e){t(e.data,e.status,e.headers,u)}),d}):(d.success=eo("success"),d.error=eo("error")),d}function d(t){n(arguments,function(t){f[t]=function(e,r){return f(l({},r||{},{method:t,url:e}))}})}function m(t){n(arguments,function(t){f[t]=function(e,r,n){return f(l({},n||{},{method:t,url:e,data:r}))}})}function g(e,i){function o(t){if(t){var e={};return n(t,function(t,n){e[n]=function(e){function n(){t(e)}r?c.$applyAsync(n):c.$$phase?n():c.$apply(n)}}),e}}function u(t,e,n,i){function o(){l(e,t,n,i)}m&&(Pe(t)?m.put(E,[t,e,Ce(n),i]):m.remove(E)),r?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function l(t,r,n,i){r=r>=-1?r:0,(Pe(r)?w.resolve:w.reject)({data:t,status:r,headers:Me(n),config:e,statusText:i})}function p(t){l(t.data,t.status,B(t.headers()),t.statusText)}function d(){var t=f.pendingRequests.indexOf(e);-1!==t&&f.pendingRequests.splice(t,1)}var m,g,w=h.defer(),S=w.promise,T=e.headers,E=b(e.url,e.paramSerializer(e.params));if(f.pendingRequests.push(e),S.then(d,d),!e.cache&&!t.cache||e.cache===!1||"GET"!==e.method&&"JSONP"!==e.method||(m=_(e.cache)?e.cache:_(t.cache)?t.cache:x),m&&(g=m.get(E),v(g)?O(g)?g.then(p,p):zn(g)?l(g[1],g[0],B(g[2]),g[3]):l(g,200,{},"OK"):m.put(E,S)),y(g)){var A=Or(e.url)?a()[e.xsrfCookieName||t.xsrfCookieName]:void 0;A&&(T[e.xsrfHeaderName||t.xsrfHeaderName]=A),s(e.method,E,i,u,T,e.timeout,e.withCredentials,e.responseType,o(e.eventHandlers),o(e.uploadEventHandlers))}return S}function b(t,e){return e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var x=u("$http");t.paramSerializer=w(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var S=[];return n(o,function(t){S.unshift(w(t)?p.get(t):p.invoke(t))}),f.pendingRequests=[],d("get","delete","head","jsonp"),m("post","put","patch"),f.defaults=t,f}]}function Oe(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function De(){this.$get=["$browser","$window","$document","$xhrFactory",function(t,e,r,n){return ke(t,n,t.defer,e.angular.callbacks,r[0])}]}function ke(t,e,r,i,o){function s(t,e,r){
var n=o.createElement("script"),s=null;return n.type="text/javascript",n.src=t,n.async=!0,s=function(t){pi(n,"load",s),pi(n,"error",s),o.body.removeChild(n),n=null;var a=-1,u="unknown";t&&("load"!==t.type||i[e].called||(t={type:"error"}),u=t.type,a="error"===t.type?404:200),r&&r(a,u)},hi(n,"load",s),hi(n,"error",s),o.body.appendChild(n),s}return function(o,a,u,l,c,h,p,d,m,g){function _(){x&&x(),S&&S.abort()}function b(e,n,i,o,s){v(A)&&r.cancel(A),x=S=null,e(n,i,o,s),t.$$completeOutstandingRequest(f)}if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"==Pn(o)){var w="_"+(i.counter++).toString(36);i[w]=function(t){i[w].data=t,i[w].called=!0};var x=s(a.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(t,e){b(l,t,i[w].data,"",e),i[w]=f})}else{var S=e(o,a);S.open(o,a,!0),n(c,function(t,e){v(t)&&S.setRequestHeader(e,t)}),S.onload=function(){var t=S.statusText||"",e="response"in S?S.response:S.responseText,r=1223===S.status?204:S.status;0===r&&(r=e?200:"file"==Ir(a).protocol?404:0),b(l,r,e,S.getAllResponseHeaders(),t)};var T=function(){b(l,-1,null,null,"")};if(S.onerror=T,S.onabort=T,n(m,function(t,e){S.addEventListener(e,t)}),n(g,function(t,e){S.upload.addEventListener(e,t)}),p&&(S.withCredentials=!0),d)try{S.responseType=d}catch(E){if("json"!==d)throw E}S.send(y(u)?null:u)}if(h>0)var A=r(_,h);else O(h)&&h.then(_)}}function $e(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(r,n,i){function o(t){return"\\\\\\"+t}function s(r){return r.replace(f,t).replace(d,e)}function a(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=z(t)}return t}function u(t,e,r,n){var i;return i=t.$watch(function(t){return i(),n(t)},e,r)}function c(o,c,f,d){function g(t){try{return t=O(t),d&&!v(t)?t:a(t)}catch(e){n(ro.interr(o,e))}}if(!o.length||-1===o.indexOf(t)){var _;if(!c){var b=s(o);_=m(b),_.exp=o,_.expressions=[],_.$$watchDelegate=u}return _}d=!!d;for(var w,x,S,E=0,A=[],C=[],M=o.length,R=[],P=[];M>E;){if(-1==(w=o.indexOf(t,E))||-1==(x=o.indexOf(e,w+h))){E!==M&&R.push(s(o.substring(E)));break}E!==w&&R.push(s(o.substring(E,w))),S=o.substring(w+h,x),A.push(S),C.push(r(S,g)),E=x+p,P.push(R.length),R.push("")}if(f&&R.length>1&&ro.throwNoconcat(o),!c||A.length){var I=function(t){for(var e=0,r=A.length;r>e;e++){if(d&&y(t[e]))return;R[P[e]]=t[e]}return R.join("")},O=function(t){return f?i.getTrusted(f,t):i.valueOf(t)};return l(function(t){var e=0,r=A.length,i=new Array(r);try{for(;r>e;e++)i[e]=C[e](t);return I(i)}catch(s){n(ro.interr(o,s))}},{exp:o,expressions:A,$$watchDelegate:function(t,e){var r;return t.$watchGroup(C,function(n,i){var o=I(n);T(e)&&e.call(this,o,n!==i?r:o,t),r=o})}})}}var h=t.length,p=e.length,f=new RegExp(t.replace(/./g,o),"g"),d=new RegExp(e.replace(/./g,o),"g");return c.startSymbol=function(){return t},c.endSymbol=function(){return e},c}]}function Ne(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,r,n,i){function o(o,a,u,l){function c(){h?o.apply(null,p):o(m)}var h=arguments.length>4,p=h?G(arguments,4):[],f=e.setInterval,d=e.clearInterval,m=0,g=v(l)&&!l,y=(g?n:r).defer(),_=y.promise;return u=v(u)?u:0,_.$$intervalId=f(function(){g?i.defer(c):t.$evalAsync(c),y.notify(m++),u>0&&m>=u&&(y.resolve(m),d(_.$$intervalId),delete s[_.$$intervalId]),g||t.$apply()},a),s[_.$$intervalId]=y,_}var s={};return o.cancel=function(t){return t&&t.$$intervalId in s?(s[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete s[t.$$intervalId],!0):!1},o}]}function Le(t){for(var e=t.split("/"),r=e.length;r--;)e[r]=et(e[r]);return e.join("/")}function Fe(t,e){var r=Ir(t);e.$$protocol=r.protocol,e.$$host=r.hostname,e.$$port=h(r.port)||io[r.protocol]||null}function Ue(t,e){var r="/"!==t.charAt(0);r&&(t="/"+t);var n=Ir(t);e.$$path=decodeURIComponent(r&&"/"===n.pathname.charAt(0)?n.pathname.substring(1):n.pathname),e.$$search=J(n.search),e.$$hash=decodeURIComponent(n.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Be(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function He(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function qe(t){return t.replace(/(#.+)|#$/,"$1")}function Ge(t){return t.substr(0,He(t).lastIndexOf("/")+1)}function Ve(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function je(t,e,r){this.$$html5=!0,r=r||"",Fe(t,this),this.$$parse=function(t){var r=Be(e,t);if(!w(r))throw oo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Ue(r,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=tt(this.$$search),r=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Le(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(n,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s,a;return v(o=Be(t,n))?(s=o,a=v(o=Be(r,o))?e+(Be("/",o)||o):t+s):v(o=Be(e,n))?a=e+o:e==n+"/"&&(a=e),a&&this.$$parse(a),!!a}}function ze(t,e,r){Fe(t,this),this.$$parse=function(n){function i(t,e,r){var n,i=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(r)&&(e=e.replace(r,"")),i.exec(e)?t:(n=i.exec(t),n?n[1]:t)}var o,s=Be(t,n)||Be(e,n);y(s)||"#"!==s.charAt(0)?this.$$html5?o=s:(o="",y(s)&&(t=n,this.replace())):(o=Be(r,s),y(o)&&(o=s)),Ue(o,this),this.$$path=i(this.$$path,o,t),this.$$compose()},this.$$compose=function(){var e=tt(this.$$search),n=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Le(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+(this.$$url?r+this.$$url:"")},this.$$parseLinkUrl=function(e,r){return He(t)==He(e)?(this.$$parse(e),!0):!1}}function We(t,e,r){this.$$html5=!0,ze.apply(this,arguments),this.$$parseLinkUrl=function(n,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s;return t==He(n)?o=n:(s=Be(e,n))?o=t+r+s:e===n+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=tt(this.$$search),n=this.$$hash?"#"+et(this.$$hash):"";this.$$url=Le(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+r+this.$$url}}function Ye(t){return function(){return this[t]}}function Xe(t,e){return function(r){return y(r)?this[t]:(this[t]=e(r),this.$$compose(),this)}}function Ke(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return v(e)?(t=e,this):t},this.html5Mode=function(t){return I(t)?(e.enabled=t,this):_(t)?(I(t.enabled)&&(e.enabled=t.enabled),I(t.requireBase)&&(e.requireBase=t.requireBase),I(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(r,n,i,o,s){function a(t,e,r){var i=l.url(),o=l.$$state;try{n.url(t,e,r),l.$$state=n.state()}catch(s){throw l.url(i),l.$$state=o,s}}function u(t,e){r.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}var l,c,h,p=n.baseHref(),f=n.url();if(e.enabled){if(!p&&e.requireBase)throw oo("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=Ve(f)+(p||"/"),c=i.history?je:We}else h=He(f),c=ze;var d=Ge(h);l=new c(h,d,"#"+t),l.$$parseLinkUrl(f,f),l.$$state=n.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=$n(t.target);"a"!==L(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var a=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");_(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=Ir(a.animVal).href),m.test(a)||!a||i.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(a,u)&&(t.preventDefault(),l.absUrl()!=n.url()&&(r.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),qe(l.absUrl())!=qe(f)&&n.url(l.absUrl(),!0);var g=!0;return n.onUrlChange(function(t,e){return y(Be(d,t))?void(s.location.href=t):(r.$evalAsync(function(){var n,i=l.absUrl(),o=l.$$state;t=qe(t),l.$$parse(t),l.$$state=e,n=r.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,l.absUrl()===t&&(n?(l.$$parse(i),l.$$state=o,a(i,!1,o)):(g=!1,u(i,o)))}),void(r.$$phase||r.$digest()))}),r.$watch(function(){var t=qe(n.url()),e=qe(l.absUrl()),o=n.state(),s=l.$$replace,c=t!==e||l.$$html5&&i.history&&o!==l.$$state;(g||c)&&(g=!1,r.$evalAsync(function(){var e=l.absUrl(),n=r.$broadcast("$locationChangeStart",e,t,l.$$state,o).defaultPrevented;l.absUrl()===e&&(n?(l.$$parse(t),l.$$state=o):(c&&a(e,s,o===l.$$state?null:l.$$state),u(t,o)))})),l.$$replace=!1}),l}]}function Ze(){var t=!0,e=this;this.debugEnabled=function(e){return v(e)?(t=e,this):t},this.$get=["$window",function(r){function i(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function o(t){var e=r.console||{},o=e[t]||e.log||f,s=!1;try{s=!!o.apply}catch(a){}return s?function(){var t=[];return n(arguments,function(e){t.push(i(e))}),o.apply(e,t)}:function(t,e){o(t,null==e?"":e)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var r=o("debug");return function(){t&&r.apply(e,arguments)}}()}}]}function Qe(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ao("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Je(t){return t+""}function tr(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw ao("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ao("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw ao("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function er(t,e){if(t){if(t.constructor===t)throw ao("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===uo||t===lo||t===co)throw ao("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function rr(t,e){if(t&&(t===0..constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ao("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}function nr(t,e){return"undefined"!=typeof t?t:e}function ir(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function or(t,e){var r=t(e);return!r.$stateful}function sr(t,e){var r,i;switch(t.type){case mo.Program:r=!0,n(t.body,function(t){sr(t.expression,e),r=r&&t.expression.constant}),t.constant=r;break;case mo.Literal:t.constant=!0,t.toWatch=[];break;case mo.UnaryExpression:sr(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case mo.BinaryExpression:sr(t.left,e),sr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case mo.LogicalExpression:sr(t.left,e),sr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case mo.ConditionalExpression:sr(t.test,e),sr(t.alternate,e),sr(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case mo.Identifier:t.constant=!1,t.toWatch=[t];break;case mo.MemberExpression:sr(t.object,e),t.computed&&sr(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case mo.CallExpression:r=t.filter?or(e,t.callee.name):!1,i=[],n(t.arguments,function(t){sr(t,e),r=r&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=t.filter&&or(e,t.callee.name)?i:[t];break;case mo.AssignmentExpression:sr(t.left,e),sr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case mo.ArrayExpression:r=!0,i=[],n(t.elements,function(t){sr(t,e),r=r&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case mo.ObjectExpression:r=!0,i=[],n(t.properties,function(t){sr(t.value,e),r=r&&t.value.constant,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=r,t.toWatch=i;break;case mo.ThisExpression:t.constant=!1,t.toWatch=[];break;case mo.LocalsExpression:t.constant=!1,t.toWatch=[]}}function ar(t){if(1==t.length){var e=t[0].expression,r=e.toWatch;return 1!==r.length?r:r[0]!==e?r:void 0}}function ur(t){return t.type===mo.Identifier||t.type===mo.MemberExpression}function lr(t){return 1===t.body.length&&ur(t.body[0].expression)?{type:mo.AssignmentExpression,left:t.body[0].expression,right:{type:mo.NGValueParameter},operator:"="}:void 0}function cr(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===mo.Literal||t.body[0].expression.type===mo.ArrayExpression||t.body[0].expression.type===mo.ObjectExpression)}function hr(t){return t.constant}function pr(t,e){this.astBuilder=t,this.$filter=e}function fr(t,e){this.astBuilder=t,this.$filter=e}function dr(t){return"constructor"==t}function mr(t){return T(t.valueOf)?t.valueOf():yo.call(t)}function gr(){var t,e,r=mt(),i=mt(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(t,e){o[t]=e},this.setIdentifierFns=function(r,n){return t=r,e=n,this},this.$get=["$filter",function(s){function a(t,e,n){var o,a,l;switch(n=n||b,typeof t){case"string":t=t.trim(),l=t;var g=n?i:r;if(o=g[l],!o){":"===t.charAt(0)&&":"===t.charAt(1)&&(a=!0,t=t.substring(2));var v=n?_:y,w=new fo(v),x=new go(w,s,v);o=x.parse(t),o.constant?o.$$watchDelegate=d:a?o.$$watchDelegate=o.literal?p:h:o.inputs&&(o.$$watchDelegate=c),n&&(o=u(o)),g[l]=o}return m(o,e);case"function":return m(t,e);default:return m(f,e)}}function u(t){function e(e,r,n,i){var o=b;b=!0;try{return t(e,r,n,i)}finally{b=o}}if(!t)return t;e.$$watchDelegate=t.$$watchDelegate,e.assign=u(t.assign),e.constant=t.constant,e.literal=t.literal;for(var r=0;t.inputs&&r<t.inputs.length;++r)t.inputs[r]=u(t.inputs[r]);return e.inputs=t.inputs,e}function l(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=mr(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function c(t,e,r,n,i){var o,s=n.inputs;if(1===s.length){var a=l;return s=s[0],t.$watch(function(t){var e=s(t);return l(e,a)||(o=n(t,void 0,void 0,[e]),a=e&&mr(e)),o},e,r,i)}for(var u=[],c=[],h=0,p=s.length;p>h;h++)u[h]=l,c[h]=null;return t.$watch(function(t){for(var e=!1,r=0,i=s.length;i>r;r++){var a=s[r](t);(e||(e=!l(a,u[r])))&&(c[r]=a,u[r]=a&&mr(a))}return e&&(o=n(t,void 0,void 0,c)),o},e,r,i)}function h(t,e,r,n){var i,o;return i=t.$watch(function(t){return n(t)},function(t,r,n){o=t,T(e)&&e.apply(this,arguments),v(t)&&n.$$postDigest(function(){v(o)&&i()})},r)}function p(t,e,r,i){function o(t){var e=!0;return n(t,function(t){v(t)||(e=!1)}),e}var s,a;return s=t.$watch(function(t){return i(t)},function(t,r,n){a=t,T(e)&&e.call(this,t,r,n),o(t)&&n.$$postDigest(function(){o(a)&&s()})},r)}function d(t,e,r,n){var i;return i=t.$watch(function(t){return i(),n(t)},e,r)}function m(t,e){if(!e)return t;var r=t.$$watchDelegate,n=!1,i=r!==p&&r!==h,o=i?function(r,i,o,s){var a=n&&s?s[0]:t(r,i,o,s);return e(a,r,i)}:function(r,n,i,o){var s=t(r,n,i,o),a=e(s,r,n);return v(s)?a:s};return t.$$watchDelegate&&t.$$watchDelegate!==c?o.$$watchDelegate=t.$$watchDelegate:e.$stateful||(o.$$watchDelegate=c,n=!t.inputs,o.inputs=t.inputs?t.inputs:[t]),o}var g=Kn().noUnsafeEval,y={csp:g,expensiveChecks:!1,literals:U(o),isIdentifierStart:T(t)&&t,isIdentifierContinue:T(e)&&e},_={csp:g,expensiveChecks:!0,literals:U(o),isIdentifierStart:T(t)&&t,isIdentifierContinue:T(e)&&e},b=!1;return a.$$runningExpensiveChecks=function(){return b},a}]}function yr(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return _r(function(e){t.$evalAsync(e)},e)}]}function vr(){this.$get=["$browser","$exceptionHandler",function(t,e){return _r(function(e){t.defer(e)},e)}]}function _r(t,r){function i(){this.$$state={status:0}}function o(t,e){return function(r){e.call(t,r)}}function s(t){var e,n,i;i=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,s=i.length;s>o;++o){n=i[o][0],e=i[o][t.status];try{T(e)?n.resolve(e(t.value)):1===t.status?n.resolve(t.value):n.reject(t.value)}catch(a){n.reject(a),r(a)}}}function a(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){s(e)}))}function u(){this.promise=new i}function c(t){var e=new u,r=0,i=zn(t)?[]:{};return n(t,function(t,n){r++,g(t).then(function(t){i.hasOwnProperty(n)||(i[n]=t,--r||e.resolve(i))},function(t){i.hasOwnProperty(n)||e.reject(t)})}),0===r&&e.resolve(i),e.promise}var h=e("$q",TypeError),p=function(){var t=new u;return t.resolve=o(t,t.resolve),t.reject=o(t,t.reject),t.notify=o(t,t.notify),t};l(i.prototype,{then:function(t,e,r){if(y(t)&&y(e)&&y(r))return this;var n=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,t,e,r]),this.$$state.status>0&&a(this.$$state),n.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return m(e,!0,t)},function(e){return m(e,!1,t)},e)}}),l(u.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){function e(t){u||(u=!0,s.$$resolve(t))}function n(t){u||(u=!0,s.$$reject(t))}var i,s=this,u=!1;try{(_(t)||T(t))&&(i=t&&t.then),T(i)?(this.promise.$$state.status=-1,i.call(t,e,n,o(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,a(this.promise.$$state))}catch(l){n(l),r(l)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,a(this.promise.$$state)},notify:function(e){var n=this.promise.$$state.pending;this.promise.$$state.status<=0&&n&&n.length&&t(function(){for(var t,i,o=0,s=n.length;s>o;o++){i=n[o][0],t=n[o][3];try{i.notify(T(t)?t(e):e)}catch(a){r(a)}}})}});var f=function(t){var e=new u;return e.reject(t),e.promise},d=function(t,e){var r=new u;return e?r.resolve(t):r.reject(t),r.promise},m=function(t,e,r){var n=null;try{T(r)&&(n=r())}catch(i){return d(i,!1)}return O(n)?n.then(function(){return d(t,e)},function(t){return d(t,!1)}):d(t,e)},g=function(t,e,r,n){var i=new u;return i.resolve(t),i.promise.then(e,r,n)},v=g,b=function(t){function e(t){n.resolve(t)}function r(t){n.reject(t)}if(!T(t))throw h("norslvr","Expected resolverFn, got '{0}'",t);var n=new u;return t(e,r),n.promise};return b.prototype=i.prototype,b.defer=p,b.reject=f,b.when=g,b.resolve=v,b.all=c,b}function br(){this.$get=["$window","$timeout",function(t,e){var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!r,o=i?function(t){var e=r(t);return function(){n(e)}}:function(t){var r=e(t,16.66,!1);return function(){e.cancel(r)}};return o.supported=i,o}]}function wr(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=s(),this.$$ChildScope=null}return e.prototype=t,e}var i=10,o=e("$rootScope"),a=null,u=null;this.digestTtl=function(t){return arguments.length&&(i=t),i},this.$get=["$exceptionHandler","$parse","$browser",function(e,l,c){function h(t){t.currentScope.$$destroyed=!0}function p(t){9===kn&&(t.$$childHead&&p(t.$$childHead),t.$$nextSibling&&p(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function d(){this.$id=s(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(t){if(E.$$phase)throw o("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function g(){E.$$phase=null}function v(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function b(t,e,r){do t.$$listenerCount[r]-=e,0===t.$$listenerCount[r]&&delete t.$$listenerCount[r];while(t=t.$parent)}function w(){}function x(){for(;M.length;)try{M.shift()()}catch(t){e(t)}u=null}function S(){null===u&&(u=c.defer(function(){E.$apply(x)}))}d.prototype={constructor:d,$new:function(e,r){var n;return r=r||this,e?(n=new d,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),n=new this.$$ChildScope),n.$parent=r,n.$$prevSibling=r.$$childTail,r.$$childHead?(r.$$childTail.$$nextSibling=n,r.$$childTail=n):r.$$childHead=r.$$childTail=n,(e||r!=this)&&n.$on("$destroy",h),n},$watch:function(t,e,r,n){var i=l(t);if(i.$$watchDelegate)return i.$$watchDelegate(this,e,r,i,t);var o=this,s=o.$$watchers,u={fn:e,last:w,get:i,exp:n||t,eq:!!r};return a=null,T(e)||(u.fn=f),s||(s=o.$$watchers=[]),s.unshift(u),v(this,1),function(){F(s,u)>=0&&v(o,-1),a=null}},$watchGroup:function(t,e){function r(){u=!1,l?(l=!1,e(o,o,a)):e(o,i,a)}var i=new Array(t.length),o=new Array(t.length),s=[],a=this,u=!1,l=!0;if(!t.length){var c=!0;return a.$evalAsync(function(){c&&e(o,o,a)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,r,n){o[0]=t,i[0]=r,e(o,t===r?o:i,n)}):(n(t,function(t,e){var n=a.$watch(t,function(t,n){o[e]=t,i[e]=n,u||(u=!0,a.$evalAsync(r))});s.push(n)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(t,e){function n(t){o=t;var e,n,i,a,u;if(!y(o)){if(_(o))if(r(o)){s!==f&&(s=f,g=s.length=0,h++),e=o.length,g!==e&&(h++,s.length=g=e);for(var l=0;e>l;l++)u=s[l],a=o[l],i=u!==u&&a!==a,i||u===a||(h++,s[l]=a)}else{s!==d&&(s=d={},g=0,h++),e=0;for(n in o)Rn.call(o,n)&&(e++,a=o[n],u=s[n],n in s?(i=u!==u&&a!==a,i||u===a||(h++,s[n]=a)):(g++,s[n]=a,h++));if(g>e){h++;for(n in s)Rn.call(o,n)||(g--,delete s[n])}}else s!==o&&(s=o,h++);return h}}function i(){if(m?(m=!1,e(o,o,u)):e(o,a,u),c)if(_(o))if(r(o)){a=new Array(o.length);for(var t=0;t<o.length;t++)a[t]=o[t]}else{a={};for(var n in o)Rn.call(o,n)&&(a[n]=o[n])}else a=o}n.$stateful=!0;var o,s,a,u=this,c=e.length>1,h=0,p=l(t,n),f=[],d={},m=!0,g=0;return this.$watch(p,i)},$digest:function(){var t,r,n,s,l,h,p,f,d,y,v,_,b=i,S=this,M=[];m("$digest"),c.$$checkUrlChange(),this===E&&null!==u&&(c.defer.cancel(u),x()),a=null;do{for(f=!1,y=S;A.length;){try{_=A.shift(),_.scope.$eval(_.expression,_.locals)}catch(R){e(R)}a=null}t:do{if(h=y.$$watchers)for(p=h.length;p--;)try{if(t=h[p])if(l=t.get,(r=l(y))===(n=t.last)||(t.eq?H(r,n):"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))){if(t===a){f=!1;break t}}else f=!0,a=t,t.last=t.eq?U(r,null):r,s=t.fn,s(r,n===w?r:n,y),5>b&&(v=4-b,M[v]||(M[v]=[]),M[v].push({msg:T(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:r,oldVal:n}))}catch(R){e(R)}if(!(d=y.$$watchersCount&&y.$$childHead||y!==S&&y.$$nextSibling))for(;y!==S&&!(d=y.$$nextSibling);)y=y.$parent}while(y=d);if((f||A.length)&&!b--)throw g(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,M)}while(f||A.length);for(g();C.length;)try{C.shift()()}catch(R){e(R)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&c.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var e in this.$$listenerCount)b(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=f,this.$on=this.$watch=this.$watchGroup=function(){return f},this.$$listeners={},this.$$nextSibling=null,p(this)}},$eval:function(t,e){return l(t)(this,e)},$evalAsync:function(t,e){E.$$phase||A.length||c.defer(function(){A.length&&E.$digest()}),A.push({scope:this,expression:l(t),locals:e})},$$postDigest:function(t){C.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{g()}}catch(r){e(r)}finally{try{E.$digest()}catch(r){throw e(r),r}}},$applyAsync:function(t){function e(){r.$eval(t)}var r=this;t&&M.push(e),t=l(t),S()},$on:function(t,e){var r=this.$$listeners[t];r||(this.$$listeners[t]=r=[]),r.push(e);var n=this;do n.$$listenerCount[t]||(n.$$listenerCount[t]=0),n.$$listenerCount[t]++;while(n=n.$parent);var i=this;return function(){var n=r.indexOf(e);-1!==n&&(r[n]=null,b(i,1,t))}},$emit:function(t,r){var n,i,o,s=[],a=this,u=!1,l={name:t,targetScope:a,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=q([l],arguments,1);do{for(n=a.$$listeners[t]||s,l.currentScope=a,i=0,o=n.length;o>i;i++)if(n[i])try{n[i].apply(null,c)}catch(h){e(h)}else n.splice(i,1),i--,o--;if(u)return l.currentScope=null,l;a=a.$parent}while(a);return l.currentScope=null,l},$broadcast:function(t,r){var n=this,i=n,o=n,s={name:t,targetScope:n,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return s;for(var a,u,l,c=q([s],arguments,1);i=o;){for(s.currentScope=i,a=i.$$listeners[t]||[],u=0,l=a.length;l>u;u++)if(a[u])try{a[u].apply(null,c)}catch(h){e(h)}else a.splice(u,1),u--,l--;if(!(o=i.$$listenerCount[t]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return s.currentScope=null,s}};var E=new d,A=E.$$asyncQueue=[],C=E.$$postDigestQueue=[],M=E.$$applyAsyncQueue=[];return E}]}function xr(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return v(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return v(t)?(e=t,this):e},this.$get=function(){return function(r,n){var i,o=n?e:t;return i=Ir(r).href,""===i||i.match(o)?r:"unsafe:"+i}}}function Sr(t){if("self"===t)return t;if(w(t)){if(t.indexOf("***")>-1)throw vo("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Xn(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(E(t))return new RegExp("^"+t.source+"$");throw vo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Tr(t){var e=[];return v(t)&&n(t,function(t){e.push(Sr(t))}),e}function Er(){this.SCE_CONTEXTS=_o;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Tr(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Tr(t)),e},this.$get=["$injector",function(r){function n(t,e){return"self"===t?Or(e):!!t.exec(e.href)}function i(r){var i,o,s=Ir(r.toString()),a=!1;for(i=0,o=t.length;o>i;i++)if(n(t[i],s)){a=!0;break}if(a)for(i=0,o=e.length;o>i;i++)if(n(e[i],s)){a=!1;break}return a}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function s(t,e){var r=h.hasOwnProperty(t)?h[t]:null;if(!r)throw vo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||y(e)||""===e)return e;if("string"!=typeof e)throw vo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new r(e)}function a(t){return t instanceof c?t.$$unwrapTrustedValue():t}function u(t,e){if(null===e||y(e)||""===e)return e;var r=h.hasOwnProperty(t)?h[t]:null;if(r&&e instanceof r)return e.$$unwrapTrustedValue();if(t===_o.RESOURCE_URL){if(i(e))return e;throw vo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===_o.HTML)return l(e);throw vo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(t){throw vo("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(l=r.get("$sanitize"));var c=o(),h={};return h[_o.HTML]=o(c),h[_o.CSS]=o(c),h[_o.URL]=o(c),h[_o.JS]=o(c),h[_o.RESOURCE_URL]=o(h[_o.URL]),{trustAs:s,getTrusted:u,valueOf:a}}]}function Ar(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,r){if(t&&8>kn)throw vo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=B(_o);i.isEnabled=function(){return t},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=d),i.parseAs=function(t,r){var n=e(r);return n.literal&&n.constant?n:e(r,function(e){return i.getTrusted(t,e)})};var o=i.parseAs,s=i.getTrusted,a=i.trustAs;return n(_o,function(t,e){var r=Pn(e);i[wt("parse_as_"+r)]=function(e){return o(t,e)},i[wt("get_trusted_"+r)]=function(e){return s(t,e)},i[wt("trust_as_"+r)]=function(e){return a(t,e)}}),i}]}function Cr(){this.$get=["$window","$document",function(t,e){var r,n,i={},o=t.chrome&&t.chrome.app&&t.chrome.app.runtime,s=!o&&t.history&&t.history.pushState,a=h((/android (\d+)/.exec(Pn((t.navigator||{}).userAgent))||[])[1]),u=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,p=l.body&&l.body.style,f=!1,d=!1;if(p){for(var m in p)if(n=c.exec(m)){r=n[0],r=r.substr(0,1).toUpperCase()+r.substr(1);break}r||(r="WebkitOpacity"in p&&"webkit"),f=!!("transition"in p||r+"Transition"in p),d=!!("animation"in p||r+"Animation"in p),!a||f&&d||(f=w(p.webkitTransition),d=w(p.webkitAnimation))}return{history:!(!s||4>a||u),hasEvent:function(t){if("input"===t&&11>=kn)return!1;if(y(i[t])){var e=l.createElement("div");i[t]="on"+t in e}return i[t]},csp:Kn(),vendorPrefix:r,transitions:f,animations:d,android:a}}]}function Mr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,r,n,i){function o(s,a){function u(t){if(!a)throw bo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText);return n.reject(t)}o.totalPendingRequests++,w(s)&&e.get(s)||(s=i.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return zn(c)?c=c.filter(function(t){return t!==Ee}):c===Ee&&(c=null),r.get(s,l({cache:e,transformResponse:c},t))["finally"](function(){o.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},u)}return o.totalPendingRequests=0,o}]}function Rr(){this.$get=["$rootScope","$browser","$location",function(t,e,r){var i={};return i.findBindings=function(t,e,r){var i=t.getElementsByClassName("ng-binding"),o=[];return n(i,function(t){var i=Vn.element(t).data("$binding");i&&n(i,function(n){if(r){var i=new RegExp("(^|\\s)"+Xn(e)+"(\\s|\\||$)");i.test(n)&&o.push(t)}else-1!=n.indexOf(e)&&o.push(t)})}),o},i.findModels=function(t,e,r){for(var n=["ng-","data-ng-","ng\\:"],i=0;i<n.length;++i){var o=r?"=":"*=",s="["+n[i]+"model"+o+'"'+e+'"]',a=t.querySelectorAll(s);if(a.length)return a}},i.getLocation=function(){return r.url()},i.setLocation=function(e){e!==r.url()&&(r.url(e),t.$digest())},i.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},i}]}function Pr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,r,n,i){function o(o,a,u){T(o)||(u=a,a=o,o=f);var l,c=G(arguments,3),h=v(u)&&!u,p=(h?n:r).defer(),d=p.promise;return l=e.defer(function(){try{p.resolve(o.apply(null,c))}catch(e){p.reject(e),i(e)}finally{delete s[d.$$timeoutId]}h||t.$apply()},a),d.$$timeoutId=l,s[l]=p,d}var s={};return o.cancel=function(t){return t&&t.$$timeoutId in s?(s[t.$$timeoutId].reject("canceled"),delete s[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function Ir(t){var e=t;return kn&&(wo.setAttribute("href",e),e=wo.href),wo.setAttribute("href",e),{href:wo.href,protocol:wo.protocol?wo.protocol.replace(/:$/,""):"",host:wo.host,search:wo.search?wo.search.replace(/^\?/,""):"",hash:wo.hash?wo.hash.replace(/^#/,""):"",hostname:wo.hostname,
port:wo.port,pathname:"/"===wo.pathname.charAt(0)?wo.pathname:"/"+wo.pathname}}function Or(t){var e=w(t)?Ir(t):t;return e.protocol===xo.protocol&&e.host===xo.host}function Dr(){this.$get=m(t)}function kr(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var r=t[0]||{},n={},i="";return function(){var t,o,s,a,u,l=r.cookie||"";if(l!==i)for(i=l,t=i.split("; "),n={},s=0;s<t.length;s++)o=t[s],a=o.indexOf("="),a>0&&(u=e(o.substring(0,a)),y(n[u])&&(n[u]=e(o.substring(a+1))));return n}}function $r(){this.$get=kr}function Nr(t){function e(i,o){if(_(i)){var s={};return n(i,function(t,r){s[r]=e(r,t)}),s}return t.factory(i+r,o)}var r="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+r)}}],e("currency",Hr),e("date",rn),e("filter",Lr),e("json",nn),e("limitTo",on),e("lowercase",Ro),e("number",qr),e("orderBy",sn),e("uppercase",Po)}function Lr(){return function(t,n,i){if(!r(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var o,s,a=Br(n);switch(a){case"function":o=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=Fr(n,i,s);break;default:return t}return Array.prototype.filter.call(t,o)}}function Fr(t,e,r){var n,i=_(t)&&"$"in t;return e===!0?e=H:T(e)||(e=function(t,e){return y(t)?!1:null===t||null===e?t===e:_(e)||_(t)&&!g(t)?!1:(t=Pn(""+t),e=Pn(""+e),-1!==t.indexOf(e))}),n=function(n){return i&&!_(n)?Ur(n,t.$,e,!1):Ur(n,t,e,r)}}function Ur(t,e,r,n,i){var o=Br(t),s=Br(e);if("string"===s&&"!"===e.charAt(0))return!Ur(t,e.substring(1),r,n);if(zn(t))return t.some(function(t){return Ur(t,e,r,n)});switch(o){case"object":var a;if(n){for(a in t)if("$"!==a.charAt(0)&&Ur(t[a],e,r,!0))return!0;return i?!1:Ur(t,e,r,!1)}if("object"===s){for(a in e){var u=e[a];if(!T(u)&&!y(u)){var l="$"===a,c=l?t:t[a];if(!Ur(c,u,r,l,l))return!1}}return!0}return r(t,e);case"function":return!1;default:return r(t,e)}}function Br(t){return null===t?"null":typeof t}function Hr(t){var e=t.NUMBER_FORMATS;return function(t,r,n){return y(r)&&(r=e.CURRENCY_SYM),y(n)&&(n=e.PATTERNS[1].maxFrac),null==t?t:jr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,n).replace(/\u00A4/g,r)}}function qr(t){var e=t.NUMBER_FORMATS;return function(t,r){return null==t?t:jr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,r)}}function Gr(t){var e,r,n,i,o,s=0;for((r=t.indexOf(To))>-1&&(t=t.replace(To,"")),(n=t.search(/e/i))>0?(0>r&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):0>r&&(r=t.length),n=0;t.charAt(n)==Eo;n++);if(n==(o=t.length))e=[0],r=1;else{for(o--;t.charAt(o)==Eo;)o--;for(r-=n,e=[],i=0;o>=n;n++,i++)e[i]=+t.charAt(n)}return r>So&&(e=e.splice(0,So-1),s=r-1,r=1),{d:e,e:s,i:r}}function Vr(t,e,r,n){var i=t.d,o=i.length-t.i;e=y(e)?Math.min(Math.max(r,o),n):+e;var s=e+t.i,a=i[s];if(s>0){i.splice(Math.max(t.i,s));for(var u=s;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,s=e+1),i[0]=0;for(var l=1;s>l;l++)i[l]=0}if(a>=5)if(0>s-1){for(var c=0;c>s;c--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[s-1]++;for(;o<Math.max(0,e);o++)i.push(0);var h=i.reduceRight(function(t,e,r,n){return e+=t,n[r]=e%10,Math.floor(e/10)},0);h&&(i.unshift(h),t.i++)}function jr(t,e,r,n,i){if(!w(t)&&!x(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,u=Math.abs(t)+"",l="";if(s)l="∞";else{o=Gr(u),Vr(o,i,e.minFrac,e.maxFrac);var c=o.d,h=o.i,p=o.e,f=[];for(a=c.reduce(function(t,e){return t&&!e},!0);0>h;)c.unshift(0),h++;h>0?f=c.splice(h):(f=c,c=[0]);var d=[];for(c.length>=e.lgSize&&d.unshift(c.splice(-e.lgSize).join(""));c.length>e.gSize;)d.unshift(c.splice(-e.gSize).join(""));c.length&&d.unshift(c.join("")),l=d.join(r),f.length&&(l+=n+f.join("")),p&&(l+="e+"+p)}return 0>t&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function zr(t,e,r,n){var i="";for((0>t||n&&0>=t)&&(n?t=-t+1:(t=-t,i="-")),t=""+t;t.length<e;)t=Eo+t;return r&&(t=t.substr(t.length-e)),i+t}function Wr(t,e,r,n,i){return r=r||0,function(o){var s=o["get"+t]();return(r>0||s>-r)&&(s+=r),0===s&&-12==r&&(s=12),zr(s,e,n,i)}}function Yr(t,e,r){return function(n,i){var o=n["get"+t](),s=(r?"STANDALONE":"")+(e?"SHORT":""),a=In(s+t);return i[a][o]}}function Xr(t,e,r){var n=-1*r,i=n>=0?"+":"";return i+=zr(Math[n>0?"floor":"ceil"](n/60),2)+zr(Math.abs(n%60),2)}function Kr(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function Zr(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Qr(t){return function(e){var r=Kr(e.getFullYear()),n=Zr(e),i=+n-+r,o=1+Math.round(i/6048e5);return zr(o,t)}}function Jr(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function tn(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function en(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function rn(t){function e(t){var e;if(e=t.match(r)){var n=new Date(0),i=0,o=0,s=e[8]?n.setUTCFullYear:n.setFullYear,a=e[8]?n.setUTCHours:n.setHours;e[9]&&(i=h(e[9]+e[10]),o=h(e[9]+e[11])),s.call(n,h(e[1]),h(e[2])-1,h(e[3]));var u=h(e[4]||0)-i,l=h(e[5]||0)-o,c=h(e[6]||0),p=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(n,u,l,c,p),n}return t}var r=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(r,i,o){var s,a,u="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,w(r)&&(r=Mo.test(r)?h(r):e(r)),x(r)&&(r=new Date(r)),!S(r)||!isFinite(r.getTime()))return r;for(;i;)a=Co.exec(i),a?(l=q(l,a,1),i=l.pop()):(l.push(i),i=null);var c=r.getTimezoneOffset();return o&&(c=Y(o,c),r=K(r,o,!0)),n(l,function(e){s=Ao[e],u+=s?s(r,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function nn(){return function(t,e){return y(e)&&(e=2),z(t,e)}}function on(){return function(t,e,r){return e=Math.abs(Number(e))===1/0?Number(e):h(e),isNaN(e)?t:(x(t)&&(t=t.toString()),zn(t)||w(t)?(r=!r||isNaN(r)?0:h(r),r=0>r?Math.max(0,t.length+r):r,e>=0?t.slice(r,r+e):0===r?t.slice(e,t.length):t.slice(Math.max(0,r+e),r)):t)}}function sn(t){function n(e,r){return r=r?-1:1,e.map(function(e){var n=1,i=d;if(T(e))i=e;else if(w(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(n="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e),i.constant))){var o=i();i=function(t){return t[o]}}return{get:i,descending:n*r}})}function i(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function o(t,e){return"function"==typeof t.valueOf&&(t=t.valueOf(),i(t))?t:g(t)&&(t=t.toString(),i(t))?t:e}function s(t,e){var r=typeof t;return null===t?(r="string",t="null"):"string"===r?t=t.toLowerCase():"object"===r&&(t=o(t,e)),{value:t,type:r}}function a(t,e){var r=0;return t.type===e.type?t.value!==e.value&&(r=t.value<e.value?-1:1):r=t.type<e.type?-1:1,r}return function(t,i,o){function u(t,e){return{value:t,predicateValues:c.map(function(r){return s(r.get(t),e)})}}function l(t,e){for(var r=0,n=0,i=c.length;i>n&&!(r=a(t.predicateValues[n],e.predicateValues[n])*c[n].descending);++n);return r}if(null==t)return t;if(!r(t))throw e("orderBy")("notarray","Expected array but received: {0}",t);zn(i)||(i=[i]),0===i.length&&(i=["+"]);var c=n(i,o);c.push({get:function(){return{}},descending:o?-1:1});var h=Array.prototype.map.call(t,u);return h.sort(l),t=h.map(function(t){return t.value})}}function an(t){return T(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function un(t,e){t.$name=e}function ln(t,e,r,i,o){var s=this,a=[];s.$error={},s.$$success={},s.$pending=void 0,s.$name=o(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,s.$$parentForm=Do,s.$rollbackViewValue=function(){n(a,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){n(a,function(t){t.$commitViewValue()})},s.$addControl=function(t){pt(t.$name,"input"),a.push(t),t.$name&&(s[t.$name]=t),t.$$parentForm=s},s.$$renameControl=function(t,e){var r=t.$name;s[r]===t&&delete s[r],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],n(s.$pending,function(e,r){s.$setValidity(r,null,t)}),n(s.$error,function(e,r){s.$setValidity(r,null,t)}),n(s.$$success,function(e,r){s.$setValidity(r,null,t)}),F(a,t),t.$$parentForm=Do},Tn({ctrl:this,$element:t,set:function(t,e,r){var n=t[e];if(n){var i=n.indexOf(r);-1===i&&n.push(r)}else t[e]=[r]},unset:function(t,e,r){var n=t[e];n&&(F(n,r),0===n.length&&delete t[e])},$animate:i}),s.$setDirty=function(){i.removeClass(t,ys),i.addClass(t,vs),s.$dirty=!0,s.$pristine=!1,s.$$parentForm.$setDirty()},s.$setPristine=function(){i.setClass(t,ys,vs+" "+ko),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,n(a,function(t){t.$setPristine()})},s.$setUntouched=function(){n(a,function(t){t.$setUntouched()})},s.$setSubmitted=function(){i.addClass(t,ko),s.$submitted=!0,s.$$parentForm.$setSubmitted()}}function cn(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function hn(t,e,r,n,i,o){pn(t,e,r,n,i,o),cn(n)}function pn(t,e,r,n,i,o){var s=Pn(e[0].type);if(!i.android){var a=!1;e.on("compositionstart",function(){a=!0}),e.on("compositionend",function(){a=!1,l()})}var u,l=function(t){if(u&&(o.defer.cancel(u),u=null),!a){var i=e.val(),l=t&&t.type;"password"===s||r.ngTrim&&"false"===r.ngTrim||(i=Yn(i)),(n.$viewValue!==i||""===i&&n.$$hasNativeValidators)&&n.$setViewValue(i,l)}};if(i.hasEvent("input"))e.on("input",l);else{var c=function(t,e,r){u||(u=o.defer(function(){u=null,e&&e.value===r||l(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",l),Yo[s]&&n.$$hasNativeValidators&&s===r.type&&e.on(Wo,function(t){if(!u){var e=this[Mn],r=e.badInput,n=e.typeMismatch;u=o.defer(function(){u=null,e.badInput===r&&e.typeMismatch===n||l(t)})}}),n.$render=function(){var t=n.$isEmpty(n.$viewValue)?"":n.$viewValue;e.val()!==t&&e.val(t)}}function fn(t,e){if(S(t))return t;if(w(t)){Vo.lastIndex=0;var r=Vo.exec(t);if(r){var n=+r[1],i=+r[2],o=0,s=0,a=0,u=0,l=Kr(n),c=7*(i-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds()),new Date(n,0,l.getDate()+c,o,s,a,u)}}return NaN}function dn(t,e){return function(r,i){var o,s;if(S(r))return r;if(w(r)){if('"'==r.charAt(0)&&'"'==r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),Fo.test(r))return new Date(r);if(t.lastIndex=0,o=t.exec(r))return o.shift(),s=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},n(o,function(t,r){r<e.length&&(s[e[r]]=+t)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function mn(t,e,r,n){return function(i,o,s,a,u,l,c){function h(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function p(t){return v(t)&&!S(t)?r(t)||void 0:t}gn(i,o,s,a),pn(i,o,s,a,u,l);var f,d=a&&a.$options&&a.$options.timezone;if(a.$$parserName=t,a.$parsers.push(function(t){if(a.$isEmpty(t))return null;if(e.test(t)){var n=r(t,f);return d&&(n=K(n,d)),n}}),a.$formatters.push(function(t){if(t&&!S(t))throw Ts("datefmt","Expected `{0}` to be a date",t);return h(t)?(f=t,f&&d&&(f=K(f,d,!0)),c("date")(t,n,d)):(f=null,"")}),v(s.min)||s.ngMin){var m;a.$validators.min=function(t){return!h(t)||y(m)||r(t)>=m},s.$observe("min",function(t){m=p(t),a.$validate()})}if(v(s.max)||s.ngMax){var g;a.$validators.max=function(t){return!h(t)||y(g)||r(t)<=g},s.$observe("max",function(t){g=p(t),a.$validate()})}}}function gn(t,e,r,n){var i=e[0],o=n.$$hasNativeValidators=_(i.validity);o&&n.$parsers.push(function(t){var r=e.prop(Mn)||{};return r.badInput||r.typeMismatch?void 0:t})}function yn(t,e,r,n,i,o){if(gn(t,e,r,n),pn(t,e,r,n,i,o),n.$$parserName="number",n.$parsers.push(function(t){return n.$isEmpty(t)?null:Ho.test(t)?parseFloat(t):void 0}),n.$formatters.push(function(t){if(!n.$isEmpty(t)){if(!x(t))throw Ts("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),v(r.min)||r.ngMin){var s;n.$validators.min=function(t){return n.$isEmpty(t)||y(s)||t>=s},r.$observe("min",function(t){v(t)&&!x(t)&&(t=parseFloat(t,10)),s=x(t)&&!isNaN(t)?t:void 0,n.$validate()})}if(v(r.max)||r.ngMax){var a;n.$validators.max=function(t){return n.$isEmpty(t)||y(a)||a>=t},r.$observe("max",function(t){v(t)&&!x(t)&&(t=parseFloat(t,10)),a=x(t)&&!isNaN(t)?t:void 0,n.$validate()})}}function vn(t,e,r,n,i,o){pn(t,e,r,n,i,o),cn(n),n.$$parserName="url",n.$validators.url=function(t,e){var r=t||e;return n.$isEmpty(r)||Uo.test(r)}}function _n(t,e,r,n,i,o){pn(t,e,r,n,i,o),cn(n),n.$$parserName="email",n.$validators.email=function(t,e){var r=t||e;return n.$isEmpty(r)||Bo.test(r)}}function bn(t,e,r,n){y(r.name)&&e.attr("name",s());var i=function(t){e[0].checked&&n.$setViewValue(r.value,t&&t.type)};e.on("click",i),n.$render=function(){var t=r.value;e[0].checked=t==n.$viewValue},r.$observe("value",n.$render)}function wn(t,e,r,n,i){var o;if(v(n)){if(o=t(n),!o.constant)throw Ts("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",r,n);return o(e)}return i}function xn(t,e,r,n,i,o,s,a){var u=wn(a,t,"ngTrueValue",r.ngTrueValue,!0),l=wn(a,t,"ngFalseValue",r.ngFalseValue,!1),c=function(t){n.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),n.$render=function(){e[0].checked=n.$viewValue},n.$isEmpty=function(t){return t===!1},n.$formatters.push(function(t){return H(t,u)}),n.$parsers.push(function(t){return t?u:l})}function Sn(t,e){return t="ngClass"+t,["$animate",function(r){function i(t,e){var r=[];t:for(var n=0;n<t.length;n++){for(var i=t[n],o=0;o<e.length;o++)if(i==e[o])continue t;r.push(i)}return r}function o(t){var e=[];return zn(t)?(n(t,function(t){e=e.concat(o(t))}),e):w(t)?t.split(" "):_(t)?(n(t,function(t,r){t&&(e=e.concat(r.split(" ")))}),e):t}return{restrict:"AC",link:function(s,a,u){function l(t){var e=h(t,1);u.$addClass(e)}function c(t){var e=h(t,-1);u.$removeClass(e)}function h(t,e){var r=a.data("$classCounts")||mt(),i=[];return n(t,function(t){(e>0||r[t])&&(r[t]=(r[t]||0)+e,r[t]===+(e>0)&&i.push(t))}),a.data("$classCounts",r),i.join(" ")}function p(t,e){var n=i(e,t),o=i(t,e);n=h(n,1),o=h(o,-1),n&&n.length&&r.addClass(a,n),o&&o.length&&r.removeClass(a,o)}function f(t){if(e===!0||s.$index%2===e){var r=o(t||[]);if(d){if(!H(t,d)){var n=o(d);p(n,r)}}else l(r)}d=zn(t)?t.map(function(t){return B(t)}):B(t)}var d;s.$watch(u[t],f,!0),u.$observe("class",function(e){f(s.$eval(u[t]))}),"ngClass"!==t&&s.$watch("$index",function(r,n){var i=1&r;if(i!==(1&n)){var a=o(s.$eval(u[t]));i===e?l(a):c(a)}})}}}]}function Tn(t){function e(t,e,a){y(e)?r("$pending",t,a):n("$pending",t,a),I(e)?e?(c(s.$error,t,a),l(s.$$success,t,a)):(l(s.$error,t,a),c(s.$$success,t,a)):(c(s.$error,t,a),c(s.$$success,t,a)),s.$pending?(i(ws,!0),s.$valid=s.$invalid=void 0,o("",null)):(i(ws,!1),s.$valid=En(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var u;u=s.$pending&&s.$pending[t]?void 0:s.$error[t]?!1:s.$$success[t]?!0:null,o(t,u),s.$$parentForm.$setValidity(t,u,s)}function r(t,e,r){s[t]||(s[t]={}),l(s[t],e,r)}function n(t,e,r){s[t]&&c(s[t],e,r),En(s[t])&&(s[t]=void 0)}function i(t,e){e&&!u[t]?(h.addClass(a,t),u[t]=!0):!e&&u[t]&&(h.removeClass(a,t),u[t]=!1)}function o(t,e){t=t?"-"+ut(t,"-"):"",i(ms+t,e===!0),i(gs+t,e===!1)}var s=t.ctrl,a=t.$element,u={},l=t.set,c=t.unset,h=t.$animate;u[gs]=!(u[ms]=a.hasClass(ms)),s.$setValidity=e}function En(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function An(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}var Cn=/^\/(.+)\/([a-z]*)$/,Mn="validity",Rn=Object.prototype.hasOwnProperty,Pn=function(t){return w(t)?t.toLowerCase():t},In=function(t){return w(t)?t.toUpperCase():t},On=function(t){return w(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Dn=function(t){return w(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(Pn=On,In=Dn);var kn,$n,Nn,Ln,Fn=[].slice,Un=[].splice,Bn=[].push,Hn=Object.prototype.toString,qn=Object.getPrototypeOf,Gn=e("ng"),Vn=t.angular||(t.angular={}),jn=0;kn=t.document.documentMode,f.$inject=[],d.$inject=[];var zn=Array.isArray,Wn=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Yn=function(t){return w(t)?t.trim():t},Xn=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Kn=function(){function e(){try{return new Function(""),!1}catch(t){return!0}}if(!v(Kn.rules)){var r=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(r){var n=r.getAttribute("ng-csp")||r.getAttribute("data-ng-csp");Kn.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else Kn.rules={noUnsafeEval:e(),noInlineStyle:!1}}return Kn.rules},Zn=function(){if(v(Zn.name_))return Zn.name_;var e,r,n,i,o=Jn.length;for(r=0;o>r;++r)if(n=Jn[r],e=t.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=e.getAttribute(n+"jq");break}return Zn.name_=i},Qn=/:/g,Jn=["ng-","data-ng-","ng:","x-ng-"],ti=/[A-Z]/g,ei=!1,ri=1,ni=2,ii=3,oi=8,si=9,ai=11,ui={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Rt.expando="ng339";var li=Rt.cache={},ci=1,hi=function(t,e,r){t.addEventListener(e,r,!1)},pi=function(t,e,r){t.removeEventListener(e,r,!1)};Rt._data=function(t){return this.cache[t[this.expando]]||{}};var fi=/([\:\-\_]+(.))/g,di=/^moz([A-Z])/,mi={mouseleave:"mouseout",mouseenter:"mouseover"},gi=e("jqLite"),yi=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,vi=/<|&#?\w+;/,_i=/<([\w:-]+)/,bi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wi.optgroup=wi.option,wi.tbody=wi.tfoot=wi.colgroup=wi.caption=wi.thead,wi.th=wi.td;var xi=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},Si=Rt.prototype={ready:function(e){function r(){n||(n=!0,e())}var n=!1;"complete"===t.document.readyState?t.setTimeout(r):(this.on("DOMContentLoaded",r),Rt(t).on("load",r))},toString:function(){var t=[];return n(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return $n(t>=0?this[t]:this[this.length+t])},length:0,push:Bn,sort:[].sort,splice:[].splice},Ti={};n("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Ti[Pn(t)]=t});var Ei={};n("input,select,option,textarea,button,form,details".split(","),function(t){Ei[t]=!0});var Ai={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};n({data:$t,removeData:Dt,hasData:Tt,cleanData:Et},function(t,e){Rt[e]=t}),n({data:$t,inheritedData:Ht,scope:function(t){return $n.data(t,"$scope")||Ht(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return $n.data(t,"$isolateScope")||$n.data(t,"$isolateScopeNoTemplate")},controller:Bt,injector:function(t){return Ht(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Nt,css:function(t,e,r){return e=wt(e),v(r)?void(t.style[e]=r):t.style[e]},attr:function(t,e,r){var n=t.nodeType;if(n!==ii&&n!==ni&&n!==oi){var i=Pn(e);if(Ti[i]){if(!v(r))return t[e]||(t.attributes.getNamedItem(e)||f).specified?i:void 0;r?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(v(r))t.setAttribute(e,r);else if(t.getAttribute){var o=t.getAttribute(e,2);return null===o?void 0:o}}},prop:function(t,e,r){return v(r)?void(t[e]=r):t[e]},text:function(){function t(t,e){if(y(e)){var r=t.nodeType;return r===ri||r===ii?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(y(e)){if(t.multiple&&"select"===L(t)){var r=[];return n(t.options,function(t){t.selected&&r.push(t.value||t.text)}),0===r.length?null:r}return t.value}t.value=e},html:function(t,e){return y(e)?t.innerHTML:(It(t,!0),void(t.innerHTML=e))},empty:qt},function(t,e){Rt.prototype[e]=function(e,r){var n,i,o=this.length;if(t!==qt&&y(2==t.length&&t!==Nt&&t!==Bt?e:r)){if(_(e)){for(n=0;o>n;n++)if(t===$t)t(this[n],e);else for(i in e)t(this[n],i,e[i]);return this}for(var s=t.$dv,a=y(s)?Math.min(o,1):o,u=0;a>u;u++){var l=t(this[u],e,r);s=s?s+l:l}return s}for(n=0;o>n;n++)t(this[n],e,r);return this}}),n({removeData:Dt,on:function(t,e,r,n){if(v(n))throw gi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(St(t)){var i=kt(t,!0),o=i.events,s=i.handle;s||(s=i.handle=Wt(t,o));for(var a=e.indexOf(" ")>=0?e.split(" "):[e],u=a.length,l=function(e,n,i){var a=o[e];a||(a=o[e]=[],a.specialHandlerWrapper=n,"$destroy"===e||i||hi(t,e,s)),a.push(r)};u--;)e=a[u],mi[e]?(l(mi[e],Xt),l(e,void 0,!0)):l(e)}},off:Ot,one:function(t,e,r){t=$n(t),t.on(e,function n(){t.off(e,r),t.off(e,n)}),t.on(e,r)},replaceWith:function(t,e){var r,i=t.parentNode;It(t),n(new Rt(e),function(e){r?i.insertBefore(e,r.nextSibling):i.replaceChild(e,t),r=e})},children:function(t){var e=[];return n(t.childNodes,function(t){t.nodeType===ri&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var r=t.nodeType;if(r===ri||r===ai){e=new Rt(e);for(var n=0,i=e.length;i>n;n++){var o=e[n];t.appendChild(o)}}},prepend:function(t,e){if(t.nodeType===ri){var r=t.firstChild;n(new Rt(e),function(e){t.insertBefore(e,r)})}},wrap:function(t,e){Mt(t,$n(e).eq(0).clone()[0])},remove:Gt,detach:function(t){Gt(t,!0)},after:function(t,e){var r=t,n=t.parentNode;e=new Rt(e);for(var i=0,o=e.length;o>i;i++){var s=e[i];n.insertBefore(s,r.nextSibling),r=s}},addClass:Ft,removeClass:Lt,toggleClass:function(t,e,r){e&&n(e.split(" "),function(e){var n=r;y(n)&&(n=!Nt(t,e)),(n?Ft:Lt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==ai?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:Pt,triggerHandler:function(t,e,r){var i,o,s,a=e.type||e,u=kt(t),c=u&&u.events,h=c&&c[a];h&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:f,type:a,target:t},e.type&&(i=l(i,e)),o=B(h),s=r?[i].concat(r):[i],n(o,function(e){i.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(t,e){Rt.prototype[e]=function(e,r,n){for(var i,o=0,s=this.length;s>o;o++)y(i)?(i=t(this[o],e,r,n),v(i)&&(i=$n(i))):Ut(i,t(this[o],e,r,n));return v(i)?i:this},Rt.prototype.bind=Rt.prototype.on,Rt.prototype.unbind=Rt.prototype.off}),Qt.prototype={put:function(t,e){this[Zt(t,this.nextUid)]=e},get:function(t){return this[Zt(t,this.nextUid)]},remove:function(t){var e=this[t=Zt(t,this.nextUid)];return delete this[t],e}};var Ci=[function(){this.$get=[function(){return Qt}]}],Mi=/^([^\(]+?)=>/,Ri=/^[^\(]*\(\s*([^\)]*)\)/m,Pi=/,/,Ii=/^\s*(_?)(\S+?)\1\s*$/,Oi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Di=e("$injector");re.$$annotate=ee;var ki=e("$animate"),$i=1,Ni="ng-animate",Li=function(){this.$get=f},Fi=function(){var t=new Qt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(r,i){function o(t,e,r){var i=!1;return e&&(e=w(e)?e.split(" "):zn(e)?e:[],n(e,function(e){e&&(i=!0,t[e]=r)})),i}function s(){n(e,function(e){var r=t.get(e);if(r){var i=se(e.attr("class")),o="",s="";n(r,function(t,e){var r=!!i[e];t!==r&&(t?o+=(o.length?" ":"")+e:s+=(s.length?" ":"")+e)}),n(e,function(t){o&&Ft(t,o),s&&Lt(t,s)}),t.remove(e)}}),e.length=0}function a(r,n,a){var u=t.get(r)||{},l=o(u,n,!0),c=o(u,a,!1);(l||c)&&(t.put(r,u),e.push(r),1===e.length&&i.$$postDigest(s))}return{enabled:f,on:f,off:f,pin:f,push:function(t,e,n,i){i&&i(),n=n||{},n.from&&t.css(n.from),n.to&&t.css(n.to),(n.addClass||n.removeClass)&&a(t,n.addClass,n.removeClass);var o=new r;return o.complete(),o}}}]},Ui=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(r,n){if(r&&"."!==r.charAt(0))throw ki("notcsel","Expecting class selector starting with '.' got '{0}'.",r);var i=r+"-animation";e.$$registeredAnimations[r.substr(1)]=i,t.factory(i,n)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+Ni+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw ki("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Ni)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,r){if(r){var n=oe(r);!n||n.parentNode||n.previousElementSibling||(r=null)}r?r.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(r,n,i,o){return n=n&&$n(n),i=i&&$n(i),n=n||i.parent(),e(r,n,i),t.push(r,"enter",ae(o))},move:function(r,n,i,o){return n=n&&$n(n),i=i&&$n(i),n=n||i.parent(),e(r,n,i),t.push(r,"move",ae(o))},leave:function(e,r){return t.push(e,"leave",ae(r),function(){e.remove()})},addClass:function(e,r,n){return n=ae(n),n.addClass=ie(n.addclass,r),t.push(e,"addClass",n)},removeClass:function(e,r,n){return n=ae(n),n.removeClass=ie(n.removeClass,r),t.push(e,"removeClass",n)},setClass:function(e,r,n,i){return i=ae(i),i.addClass=ie(i.addClass,r),i.removeClass=ie(i.removeClass,n),t.push(e,"setClass",i)},animate:function(e,r,n,i,o){return o=ae(o),o.from=o.from?l(o.from,r):r,o.to=o.to?l(o.to,n):n,i=i||"ng-inline-animate",o.tempClasses=ie(o.tempClasses,i),t.push(e,"animate",o)}}}]}],Bi=function(){this.$get=["$$rAF",function(t){function e(e){r.push(e),r.length>1||t(function(){for(var t=0;t<r.length;t++)r[t]();r=[]})}var r=[];return function(){var t=!1;return e(function(){t=!0}),function(r){t?r():e(r)}}}]},Hi=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,r,i,o){function s(t){this.setHost(t);var e=r(),n=function(t){o(t,0,!1)};this._doneCallbacks=[],this._tick=function(t){var r=i[0];r&&r.hidden?n(t):e(t)},this._state=0}var a=0,u=1,l=2;return s.chain=function(t,e){function r(){return n===t.length?void e(!0):void t[n](function(t){return t===!1?void e(!1):(n++,void r())})}var n=0;r()},s.all=function(t,e){function r(r){o=o&&r,++i===t.length&&e(o)}var i=0,o=!0;n(t,function(t){t.done(r)})},s.prototype={setHost:function(t){this.host=t||{}},done:function(t){this._state===l?t():this._doneCallbacks.push(t)},progress:f,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,r){e.done(function(e){e===!1?r():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;e._state===a&&(e._state=u,e._tick(function(){e._resolve(t)}))},_resolve:function(t){this._state!==l&&(n(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=l)}},s}]},qi=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,r){return function(e,n){function i(){return t(function(){o(),a||u.complete(),a=!0}),u}function o(){s.addClass&&(e.addClass(s.addClass),s.addClass=null),s.removeClass&&(e.removeClass(s.removeClass),s.removeClass=null),s.to&&(e.css(s.to),s.to=null)}var s=n||{};s.$$prepared||(s=U(s)),s.cleanupStyles&&(s.from=s.to=null),s.from&&(e.css(s.from),s.from=null);var a,u=new r;return{start:i,end:i}}}]},Gi=e("$compile"),Vi=new pe;fe.$inject=["$provide","$$sanitizeUriProvider"],de.prototype.isFirstChange=function(){return this.previousValue===Vi};var ji=/^((?:x|data)[\:\-_])/i,zi=e("$controller"),Wi=/^(\S+)(\s+as\s+([\w$]+))?$/,Yi=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof $n&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Xi="application/json",Ki={"Content-Type":Xi+";charset=utf-8"},Zi=/^\[|^\{(?!\{)/,Qi={"[":/]$/,"{":/}$/},Ji=/^\)\]\}',?\n/,to=e("$http"),eo=function(t){return function(){throw to("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}},ro=Vn.$interpolateMinErr=e("$interpolate");ro.throwNoconcat=function(t){throw ro("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},ro.interr=function(t,e){return ro("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var no=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,io={http:80,https:443,ftp:21},oo=e("$location"),so={$$html5:!1,$$replace:!1,absUrl:Ye("$$absUrl"),url:function(t){if(y(t))return this.$$url;var e=no.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Ye("$$protocol"),host:Ye("$$host"),port:Ye("$$port"),path:Xe("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(w(t)||x(t))t=t.toString(),this.$$search=J(t);else{if(!_(t))throw oo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=U(t,{}),n(t,function(e,r){null==e&&delete t[r]}),this.$$search=t}break;default:y(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Xe("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};n([We,ze,je],function(t){t.prototype=Object.create(so),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==je||!this.$$html5)throw oo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=y(e)?null:e,this}});var ao=e("$parse"),uo=Function.prototype.call,lo=Function.prototype.apply,co=Function.prototype.bind,ho=mt();n("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){ho[t]=!0});var po={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},fo=function(t){this.options=t};fo.prototype={constructor:fo,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var r=e+this.peek(),n=r+this.peek(2),i=ho[e],o=ho[r],s=ho[n];if(i||o||s){var a=s?n:o?r:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||"\x0B"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();
if(!e)return t;var r=t.charCodeAt(0),n=e.charCodeAt(0);return r>=55296&&56319>=r&&n>=56320&&57343>=n?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,r){r=r||this.index;var n=v(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,r)+"]":" "+r;throw ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var r=Pn(this.text.charAt(this.index));if("."==r||this.isNumber(r))t+=r;else{var n=this.peek();if("e"==r&&this.isExpOperator(n))t+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&"e"==t.charAt(t.length-1))t+=r;else{if(!this.isExpOperator(r)||n&&this.isNumber(n)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var r="",n=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(n+=o,i){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,r+=String.fromCharCode(parseInt(s,16))}else{var a=po[o];r+=a||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:n,constant:!0,value:r});r+=o}this.index++}this.throwError("Unterminated quote",e)}};var mo=function(t,e){this.lexer=t,this.options=e};mo.Program="Program",mo.ExpressionStatement="ExpressionStatement",mo.AssignmentExpression="AssignmentExpression",mo.ConditionalExpression="ConditionalExpression",mo.LogicalExpression="LogicalExpression",mo.BinaryExpression="BinaryExpression",mo.UnaryExpression="UnaryExpression",mo.CallExpression="CallExpression",mo.MemberExpression="MemberExpression",mo.Identifier="Identifier",mo.Literal="Literal",mo.ArrayExpression="ArrayExpression",mo.Property="Property",mo.ObjectExpression="ObjectExpression",mo.ThisExpression="ThisExpression",mo.LocalsExpression="LocalsExpression",mo.NGValueParameter="NGValueParameter",mo.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:mo.Program,body:t}},expressionStatement:function(){return{type:mo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:mo.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,r=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:mo.ConditionalExpression,test:r,alternate:t,consequent:e}):r},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:mo.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:mo.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:mo.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:mo.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:mo.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:mo.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:mo.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:mo.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:mo.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:mo.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:mo.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],r={type:mo.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return r},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:mo.Identifier,name:t.text}},constant:function(){return{type:mo.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:mo.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:mo.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:mo.ObjectExpression,properties:e}},throwError:function(t,e){throw ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,r,n){return this.peekAhead(0,t,e,r,n)},peekAhead:function(t,e,r,n,i){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===r||s===n||s===i||!e&&!r&&!n&&!i)return o}return!1},expect:function(t,e,r,n){var i=this.peek(t,e,r,n);return i?(this.tokens.shift(),i):!1},selfReferential:{"this":{type:mo.ThisExpression},$locals:{type:mo.LocalsExpression}}},pr.prototype={compile:function(t,e){var r=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},sr(i,r.$filter);var o,s="";if(this.stage="assign",o=lr(i)){this.state.computing="assign";var a=this.nextId();this.recurse(o,a),this.return_(a),s="fn.assign="+this.generateFunction("assign","s,v,l")}var u=ar(i.body);r.stage="inputs",n(u,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(t,i),r.return_(i),r.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,Qe,tr,er,Je,rr,nr,ir,t);return this.state=this.stage=void 0,c.literal=cr(i),c.constant=hr(i),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,r=this;return n(e,function(e){t.push("var "+e+"="+r.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return n(this.state.filters,function(r,n){t.push(r+"=$filter("+e.escape(n)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,i,o,s){var a,u,l,c,h=this;if(i=i||f,!s&&v(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,i,o,!0));switch(t.type){case mo.Program:n(t.body,function(e,r){h.recurse(e.expression,void 0,void 0,function(t){u=t}),r!==t.body.length-1?h.current().body.push(u,";"):h.return_(u)});break;case mo.Literal:c=this.escape(t.value),this.assign(e,c),i(c);break;case mo.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){u=t}),c=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,c),i(c);break;case mo.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){u=t}),c="+"===t.operator?this.plus(a,u):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(u,0):"("+a+")"+t.operator+"("+u+")",this.assign(e,c),i(c);break;case mo.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),i(e);break;case mo.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),i(e);break;case mo.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),Qe(t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),function(){h.if_("inputs"===h.stage||"s",function(){o&&1!==o&&h.if_(h.not(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),(h.state.expensiveChecks||dr(t.name))&&h.addEnsureSafeObject(e),i(e);break;case mo.MemberExpression:a=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,a,void 0,function(){h.if_(h.notNull(a),function(){o&&1!==o&&h.addEnsureSafeAssignContext(a),t.computed?(u=h.nextId(),h.recurse(t.property,u),h.getStringValue(u),h.addEnsureSafeMemberName(u),o&&1!==o&&h.if_(h.not(h.computedMember(a,u)),h.lazyAssign(h.computedMember(a,u),"{}")),c=h.ensureSafeObject(h.computedMember(a,u)),h.assign(e,c),r&&(r.computed=!0,r.name=u)):(Qe(t.property.name),o&&1!==o&&h.if_(h.not(h.nonComputedMember(a,t.property.name)),h.lazyAssign(h.nonComputedMember(a,t.property.name),"{}")),c=h.nonComputedMember(a,t.property.name),(h.state.expensiveChecks||dr(t.property.name))&&(c=h.ensureSafeObject(c)),h.assign(e,c),r&&(r.computed=!1,r.name=t.property.name))},function(){h.assign(e,"undefined")}),i(e)},!!o);break;case mo.CallExpression:e=e||this.nextId(),t.filter?(u=h.filter(t.callee.name),l=[],n(t.arguments,function(t){var e=h.nextId();h.recurse(t,e),l.push(e)}),c=u+"("+l.join(",")+")",h.assign(e,c),i(e)):(u=h.nextId(),a={},l=[],h.recurse(t.callee,u,a,function(){h.if_(h.notNull(u),function(){h.addEnsureSafeFunction(u),n(t.arguments,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(h.ensureSafeObject(t))})}),a.name?(h.state.expensiveChecks||h.addEnsureSafeObject(a.context),c=h.member(a.context,a.name,a.computed)+"("+l.join(",")+")"):c=u+"("+l.join(",")+")",c=h.ensureSafeObject(c),h.assign(e,c)},function(){h.assign(e,"undefined")}),i(e)}));break;case mo.AssignmentExpression:if(u=this.nextId(),a={},!ur(t.left))throw ao("lval","Trying to assign a value to a non l-value");this.recurse(t.left,void 0,a,function(){h.if_(h.notNull(a.context),function(){h.recurse(t.right,u),h.addEnsureSafeObject(h.member(a.context,a.name,a.computed)),h.addEnsureSafeAssignContext(a.context),c=h.member(a.context,a.name,a.computed)+t.operator+u,h.assign(e,c),i(e||c)})},1);break;case mo.ArrayExpression:l=[],n(t.elements,function(t){h.recurse(t,h.nextId(),void 0,function(t){l.push(t)})}),c="["+l.join(",")+"]",this.assign(e,c),i(c);break;case mo.ObjectExpression:l=[],n(t.properties,function(t){h.recurse(t.value,h.nextId(),void 0,function(e){l.push(h.escape(t.key.type===mo.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+l.join(",")+"}",this.assign(e,c),i(c);break;case mo.ThisExpression:this.assign(e,"s"),i("s");break;case mo.LocalsExpression:this.assign(e,"l"),i("l");break;case mo.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var r=t+"."+e,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[r]},assign:function(t,e){return t?(this.current().body.push(t,"=",e,";"),t):void 0},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,r){if(t===!0)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var r=/[$_a-zA-Z][$_a-zA-Z0-9]*/,n=/[^$_a-zA-Z0-9]/g;return r.test(e)?t+"."+e:t+'["'+e.replace(n,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,r){return r?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,r,n,i,o){var s=this;return function(){s.recurse(t,e,r,n,i,o)}},lazyAssign:function(t,e){var r=this;return function(){r.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(w(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw ao("esc","IMPOSSIBLE")},nextId:function(t,e){var r="v"+this.state.nextId++;return t||this.current().vars.push(r+(e?"="+e:"")),r},current:function(){return this.state[this.state.computing]}},fr.prototype={compile:function(t,e){var r=this,i=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,sr(i,r.$filter);var o,s;(o=lr(i))&&(s=this.recurse(o));var a,u=ar(i.body);u&&(a=[],n(u,function(t,e){var n=r.recurse(t);t.input=n,a.push(n),t.watchId=e}));var l=[];n(i.body,function(t){l.push(r.recurse(t.expression))});var c=0===i.body.length?f:1===i.body.length?l[0]:function(t,e){var r;return n(l,function(n){r=n(t,e)}),r};return s&&(c.assign=function(t,e,r){return s(t,r,e)}),a&&(c.inputs=a),c.literal=cr(i),c.constant=hr(i),c},recurse:function(t,e,r){var i,o,s,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case mo.Literal:return this.value(t.value,e);case mo.UnaryExpression:return o=this.recurse(t.argument),this["unary"+t.operator](o,e);case mo.BinaryExpression:return i=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](i,o,e);case mo.LogicalExpression:return i=this.recurse(t.left),o=this.recurse(t.right),this["binary"+t.operator](i,o,e);case mo.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case mo.Identifier:return Qe(t.name,a.expression),a.identifier(t.name,a.expensiveChecks||dr(t.name),e,r,a.expression);case mo.MemberExpression:return i=this.recurse(t.object,!1,!!r),t.computed||(Qe(t.property.name,a.expression),o=t.property.name),t.computed&&(o=this.recurse(t.property)),t.computed?this.computedMember(i,o,e,r,a.expression):this.nonComputedMember(i,o,a.expensiveChecks,e,r,a.expression);case mo.CallExpression:return s=[],n(t.arguments,function(t){s.push(a.recurse(t))}),t.filter&&(o=this.$filter(t.callee.name)),t.filter||(o=this.recurse(t.callee,!0)),t.filter?function(t,r,n,i){for(var a=[],u=0;u<s.length;++u)a.push(s[u](t,r,n,i));var l=o.apply(void 0,a,i);return e?{context:void 0,name:void 0,value:l}:l}:function(t,r,n,i){var u,l=o(t,r,n,i);if(null!=l.value){tr(l.context,a.expression),er(l.value,a.expression);for(var c=[],h=0;h<s.length;++h)c.push(tr(s[h](t,r,n,i),a.expression));u=tr(l.value.apply(l.context,c),a.expression)}return e?{value:u}:u};case mo.AssignmentExpression:return i=this.recurse(t.left,!0,1),o=this.recurse(t.right),function(t,r,n,s){var u=i(t,r,n,s),l=o(t,r,n,s);return tr(u.value,a.expression),rr(u.context),u.context[u.name]=l,e?{value:l}:l};case mo.ArrayExpression:return s=[],n(t.elements,function(t){s.push(a.recurse(t))}),function(t,r,n,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](t,r,n,i));return e?{value:o}:o};case mo.ObjectExpression:return s=[],n(t.properties,function(t){s.push({key:t.key.type===mo.Identifier?t.key.name:""+t.key.value,value:a.recurse(t.value)})}),function(t,r,n,i){for(var o={},a=0;a<s.length;++a)o[s[a].key]=s[a].value(t,r,n,i);return e?{value:o}:o};case mo.ThisExpression:return function(t){return e?{value:t}:t};case mo.LocalsExpression:return function(t,r){return e?{value:r}:r};case mo.NGValueParameter:return function(t,r,n){return e?{value:n}:n}}},"unary+":function(t,e){return function(r,n,i,o){var s=t(r,n,i,o);return s=v(s)?+s:0,e?{value:s}:s}},"unary-":function(t,e){return function(r,n,i,o){var s=t(r,n,i,o);return s=v(s)?-s:0,e?{value:s}:s}},"unary!":function(t,e){return function(r,n,i,o){var s=!t(r,n,i,o);return e?{value:s}:s}},"binary+":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s),u=e(n,i,o,s),l=ir(a,u);return r?{value:l}:l}},"binary-":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s),u=e(n,i,o,s),l=(v(a)?a:0)-(v(u)?u:0);return r?{value:l}:l}},"binary*":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)*e(n,i,o,s);return r?{value:a}:a}},"binary/":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)/e(n,i,o,s);return r?{value:a}:a}},"binary%":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)%e(n,i,o,s);return r?{value:a}:a}},"binary===":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)===e(n,i,o,s);return r?{value:a}:a}},"binary!==":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)!==e(n,i,o,s);return r?{value:a}:a}},"binary==":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)==e(n,i,o,s);return r?{value:a}:a}},"binary!=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)!=e(n,i,o,s);return r?{value:a}:a}},"binary<":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)<e(n,i,o,s);return r?{value:a}:a}},"binary>":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)>e(n,i,o,s);return r?{value:a}:a}},"binary<=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)<=e(n,i,o,s);return r?{value:a}:a}},"binary>=":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)>=e(n,i,o,s);return r?{value:a}:a}},"binary&&":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)&&e(n,i,o,s);return r?{value:a}:a}},"binary||":function(t,e,r){return function(n,i,o,s){var a=t(n,i,o,s)||e(n,i,o,s);return r?{value:a}:a}},"ternary?:":function(t,e,r,n){return function(i,o,s,a){var u=t(i,o,s,a)?e(i,o,s,a):r(i,o,s,a);return n?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,r,n,i){return function(o,s,a,u){var l=s&&t in s?s:o;n&&1!==n&&l&&!l[t]&&(l[t]={});var c=l?l[t]:void 0;return e&&tr(c,i),r?{context:l,name:t,value:c}:c}},computedMember:function(t,e,r,n,i){return function(o,s,a,u){var l,c,h=t(o,s,a,u);return null!=h&&(l=e(o,s,a,u),l=Je(l),Qe(l,i),n&&1!==n&&(rr(h),h&&!h[l]&&(h[l]={})),c=h[l],tr(c,i)),r?{context:h,name:l,value:c}:c}},nonComputedMember:function(t,e,r,n,i,o){return function(s,a,u,l){var c=t(s,a,u,l);i&&1!==i&&(rr(c),c&&!c[e]&&(c[e]={}));var h=null!=c?c[e]:void 0;return(r||dr(e))&&tr(h,o),n?{context:c,name:e,value:h}:h}},inputs:function(t,e){return function(r,n,i,o){return o?o[e]:t(r,n,i)}}};var go=function(t,e,r){this.lexer=t,this.$filter=e,this.options=r,this.ast=new mo(t,r),this.astCompiler=r.csp?new fr(this.ast,e):new pr(this.ast,e)};go.prototype={constructor:go,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var yo=Object.prototype.valueOf,vo=e("$sce"),_o={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},bo=e("$compile"),wo=t.document.createElement("a"),xo=Ir(t.location.href);kr.$inject=["$document"],Nr.$inject=["$provide"];var So=22,To=".",Eo="0";Hr.$inject=["$locale"],qr.$inject=["$locale"];var Ao={yyyy:Wr("FullYear",4,0,!1,!0),yy:Wr("FullYear",2,0,!0,!0),y:Wr("FullYear",1,0,!1,!0),MMMM:Yr("Month"),MMM:Yr("Month",!0),MM:Wr("Month",2,1),M:Wr("Month",1,1),LLLL:Yr("Month",!1,!0),dd:Wr("Date",2),d:Wr("Date",1),HH:Wr("Hours",2),H:Wr("Hours",1),hh:Wr("Hours",2,-12),h:Wr("Hours",1,-12),mm:Wr("Minutes",2),m:Wr("Minutes",1),ss:Wr("Seconds",2),s:Wr("Seconds",1),sss:Wr("Milliseconds",3),EEEE:Yr("Day"),EEE:Yr("Day",!0),a:Jr,Z:Xr,ww:Qr(2),w:Qr(1),G:tn,GG:tn,GGG:tn,GGGG:en},Co=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Mo=/^\-?\d+$/;rn.$inject=["$locale"];var Ro=m(Pn),Po=m(In);sn.$inject=["$parse"];var Io=m({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var r="[object SVGAnimatedString]"===Hn.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(r)||t.preventDefault()})}}}}),Oo={};n(Ti,function(t,e){function r(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}if("multiple"!=t){var n=me("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,e,i)}),Oo[n]=function(){return{restrict:"A",priority:100,link:i}}}}),n(Ai,function(t,e){Oo[e]=function(){return{priority:100,link:function(t,r,n){if("ngPattern"===e&&"/"==n.ngPattern.charAt(0)){var i=n.ngPattern.match(Cn);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(n[e],function(t){n.$set(e,t)})}}}}),n(["src","srcset","href"],function(t){var e=me("ng-"+t);Oo[e]=function(){return{priority:99,link:function(r,n,i){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===Hn.call(n.prop("href"))&&(s="xlinkHref",i.$attr[s]="xlink:href",o=null),i.$observe(e,function(e){return e?(i.$set(s,e),void(kn&&o&&n.prop(o,i[s]))):void("href"===t&&i.$set(s,null))})}}}});var Do={$addControl:f,$$renameControl:un,$removeControl:f,$setValidity:f,$setDirty:f,$setPristine:f,$setSubmitted:f},ko="ng-submitted";ln.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var $o=function(t){return["$timeout","$parse",function(e,r){function n(t){return""===t?r('this[""]').assign:r(t).assign||f}var i={name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:ln,compile:function(r,i){r.addClass(ys).addClass(ms);var o=i.name?"name":t&&i.ngForm?"ngForm":!1;return{pre:function(t,r,i,s){var a=s[0];if(!("action"in i)){var u=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};hi(r[0],"submit",u),r.on("$destroy",function(){e(function(){pi(r[0],"submit",u)},0,!1)})}var c=s[1]||a.$$parentForm;c.$addControl(a);var h=o?n(a.$name):f;o&&(h(t,a),i.$observe(o,function(e){a.$name!==e&&(h(t,void 0),a.$$parentForm.$$renameControl(a,e),(h=n(a.$name))(t,a))})),r.on("$destroy",function(){a.$$parentForm.$removeControl(a),h(t,void 0),l(a,Do)})}}}};return i}]},No=$o(),Lo=$o(!0),Fo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Uo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Bo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ho=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,qo=/^(\d{4,})-(\d{2})-(\d{2})$/,Go=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Vo=/^(\d{4,})-W(\d\d)$/,jo=/^(\d{4,})-(\d\d)$/,zo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Wo="keydown wheel mousedown",Yo=mt();n("date,datetime-local,month,time,week".split(","),function(t){Yo[t]=!0});var Xo={text:hn,date:mn("date",qo,dn(qo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mn("datetimelocal",Go,dn(Go,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mn("time",zo,dn(zo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mn("week",Vo,fn,"yyyy-Www"),month:mn("month",jo,dn(jo,["yyyy","MM"]),"yyyy-MM"),number:yn,url:vn,email:_n,radio:bn,checkbox:xn,hidden:f,button:f,submit:f,reset:f,file:f},Ko=["$browser","$sniffer","$filter","$parse",function(t,e,r,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,s,a){a[0]&&(Xo[Pn(s.type)]||Xo.text)(i,o,s,a[0],e,t,r,n)}}}}],Zo=/^(true|false|\d+)$/,Qo=function(){return{restrict:"A",priority:100,compile:function(t,e){return Zo.test(e.ngValue)?function(t,e,r){r.$set("value",t.$eval(r.ngValue))}:function(t,e,r){t.$watch(r.ngValue,function(t){r.$set("value",t)})}}}},Jo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,n){t.$$addBindingInfo(r,n.ngBind),r=r[0],e.$watch(n.ngBind,function(t){r.textContent=y(t)?"":t})}}}}],ts=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,n,i){var o=t(n.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(n,o.expressions),n=n[0],i.$observe("ngBindTemplate",function(t){n.textContent=y(t)?"":t})}}}}],es=["$sce","$parse","$compile",function(t,e,r){return{restrict:"A",compile:function(n,i){var o=e(i.ngBindHtml),s=e(i.ngBindHtml,function(t){return(t||"").toString()});return r.$$addBindingClass(n),function(e,n,i){r.$$addBindingInfo(n,i.ngBindHtml),e.$watch(s,function(){n.html(t.getTrustedHtml(o(e))||"")})}}}}],rs=m({restrict:"A",require:"ngModel",link:function(t,e,r,n){n.$viewChangeListeners.push(function(){t.$eval(r.ngChange)})}}),ns=Sn("",!0),is=Sn("Odd",0),os=Sn("Even",1),ss=an({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),as=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],us={},ls={blur:!0,focus:!0};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=me("ng-"+t);us[e]=["$parse","$rootScope",function(r,n){return{restrict:"A",compile:function(i,o){var s=r(o[e],null,!0);return function(e,r){r.on(t,function(r){var i=function(){s(e,{$event:r})};ls[t]&&n.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var cs=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,n,i,o,s){var a,u,l;r.$watch(i.ngIf,function(r){r?u||s(function(r,o){u=o,r[r.length++]=e.$$createComment("end ngIf",i.ngIf),a={clone:r},t.enter(r,n.parent(),n)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),a&&(l=dt(a.clone),t.leave(l).then(function(){l=null}),a=null))})}}}],hs=["$templateRequest","$anchorScroll","$animate",function(t,e,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Vn.noop,compile:function(n,i){var o=i.ngInclude||i.src,s=i.onload||"",a=i.autoscroll;return function(n,i,u,l,c){var h,p,f,d=0,m=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),f&&(r.leave(f).then(function(){p=null}),p=f,f=null)};n.$watch(o,function(o){var u=function(){!v(a)||a&&!n.$eval(a)||e()},p=++d;o?(t(o,!0).then(function(t){if(!n.$$destroyed&&p===d){var e=n.$new();l.template=t;var a=c(e,function(t){m(),r.enter(t,null,i).then(u)});h=e,f=a,h.$emit("$includeContentLoaded",o),n.$eval(s)}},function(){n.$$destroyed||p===d&&(m(),n.$emit("$includeContentError",o))}),n.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],ps=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(r,n,i,o){return Hn.call(n[0]).match(/SVG/)?(n.empty(),void e(At(o.template,t.document).childNodes)(r,function(t){n.append(t)},{futureParentElement:n})):(n.html(o.template),void e(n.contents())(r))}}}],fs=an({priority:450,compile:function(){return{pre:function(t,e,r){t.$eval(r.ngInit)}}}}),ds=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var o=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,a=s?Yn(o):o,u=function(t){if(!y(t)){var e=[];return t&&n(t.split(a),function(t){t&&e.push(s?Yn(t):t)}),e}};i.$parsers.push(u),i.$formatters.push(function(t){return zn(t)?t.join(o):void 0}),i.$isEmpty=function(t){return!t||!t.length}}}},ms="ng-valid",gs="ng-invalid",ys="ng-pristine",vs="ng-dirty",_s="ng-untouched",bs="ng-touched",ws="ng-pending",xs="ng-empty",Ss="ng-not-empty",Ts=e("ngModel"),Es=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,o,s,a,u,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(r.name||"",!1)(t),this.$$parentForm=Do;var h,p=o(r.ngModel),d=p.assign,m=p,g=d,_=null,b=this;this.$$setOptions=function(t){if(b.$options=t,t&&t.getterSetter){var e=o(r.ngModel+"()"),n=o(r.ngModel+"($$$p)");m=function(t){var r=p(t);return T(r)&&(r=e(t)),r},g=function(t,e){T(p(t))?n(t,{$$$p:e}):d(t,e)}}else if(!p.assign)throw Ts("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,Z(i))},this.$render=f,this.$isEmpty=function(t){return y(t)||""===t||null===t||t!==t},this.$$updateEmptyClasses=function(t){b.$isEmpty(t)?(s.removeClass(i,Ss),s.addClass(i,xs)):(s.removeClass(i,xs),s.addClass(i,Ss))};var w=0;Tn({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:s}),this.$setPristine=function(){b.$dirty=!1,b.$pristine=!0,s.removeClass(i,vs),s.addClass(i,ys)},this.$setDirty=function(){b.$dirty=!0,b.$pristine=!1,s.removeClass(i,ys),s.addClass(i,vs),b.$$parentForm.$setDirty()},this.$setUntouched=function(){b.$touched=!1,b.$untouched=!0,s.setClass(i,_s,bs)},this.$setTouched=function(){b.$touched=!0,b.$untouched=!1,s.setClass(i,bs,_s)},this.$rollbackViewValue=function(){a.cancel(_),b.$viewValue=b.$$lastCommittedViewValue,b.$render()},this.$validate=function(){if(!x(b.$modelValue)||!isNaN(b.$modelValue)){var t=b.$$lastCommittedViewValue,e=b.$$rawModelValue,r=b.$valid,n=b.$modelValue,i=b.$options&&b.$options.allowInvalid;
b.$$runValidators(e,t,function(t){i||r===t||(b.$modelValue=t?e:void 0,b.$modelValue!==n&&b.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var t=b.$$parserName||"parse";return y(h)?(a(t,null),!0):(h||(n(b.$validators,function(t,e){a(e,null)}),n(b.$asyncValidators,function(t,e){a(e,null)})),a(t,h),h)}function o(){var r=!0;return n(b.$validators,function(n,i){var o=n(t,e);r=r&&o,a(i,o)}),r?!0:(n(b.$asyncValidators,function(t,e){a(e,null)}),!1)}function s(){var r=[],i=!0;n(b.$asyncValidators,function(n,o){var s=n(t,e);if(!O(s))throw Ts("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),r.push(s.then(function(){a(o,!0)},function(){i=!1,a(o,!1)}))}),r.length?l.all(r).then(function(){u(i)},f):u(!0)}function a(t,e){c===w&&b.$setValidity(t,e)}function u(t){c===w&&r(t)}w++;var c=w;return i()&&o()?void s():void u(!1)},this.$commitViewValue=function(){var t=b.$viewValue;a.cancel(_),(b.$$lastCommittedViewValue!==t||""===t&&b.$$hasNativeValidators)&&(b.$$updateEmptyClasses(t),b.$$lastCommittedViewValue=t,b.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){b.$modelValue!==o&&b.$$writeModelToScope()}var r=b.$$lastCommittedViewValue,n=r;if(h=y(n)?void 0:!0)for(var i=0;i<b.$parsers.length;i++)if(n=b.$parsers[i](n),y(n)){h=!1;break}x(b.$modelValue)&&isNaN(b.$modelValue)&&(b.$modelValue=m(t));var o=b.$modelValue,s=b.$options&&b.$options.allowInvalid;b.$$rawModelValue=n,s&&(b.$modelValue=n,e()),b.$$runValidators(n,b.$$lastCommittedViewValue,function(t){s||(b.$modelValue=t?n:void 0,e())})},this.$$writeModelToScope=function(){g(t,b.$modelValue),n(b.$viewChangeListeners,function(t){try{t()}catch(r){e(r)}})},this.$setViewValue=function(t,e){b.$viewValue=t,b.$options&&!b.$options.updateOnDefault||b.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var r,n=0,i=b.$options;i&&v(i.debounce)&&(r=i.debounce,x(r)?n=r:x(r[e])?n=r[e]:x(r["default"])&&(n=r["default"])),a.cancel(_),n?_=a(function(){b.$commitViewValue()},n):u.$$phase?b.$commitViewValue():t.$apply(function(){b.$commitViewValue()})},t.$watch(function(){var e=m(t);if(e!==b.$modelValue&&(b.$modelValue===b.$modelValue||e===e)){b.$modelValue=b.$$rawModelValue=e,h=void 0;for(var r=b.$formatters,n=r.length,i=e;n--;)i=r[n](i);b.$viewValue!==i&&(b.$$updateEmptyClasses(i),b.$viewValue=b.$$lastCommittedViewValue=i,b.$render(),b.$$runValidators(e,i,f))}return e})}],As=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Es,priority:1,compile:function(e){return e.addClass(ys).addClass(_s).addClass(ms),{pre:function(t,e,r,n){var i=n[0],o=n[1]||i.$$parentForm;i.$$setOptions(n[2]&&n[2].$options),o.$addControl(i),r.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,r,n,i){var o=i[0];o.$options&&o.$options.updateOn&&r.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),r.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Cs=/(\s+|^)default(\s+|$)/,Ms=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var r=this;this.$options=U(t.$eval(e.ngModelOptions)),v(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Yn(this.$options.updateOn.replace(Cs,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Rs=an({terminal:!0,priority:1e3}),Ps=e("ngOptions"),Is=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Os=["$compile","$document","$parse",function(e,i,o){function s(t,e,n){function i(t,e,r,n,i){this.selectValue=t,this.viewValue=e,this.label=r,this.group=n,this.disabled=i}function s(t){var e;if(!l&&r(t))e=t;else{e=[];for(var n in t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n)}return e}var a=t.match(Is);if(!a)throw Ps("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,Z(e));var u=a[5]||a[7],l=a[6],c=/ as /.test(a[0])&&a[1],h=a[9],p=o(a[2]?a[1]:u),f=c&&o(c),d=f||p,m=h&&o(h),g=h?function(t,e){return m(n,e)}:function(t){return Zt(t)},y=function(t,e){return g(t,S(t,e))},v=o(a[2]||a[1]),_=o(a[3]||""),b=o(a[4]||""),w=o(a[8]),x={},S=l?function(t,e){return x[l]=e,x[u]=t,x}:function(t){return x[u]=t,x};return{trackBy:h,getTrackByValue:y,getWatchables:o(w,function(t){var e=[];t=t||[];for(var r=s(t),i=r.length,o=0;i>o;o++){var u=t===r?o:r[o],l=t[u],c=S(l,u),h=g(l,c);if(e.push(h),a[2]||a[1]){var p=v(n,c);e.push(p)}if(a[4]){var f=b(n,c);e.push(f)}}return e}),getOptions:function(){for(var t=[],e={},r=w(n)||[],o=s(r),a=o.length,u=0;a>u;u++){var l=r===o?u:o[u],c=r[l],p=S(c,l),f=d(n,p),m=g(f,p),x=v(n,p),T=_(n,p),E=b(n,p),A=new i(m,f,x,T,E);t.push(A),e[m]=A}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[y(t)]},getViewValueFromOption:function(t){return h?Vn.copy(t.viewValue):t.viewValue}}}}}function a(t,r,o,a){function c(t,e){var r=u.cloneNode(!1);e.appendChild(r),h(t,r)}function h(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}function p(){var t=S&&d.readValue();if(S)for(var e=S.items.length-1;e>=0;e--){var n=S.items[e];Gt(n.group?n.element.parentNode:n.element)}S=T.getOptions();var i={};if(w&&r.prepend(f),S.items.forEach(function(t){var e;v(t.group)?(e=i[t.group],e||(e=l.cloneNode(!1),E.appendChild(e),e.label=t.group,i[t.group]=e),c(t,e)):c(t,E)}),r[0].appendChild(E),m.$render(),!m.$isEmpty(t)){var o=d.readValue(),s=T.trackBy||g;(s?H(t,o):t===o)||(m.$setViewValue(o),m.$render())}}for(var f,d=a[0],m=a[1],g=o.multiple,y=0,_=r.children(),b=_.length;b>y;y++)if(""===_[y].value){f=_.eq(y);break}var w=!!f,x=$n(u.cloneNode(!1));x.val("?");var S,T=s(o.ngOptions,r,t),E=i[0].createDocumentFragment(),A=function(){w||r.prepend(f),r.val(""),f.prop("selected",!0),f.attr("selected",!0)},C=function(){w||f.remove()},M=function(){r.prepend(x),r.val("?"),x.prop("selected",!0),x.attr("selected",!0)},R=function(){x.remove()};g?(m.$isEmpty=function(t){return!t||0===t.length},d.writeValue=function(t){S.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=S.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},d.readValue=function(){var t=r.val()||[],e=[];return n(t,function(t){var r=S.selectValueMap[t];r&&!r.disabled&&e.push(S.getViewValueFromOption(r))}),e},T.trackBy&&t.$watchCollection(function(){return zn(m.$viewValue)?m.$viewValue.map(function(t){return T.getTrackByValue(t)}):void 0},function(){m.$render()})):(d.writeValue=function(t){var e=S.getOptionFromViewValue(t);e?(r[0].value!==e.selectValue&&(R(),C(),r[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||w?(R(),A()):(C(),M())},d.readValue=function(){var t=S.selectValueMap[r.val()];return t&&!t.disabled?(C(),R(),S.getViewValueFromOption(t)):null},T.trackBy&&t.$watch(function(){return T.getTrackByValue(m.$viewValue)},function(){m.$render()})),w?(f.remove(),e(f)(t),f.removeClass("ng-scope")):f=$n(u.cloneNode(!1)),r.empty(),p(),t.$watchCollection(T.getWatchables,p)}var u=t.document.createElement("option"),l=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,r,n){n[0].registerOption=f},post:a}}}],Ds=["$locale","$interpolate","$log",function(t,e,r){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(s,a,u){function l(t){a.text(t||"")}var c,h=u.count,p=u.$attr.when&&a.attr(u.$attr.when),d=u.offset||0,m=s.$eval(p)||{},g={},v=e.startSymbol(),_=e.endSymbol(),b=v+h+"-"+d+_,w=Vn.noop;n(u,function(t,e){var r=o.exec(e);if(r){var n=(r[1]?"-":"")+Pn(r[2]);m[n]=a.attr(u.$attr[e])}}),n(m,function(t,r){g[r]=e(t.replace(i,b))}),s.$watch(h,function(e){var n=parseFloat(e),i=isNaN(n);if(i||n in m||(n=t.pluralCat(n-d)),n!==c&&!(i&&x(c)&&isNaN(c))){w();var o=g[n];y(o)?(null!=e&&r.debug("ngPluralize: no rule defined for '"+n+"' in "+p),w=f,l()):w=s.$watch(o,l),c=n}})}}}],ks=["$parse","$animate","$compile",function(t,i,o){var s="$$NG_REMOVED",a=e("ngRepeat"),u=function(t,e,r,n,i,o,s){t[r]=n,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},l=function(t){return t.clone[0]},c=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,h){var p=h.ngRepeat,f=o.$$createComment("end ngRepeat",p),d=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var m=d[1],g=d[2],y=d[3],v=d[4];if(d=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!d)throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var _=d[3]||d[1],b=d[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var w,x,S,T,E={$id:Zt};return v?w=t(v):(S=function(t,e){return Zt(e)},T=function(t){return t}),function(t,e,o,h,d){w&&(x=function(e,r,n){return b&&(E[b]=e),E[_]=r,E.$index=n,w(t,E)});var m=mt();t.$watchCollection(g,function(o){var h,g,v,w,E,A,C,M,R,P,I,O,D=e[0],k=mt();if(y&&(t[y]=o),r(o))R=o,M=x||S;else{M=x||T,R=[];for(var $ in o)Rn.call(o,$)&&"$"!==$.charAt(0)&&R.push($)}for(w=R.length,I=new Array(w),h=0;w>h;h++)if(E=o===R?h:R[h],A=o[E],C=M(E,A,h),m[C])P=m[C],delete m[C],k[C]=P,I[h]=P;else{if(k[C])throw n(I,function(t){t&&t.scope&&(m[t.id]=t)}),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,C,A);I[h]={id:C,scope:void 0,clone:void 0},k[C]=!0}for(var N in m){if(P=m[N],O=dt(P.clone),i.leave(O),O[0].parentNode)for(h=0,g=O.length;g>h;h++)O[h][s]=!0;P.scope.$destroy()}for(h=0;w>h;h++)if(E=o===R?h:R[h],A=o[E],P=I[h],P.scope){v=D;do v=v.nextSibling;while(v&&v[s]);l(P)!=v&&i.move(dt(P.clone),null,D),D=c(P),u(P.scope,h,_,A,b,E,w)}else d(function(t,e){P.scope=e;var r=f.cloneNode(!1);t[t.length++]=r,i.enter(t,null,D),D=r,P.clone=t,k[P.id]=P,u(P.scope,h,_,A,b,E,w)});m=k})}}}}],$s="ng-hide",Ns="ng-hide-animate",Ls=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,r,n){e.$watch(n.ngShow,function(e){t[e?"removeClass":"addClass"](r,$s,{tempClasses:Ns})})}}}],Fs=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,r,n){e.$watch(n.ngHide,function(e){t[e?"addClass":"removeClass"](r,$s,{tempClasses:Ns})})}}}],Us=an(function(t,e,r){t.$watch(r.ngStyle,function(t,r){r&&t!==r&&n(r,function(t,r){e.css(r,"")}),t&&e.css(t)},!0)}),Bs=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(r,i,o,s){var a=o.ngSwitch||o.on,u=[],l=[],c=[],h=[],p=function(t,e){return function(){t.splice(e,1)}};r.$watch(a,function(r){var i,o;for(i=0,o=c.length;o>i;++i)t.cancel(c[i]);for(c.length=0,i=0,o=h.length;o>i;++i){var a=dt(l[i].clone);h[i].$destroy();var f=c[i]=t.leave(a);f.then(p(c,i))}l.length=0,h.length=0,(u=s.cases["!"+r]||s.cases["?"])&&n(u,function(r){r.transclude(function(n,i){h.push(i);var o=r.element;n[n.length++]=e.$$createComment("end ngSwitchWhen");var s={clone:n};l.push(s),t.enter(n,o.parent(),o)})})})}}}],Hs=an({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,r,n,i){n.cases["!"+r.ngSwitchWhen]=n.cases["!"+r.ngSwitchWhen]||[],n.cases["!"+r.ngSwitchWhen].push({transclude:i,element:e})}}),qs=an({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,r,n,i){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:i,element:e})}}),Gs=e("ngTransclude"),Vs=an({restrict:"EAC",link:function(t,e,r,n,i){function o(t){t.length&&(e.empty(),e.append(t))}if(r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude=""),!i)throw Gs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(e));var s=r.ngTransclude||r.ngTranscludeSlot;i(o,null,s)}}),js=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,r){if("text/ng-template"==r.type){var n=r.id,i=e[0].text;t.put(n,i)}}}}],zs={$setViewValue:f,$render:f},Ws=["$element","$scope",function(e,r){var n=this,i=new Qt;n.ngModelCtrl=zs,n.unknownOption=$n(t.document.createElement("option")),n.renderUnknownOption=function(t){var r="? "+Zt(t)+" ?";n.unknownOption.val(r),e.prepend(n.unknownOption),e.val(r)},r.$on("$destroy",function(){n.renderUnknownOption=f}),n.removeUnknownOption=function(){n.unknownOption.parent()&&n.unknownOption.remove()},n.readValue=function(){return n.removeUnknownOption(),e.val()},n.writeValue=function(t){n.hasOption(t)?(n.removeUnknownOption(),e.val(t),""===t&&n.emptyOption.prop("selected",!0)):null==t&&n.emptyOption?(n.removeUnknownOption(),e.val("")):n.renderUnknownOption(t)},n.addOption=function(t,e){if(e[0].nodeType!==oi){pt(t,'"option value"'),""===t&&(n.emptyOption=e);var r=i.get(t)||0;i.put(t,r+1),n.ngModelCtrl.$render(),An(e)}},n.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.remove(t),""===t&&(n.emptyOption=void 0)):i.put(t,e-1))},n.hasOption=function(t){return!!i.get(t)},n.registerOption=function(t,e,r,i,o){if(i){var s;r.$observe("value",function(t){v(s)&&n.removeOption(s),s=t,n.addOption(t,e)})}else o?t.$watch(o,function(t,i){r.$set("value",t),i!==t&&n.removeOption(i),n.addOption(t,e)}):n.addOption(r.value,e);e.on("$destroy",function(){n.removeOption(r.value),n.ngModelCtrl.$render()})}}],Ys=function(){function t(t,e,r,i){var o=i[1];if(o){var s=i[0];if(s.ngModelCtrl=o,e.on("change",function(){t.$apply(function(){o.$setViewValue(s.readValue())})}),r.multiple){s.readValue=function(){var t=[];return n(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},s.writeValue=function(t){var r=new Qt(t);n(e.find("option"),function(t){t.selected=v(r.get(t.value))})};var a,u=NaN;t.$watch(function(){u!==o.$viewValue||H(a,o.$viewValue)||(a=B(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}}}function e(t,e,r,n){var i=n[1];if(i){var o=n[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Ws,priority:1,link:{pre:t,post:e}}},Xs=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,r){if(v(r.value))var n=t(r.value,!0);else{var i=t(e.text(),!0);i||r.$set("value",e.text())}return function(t,e,r){var o="$selectController",s=e.parent(),a=s.data(o)||s.parent().data(o);a&&a.registerOption(t,e,r,n,i)}}}}],Ks=m({restrict:"E",terminal:!1}),Zs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){n&&(r.required=!0,n.$validators.required=function(t,e){return!r.required||!n.$isEmpty(e)},r.$observe("required",function(){n.$validate()}))}}},Qs=function(){return{restrict:"A",require:"?ngModel",link:function(t,r,n,i){if(i){var o,s=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(w(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,Z(r));o=t||void 0,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||y(o)||o.test(e)}}}}},Js=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){if(n){var i=-1;r.$observe("maxlength",function(t){var e=h(t);i=isNaN(e)?-1:e,n.$validate()}),n.$validators.maxlength=function(t,e){return 0>i||n.$isEmpty(e)||e.length<=i}}}}},ta=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,n){if(n){var i=0;r.$observe("minlength",function(t){i=h(t)||0,n.$validate()}),n.$validators.minlength=function(t,e){return n.$isEmpty(e)||e.length>=i}}}}};return t.angular.bootstrap?void(t.console&&console.log("WARNING: Tried to load angular more than once.")):(lt(),_t(Vn),Vn.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return-1==e?0:t.length-e-1}function r(t,r){var n=r;void 0===n&&(n=Math.min(e(t),3));var i=Math.pow(10,n),o=(t*i|0)%i;return{v:n,f:o}}var n={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var i=0|t,o=r(t,e);return 1==i&&0==o.v?n.ONE:n.OTHER}})}]),void $n(t.document).ready(function(){it(t.document,ot)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},{}],25:[function(t,e,r){t("./angular"),e.exports=angular},{"./angular":24}],26:[function(require,module,exports){(function(global){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p5=t()}}(function(){var define,module,exports;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){},{}],2:[function(t,e,r){"use strict";r.argument=function(t,e){if(!t)throw new Error(e)},r.assert=r.argument},{}],3:[function(t,e,r){"use strict";function n(t,e,r,n,i){t.beginPath(),t.moveTo(e,r),t.lineTo(n,i),t.stroke()}r.line=n},{}],4:[function(t,e,r){"use strict";function n(t){this.font=t}function i(t){this.cmap=t}function o(t,e){this.encoding=t,this.charset=e}function s(t){var e;switch(t.version){case 1:this.names=r.standardNames.slice();break;case 2:for(this.names=new Array(t.numberOfGlyphs),e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<r.standardNames.length?this.names[e]=r.standardNames[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-r.standardNames.length];break;case 2.5:for(this.names=new Array(t.numberOfGlyphs),e=0;e<t.numberOfGlyphs;e++)this.names[e]=r.standardNames[e+t.glyphNameIndex[e]];break;case 3:this.names=[]}}function a(t){for(var e,r=t.tables.cmap.glyphIndexMap,n=Object.keys(r),i=0;i<n.length;i+=1){var o=n[i],s=r[o];e=t.glyphs.get(s),e.addUnicode(parseInt(o))}for(i=0;i<t.glyphs.length;i+=1)e=t.glyphs.get(i),t.cffEncoding?e.name=t.cffEncoding.charset[i]:e.name=t.glyphNames.glyphIndexToName(i)}var u=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],h=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];n.prototype.charToGlyphIndex=function(t){var e=t.charCodeAt(0),r=this.font.glyphs;if(!r)return null;for(var n=0;n<r.length;n+=1)for(var i=r.get(n),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===e)return n},i.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.charCodeAt(0)]||0},o.prototype.charToGlyphIndex=function(t){var e=t.charCodeAt(0),r=this.encoding[e];return this.charset.indexOf(r)},s.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},s.prototype.glyphIndexToName=function(t){return this.names[t]},r.cffStandardStrings=u,r.cffStandardEncoding=l,r.cffExpertEncoding=c,r.standardNames=h,r.DefaultEncoding=n,r.CmapEncoding=i,r.CffEncoding=o,r.GlyphNames=s,r.addGlyphNames=a},{}],5:[function(t,e,r){"use strict";function n(t){t=t||{},this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{
en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.supported=!0,this.glyphs=new a.GlyphSet(this,t.glyphs||[]),this.encoding=new s.DefaultEncoding(this),this.tables={}}var i=t("./path"),o=t("./tables/sfnt"),s=t("./encoding"),a=t("./glyphset");n.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},n.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},n.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r},n.prototype.stringToGlyphs=function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t[r];e.push(this.charToGlyph(n))}return e},n.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},n.prototype.nameToGlyph=function(t){var e=this.nametoGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r},n.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},n.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var r=this.getGposKerningValue;return r?r(t,e):this.kerningPairs[t+","+e]||0},n.prototype.forEachGlyph=function(t,e,r,n,i,o){e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:72,i=i||{};for(var s=void 0===i.kerning?!0:i.kerning,a=1/this.unitsPerEm*n,u=this.stringToGlyphs(t),l=0;l<u.length;l+=1){var c=u[l];if(o(c,e,r,n,i),c.advanceWidth&&(e+=c.advanceWidth*a),s&&l<u.length-1){var h=this.getKerningValue(c,u[l+1]);e+=h*a}}},n.prototype.getPath=function(t,e,r,n,o){var s=new i.Path;return this.forEachGlyph(t,e,r,n,o,function(t,e,r,n){var i=t.getPath(e,r,n);s.extend(i)}),s},n.prototype.draw=function(t,e,r,n,i,o){this.getPath(e,r,n,i,o).draw(t)},n.prototype.drawPoints=function(t,e,r,n,i,o){this.forEachGlyph(e,r,n,i,o,function(e,r,n,i){e.drawPoints(t,r,n,i)})},n.prototype.drawMetrics=function(t,e,r,n,i,o){this.forEachGlyph(e,r,n,i,o,function(e,r,n,i){e.drawMetrics(t,r,n,i)})},n.prototype.getEnglishName=function(t){var e=this.names[t];return e?e.en:void 0},n.prototype.validate=function(){function t(t,e){t||r.push(e)}function e(e){var r=n.getEnglishName(e);t(r&&r.trim().length>0,"No English "+e+" specified.")}var r=[],n=this;e("fontFamily"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),t(this.unitsPerEm>0,"No unitsPerEm specified.")},n.prototype.toTables=function(){return o.fontToTable(this)},n.prototype.toBuffer=function(){for(var t=this.toTables(),e=t.encode(),r=new ArrayBuffer(e.length),n=new Uint8Array(r),i=0;i<e.length;i++)n[i]=e[i];return r},n.prototype.download=function(){var t=this.getEnglishName("fontFamily"),e=this.getEnglishName("fontSubfamily"),r=t.replace(/\s/g,"")+"-"+e+".otf",n=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,n.byteLength,function(t){t.root.getFile(r,{create:!0},function(t){t.createWriter(function(e){var r=new DataView(n),i=new Blob([r],{type:"font/opentype"});e.write(i),e.addEventListener("writeend",function(){location.href=t.toURL()},!1)})})},function(t){throw t})},r.Font=n},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":27}],6:[function(t,e,r){"use strict";function n(t,e){var r=e||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(t){r=t}}}function i(t){this.bindConstructorValues(t)}var o=t("./check"),s=t("./draw"),a=t("./path");i.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],t.xMin&&(this.xMin=t.xMin),t.yMin&&(this.yMin=t.yMin),t.xMax&&(this.xMax=t.xMax),t.yMax&&(this.yMax=t.yMax),t.advanceWidth&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",n(this,t.path))},i.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},i.prototype.getPath=function(t,e,r){t=void 0!==t?t:0,e=void 0!==e?e:0,r=void 0!==r?r:72;for(var n=1/this.path.unitsPerEm*r,i=new a.Path,o=this.path.commands,s=0;s<o.length;s+=1){var u=o[s];"M"===u.type?i.moveTo(t+u.x*n,e+-u.y*n):"L"===u.type?i.lineTo(t+u.x*n,e+-u.y*n):"Q"===u.type?i.quadraticCurveTo(t+u.x1*n,e+-u.y1*n,t+u.x*n,e+-u.y*n):"C"===u.type?i.curveTo(t+u.x1*n,e+-u.y1*n,t+u.x2*n,e+-u.y2*n,t+u.x*n,e+-u.y*n):"Z"===u.type&&i.closePath()}return i},i.prototype.getContours=function(){if(void 0===this.points)return[];for(var t=[],e=[],r=0;r<this.points.length;r+=1){var n=this.points[r];e.push(n),n.lastPointOfContour&&(t.push(e),e=[])}return o.argument(0===e.length,"There are still points left in the current contour."),t},i.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],r=[],n=0;n<t.length;n+=1){var i=t[n];"Z"!==i.type&&(e.push(i.x),r.push(i.y)),"Q"!==i.type&&"C"!==i.type||(e.push(i.x1),r.push(i.y1)),"C"===i.type&&(e.push(i.x2),r.push(i.y2))}var o={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,r),leftSideBearing:0};return o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},i.prototype.draw=function(t,e,r,n){this.getPath(e,r,n).draw(t)},i.prototype.drawPoints=function(t,e,r,n){function i(e,r,n,i){var o=2*Math.PI;t.beginPath();for(var s=0;s<e.length;s+=1)t.moveTo(r+e[s].x*i,n+e[s].y*i),t.arc(r+e[s].x*i,n+e[s].y*i,2,0,o,!1);t.closePath(),t.fill()}e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var o=1/this.path.unitsPerEm*n,s=[],a=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&s.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}t.fillStyle="blue",i(s,e,r,o),t.fillStyle="red",i(a,e,r,o)},i.prototype.drawMetrics=function(t,e,r,n){var i;e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:24,i=1/this.path.unitsPerEm*n,t.lineWidth=1,t.strokeStyle="black",s.line(t,e,-1e4,e,1e4),s.line(t,-1e4,r,1e4,r);var o=this.xMin||0,a=this.yMin||0,u=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;t.strokeStyle="blue",s.line(t,e+o*i,-1e4,e+o*i,1e4),s.line(t,e+u*i,-1e4,e+u*i,1e4),s.line(t,-1e4,r+-a*i,1e4,r+-a*i),s.line(t,-1e4,r+-l*i,1e4,r+-l*i),t.strokeStyle="green",s.line(t,e+c*i,-1e4,e+c*i,1e4)},r.Glyph=i},{"./check":2,"./draw":3,"./path":10}],7:[function(t,e,r){"use strict";function n(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var r=0;r<e.length;r++)this.glyphs[r]=e[r];this.length=e&&e.length||0}function i(t,e){return new a.Glyph({index:e,font:t})}function o(t,e,r,n,i,o){return function(){var s=new a.Glyph({index:e,font:t});return s.path=function(){r(s,n,i);var e=o(t.glyphs,s);return e.unitsPerEm=t.unitsPerEm,e},s}}function s(t,e,r,n){return function(){var i=new a.Glyph({index:e,font:t});return i.path=function(){var e=r(t,i,n);return e.unitsPerEm=t.unitsPerEm,e},i}}var a=t("./glyph");n.prototype.get=function(t){return"function"==typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]()),this.glyphs[t]},n.prototype.push=function(t,e){this.glyphs[t]=e,this.length++},r.GlyphSet=n,r.glyphLoader=i,r.ttfGlyphLoader=o,r.cffGlyphLoader=s},{"./glyph":6}],8:[function(t,e,r){"use strict";function n(t){for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;n+=1)r[n]=t[n];return e}function i(e,r){var i=t("fs");i.readFile(e,function(t,e){return t?r(t.message):void r(null,n(e))})}function o(t,e){var r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?e("Font could not be loaded: "+r.statusText):e(null,r.response)},r.send()}function s(t){var e,r,n,i,o,s,a,u,h,f,R=new c.Font,P=new DataView(t,0),I=p.getFixed(P,0);if(1===I)R.outlinesFormat="truetype";else{if(I=p.getTag(P,0),"OTTO"!==I)throw new Error("Unsupported OpenType version "+I);R.outlinesFormat="cff"}for(var O=p.getUShort(P,4),D=12,k=0;O>k;k+=1){var $=p.getTag(P,D),N=p.getULong(P,D+8);switch($){case"cmap":R.tables.cmap=d.parse(P,N),R.encoding=new l.CmapEncoding(R.tables.cmap);break;case"fvar":i=N;break;case"head":R.tables.head=_.parse(P,N),R.unitsPerEm=R.tables.head.unitsPerEm,e=R.tables.head.indexToLocFormat;break;case"hhea":R.tables.hhea=b.parse(P,N),R.ascender=R.tables.hhea.ascender,R.descender=R.tables.hhea.descender,R.numberOfHMetrics=R.tables.hhea.numberOfHMetrics;break;case"hmtx":a=N;break;case"ltag":r=S.parse(P,N);break;case"maxp":R.tables.maxp=E.parse(P,N),R.numGlyphs=R.tables.maxp.numGlyphs;break;case"name":f=N;break;case"OS/2":R.tables.os2=C.parse(P,N);break;case"post":R.tables.post=M.parse(P,N),R.glyphNames=new l.GlyphNames(R.tables.post);break;case"glyf":o=N;break;case"loca":h=N;break;case"CFF ":n=N;break;case"kern":u=N;break;case"GPOS":s=N}D+=16}if(R.tables.name=A.parse(P,f,r),R.names=R.tables.name,o&&h){var L=0===e,F=T.parse(P,h,R.numGlyphs,L);R.glyphs=y.parse(P,o,F,R),w.parse(P,a,R.numberOfHMetrics,R.numGlyphs,R.glyphs),l.addGlyphNames(R)}else{if(!n)throw new Error("Font doesn't contain TrueType or CFF outlines.");m.parse(P,n,R),l.addGlyphNames(R)}return u?R.kerningPairs=x.parse(P,u):R.kerningPairs={},s&&v.parse(P,s,R),i&&(R.tables.fvar=g.parse(P,i,R.names)),R}function a(t,e){var r="undefined"==typeof window,n=r?i:o;n(t,function(t,r){if(t)return e(t);var n=s(r);return e(null,n)})}function u(e){var r=t("fs"),i=r.readFileSync(e);return s(n(i))}var l=t("./encoding"),c=t("./font"),h=t("./glyph"),p=t("./parse"),f=t("./path"),d=t("./tables/cmap"),m=t("./tables/cff"),g=t("./tables/fvar"),y=t("./tables/glyf"),v=t("./tables/gpos"),_=t("./tables/head"),b=t("./tables/hhea"),w=t("./tables/hmtx"),x=t("./tables/kern"),S=t("./tables/ltag"),T=t("./tables/loca"),E=t("./tables/maxp"),A=t("./tables/name"),C=t("./tables/os2"),M=t("./tables/post");r._parse=p,r.Font=c.Font,r.Glyph=h.Glyph,r.Path=f.Path,r.parse=s,r.load=a,r.loadSync=u},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/fvar":14,"./tables/glyf":15,"./tables/gpos":16,"./tables/head":17,"./tables/hhea":18,"./tables/hmtx":19,"./tables/kern":20,"./tables/loca":21,"./tables/ltag":22,"./tables/maxp":23,"./tables/name":24,"./tables/os2":25,"./tables/post":26,fs:1}],9:[function(t,e,r){"use strict";function n(t,e){this.data=t,this.offset=e,this.relativeOffset=0}r.getByte=function(t,e){return t.getUint8(e)},r.getCard8=r.getByte,r.getUShort=function(t,e){return t.getUint16(e,!1)},r.getCard16=r.getUShort,r.getShort=function(t,e){return t.getInt16(e,!1)},r.getULong=function(t,e){return t.getUint32(e,!1)},r.getFixed=function(t,e){var r=t.getInt16(e,!1),n=t.getUint16(e+2,!1);return r+n/65535},r.getTag=function(t,e){for(var r="",n=e;e+4>n;n+=1)r+=String.fromCharCode(t.getInt8(n));return r},r.getOffset=function(t,e,r){for(var n=0,i=0;r>i;i+=1)n<<=8,n+=t.getUint8(e+i);return n},r.getBytes=function(t,e,r){for(var n=[],i=e;r>i;i+=1)n.push(t.getUint8(i));return n},r.bytesToString=function(t){for(var e="",r=0;r<t.length;r+=1)e+=String.fromCharCode(t[r]);return e};var i={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};n.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},n.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},n.prototype.parseCard8=n.prototype.parseByte,n.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},n.prototype.parseCard16=n.prototype.parseUShort,n.prototype.parseSID=n.prototype.parseUShort,n.prototype.parseOffset16=n.prototype.parseUShort,n.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},n.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},n.prototype.parseULong=function(){var t=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},n.prototype.parseFixed=function(){var t=r.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},n.prototype.parseOffset16List=n.prototype.parseUShortList=function(t){for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,o=0;t>o;o++)e[o]=r.getUShort(n,i),i+=2;return this.relativeOffset+=2*t,e},n.prototype.parseString=function(t){var e=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=t;for(var i=0;t>i;i++)n+=String.fromCharCode(e.getUint8(r+i));return n},n.prototype.parseTag=function(){return this.parseString(4)},n.prototype.parseLongDateTime=function(){var t=r.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,t},n.prototype.parseFixed=function(){var t=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t/65536},n.prototype.parseVersion=function(){var t=r.getUShort(this.data,this.offset+this.relativeOffset),e=r.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+e/4096/10},n.prototype.skip=function(t,e){void 0===e&&(e=1),this.relativeOffset+=i[t]*e},r.Parser=n},{}],10:[function(t,e,r){"use strict";function n(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}n.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})},n.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})},n.prototype.curveTo=n.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.commands.push({type:"C",x1:t,y1:e,x2:r,y2:n,x:i,y:o})},n.prototype.quadTo=n.prototype.quadraticCurveTo=function(t,e,r,n){this.commands.push({type:"Q",x1:t,y1:e,x:r,y:n})},n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})},n.prototype.extend=function(t){t.commands&&(t=t.commands),Array.prototype.push.apply(this.commands,t)},n.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var r=this.commands[e];"M"===r.type?t.moveTo(r.x,r.y):"L"===r.type?t.lineTo(r.x,r.y):"C"===r.type?t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?t.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},n.prototype.toPathData=function(t){function e(e){return Math.round(e)===e?""+Math.round(e):e.toFixed(t)}function r(){for(var t="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(t+=" "),t+=e(n)}return t}t=void 0!==t?t:2;for(var n="",i=0;i<this.commands.length;i+=1){var o=this.commands[i];"M"===o.type?n+="M"+r(o.x,o.y):"L"===o.type?n+="L"+r(o.x,o.y):"C"===o.type?n+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?n+="Q"+r(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(n+="Z")}return n},n.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&"black"!==this.fill&&(e+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>"},r.Path=n},{}],11:[function(t,e,r){"use strict";function n(t,e,r){var n;for(n=0;n<e.length;n+=1){var i=e[n];this[i.name]=i.value}if(this.tableName=t,this.fields=e,r){var o=Object.keys(r);for(n=0;n<o.length;n+=1){var s=o[n],a=r[s];void 0!==this[s]&&(this[s]=a)}}}var i=t("./check"),o=t("./types").encode,s=t("./types").sizeOf;n.prototype.sizeOf=function(){for(var t=0,e=0;e<this.fields.length;e+=1){var r=this.fields[e],n=this[r.name];if(void 0===n&&(n=r.value),"function"==typeof n.sizeOf)t+=n.sizeOf();else{var o=s[r.type];i.assert("function"==typeof o,"Could not find sizeOf function for field"+r.name),t+=o(n)}}return t},n.prototype.encode=function(){return o.TABLE(this)},r.Table=n},{"./check":2,"./types":28}],12:[function(t,e,r){"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r+=1)if(!n(t[r],e[r]))return!1;return!0}return!1}function i(t,e,r){var n,i,o,s=[],a=[],u=$.getCard16(t,e);if(0!==u){var l=$.getByte(t,e+2);i=e+(u+1)*l+2;var c=e+3;for(n=0;u+1>n;n+=1)s.push($.getOffset(t,c,l)),c+=l;o=i+s[u]}else o=e+2;for(n=0;n<s.length-1;n+=1){var h=$.getBytes(t,i+s[n],i+s[n+1]);r&&(h=r(h)),a.push(h)}return{objects:a,startOffset:e,endOffset:o}}function o(t){for(var e="",r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=t.parseByte(),o=i>>4,s=15&i;if(o===r)break;if(e+=n[o],s===r)break;e+=n[s]}return parseFloat(e)}function s(t,e){var r,n,i,s;if(28===e)return r=t.parseByte(),n=t.parseByte(),r<<8|n;if(29===e)return r=t.parseByte(),n=t.parseByte(),i=t.parseByte(),s=t.parseByte(),r<<24|n<<16|i<<8|s;if(30===e)return o(t);if(e>=32&&246>=e)return e-139;if(e>=247&&250>=e)return r=t.parseByte(),256*(e-247)+r+108;if(e>=251&&254>=e)return r=t.parseByte(),256*-(e-251)-r-108;throw new Error("Invalid b0 "+e)}function a(t){for(var e={},r=0;r<t.length;r+=1){var n,i=t[r][0],o=t[r][1];if(n=1===o.length?o[0]:o,e.hasOwnProperty(i))throw new Error("Object "+e+" already has key "+i);e[i]=n}return e}function u(t,e,r){e=void 0!==e?e:0;var n=new $.Parser(t,e),i=[],o=[];for(r=void 0!==r?r:t.length;n.relativeOffset<r;){var u=n.parseByte();21>=u?(12===u&&(u=1200+n.parseByte()),i.push([u,o]),o=[]):o.push(s(n,u))}return a(i)}function l(t,e){return e=390>=e?D.cffStandardStrings[e]:t[e-391]}function c(t,e,r){for(var n={},i=0;i<e.length;i+=1){var o=e[i],s=t[o.op];void 0===s&&(s=void 0!==o.value?o.value:null),"SID"===o.type&&(s=l(r,s)),n[o.name]=s}return n}function h(t,e){var r={};return r.formatMajor=$.getCard8(t,e),r.formatMinor=$.getCard8(t,e+1),r.size=$.getCard8(t,e+2),r.offsetSize=$.getCard8(t,e+3),r.startOffset=e,r.endOffset=e+4,r}function p(t,e){var r=u(t,0,t.byteLength);return c(r,F,e)}function f(t,e,r,n){var i=u(t,e,r);return c(i,U,n)}function d(t,e,r,n){var i,o,s,a=new $.Parser(t,e);r-=1;var u=[".notdef"],c=a.parseCard8();if(0===c)for(i=0;r>i;i+=1)o=a.parseSID(),u.push(l(n,o));else if(1===c)for(;u.length<=r;)for(o=a.parseSID(),s=a.parseCard8(),i=0;s>=i;i+=1)u.push(l(n,o)),o+=1;else{if(2!==c)throw new Error("Unknown charset format "+c);for(;u.length<=r;)for(o=a.parseSID(),s=a.parseCard16(),i=0;s>=i;i+=1)u.push(l(n,o)),o+=1}return u}function m(t,e,r){var n,i,o={},s=new $.Parser(t,e),a=s.parseCard8();if(0===a){var u=s.parseCard8();for(n=0;u>n;n+=1)i=s.parseCard8(),o[i]=n}else{if(1!==a)throw new Error("Unknown encoding format "+a);var l=s.parseCard8();for(i=1,n=0;l>n;n+=1)for(var c=s.parseCard8(),h=s.parseCard8(),p=c;c+h>=p;p+=1)o[p]=i,i+=1}return new D.CffEncoding(o,r)}function g(t,e,r){function n(t,e){m&&c.closePath(),c.moveTo(t,e),m=!0}function i(){var e;e=h.length%2!==0,e&&!f&&(d=h.shift()+t.nominalWidthX),p+=h.length>>1,h.length=0,f=!0}function o(r){for(var v,_,b,w,x,S,T,E,A,C,M,R,P=0;P<r.length;){var I=r[P];switch(P+=1,I){case 1:i();break;case 3:i();break;case 4:h.length>1&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),y+=h.pop(),n(g,y);break;case 5:for(;h.length>0;)g+=h.shift(),y+=h.shift(),c.lineTo(g,y);break;case 6:for(;h.length>0&&(g+=h.shift(),c.lineTo(g,y),0!==h.length);)y+=h.shift(),c.lineTo(g,y);break;case 7:for(;h.length>0&&(y+=h.shift(),c.lineTo(g,y),0!==h.length);)g+=h.shift(),c.lineTo(g,y);break;case 8:for(;h.length>0;)s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 10:x=h.pop()+t.subrsBias,S=t.subrs[x],S&&o(S);break;case 11:return;case 12:switch(I=r[P],P+=1,I){case 35:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l+h.shift(),A=T+h.shift(),C=E+h.shift(),M=A+h.shift(),R=C+h.shift(),g=M+h.shift(),y=R+h.shift(),h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 34:s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l,A=T+h.shift(),C=l,M=A+h.shift(),R=y,g=M+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 36:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l,A=T+h.shift(),C=l,M=A+h.shift(),R=C+h.shift(),g=M+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 37:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l+h.shift(),A=T+h.shift(),C=E+h.shift(),M=A+h.shift(),R=C+h.shift(),Math.abs(M-g)>Math.abs(R-y)?g=M+h.shift():y=R+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+I),h.length=0}break;case 14:h.length>0&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),m&&(c.closePath(),m=!1);break;case 18:i();break;case 19:case 20:i(),P+=p+7>>3;break;case 21:h.length>2&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),y+=h.pop(),g+=h.pop(),n(g,y);break;case 22:h.length>1&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),g+=h.pop(),n(g,y);break;case 23:i();break;case 24:for(;h.length>2;)s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);g+=h.shift(),y+=h.shift(),c.lineTo(g,y);break;case 25:for(;h.length>6;)g+=h.shift(),y+=h.shift(),c.lineTo(g,y);s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 26:for(h.length%2&&(g+=h.shift());h.length>0;)s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u,y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 27:for(h.length%2&&(y+=h.shift());h.length>0;)s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l,c.curveTo(s,a,u,l,g,y);break;case 28:v=r[P],_=r[P+1],h.push((v<<24|_<<16)>>16),P+=2;break;case 29:x=h.pop()+t.gsubrsBias,S=t.gsubrs[x],S&&o(S);break;case 30:for(;h.length>0&&(s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y),0!==h.length);)s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),y=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y);break;case 31:for(;h.length>0&&(s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),y=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y),0!==h.length);)s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y);break;default:32>I?console.log("Glyph "+e.index+": unknown operator "+I):247>I?h.push(I-139):251>I?(v=r[P],P+=1,h.push(256*(I-247)+v+108)):255>I?(v=r[P],P+=1,h.push(256*-(I-251)-v-108)):(v=r[P],_=r[P+1],b=r[P+2],w=r[P+3],P+=4,h.push((v<<24|_<<16|b<<8|w)/65536))}}}var s,a,u,l,c=new N.Path,h=[],p=0,f=!1,d=t.defaultWidthX,m=!1,g=0,y=0;return o(r),e.advanceWidth=d,c}function y(t){var e;return e=t.length<1240?107:t.length<33900?1131:32768}function v(t,e,r){r.tables.cff={};var n=h(t,e),o=i(t,n.endOffset,$.bytesToString),s=i(t,o.endOffset),a=i(t,s.endOffset,$.bytesToString),u=i(t,a.endOffset);r.gsubrs=u.objects,r.gsubrsBias=y(r.gsubrs);var l=new DataView(new Uint8Array(s.objects[0]).buffer),c=p(l,a.objects);r.tables.cff.topDict=c;var v=e+c["private"][1],_=f(t,v,c["private"][0],a.objects);if(r.defaultWidthX=_.defaultWidthX,r.nominalWidthX=_.nominalWidthX,0!==_.subrs){var b=v+_.subrs,w=i(t,b);r.subrs=w.objects,r.subrsBias=y(r.subrs)}else r.subrs=[],r.subrsBias=0;var x=i(t,e+c.charStrings);r.nGlyphs=x.objects.length;var S=d(t,e+c.charset,r.nGlyphs,a.objects);0===c.encoding?r.cffEncoding=new D.CffEncoding(D.cffStandardEncoding,S):1===c.encoding?r.cffEncoding=new D.CffEncoding(D.cffExpertEncoding,S):r.cffEncoding=m(t,e+c.encoding,S),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new k.GlyphSet(r);for(var T=0;T<r.nGlyphs;T+=1){var E=x.objects[T];r.glyphs.push(T,k.cffGlyphLoader(r,T,g,E))}}function _(t,e){var r,n=D.cffStandardStrings.indexOf(t);return n>=0&&(r=n),n=e.indexOf(t),n>=0?r=n+D.cffStandardStrings.length:(r=D.cffStandardStrings.length+e.length,e.push(t)),r}function b(){return new L.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function w(t){var e=new L.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var r=0;r<t.length;r+=1)e.names.push({name:"name_"+r,type:"NAME",value:t[r]});return e}function x(t,e,r){for(var i={},o=0;o<t.length;o+=1){var s=t[o],a=e[s.name];void 0===a||n(a,s.value)||("SID"===s.type&&(a=_(a,r)),i[s.op]={name:s.name,type:s.type,value:a})}return i}function S(t,e){var r=new L.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=x(F,t,e),r}function T(t){var e=new L.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function E(t){var e=new L.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var r=0;r<t.length;r+=1)e.strings.push({name:"string_"+r,type:"STRING",value:t[r]});return e}function A(){return new L.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function C(t,e){for(var r=new L.Table("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<t.length;n+=1){var i=t[n],o=_(i,e);r.fields.push({name:"glyph_"+n,type:"SID",value:o})}return r}function M(t){var e=[],r=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var n=0,i=0,o=0;o<r.commands.length;o+=1){var s,a,u=r.commands[o];if("Q"===u.type){var l=1/3,c=2/3;u={type:"C",x:u.x,y:u.y,x1:l*n+c*u.x1,y1:l*i+c*u.y1,x2:l*u.x+c*u.x1,y2:l*u.y+c*u.y1}}if("M"===u.type)s=Math.round(u.x-n),a=Math.round(u.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(u.x),i=Math.round(u.y);else if("L"===u.type)s=Math.round(u.x-n),a=Math.round(u.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),n=Math.round(u.x),i=Math.round(u.y);else if("C"===u.type){var h=Math.round(u.x1-n),p=Math.round(u.y1-i),f=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);s=Math.round(u.x-u.x2),a=Math.round(u.y-u.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:p}),e.push({name:"dx2",type:"NUMBER",value:f}),e.push({name:"dy2",type:"NUMBER",value:d}),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(u.x),i=Math.round(u.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function R(t){for(var e=new L.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<t.length;r+=1){var n=t.get(r),i=M(n);e.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return e}function P(t,e){var r=new L.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=x(U,t,e),r}function I(t){var e=new L.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return e.privateDicts=[{name:"privateDict_0",type:"TABLE",value:t}],e}function O(t,e){for(var r,n=new L.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),i=1/e.unitsPerEm,o={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},s={},a=[],u=1;u<t.length;u+=1)r=t.get(u),a.push(r.name);var l=[];n.header=b(),n.nameIndex=w([e.postScriptName]);var c=S(o,l);n.topDictIndex=T(c),n.globalSubrIndex=A(),n.charsets=C(a,l),n.charStringsIndex=R(t);var h=P(s,l);n.privateDictIndex=I(h),n.stringIndex=E(l);var p=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return o.charset=p,o.encoding=0,o.charStrings=o.charset+n.charsets.sizeOf(),o["private"][1]=o.charStrings+n.charStringsIndex.sizeOf(),c=S(o,l),n.topDictIndex=T(c),n}var D=t("../encoding"),k=t("../glyphset"),$=t("../parse"),N=t("../path"),L=t("../table"),F=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],U=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];r.parse=v,r.make=O},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(t,e,r){"use strict";function n(t,e){var r,n={};n.version=u.getUShort(t,e),a.argument(0===n.version,"cmap table version should be 0."),n.numTables=u.getUShort(t,e+2);var i=-1;for(r=0;r<n.numTables;r+=1){var o=u.getUShort(t,e+4+8*r),s=u.getUShort(t,e+4+8*r+2);if(3===o&&(1===s||0===s)){i=u.getULong(t,e+4+8*r+4);break}}if(-1===i)return null;var l=new u.Parser(t,e+i);n.format=l.parseUShort(),a.argument(4===n.format,"Only format 4 cmap tables are supported."),n.length=l.parseUShort(),n.language=l.parseUShort();var c;n.segCount=c=l.parseUShort()>>1,l.skip("uShort",3),n.glyphIndexMap={};var h=new u.Parser(t,e+i+14),p=new u.Parser(t,e+i+16+2*c),f=new u.Parser(t,e+i+16+4*c),d=new u.Parser(t,e+i+16+6*c),m=e+i+16+8*c;for(r=0;c-1>r;r+=1)for(var g,y=h.parseUShort(),v=p.parseUShort(),_=f.parseShort(),b=d.parseUShort(),w=v;y>=w;w+=1)0!==b?(m=d.offset+d.relativeOffset-2,m+=b,m+=2*(w-v),g=u.getUShort(t,m),0!==g&&(g=g+_&65535)):g=w+_&65535,n.glyphIndexMap[w]=g;return n}function i(t,e,r){t.segments.push({end:e,start:e,delta:-(e-r),offset:0})}function o(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function s(t){var e,r=new l.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(r.segments=[],e=0;e<t.length;e+=1){for(var n=t.get(e),s=0;s<n.unicodes.length;s+=1)i(r,n.unicodes[s],e);r.segments=r.segments.sort(function(t,e){return t.start-e.start})}o(r);var a;a=r.segments.length,r.segCountX2=2*a,r.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange;var u=[],c=[],h=[],p=[],f=[];for(e=0;a>e;e+=1){var d=r.segments[e];u=u.concat({name:"end_"+e,type:"USHORT",value:d.end}),c=c.concat({name:"start_"+e,type:"USHORT",value:d.start}),h=h.concat({name:"idDelta_"+e,type:"SHORT",value:d.delta}),p=p.concat({name:"idRangeOffset_"+e,type:"USHORT",value:d.offset}),void 0!==d.glyphId&&(f=f.concat({name:"glyph_"+e,type:"USHORT",value:d.glyphId}))}return r.fields=r.fields.concat(u),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(c),r.fields=r.fields.concat(h),r.fields=r.fields.concat(p),r.fields=r.fields.concat(f),r.length=14+2*u.length+2+2*c.length+2*h.length+2*p.length+2*f.length,r}var a=t("../check"),u=t("../parse"),l=t("../table");
r.parse=n,r.make=s},{"../check":2,"../parse":9,"../table":11}],14:[function(t,e,r){"use strict";function n(t,e){var r=JSON.stringify(t),n=256;for(var i in e){var o=parseInt(i);if(o&&!(256>o)){if(JSON.stringify(e[i])===r)return o;o>=n&&(n=o+1)}}return e[n]=t,n}function i(t,e){var r=n(t.name,e);return new p.Table("fvarAxis",[{name:"tag",type:"TAG",value:t.tag},{name:"minValue",type:"FIXED",value:t.minValue<<16},{name:"defaultValue",type:"FIXED",value:t.defaultValue<<16},{name:"maxValue",type:"FIXED",value:t.maxValue<<16},{name:"flags",type:"USHORT",value:0},{name:"nameID",type:"USHORT",value:r}])}function o(t,e,r){var n={},i=new h.Parser(t,e);return n.tag=i.parseTag(),n.minValue=i.parseFixed(),n.defaultValue=i.parseFixed(),n.maxValue=i.parseFixed(),i.skip("uShort",1),n.name=r[i.parseUShort()]||{},n}function s(t,e,r){for(var i=n(t.name,r),o=[{name:"nameID",type:"USHORT",value:i},{name:"flags",type:"USHORT",value:0}],s=0;s<e.length;++s){var a=e[s].tag;o.push({name:"axis "+a,type:"FIXED",value:t.coordinates[a]<<16})}return new p.Table("fvarInstance",o)}function a(t,e,r,n){var i={},o=new h.Parser(t,e);i.name=n[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(var s=0;s<r.length;++s)i.coordinates[r[s].tag]=o.parseFixed();return i}function u(t,e){var r=new p.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*t.axes.length}]);r.offsetToData=r.sizeOf();for(var n=0;n<t.axes.length;n++)r.fields.push({name:"axis "+n,type:"TABLE",value:i(t.axes[n],e)});for(var o=0;o<t.instances.length;o++)r.fields.push({name:"instance "+o,type:"TABLE",value:s(t.instances[o],t.axes,e)});return r}function l(t,e,r){var n=new h.Parser(t,e),i=n.parseULong();c.argument(65536===i,"Unsupported fvar table version.");var s=n.parseOffset16();n.skip("uShort",1);for(var u=n.parseUShort(),l=n.parseUShort(),p=n.parseUShort(),f=n.parseUShort(),d=[],m=0;u>m;m++)d.push(o(t,e+s+m*l,r));for(var g=[],y=e+s+u*l,v=0;p>v;v++)g.push(a(t,y+v*f,d,r));return{axes:d,instances:g}}var c=t("../check"),h=t("../parse"),p=t("../table");r.make=u,r.parse=l},{"../check":2,"../parse":9,"../table":11}],15:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o;return(e&n)>0?(o=t.parseByte(),0===(e&i)&&(o=-o),o=r+o):o=(e&i)>0?r:r+t.parseShort(),o}function i(t,e,r){var i=new p.Parser(e,r);t.numberOfContours=i.parseShort(),t.xMin=i.parseShort(),t.yMin=i.parseShort(),t.xMax=i.parseShort(),t.yMax=i.parseShort();var o,s;if(t.numberOfContours>0){var a,u=t.endPointIndices=[];for(a=0;a<t.numberOfContours;a+=1)u.push(i.parseUShort());for(t.instructionLength=i.parseUShort(),t.instructions=[],a=0;a<t.instructionLength;a+=1)t.instructions.push(i.parseByte());var l=u[u.length-1]+1;for(o=[],a=0;l>a;a+=1)if(s=i.parseByte(),o.push(s),(8&s)>0)for(var h=i.parseByte(),f=0;h>f;f+=1)o.push(s),a+=1;if(c.argument(o.length===l,"Bad flags."),u.length>0){var d,m=[];if(l>0){for(a=0;l>a;a+=1)s=o[a],d={},d.onCurve=!!(1&s),d.lastPointOfContour=u.indexOf(a)>=0,m.push(d);var g=0;for(a=0;l>a;a+=1)s=o[a],d=m[a],d.x=n(i,s,g,2,16),g=d.x;var y=0;for(a=0;l>a;a+=1)s=o[a],d=m[a],d.y=n(i,s,y,4,32),y=d.y}t.points=m}else t.points=[]}else if(0===t.numberOfContours)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var v=!0;v;){o=i.parseUShort();var _={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(_.dx=i.parseShort(),_.dy=i.parseShort()):(_.dx=i.parseChar(),_.dy=i.parseChar()),(8&o)>0?_.xScale=_.yScale=i.parseF2Dot14():(64&o)>0?(_.xScale=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()):(128&o)>0&&(_.xScale=i.parseF2Dot14(),_.scale01=i.parseF2Dot14(),_.scale10=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()),t.components.push(_),v=!!(32&o)}}}function o(t,e){for(var r=[],n=0;n<t.length;n+=1){var i=t[n],o={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(o)}return r}function s(t){for(var e=[],r=[],n=0;n<t.length;n+=1){var i=t[n];r.push(i),i.lastPointOfContour&&(e.push(r),r=[])}return c.argument(0===r.length,"There are still points left in the current contour."),e}function a(t){var e=new f.Path;if(!t)return e;for(var r=s(t),n=0;n<r.length;n+=1){var i,o,a=r[n],u=a[0],l=a[a.length-1];u.onCurve?(i=null,o=!0):(u=l.onCurve?l:{x:(u.x+l.x)/2,y:(u.y+l.y)/2},i=u,o=!1),e.moveTo(u.x,u.y);for(var c=o?1:0;c<a.length;c+=1){var h=a[c],p=0===c?u:a[c-1];if(p.onCurve&&h.onCurve)e.lineTo(h.x,h.y);else if(p.onCurve&&!h.onCurve)i=h;else if(p.onCurve||h.onCurve){if(p.onCurve||!h.onCurve)throw new Error("Invalid state.");e.quadraticCurveTo(i.x,i.y,h.x,h.y),i=null}else{var d={x:(p.x+h.x)/2,y:(p.y+h.y)/2};e.quadraticCurveTo(p.x,p.y,d.x,d.y),i=h}}u!==l&&(i?e.quadraticCurveTo(i.x,i.y,u.x,u.y):e.lineTo(u.x,u.y))}return e.closePath(),e}function u(t,e){if(e.isComposite)for(var r=0;r<e.components.length;r+=1){var n=e.components[r],i=t.get(n.glyphIndex);if(i.points){var s=o(i.points,n);e.points=e.points.concat(s)}}return a(e.points)}function l(t,e,r,n){var o,s=new h.GlyphSet(n);for(o=0;o<r.length-1;o+=1){var a=r[o],l=r[o+1];a!==l?s.push(o,h.ttfGlyphLoader(n,o,i,t,e+a,u)):s.push(o,h.glyphLoader(n,o))}return s}var c=t("../check"),h=t("../glyphset"),p=t("../parse"),f=t("../path");r.parse=l},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],16:[function(t,e,r){"use strict";function n(t,e){for(var r=new c.Parser(t,e),n=r.parseUShort(),i=[],o=0;n>o;o++)i[r.parseTag()]={offset:r.parseUShort()};return i}function i(t,e){var r=new c.Parser(t,e),n=r.parseUShort(),i=r.parseUShort();if(1===n)return r.parseUShortList(i);if(2===n){for(var o=[];i--;)for(var s=r.parseUShort(),a=r.parseUShort(),u=r.parseUShort(),l=s;a>=l;l++)o[u++]=l;return o}}function o(t,e){var r=new c.Parser(t,e),n=r.parseUShort();if(1===n){var i=r.parseUShort(),o=r.parseUShort(),s=r.parseUShortList(o);return function(t){return s[t-i]||0}}if(2===n){for(var a=r.parseUShort(),u=[],l=[],h=[],p=0;a>p;p++)u[p]=r.parseUShort(),l[p]=r.parseUShort(),h[p]=r.parseUShort();return function(t){for(var e=0,r=u.length-1;r>e;){var n=e+r+1>>1;t<u[n]?r=n-1:e=n}return u[e]<=t&&t<=l[e]?h[e]||0:0}}}function s(t,e){var r,n,s=new c.Parser(t,e),a=s.parseUShort(),u=s.parseUShort(),l=i(t,e+u),h=s.parseUShort(),p=s.parseUShort();if(4===h&&0===p){var f={};if(1===a){for(var d=s.parseUShort(),m=[],g=s.parseOffset16List(d),y=0;d>y;y++){var v=g[y],_=f[v];if(!_){_={},s.relativeOffset=v;for(var b=s.parseUShort();b--;){var w=s.parseUShort();h&&(r=s.parseShort()),p&&(n=s.parseShort()),_[w]=r}}m[l[y]]=_}return function(t,e){var r=m[t];return r?r[e]:void 0}}if(2===a){for(var x=s.parseUShort(),S=s.parseUShort(),T=s.parseUShort(),E=s.parseUShort(),A=o(t,e+x),C=o(t,e+S),M=[],R=0;T>R;R++)for(var P=M[R]=[],I=0;E>I;I++)h&&(r=s.parseShort()),p&&(n=s.parseShort()),P[I]=r;var O={};for(R=0;R<l.length;R++)O[l[R]]=1;return function(t,e){if(O[t]){var r=A(t),n=C(e),i=M[r];return i?i[n]:void 0}}}}}function a(t,e){var r=new c.Parser(t,e),n=r.parseUShort(),i=r.parseUShort(),o=16&i,a=r.parseUShort(),u=r.parseOffset16List(a),l={lookupType:n,lookupFlag:i,markFilteringSet:o?r.parseUShort():-1};if(2===n){for(var h=[],p=0;a>p;p++)h.push(s(t,e+u[p]));l.getKerningValue=function(t,e){for(var r=h.length;r--;){var n=h[r](t,e);if(void 0!==n)return n}return 0}}return l}function u(t,e,r){var i=new c.Parser(t,e),o=i.parseFixed();l.argument(1===o,"Unsupported GPOS table version."),n(t,e+i.parseUShort()),n(t,e+i.parseUShort());var s=i.parseUShort();i.relativeOffset=s;for(var u=i.parseUShort(),h=i.parseOffset16List(u),p=e+s,f=0;u>f;f++){var d=a(t,p+h[f]);2!==d.lookupType||r.getGposKerningValue||(r.getGposKerningValue=d.getKerningValue)}}var l=t("../check"),c=t("../parse");r.parse=u},{"../check":2,"../parse":9}],17:[function(t,e,r){"use strict";function n(t,e){var r={},n=new s.Parser(t,e);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),o.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function i(t){return new a.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var o=t("../check"),s=t("../parse"),a=t("../table");r.parse=n,r.make=i},{"../check":2,"../parse":9,"../table":11}],18:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function i(t){return new s.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],19:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var s,a,u=new o.Parser(t,e),l=0;n>l;l+=1){r>l&&(s=u.parseUShort(),a=u.parseShort());var c=i.get(l);c.advanceWidth=s,c.leftSideBearing=a}}function i(t){for(var e=new s.Table("hmtx",[]),r=0;r<t.length;r+=1){var n=t.get(r),i=n.advanceWidth||0,o=n.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return e}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],20:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e),s=n.parseUShort();i.argument(0===s,"Unsupported kern table version."),n.skip("uShort",1);var a=n.parseUShort();i.argument(0===a,"Unsupported kern sub-table version."),n.skip("uShort",2);var u=n.parseUShort();n.skip("uShort",3);for(var l=0;u>l;l+=1){var c=n.parseUShort(),h=n.parseUShort(),p=n.parseShort();r[c+","+h]=p}return r}var i=t("../check"),o=t("../parse");r.parse=n},{"../check":2,"../parse":9}],21:[function(t,e,r){"use strict";function n(t,e,r,n){for(var o=new i.Parser(t,e),s=n?o.parseUShort:o.parseULong,a=[],u=0;r+1>u;u+=1){var l=s.call(o);n&&(l*=2),a.push(l)}return a}var i=t("../parse");r.parse=n},{"../parse":9}],22:[function(t,e,r){"use strict";function n(t){for(var e=new a.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),r="",n=12+4*t.length,i=0;i<t.length;++i){var o=r.indexOf(t[i]);0>o&&(o=r.length,r+=t[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:n+o}),e.fields.push({name:"length "+i,type:"USHORT",value:t[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),e}function i(t,e){var r=new s.Parser(t,e),n=r.parseULong();o.argument(1===n,"Unsupported ltag table version."),r.skip("uLong",1);for(var i=r.parseULong(),a=[],u=0;i>u;u++){for(var l="",c=e+r.parseUShort(),h=r.parseUShort(),p=c;c+h>p;++p)l+=String.fromCharCode(t.getInt8(p));a.push(l)}return a}var o=t("../check"),s=t("../parse"),a=t("../table");r.make=n,r.parse=i},{"../check":2,"../parse":9,"../table":11}],23:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function i(t){return new s.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],24:[function(t,e,r){"use strict";function n(t,e,r){switch(t){case 0:if(65535===e)return"und";if(r)return r[e];break;case 1:return y[e];case 3:return _[e]}}function i(t,e,r){switch(t){case 0:return b;case 1:return x[r]||w[e];case 3:if(1===e||10===e)return b}}function o(t,e,r){for(var o={},s=new d.Parser(t,e),a=s.parseUShort(),u=s.parseUShort(),l=s.offset+s.parseUShort(),c=0;u>c;c++){var h=s.parseUShort(),f=s.parseUShort(),m=s.parseUShort(),y=s.parseUShort(),v=g[y]||y,_=s.parseUShort(),w=s.parseUShort(),x=n(h,m,r),S=i(h,f,m);if(void 0!==S&&void 0!==x){var T;if(T=S===b?p.UTF16(t,l+w,_):p.MACSTRING(t,l+w,_,S)){var E=o[v];void 0===E&&(E=o[v]={}),E[x]=T}}}var A=0;return 1===a&&(A=s.parseUShort()),o}function s(t){var e={};for(var r in t)e[t[r]]=parseInt(r);return e}function a(t,e,r,n,i,o){return new m.Table("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function u(t,e){var r=t.length,n=e.length-r+1;t:for(var i=0;n>i;i++)for(;n>i;i++){for(var o=0;r>o;o++)if(e[i+o]!==t[o])continue t;return i}return-1}function l(t,e){var r=u(t,e);if(0>r){r=e.length;for(var n=0,i=t.length;i>n;++n)e.push(t[n])}return r}function c(t,e){var r,n=[],o={},u=s(g);for(var c in t){var h=u[c];void 0===h&&(h=c),r=parseInt(h),o[r]=t[c],n.push(r)}for(var p=s(y),d=s(_),b=[],w=[],x=0;x<n.length;x++){r=n[x];var S=o[r];for(var T in S){var E=S[T],A=1,C=p[T],M=v[C],R=i(A,M,C),P=f.MACSTRING(E,R);void 0===P&&(A=0,C=e.indexOf(T),0>C&&(C=e.length,e.push(T)),M=4,P=f.UTF16(E));var I=l(P,w);b.push(a(A,M,C,r,P.length,I));var O=d[T];if(void 0!==O){var D=f.UTF16(E),k=l(D,w);b.push(a(3,1,O,r,D.length,k))}}}b.sort(function(t,e){return t.platformID-e.platformID||t.encodingID-e.encodingID||t.languageID-e.languageID||t.nameID-e.nameID});for(var $=new m.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:b.length},{name:"stringOffset",type:"USHORT",value:6+12*b.length}]),N=0;N<b.length;N++)$.fields.push({name:"record_"+N,type:"TABLE",value:b[N]});return $.fields.push({name:"strings",type:"LITERAL",value:w}),$}var h=t("../types"),p=h.decode,f=h.encode,d=t("../parse"),m=t("../table"),g=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],y={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},v={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},b="utf-16",w={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},x={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};r.parse=o,r.make=c},{"../parse":9,"../table":11,"../types":28}],25:[function(t,e,r){"use strict";function n(t){for(var e=0;e<u.length;e+=1){var r=u[e];if(t>=r.begin&&t<r.end)return e}return-1}function i(t,e){var r={},n=new s.Parser(t,e);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var i=0;10>i;i++)r.panose[i]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function o(t){return new a.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var s=t("../parse"),a=t("../table"),u=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];r.unicodeRanges=u,r.getUnicodeRange=n,r.parse=i,r.make=o},{"../parse":9,"../table":11}],26:[function(t,e,r){"use strict";function n(t,e){var r,n={},i=new s.Parser(t,e);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=o.standardNames.slice();break;case 2:for(n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();for(n.names=[],r=0;r<n.numberOfGlyphs;r++)if(n.glyphNameIndex[r]>=o.standardNames.length){var a=i.parseChar();n.names.push(i.parseString(a))}break;case 2.5:for(n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.offset[r]=i.parseChar()}return n}function i(){return new a.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var o=t("../encoding"),s=t("../parse"),a=t("../table");r.parse=n,r.make=i},{"../encoding":4,"../parse":9,"../table":11}],27:[function(t,e,r){"use strict";function n(t){return Math.log(t)/Math.log(2)|0}function i(t){for(;t.length%4!==0;)t.push(0);for(var e=0,r=0;r<t.length;r+=4)e+=(t[r]<<24)+(t[r+1]<<16)+(t[r+2]<<8)+t[r+3];return e%=Math.pow(2,32)}function o(t,e,r,n){return new h.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==t?t:""},{name:"checkSum",type:"ULONG",value:void 0!==e?e:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function s(t){var e=new h.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var r=Math.pow(2,n(e.numTables));e.searchRange=16*r,e.entrySelector=n(r),e.rangeShift=16*e.numTables-e.searchRange;for(var s=[],a=[],u=e.sizeOf()+o().sizeOf()*e.numTables;u%4!==0;)u+=1,a.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<t.length;l+=1){var p=t[l];c.argument(4===p.tableName.length,"Table name"+p.tableName+" is invalid.");var f=p.sizeOf(),d=o(p.tableName,i(p.encode()),u,f);for(s.push({name:d.tag+" Table Record",type:"TABLE",value:d}),a.push({name:p.tableName+" table",type:"TABLE",value:p}),u+=f,c.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!==0;)u+=1,a.push({name:"padding",type:"BYTE",value:0})}return s.sort(function(t,e){return t.value.tag>e.value.tag?1:-1}),e.fields=e.fields.concat(s),e.fields=e.fields.concat(a),e}function a(t,e,r){for(var n=0;n<e.length;n+=1){var i=t.charToGlyphIndex(e[n]);if(i>0){var o=t.glyphs.get(i);return o.getMetrics()}}return r}function u(t){for(var e=0,r=0;r<t.length;r+=1)e+=t[r];return e/t.length}function l(t){for(var e,r=[],n=[],o=[],l=[],c=[],h=[],x=[],S=0,T=0,E=0,A=0,C=0,M=0;M<t.glyphs.length;M+=1){var R=t.glyphs.get(M),P=0|R.unicode;(e>P||null===e)&&(e=P),P>S&&(S=P);var I=b.getUnicodeRange(P);if(32>I)T|=1<<I;else if(64>I)E|=1<<I-32;else if(96>I)A|=1<<I-64;else{if(!(123>I))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");C|=1<<I-96}if(".notdef"!==R.name){var O=R.getMetrics();r.push(O.xMin),n.push(O.yMin),o.push(O.xMax),l.push(O.yMax),h.push(O.leftSideBearing),x.push(O.rightSideBearing),c.push(R.advanceWidth)}}var D={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,l),advanceWidthMax:Math.max.apply(null,c),advanceWidthAvg:u(c),minLeftSideBearing:Math.min.apply(null,h),maxLeftSideBearing:Math.max.apply(null,h),minRightSideBearing:Math.min.apply(null,x)};D.ascender=void 0!==t.ascender?t.ascender:D.yMax,D.descender=void 0!==t.descender?t.descender:D.yMin;var k=d.make({
unitsPerEm:t.unitsPerEm,xMin:D.xMin,yMin:D.yMin,xMax:D.xMax,yMax:D.yMax}),$=m.make({ascender:D.ascender,descender:D.descender,advanceWidthMax:D.advanceWidthMax,minLeftSideBearing:D.minLeftSideBearing,minRightSideBearing:D.minRightSideBearing,xMaxExtent:D.maxLeftSideBearing+(D.xMax-D.xMin),numberOfHMetrics:t.glyphs.length}),N=v.make(t.glyphs.length),L=b.make({xAvgCharWidth:Math.round(D.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:e,usLastCharIndex:S,ulUnicodeRange1:T,ulUnicodeRange2:E,ulUnicodeRange3:A,ulUnicodeRange4:C,sTypoAscender:D.ascender,sTypoDescender:D.descender,sTypoLineGap:0,usWinAscent:D.ascender,usWinDescent:-D.descender,sxHeight:a(t,"xyvw",{yMax:0}).yMax,sCapHeight:a(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",D).yMax,usBreakChar:t.hasChar(" ")?32:0}),F=g.make(t.glyphs),U=p.make(t.glyphs),B=t.getEnglishName("fontFamily"),H=t.getEnglishName("fontSubfamily"),q=B+" "+H,G=t.getEnglishName("postScriptName");G||(G=B.replace(/\s/g,"")+"-"+H);var V={};for(var j in t.names)V[j]=t.names[j];V.uniqueID||(V.uniqueID={en:t.getEnglishName("manufacturer")+":"+q}),V.postScriptName||(V.postScriptName={en:G}),V.preferredFamily||(V.preferredFamily=t.names.fontFamily),V.preferredSubfamily||(V.preferredSubfamily=t.names.fontSubfamily);var z=[],W=_.make(V,z),Y=z.length>0?y.make(z):void 0,X=w.make(),K=f.make(t.glyphs,{version:t.getEnglishName("version"),fullName:q,familyName:B,weightName:H,postScriptName:G,unitsPerEm:t.unitsPerEm}),Z=[k,$,N,L,W,U,X,K,F];Y&&Z.push(Y);var Q=s(Z),J=Q.encode(),tt=i(J),et=Q.fields,rt=!1;for(M=0;M<et.length;M+=1)if("head table"===et[M].name){et[M].value.checkSumAdjustment=2981146554-tt,rt=!0;break}if(!rt)throw new Error("Could not find head table with checkSum to adjust.");return Q}var c=t("../check"),h=t("../table"),p=t("./cmap"),f=t("./cff"),d=t("./head"),m=t("./hhea"),g=t("./hmtx"),y=t("./ltag"),v=t("./maxp"),_=t("./name"),b=t("./os2"),w=t("./post");r.computeCheckSum=i,r.make=s,r.fontToTable=l},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":17,"./hhea":18,"./hmtx":19,"./ltag":22,"./maxp":23,"./name":24,"./os2":25,"./post":26}],28:[function(t,e,r){"use strict";function n(t){return function(){return t}}var i=t("./check"),o=32768,s=2147483648,a={},u={},l={};u.BYTE=function(t){return i.argument(t>=0&&255>=t,"Byte value should be between 0 and 255."),[t]},l.BYTE=n(1),u.CHAR=function(t){return[t.charCodeAt(0)]},l.CHAR=n(1),u.CHARARRAY=function(t){for(var e=[],r=0;r<t.length;r+=1)e.push(t.charCodeAt(r));return e},l.CHARARRAY=function(t){return t.length},u.USHORT=function(t){return[t>>8&255,255&t]},l.USHORT=n(2),u.SHORT=function(t){return t>=o&&(t=-(2*o-t)),[t>>8&255,255&t]},l.SHORT=n(2),u.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},l.UINT24=n(3),u.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},l.ULONG=n(4),u.LONG=function(t){return t>=s&&(t=-(2*s-t)),[t>>24&255,t>>16&255,t>>8&255,255&t]},l.LONG=n(4),u.FIXED=u.ULONG,l.FIXED=l.ULONG,u.FWORD=u.SHORT,l.FWORD=l.SHORT,u.UFWORD=u.USHORT,l.UFWORD=l.USHORT,u.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},l.LONGDATETIME=n(8),u.TAG=function(t){return i.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},l.TAG=n(4),u.Card8=u.BYTE,l.Card8=l.BYTE,u.Card16=u.USHORT,l.Card16=l.USHORT,u.OffSize=u.BYTE,l.OffSize=l.BYTE,u.SID=u.USHORT,l.SID=l.USHORT,u.NUMBER=function(t){return t>=-107&&107>=t?[t+139]:t>=108&&1131>=t?(t-=108,[(t>>8)+247,255&t]):t>=-1131&&-108>=t?(t=-t-108,[(t>>8)+251,255&t]):t>=-32768&&32767>=t?u.NUMBER16(t):u.NUMBER32(t)},l.NUMBER=function(t){return u.NUMBER(t).length},u.NUMBER16=function(t){return[28,t>>8&255,255&t]},l.NUMBER16=n(3),u.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},l.NUMBER32=n(5),u.REAL=function(t){var e=t.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));e=(Math.round(t*n)/n).toString()}var i,o,s="";for(i=0,o=e.length;o>i;i+=1){var a=e[i];s+="e"===a?"-"===e[++i]?"c":"b":"."===a?"a":"-"===a?"e":a}s+=1&s.length?"f":"ff";var u=[30];for(i=0,o=s.length;o>i;i+=2)u.push(parseInt(s.substr(i,2),16));return u},l.REAL=function(t){return u.REAL(t).length},u.NAME=u.CHARARRAY,l.NAME=l.CHARARRAY,u.STRING=u.CHARARRAY,l.STRING=l.CHARARRAY,a.UTF16=function(t,e,r){for(var n=[],i=r/2,o=0;i>o;o++,e+=2)n[o]=t.getUint16(e);return String.fromCharCode.apply(null,n)},u.UTF16=function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(n>>8&255),e.push(255&n)}return e},l.UTF16=function(t){return 2*t.length};var c={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};a.MACSTRING=function(t,e,r,n){var i=c[n];if(void 0!==i){for(var o="",s=0;r>s;s++){var a=t.getUint8(e+s);o+=127>=a?String.fromCharCode(a):i[127&a]}return o}};var h,p="function"==typeof WeakMap&&new WeakMap,f=function(t){if(!h){h={};for(var e in c)h[e]=new String(e)}var r=h[t];if(void 0!==r){if(p){var n=p.get(r);if(void 0!==n)return n}var i=c[t];if(void 0!==i){for(var o={},s=0;s<i.length;s++)o[i.charCodeAt(s)]=s+128;return p&&p.set(r,o),o}}};u.MACSTRING=function(t,e){var r=f(e);if(void 0!==r){for(var n=[],i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=128&&(o=r[o],void 0===o))return;n.push(o)}return n}},l.MACSTRING=function(t,e){var r=u.MACSTRING(t,e);return void 0!==r?r.length:0},u.INDEX=function(t){var e,r=1,n=[r],i=[],o=0;for(e=0;e<t.length;e+=1){var s=u.OBJECT(t[e]);Array.prototype.push.apply(i,s),o+=s.length,r+=s.length,n.push(r)}if(0===i.length)return[0,0];var a=[],l=1+Math.floor(Math.log(o)/Math.log(2))/8|0,c=[void 0,u.BYTE,u.USHORT,u.UINT24,u.ULONG][l];for(e=0;e<n.length;e+=1){var h=c(n[e]);Array.prototype.push.apply(a,h)}return Array.prototype.concat(u.Card16(t.length),u.OffSize(l),a,i)},l.INDEX=function(t){return u.INDEX(t).length},u.DICT=function(t){for(var e=[],r=Object.keys(t),n=r.length,i=0;n>i;i+=1){var o=parseInt(r[i],0),s=t[o];e=e.concat(u.OPERAND(s.value,s.type)),e=e.concat(u.OPERATOR(o))}return e},l.DICT=function(t){return u.DICT(t).length},u.OPERATOR=function(t){return 1200>t?[t]:[12,t-1200]},u.OPERAND=function(t,e){var r=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)i.argument(t.length===e.length,"Not enough arguments given for type"+e),r=r.concat(u.OPERAND(t[n],e[n]));else if("SID"===e)r=r.concat(u.NUMBER(t));else if("offset"===e)r=r.concat(u.NUMBER32(t));else if("number"===e)r=r.concat(u.NUMBER(t));else{if("real"!==e)throw new Error("Unknown operand type "+e);r=r.concat(u.REAL(t))}return r},u.OP=u.BYTE,l.OP=l.BYTE;var d="function"==typeof WeakMap&&new WeakMap;u.CHARSTRING=function(t){if(d){var e=d.get(t);if(void 0!==e)return e}for(var r=[],n=t.length,i=0;n>i;i+=1){var o=t[i];r=r.concat(u[o.type](o.value))}return d&&d.set(t,r),r},l.CHARSTRING=function(t){return u.CHARSTRING(t).length},u.OBJECT=function(t){var e=u[t.type];return i.argument(void 0!==e,"No encoding function for type "+t.type),e(t.value)},l.OBJECT=function(t){var e=l[t.type];return i.argument(void 0!==e,"No sizeOf function for type "+t.type),e(t.value)},u.TABLE=function(t){for(var e=[],r=t.fields.length,n=0;r>n;n+=1){var o=t.fields[n],s=u[o.type];i.argument(void 0!==s,"No encoding function for field type "+o.type);var a=t[o.name];void 0===a&&(a=o.value);var l=s(a);e=e.concat(l)}return e},l.TABLE=function(t){for(var e=0,r=t.fields.length,n=0;r>n;n+=1){var o=t.fields[n],s=l[o.type];i.argument(void 0!==s,"No sizeOf function for field type "+o.type);var a=t[o.name];void 0===a&&(a=o.value),e+=s(a)}return e},u.LITERAL=function(t){return t},l.LITERAL=function(t){return t.length},r.decode=a,r.encode=u,r.sizeOf=l},{"./check":2}],29:[function(_dereq_,module,exports){!function(t,e,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):e[t]=r()}("reqwest",this,function(){function succeed(t){var e=protocolRe.exec(t.url);return e=e&&e[1]||window.location.protocol,httpsRe.test(e)?twoHundo.test(t.request.status):!!t.request.response}function handleReadyState(t,e,r){return function(){return t._aborted?r(t.request):t._timedOut?r(t.request,"Request is aborted: timeout"):void(t.request&&4==t.request[readyState]&&(t.request.onreadystatechange=noop,succeed(t)?e(t.request):r(t.request)))}}function setHeaders(t,e){var r,n=e.headers||{};n.Accept=n.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"];var i="function"==typeof FormData&&e.data instanceof FormData;e.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||i||(n[contentType]=e.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in t&&t.setRequestHeader(r,n[r])}function setCredentials(t,e){"undefined"!=typeof e.withCredentials&&"undefined"!=typeof t.withCredentials&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,r,n){var i=uniqid++,o=t.jsonpCallback||"callback",s=t.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),u=n.match(a),l=doc.createElement("script"),c=0,h=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?n=n.replace(a,"$1="+s):s=u[3]:n=urlappend(n,o+"="+s),win[s]=generalCallback,l.type="text/javascript",l.src=n,l.async=!0,"undefined"==typeof l.onreadystatechange||h||(l.htmlFor=l.id="_reqwest_"+i),l.onload=l.onreadystatechange=function(){return l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c?!1:(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),e(lastValue),lastValue=void 0,head.removeChild(l),void(c=1))},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(t,e){var r,n=this.o,i=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,s=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,a=!1;return"jsonp"!=n.type&&"GET"!=i||!s||(o=urlappend(o,s),s=null),"jsonp"==n.type?handleJsonp(n,t,e,o):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(i,o,n.async!==!1),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=t,r.onerror=e,r.onprogress=function(){},a=!0):r.onreadystatechange=handleReadyState(this,t,e),n.before&&n.before(r),a?setTimeout(function(){r.send(s)},200):r.send(s),r)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){return t.match("json")?"json":t.match("javascript")?"js":t.match("text")?"html":t.match("xml")?"xml":void 0}function init(o,fn){function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(t,e,r){for(t=self.request,self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,r);complete(t)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var r,n,i,o,s=t.name,a=t.tagName.toLowerCase(),u=function(t){t&&!t.disabled&&e(s,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(t.type)||(r=/checkbox/i.test(t.type),n=/radio/i.test(t.type),i=t.value,(!(r||n)||t.checked)&&e(s,normalize(r&&""===i?"on":i)));break;case"textarea":e(s,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())u(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(o=0;t.length&&o<t.length;o++)t.options[o].selected&&u(t.options[o])}}function eachFormElement(){var t,e,r=this,n=function(t,e){var n,i,o;for(n=0;n<e.length;n++)for(o=t[byTag](e[n]),i=0;i<o.length;i++)serial(o[i],r)};for(e=0;e<arguments.length;e++)t=arguments[e],/input|select|textarea/i.test(t.tagName)&&serial(t,r),n(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply(function(e,r){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(r)):t[e]=r},arguments),t}function buildParams(t,e,r,n){var i,o,s,a=/\[\]$/;if(isArray(e))for(o=0;e&&o<e.length;o++)s=e[o],r||a.test(t)?n(t,s):buildParams(t+"["+("object"==typeof s?o:"")+"]",s,r,n);else if(e&&"[object Object]"===e.toString())for(i in e)buildParams(t+"["+i+"]",e[i],r,n);else n(t,e)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(t){if(t.crossOrigin===!0){var e=win[xmlHttpRequest]?new XMLHttpRequest:null;if(e&&"withCredentials"in e)return e;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(t){return t}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return t=t||function(){},e=e||function(){},this._fulfilled?this._responseArgs.resp=t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this},"catch":function(t){return this.fail(t)}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply(function(e,r){t.push({name:e,value:r})},arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e,r=Array.prototype.slice.call(arguments,0);return t=r.pop(),t&&t.nodeType&&r.push(t)&&(t=null),t&&(t=t.type),e="map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString,e.apply(null,r)},reqwest.toQueryString=function(t,e){var r,n,i=e||!1,o=[],s=encodeURIComponent,a=function(t,e){e="function"==typeof e?e():null==e?"":e,o[o.length]=s(t)+"="+s(e)};if(isArray(t))for(n=0;t&&n<t.length;n++)a(t[n].name,t[n].value);else for(r in t)t.hasOwnProperty(r)&&buildParams(r,t[r],i,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest.ajaxSetup=function(t){t=t||{};for(var e in t)globalSetupOptions[e]=t[e]},reqwest})},{}],30:[function(t,e,r){"use strict";var n=t("../core/core");t("./p5.Geometry3D"),n.prototype.plane=function(t,e){t=t||50,e=e||50;var r=typeof arguments[2]===Number?arguments[2]:1,i=typeof arguments[3]===Number?arguments[3]:1,o="plane|"+t+"|"+e+"|"+r+"|"+i;if(!this._renderer.geometryInHash(o)){var s=new n.Geometry3D,a=function(r,i){var o=2*t*r-t,s=2*e*i-e,a=0;return new n.Vector(o,s,a)};s.parametricGeometry(a,r,i);var u=s.generateObj();this._renderer.initBuffer(o,[u])}this._renderer.drawBuffer(o)},n.prototype.sphere=function(t,e){t=t||50;var r=e||24,i=e||16,o="sphere|"+t+"|"+r+"|"+i;if(!this._renderer.geometryInHash(o)){var s=new n.Geometry3D,a=function(e,r){var i=2*Math.PI*e,o=Math.PI*r-Math.PI/2,s=t*Math.cos(o)*Math.sin(i),a=t*Math.sin(o),u=t*Math.cos(o)*Math.cos(i);return new n.Vector(s,a,u)};s.parametricGeometry(a,r,i);var u=s.generateObj(!0,!0);this._renderer.initBuffer(o,[u])}return this._renderer.drawBuffer(o),this},n.prototype.ellipsoid=function(t,e,r,i){t=t||50,e=e||50,r=r||50;var o=i||24,s=i||24,a="ellipsoid|"+t+"|"+e+"|"+r+"|"+o+"|"+s;if(!this._renderer.geometryInHash(a)){var u=new n.Geometry3D,l=function(i,o){var s=2*Math.PI*i,a=Math.PI*o-Math.PI/2,u=t*Math.cos(a)*Math.sin(s),l=e*Math.sin(a),c=r*Math.cos(a)*Math.cos(s);return new n.Vector(u,l,c)};u.parametricGeometry(l,o,s);var c=u.generateObj(!0,!0);this._renderer.initBuffer(a,[c])}return this._renderer.drawBuffer(a),this},n.prototype.cylinder=function(t,e,r){t=t||50,e=e||50;var i=r||24,o=r||16,s="cylinder|"+t+"|"+e+"|"+i+"|"+o;if(!this._renderer.geometryInHash(s)){var a=new n.Geometry3D,u=function(r,i){var o=2*Math.PI*r,s=t*Math.sin(o),a=2*e*i-e,u=t*Math.cos(o);return new n.Vector(s,a,u)};a.parametricGeometry(u,i,o);var l=a.generateObj(!0),c=function(r,i){var o=2*Math.PI*r,s=t*Math.sin(-o),a=e,u=t*Math.cos(o);return 0===i?new n.Vector(0,e,0):new n.Vector(s,a,u)},h=new n.Geometry3D;h.parametricGeometry(c,i,1);var p=h.generateObj(),f=function(r,i){var o=2*Math.PI*r,s=t*Math.sin(o),a=-e,u=t*Math.cos(o);return 0===i?new n.Vector(0,-e,0):new n.Vector(s,a,u)},d=new n.Geometry3D;d.parametricGeometry(f,i,1);var m=d.generateObj();this._renderer.initBuffer(s,[l,p,m])}return this._renderer.drawBuffer(s),this},n.prototype.cone=function(t,e,r){t=t||50,e=e||50;var i=r||24,o=r||16,s="cone|"+t+"|"+e+"|"+i+"|"+o;if(!this._renderer.geometryInHash(s)){var a=new n.Geometry3D,u=function(r,i){var o=2*Math.PI*r,s=t*(1-i)*Math.sin(o),a=2*e*i-e,u=t*(1-i)*Math.cos(o);return new n.Vector(s,a,u)};a.parametricGeometry(u,i,o);var l=a.generateObj(!0),c=new n.Geometry3D,h=function(r,i){var o=2*Math.PI*r,s=t*(1-i)*Math.sin(-o),a=-e,u=t*(1-i)*Math.cos(o);return new n.Vector(s,a,u)};c.parametricGeometry(h,i,1);var p=c.generateObj();this._renderer.initBuffer(s,[l,p])}return this._renderer.drawBuffer(s),this},n.prototype.torus=function(t,e,r){t=t||50,e=e||10;var i=r||24,o=r||16,s="torus|"+t+"|"+e+"|"+i+"|"+o;if(!this._renderer.geometryInHash(s)){var a=new n.Geometry3D,u=function(r,i){var o=2*Math.PI*r,s=2*Math.PI*i,a=(t+e*Math.cos(s))*Math.cos(o),u=(t+e*Math.cos(s))*Math.sin(o),l=e*Math.sin(s);return new n.Vector(a,u,l)};a.parametricGeometry(u,i,o);var l=a.generateObj(!0);this._renderer.initBuffer(s,[l])}return this._renderer.drawBuffer(s),this},n.prototype.box=function(t,e,r){t=t||50,e=e||t,r=r||t;var i=typeof arguments[3]===Number?arguments[3]:1,o=typeof arguments[4]===Number?arguments[4]:1,s="cube|"+t+"|"+e+"|"+r+"|"+i+"|"+o;if(!this._renderer.geometryInHash(s)){var a=new n.Geometry3D,u=function(i,o){var s=2*t*i-t,a=2*e*o-e,u=r;return new n.Vector(s,a,u)},l=function(i,o){var s=2*t*(1-i)-t,a=2*e*o-e,u=-r;return new n.Vector(s,a,u)},c=function(i,o){var s=2*t*(1-i)-t,a=e,u=2*r*o-r;return new n.Vector(s,a,u)},h=function(i,o){var s=2*t*i-t,a=-e,u=2*r*o-r;return new n.Vector(s,a,u)},p=function(i,o){var s=t,a=2*e*i-e,u=2*r*o-r;return new n.Vector(s,a,u)},f=function(i,o){var s=-t,a=2*e*(1-i)-e,u=2*r*o-r;return new n.Vector(s,a,u)};a.parametricGeometry(u,i,o,a.vertices.length),a.parametricGeometry(l,i,o,a.vertices.length),a.parametricGeometry(c,i,o,a.vertices.length),a.parametricGeometry(h,i,o,a.vertices.length),a.parametricGeometry(p,i,o,a.vertices.length),a.parametricGeometry(f,i,o,a.vertices.length);var d=a.generateObj();this._renderer.initBuffer(s,[d])}return this._renderer.drawBuffer(s),this},e.exports=n},{"../core/core":50,"./p5.Geometry3D":36}],31:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.camera=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];this._validateParameters("camera",n,["Number","Number","Number"]),this._renderer.translate(-t,-e,-r)},n.prototype.perspective=function(t,e,r,i){for(var o=new Array(arguments.length),s=0;s<o.length;++s)o[s]=arguments[s];this._validateParameters("perspective",o,["Number","Number","Number","Number"]),this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.perspective(t,e,r,i),this._renderer._setCamera=!0},n.prototype.ortho=function(t,e,r,i,o,s){for(var a=new Array(arguments.length),u=0;u<a.length;++u)a[u]=arguments[u];this._validateParameters("ortho",a,["Number","Number","Number","Number","Number","Number"]),t/=this.width,e/=this.width,i/=this.height,r/=this.height,this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.ortho(t,e,r,i,o,s),this._renderer._setCamera=!0},e.exports=n},{"../core/core":50}],32:[function(t,e,r){"use strict";var n=t("../core/core");n.Renderer3D.prototype._primitives2D=function(t){this._setDefaultCamera();var e=this.GL,r=this._getColorVertexShader(),n=this.verticeBuffer;e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.vertexAttribPointer(r.vertexPositionAttribute,3,e.FLOAT,!1,0,0);var i=this.colorBuffer;e.bindBuffer(e.ARRAY_BUFFER,i);for(var o=this._getCurColor(),s=[],a=0;a<t.length/3;a++)s=s.concat(o);e.bufferData(e.ARRAY_BUFFER,new Float32Array(s),e.STATIC_DRAW),e.vertexAttribPointer(r.vertexColorAttribute,4,e.FLOAT,!1,0,0);var u="vertexColorVert|vertexColorFrag";this.setMatrixUniforms(u)},n.Renderer3D.prototype.point=function(t,e,r){var n=this.GL;return this._primitives2D([t,e,r]),n.drawArrays(n.POINTS,0,1),this},n.Renderer3D.prototype.line=function(t,e,r,n,i,o){var s=this.GL;return this._primitives2D([t,e,r,n,i,o]),s.drawArrays(s.LINES,0,2),this},n.Renderer3D.prototype.triangle=function(t,e,r,n,i,o,s,a,u){var l=this.GL;return this._primitives2D([t,e,r,n,i,o,s,a,u]),this._strokeCheck(),l.drawArrays(l.TRIANGLES,0,3),this},n.Renderer3D.prototype.quad=function(t,e,r,n,i,o,s,a,u,l,c,h){var p=this.GL;return this._primitives2D([t,e,r,n,i,o,s,a,u,l,c,h]),this._strokeCheck(),p.drawArrays(p.TRIANGLE_STRIP,0,4),this},n.Renderer3D.prototype.beginShape=function(t){return this.shapeMode=t,this.verticeStack=[],this},n.Renderer3D.prototype.vertex=function(t,e,r){return this.verticeStack.push(t,e,r),this},n.Renderer3D.prototype.endShape=function(){var t=this.GL;switch(this._primitives2D(this.verticeStack),this.verticeStack=[],this.shapeMode){case"POINTS":t.drawArrays(t.POINTS,0,1);break;case"LINES":t.drawArrays(t.LINES,0,2);break;case"TRIANGLES":this._strokeCheck(),t.drawArrays(t.TRIANGLES,0,3);break;case"TRIANGLE_STRIP":this._strokeCheck(),t.drawArrays(t.TRIANGLE_STRIP,0,4);break;default:this._strokeCheck(),t.drawArrays(t.TRIANGLES,0,3)}return this},n.Renderer3D.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},n.Renderer3D.prototype.strokeWeight=function(){throw new Error("strokeWeight for 3d not yet implemented")},n.Renderer3D.prototype.fill=function(t,e,r,n){var i=this._pInst.color.apply(this._pInst,arguments),o=i._array;return this.curColor=o,this.drawMode="fill",this},n.Renderer3D.prototype.stroke=function(t,e,r,n){var i=this._pInst.color.apply(this._pInst,arguments),o=i._array;return this.curColor=o,this.drawMode="stroke",this},n.Renderer3D.prototype._getColorVertexShader=function(){var t,e=this.GL,r="vertexColorVert|vertexColorFrag";return this.materialInHash(r)?t=this.mHash[r]:(t=this.initShaders("vertexColorVert","vertexColorFrag",!0),this.mHash[r]=t,t.vertexColorAttribute=e.getAttribLocation(t,"aVertexColor"),e.enableVertexAttribArray(t.vertexColorAttribute)),t},e.exports=n.Renderer3D},{"../core/core":50}],33:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},e.exports=n},{"../core/core":50}],34:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.ambientLight=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o),o.uAmbientColor=i.getUniformLocation(o,"uAmbientColor["+this._renderer.ambientLightCount+"]");var s=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),a=s._array;return i.uniform3f(o.uAmbientColor,a[0],a[1],a[2]),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor"),i.uniform4f(o.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,o.uAmbientLightCount=i.getUniformLocation(o,"uAmbientLightCount"),i.uniform1i(o.uAmbientLightCount,this._renderer.ambientLightCount),this},n.prototype.directionalLight=function(t,e,r,n,i,o,s){var a=this._renderer.GL,u=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(u),u.uDirectionalColor=a.getUniformLocation(u,"uDirectionalColor["+this._renderer.directionalLightCount+"]");var l=this._renderer._pInst.color.apply(this._renderer._pInst,[t,e,r]),c=l._array;a.uniform3f(u.uDirectionalColor,c[0],c[1],c[2]);var h,p,f;if("number"==typeof arguments[arguments.length-1])h=arguments[arguments.length-3],p=arguments[arguments.length-2],f=arguments[arguments.length-1];else try{h=arguments[arguments.length-1].x,p=arguments[arguments.length-1].y,f=arguments[arguments.length-1].z}catch(d){throw d}return u.uLightingDirection=a.getUniformLocation(u,"uLightingDirection["+this._renderer.directionalLightCount+"]"),a.uniform3f(u.uLightingDirection,h,p,f),u.uMaterialColor=a.getUniformLocation(u,"uMaterialColor"),a.uniform4f(u.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,u.uDirectionalLightCount=a.getUniformLocation(u,"uDirectionalLightCount"),a.uniform1i(u.uDirectionalLightCount,this._renderer.directionalLightCount),this},n.prototype.pointLight=function(t,e,r,n,i,o,s){var a=this._renderer.GL,u=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(u),u.uPointLightColor=a.getUniformLocation(u,"uPointLightColor["+this._renderer.pointLightCount+"]");var l=this._renderer._pInst.color.apply(this._renderer._pInst,[t,e,r]),c=l._array;a.uniform3f(u.uPointLightColor,c[0],c[1],c[2]);var h,p,f;if("number"==typeof arguments[arguments.length-1])h=arguments[arguments.length-3],p=arguments[arguments.length-2],f=arguments[arguments.length-1];else try{h=arguments[arguments.length-1].x,p=arguments[arguments.length-1].y,f=arguments[arguments.length-1].z}catch(d){throw d}return u.uPointLightLocation=a.getUniformLocation(u,"uPointLightLocation["+this._renderer.pointLightCount+"]"),a.uniform3f(u.uPointLightLocation,h,p,f),u.uMaterialColor=a.getUniformLocation(u,"uMaterialColor"),a.uniform4f(u.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,u.uPointLightCount=a.getUniformLocation(u,"uPointLightCount"),a.uniform1i(u.uPointLightCount,this._renderer.pointLightCount),this},e.exports=n},{"../core/core":50}],35:[function(t,e,r){"use strict";function n(t){return 0===(t&t-1)}var i=t("../core/core");i.prototype.normalMaterial=function(){return this._renderer._getShader("normalVert","normalFrag"),this},i.prototype.texture=function(t){var e=this._renderer.GL,r=this._renderer._getShader("lightVert","lightTextureFrag");if(e.useProgram(r),t instanceof i.Image){if(!t.isTexture){var o=e.createTexture();t.createTexture(o),e.bindTexture(e.TEXTURE_2D,o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),t._setProperty("isTexture",!0)}t.loadPixels();var s=new Uint8Array(t.pixels);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,s)}else if(t instanceof i.MediaElement){if(!t.loadedmetadata)return;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.elt)}return n(t.width)&&n(t.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.uniform1i(e.getUniformLocation(r,"uSampler"),0),e.uniform1i(e.getUniformLocation(r,"isTexture"),!0),this},i.prototype.basicMaterial=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("normalVert","basicFrag");i.useProgram(o),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var s=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),a=s._array;return i.uniform4f(o.uMaterialColor,a[0],a[1],a[2],a[3]),this},i.prototype.ambientMaterial=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var s=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),a=s._array;return i.uniform4f(o.uMaterialColor,a[0],a[1],a[2],a[3]),o.uSpecular=i.getUniformLocation(o,"uSpecular"),i.uniform1i(o.uSpecular,!1),i.uniform1i(i.getUniformLocation(o,"isTexture"),!1),this},i.prototype.specularMaterial=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");
i.uniform1i(i.getUniformLocation(o,"isTexture"),!1),i.useProgram(o),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var s=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),a=s._array;return i.uniform4f(o.uMaterialColor,a[0],a[1],a[2],a[3]),o.uSpecular=i.getUniformLocation(o,"uSpecular"),i.uniform1i(o.uSpecular,!0),this},e.exports=i},{"../core/core":50}],36:[function(t,e,r){"use strict";function n(t){return t.reduce(function(t,e){return t.concat(e)})}function i(t){return n(t.map(function(t){return[t.x,t.y,t.z]}))}var o=t("../core/core");o.Geometry3D=function(){this.vertices=[],this.vertexNormals=[],this.faces=[],this.faceNormals=[],this.uvs=[]},o.Geometry3D.prototype.parametricGeometry=function(t,e,r,n){var i,o,s,a,u;n=n||0,this.detailX=e,this.detailY=r;var l=e+1;for(i=0;r>=i;i++)for(u=i/r,o=0;e>=o;o++)a=o/e,s=t(a,u),this.vertices.push(s);var c,h,p,f,d,m,g,y;for(i=0;r>i;i++)for(o=0;e>o;o++)c=i*l+o+n,h=i*l+o+1+n,p=(i+1)*l+o+1+n,f=(i+1)*l+o+n,d=[o/e,i/r],m=[(o+1)/e,i/r],g=[(o+1)/e,(i+1)/r],y=[o/e,(i+1)/r],this.faces.push([c,h,f]),this.uvs.push([d,m,y]),this.faces.push([h,p,f]),this.uvs.push([m,g,y])},o.Geometry3D.prototype.computeFaceNormals=function(){for(var t=new o.Vector,e=new o.Vector,r=0;r<this.faces.length;r++){var n=this.faces[r],i=this.vertices[n[0]],s=this.vertices[n[1]],a=this.vertices[n[2]];o.Vector.sub(a,s,t),o.Vector.sub(i,s,e);var u=o.Vector.cross(e,t);u.normalize(),u.mult(-1),this.faceNormals[r]=u}},o.Geometry3D.prototype.computeVertexNormals=function(){var t,e,r,n,i,s=[];for(i=new Array(this.vertices.length),t=0;t<this.vertices.length;t++)i[t]=new o.Vector;for(e=0;e<this.faces.length;e++)r=this.faces[e],n=this.faceNormals[e],i[r[0]].add(n),i[r[1]].add(n),i[r[2]].add(n);for(t=0;t<this.vertices.length;t++)i[t].normalize();for(e=0;e<this.faces.length;e++)r=this.faces[e],s[e]=[],s[e][0]=i[r[0]].copy(),s[e][1]=i[r[1]].copy(),s[e][2]=i[r[2]].copy();for(e=0;e<this.faces.length;e++)r=this.faces[e],n=this.faceNormals[e],this.vertexNormals[r[0]]=s[e][0],this.vertexNormals[r[1]]=s[e][1],this.vertexNormals[r[2]]=s[e][2]},o.Geometry3D.prototype.averageNormals=function(){for(var t=0;t<=this.detailY;t++){var e=this.detailX+1,r=o.Vector.add(this.vertexNormals[t*e],this.vertexNormals[t*e+this.detailX]);r=o.Vector.div(r,2),this.vertexNormals[t*e]=r,this.vertexNormals[t*e+this.detailX]=r}},o.Geometry3D.prototype.averagePoleNormals=function(){for(var t=new o.Vector(0,0,0),e=0;e<this.detailX;e++)t.add(this.vertexNormals[e]);for(t=o.Vector.div(t,this.detailX),e=0;e<this.detailX;e++)this.vertexNormals[e]=t;for(t=new o.Vector(0,0,0),e=this.vertices.length-1;e>this.vertices.length-1-this.detailX;e--)t.add(this.vertexNormals[e]);for(t=o.Vector.div(t,this.detailX),e=this.vertices.length-1;e>this.vertices.length-1-this.detailX;e--)this.vertexNormals[e]=t},o.Geometry3D.prototype.generateUV=function(t,e){t=n(t),e=n(e);var r=[];return t.forEach(function(t,n){r[t]=e[n]}),n(r)},o.Geometry3D.prototype.generateObj=function(t,e){this.computeFaceNormals(),this.computeVertexNormals(),t&&this.averageNormals(),e&&this.averagePoleNormals();var r={vertices:i(this.vertices),vertexNormals:i(this.vertexNormals),uvs:this.generateUV(this.faces,this.uvs),faces:n(this.faces),len:3*this.faces.length};return r},e.exports=o.Geometry3D},{"../core/core":50}],37:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../math/polargeometry"),o=t("../core/constants"),s="undefined"!=typeof Float32Array?Float32Array:Array;n.Matrix=function(){return arguments[0]instanceof n?(this.p5=arguments[0],this.mat4=arguments[1]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):this.mat4=arguments[0]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},n.Matrix.prototype.set=function(t){return t instanceof n.Matrix?(this.mat4=t.mat4,this):t instanceof s?(this.mat4=t,this):this},n.Matrix.prototype.get=function(){return new n.Matrix(this.mat4)},n.Matrix.prototype.copy=function(){var t=new n.Matrix;return t.mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15],t},n.Matrix.identity=function(){return new n.Matrix},n.Matrix.prototype.transpose=function(t){var e,r,i,o,a,u;return t instanceof n.Matrix?(e=t.mat4[1],r=t.mat4[2],i=t.mat4[3],o=t.mat4[6],a=t.mat4[7],u=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=e,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=i,this.mat4[13]=a,this.mat4[14]=u,this.mat4[15]=t.mat4[15]):t instanceof s&&(e=t[1],r=t[2],i=t[3],o=t[6],a=t[7],u=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=e,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=i,this.mat4[13]=a,this.mat4[14]=u,this.mat4[15]=t[15]),this},n.Matrix.prototype.invert=function(t){var e,r,i,o,a,u,l,c,h,p,f,d,m,g,y,v;t instanceof n.Matrix?(e=t.mat4[0],r=t.mat4[1],i=t.mat4[2],o=t.mat4[3],a=t.mat4[4],u=t.mat4[5],l=t.mat4[6],c=t.mat4[7],h=t.mat4[8],p=t.mat4[9],f=t.mat4[10],d=t.mat4[11],m=t.mat4[12],g=t.mat4[13],y=t.mat4[14],v=t.mat4[15]):t instanceof s&&(e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],m=t[12],g=t[13],y=t[14],v=t[15]);var _=e*u-r*a,b=e*l-i*a,w=e*c-o*a,x=r*l-i*u,S=r*c-o*u,T=i*c-o*l,E=h*g-p*m,A=h*y-f*m,C=h*v-d*m,M=p*y-f*g,R=p*v-d*g,P=f*v-d*y,I=_*P-b*R+w*M+x*C-S*A+T*E;return I?(I=1/I,this.mat4[0]=(u*P-l*R+c*M)*I,this.mat4[1]=(i*R-r*P-o*M)*I,this.mat4[2]=(g*T-y*S+v*x)*I,this.mat4[3]=(f*S-p*T-d*x)*I,this.mat4[4]=(l*C-a*P-c*A)*I,this.mat4[5]=(e*P-i*C+o*A)*I,this.mat4[6]=(y*w-m*T-v*b)*I,this.mat4[7]=(h*T-f*w+d*b)*I,this.mat4[8]=(a*R-u*C+c*E)*I,this.mat4[9]=(r*C-e*R-o*E)*I,this.mat4[10]=(m*S-g*w+v*_)*I,this.mat4[11]=(p*w-h*S-d*_)*I,this.mat4[12]=(u*A-a*M-l*E)*I,this.mat4[13]=(e*M-r*A+i*E)*I,this.mat4[14]=(g*b-m*x-y*_)*I,this.mat4[15]=(h*x-p*b+f*_)*I,this):null},n.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],e=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],i=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],s=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],a=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],u=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],l=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],h=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return t*h-e*c+r*l+n*u-i*a+o*s},n.Matrix.prototype.mult=function(t){var e=new s(16),r=new s(16);t instanceof n.Matrix?r=t.mat4:t instanceof s&&(r=t);var i=this.mat4[0],o=this.mat4[1],a=this.mat4[2],u=this.mat4[3];return e[0]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[1]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[2]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[3]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[4],o=this.mat4[5],a=this.mat4[6],u=this.mat4[7],e[4]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[5]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[6]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[7]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[8],o=this.mat4[9],a=this.mat4[10],u=this.mat4[11],e[8]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[9]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[10]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[11]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[12],o=this.mat4[13],a=this.mat4[14],u=this.mat4[15],e[12]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[13]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[14]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[15]=i*r[3]+o*r[7]+a*r[11]+u*r[15],this.mat4=e,this},n.Matrix.prototype.scale=function(){for(var t,e,r,i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];i[0]instanceof n.Vector?(t=i[0].x,e=i[0].y,r=i[0].z):i[0]instanceof Array&&(t=i[0][0],e=i[0][1],r=i[0][2]);var a=new s(16);return a[0]=this.mat4[0]*t,a[1]=this.mat4[1]*t,a[2]=this.mat4[2]*t,a[3]=this.mat4[3]*t,a[4]=this.mat4[4]*e,a[5]=this.mat4[5]*e,a[6]=this.mat4[6]*e,a[7]=this.mat4[7]*e,a[8]=this.mat4[8]*r,a[9]=this.mat4[9]*r,a[10]=this.mat4[10]*r,a[11]=this.mat4[11]*r,a[12]=this.mat4[12],a[13]=this.mat4[13],a[14]=this.mat4[14],a[15]=this.mat4[15],this.mat4=a,this},n.Matrix.prototype.rotate=function(t,e){var r,s,a,u,l;this.p5?this.p5._angleMode===o.DEGREES&&(u=i.degreesToRadians(t)):u=t,e instanceof n.Vector?(r=e.x,s=e.y,a=e.z):e instanceof Array&&(r=e[0],s=e[1],a=e[2]),l=Math.sqrt(r*r+s*s+a*a),r*=1/l,s*=1/l,a*=1/l;var c=this.mat4[0],h=this.mat4[1],p=this.mat4[2],f=this.mat4[3],d=this.mat4[4],m=this.mat4[5],g=this.mat4[6],y=this.mat4[7],v=this.mat4[8],_=this.mat4[9],b=this.mat4[10],w=this.mat4[11],x=Math.sin(u),S=Math.cos(u),T=1-S,E=r*r*T+S,A=s*r*T+a*x,C=a*r*T-s*x,M=r*s*T-a*x,R=s*s*T+S,P=a*s*T+r*x,I=r*a*T+s*x,O=s*a*T-r*x,D=a*a*T+S;return this.mat4[0]=c*E+d*A+v*C,this.mat4[1]=h*E+m*A+_*C,this.mat4[2]=p*E+g*A+b*C,this.mat4[3]=f*E+y*A+w*C,this.mat4[4]=c*M+d*R+v*P,this.mat4[5]=h*M+m*R+_*P,this.mat4[6]=p*M+g*R+b*P,this.mat4[7]=f*M+y*R+w*P,this.mat4[8]=c*I+d*O+v*D,this.mat4[9]=h*I+m*O+_*D,this.mat4[10]=p*I+g*O+b*D,this.mat4[11]=f*I+y*O+w*D,this},n.Matrix.prototype.translate=function(t){var e=t[0],r=t[1],n=t[2]||0;this.mat4[12]=this.mat4[0]*e+this.mat4[4]*r+this.mat4[8]*n+this.mat4[12],this.mat4[13]=this.mat4[1]*e+this.mat4[5]*r+this.mat4[9]*n+this.mat4[13],this.mat4[14]=this.mat4[2]*e+this.mat4[6]*r+this.mat4[10]*n+this.mat4[14],this.mat4[15]=this.mat4[3]*e+this.mat4[7]*r+this.mat4[11]*n+this.mat4[15]},n.Matrix.prototype.rotateX=function(t){this.rotate(t,[1,0,0])},n.Matrix.prototype.rotateY=function(t){this.rotate(t,[0,1,0])},n.Matrix.prototype.rotateZ=function(t){this.rotate(t,[0,0,1])},n.Matrix.prototype.perspective=function(t,e,r,n){var i=1/Math.tan(t/2),o=1/(r-n);return this.mat4[0]=i/e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=i,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(n+r)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*n*r*o,this.mat4[15]=0,this},n.Matrix.prototype.ortho=function(t,e,r,n,i,o){var s=1/(t-e),a=1/(r-n),u=1/(i-o);return this.mat4[0]=-2*s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*u,this.mat4[11]=0,this.mat4[12]=(t+e)*s,this.mat4[13]=(n+r)*a,this.mat4[14]=(o+i)*u,this.mat4[15]=1,this},e.exports=n.Matrix},{"../core/constants":49,"../core/core":50,"../math/polargeometry":79}],38:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./shader");t("../core/p5.Renderer"),t("./p5.Matrix");var o=[],s=1e3,a={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};n.Renderer3D=function(t,e,r){n.Renderer.call(this,t,e,r);try{if(this.drawingContext=this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.Renderer3D: enabled webgl context")}catch(i){throw new Error(i)}this.isP3D=!0,this.GL=this.drawingContext;var o=this.GL;return o.clearColor(1,1,1,1),o.clearDepth(1),o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),this._init(),this},n.Renderer3D.prototype=Object.create(n.Renderer.prototype),n.Renderer3D.prototype._applyDefaults=function(){return this},n.Renderer3D.prototype._init=function(t){var e=this.GL;this.initMatrix(),this.initHash(),this.verticeStack=[],this.verticeBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this._setCamera=!1,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},n.Renderer3D.prototype._update=function(){this.resetMatrix(),this.translate(0,0,-800),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this.verticeStack=[]},n.Renderer3D.prototype.resize=function(t,e){var r=this.GL;n.Renderer.prototype.resize.call(this,t,e),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)},n.Renderer3D.prototype.background=function(){var t=this.GL,e=this._pInst.color.apply(this._pInst,arguments),r=e.levels[0]/255,n=e.levels[1]/255,i=e.levels[2]/255,o=e.levels[3]/255;t.clearColor(r,n,i,o),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},n.Renderer3D.prototype.initShaders=function(t,e,r){var n=this.GL,o=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(o,i[t]),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+n.getShaderInfoLog(o)),null;var s=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(s,i[e]),n.compileShader(s),!n.getShaderParameter(s,n.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+n.getShaderInfoLog(s)),null;var a=n.createProgram();return n.attachShader(a,o),n.attachShader(a,s),n.linkProgram(a),n.getProgramParameter(a,n.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(a,r),a},n.Renderer3D.prototype._getLocation=function(t,e){var r=this.GL;r.useProgram(t),t.uResolution=r.getUniformLocation(t,"uResolution"),r.uniform1f(t.uResolution,s),t.vertexPositionAttribute=r.getAttribLocation(t,"aPosition"),r.enableVertexAttribArray(t.vertexPositionAttribute),t.uPMatrixUniform=r.getUniformLocation(t,"uProjectionMatrix"),t.uMVMatrixUniform=r.getUniformLocation(t,"uModelViewMatrix"),void 0===e&&(t.vertexNormalAttribute=r.getAttribLocation(t,"aNormal"),r.enableVertexAttribArray(t.vertexNormalAttribute),t.uNMatrixUniform=r.getUniformLocation(t,"uNormalMatrix"),t.textureCoordAttribute=r.getAttribLocation(t,"aTexCoord"),r.enableVertexAttribArray(t.textureCoordAttribute),t.samplerUniform=r.getUniformLocation(t,"uSampler"))},n.Renderer3D.prototype.setMatrixUniforms=function(t){var e=this.GL,r=this.mHash[t];e.useProgram(r),e.uniformMatrix4fv(r.uPMatrixUniform,!1,this.uPMatrix.mat4),e.uniformMatrix4fv(r.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix=new n.Matrix,this.uNMatrix.invert(this.uMVMatrix),this.uNMatrix.transpose(this.uNMatrix),e.uniformMatrix4fv(r.uNMatrixUniform,!1,this.uNMatrix.mat4)},n.Renderer3D.prototype._getShader=function(t,e,r){var n=t+"|"+e;if(!this.materialInHash(n)){var i=this.initShaders(t,e,r);this.mHash[n]=i}return this.curShaderId=n,this.mHash[this.curShaderId]},n.Renderer3D.prototype._getCurShaderId=function(){if(void 0===this.curShaderId){var t="normalVert|normalFrag",e=this.initShaders("normalVert","normalFrag");this.mHash[t]=e,this.curShaderId=t}return this.curShaderId},n.Renderer3D.prototype._getCurColor=function(){return void 0===this.curColor&&(this.curColor=[.5,.5,.5,1]),this.curColor},n.Renderer3D.prototype.initHash=function(){this.gHash={},this.mHash={}},n.Renderer3D.prototype.geometryInHash=function(t){return void 0!==this.gHash[t]},n.Renderer3D.prototype.materialInHash=function(t){return void 0!==this.mHash[t]},n.Renderer3D.prototype.initMatrix=function(){this.uMVMatrix=new n.Matrix,this.uPMatrix=new n.Matrix,this.uNMatrix=new n.Matrix},n.Renderer3D.prototype.resetMatrix=function(){this.uMVMatrix=n.Matrix.identity()},n.Renderer3D.prototype._setDefaultCamera=function(){if(!this._setCamera){var t=this.width,e=this.height;this.uPMatrix=n.Matrix.identity(),this.uPMatrix.perspective(60/180*Math.PI,t/e,.1,100),this._setCamera=!0}},n.Renderer3D.prototype.translate=function(t,e,r){return t/=s,e=-e/s,r/=s,this.uMVMatrix.translate([t,e,r]),this},n.Renderer3D.prototype.scale=function(t,e,r){return this.uMVMatrix.scale([t,e,r]),this},n.Renderer3D.prototype.rotate=function(t,e){return this.uMVMatrix.rotate(t,e),this},n.Renderer3D.prototype.rotateX=function(t){return this.uMVMatrix.rotateX(t),this},n.Renderer3D.prototype.rotateY=function(t){return this.uMVMatrix.rotateY(t),this},n.Renderer3D.prototype.rotateZ=function(t){return this.uMVMatrix.rotateZ(t),this},n.Renderer3D.prototype.push=function(){o.push(this.uMVMatrix.copy())},n.Renderer3D.prototype.pop=function(){if(0===o.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=o.pop()},e.exports=n.Renderer3D},{"../core/core":50,"../core/p5.Renderer":56,"./p5.Matrix":37,"./shader":40}],39:[function(t,e,r){"use strict";var n=t("../core/core"),i=0;n.Renderer3D.prototype.createBuffer=function(t,e){if(i++,i>1e3){var r=Object.keys(this.gHash)[0];delete this.gHash[r],i--}var n=this.GL;this.gHash[t]={},this.gHash[t].len=[],this.gHash[t].vertexBuffer=[],this.gHash[t].normalBuffer=[],this.gHash[t].uvBuffer=[],this.gHash[t].indexBuffer=[],e.forEach(function(e){this.gHash[t].len.push(e.len),this.gHash[t].vertexBuffer.push(n.createBuffer()),this.gHash[t].normalBuffer.push(n.createBuffer()),this.gHash[t].uvBuffer.push(n.createBuffer()),this.gHash[t].indexBuffer.push(n.createBuffer())}.bind(this))},n.Renderer3D.prototype.initBuffer=function(t,e){this._setDefaultCamera();var r=this.GL;this.createBuffer(t,e);var n=this.mHash[this._getCurShaderId()];e.forEach(function(e,i){r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].vertexBuffer[i]),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e.vertices),r.STATIC_DRAW),r.vertexAttribPointer(n.vertexPositionAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].normalBuffer[i]),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e.vertexNormals),r.STATIC_DRAW),r.vertexAttribPointer(n.vertexNormalAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].uvBuffer[i]),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e.uvs),r.STATIC_DRAW),r.vertexAttribPointer(n.textureCoordAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.gHash[t].indexBuffer[i]),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.faces),r.STATIC_DRAW)}.bind(this))},n.Renderer3D.prototype.drawBuffer=function(t){this._setDefaultCamera();var e=this.GL,r=this._getCurShaderId(),n=this.mHash[r];this.gHash[t].len.forEach(function(i,o){e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].vertexBuffer[o]),e.vertexAttribPointer(n.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].normalBuffer[o]),e.vertexAttribPointer(n.vertexNormalAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].uvBuffer[o]),e.vertexAttribPointer(n.textureCoordAttribute,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.gHash[t].indexBuffer[o]),this.setMatrixUniforms(r),e.drawElements(e.TRIANGLES,this.gHash[t].len[o],e.UNSIGNED_SHORT,0)}.bind(this))},e.exports=n.Renderer3D},{"../core/core":50}],40:[function(t,e,r){e.exports={vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertTexCoord = aTexCoord;\n}",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    //loc = loc / uResolution;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n  \n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \n    }\n  }\n}"}},{}],41:[function(t,e,r){"use strict";var n=t("./core/core");t("./color/p5.Color"),t("./core/p5.Element"),t("./typography/p5.Font"),t("./core/p5.Graphics"),t("./core/p5.Renderer2D"),t("./image/p5.Image"),t("./math/p5.Vector"),t("./io/p5.TableRow"),t("./io/p5.Table"),t("./color/creating_reading"),t("./color/setting"),t("./core/constants"),t("./utilities/conversion"),t("./utilities/array_functions"),t("./utilities/string_functions"),t("./core/environment"),t("./image/image"),t("./image/loading_displaying"),t("./image/pixels"),t("./io/files"),t("./events/keyboard"),t("./events/acceleration"),t("./events/mouse"),t("./utilities/time_date"),t("./events/touch"),t("./math/math"),t("./math/calculation"),t("./math/random"),t("./math/noise"),t("./math/trigonometry"),t("./core/rendering"),t("./core/2d_primitives"),t("./core/attributes"),t("./core/curves"),t("./core/vertex"),t("./core/structure"),t("./core/transform"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./3d/p5.Renderer3D"),t("./3d/p5.Geometry3D"),t("./3d/retainedMode3D"),t("./3d/immediateMode3D"),t("./3d/3d_primitives"),t("./3d/p5.Matrix"),t("./3d/material"),t("./3d/light"),t("./3d/shader"),t("./3d/camera"),t("./3d/interaction");var i=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&new n};"complete"===document.readyState?i():window.addEventListener("load",i,!1),e.exports=n},{"./3d/3d_primitives":30,"./3d/camera":31,"./3d/immediateMode3D":32,"./3d/interaction":33,"./3d/light":34,"./3d/material":35,"./3d/p5.Geometry3D":36,"./3d/p5.Matrix":37,"./3d/p5.Renderer3D":38,"./3d/retainedMode3D":39,"./3d/shader":40,"./color/creating_reading":43,"./color/p5.Color":44,"./color/setting":45,"./core/2d_primitives":46,"./core/attributes":47,"./core/constants":49,"./core/core":50,"./core/curves":51,"./core/environment":52,"./core/p5.Element":54,"./core/p5.Graphics":55,"./core/p5.Renderer2D":57,"./core/rendering":58,"./core/structure":60,"./core/transform":61,"./core/vertex":62,"./events/acceleration":63,"./events/keyboard":64,"./events/mouse":65,"./events/touch":66,"./image/image":68,"./image/loading_displaying":69,"./image/p5.Image":70,"./image/pixels":71,"./io/files":72,"./io/p5.Table":73,"./io/p5.TableRow":74,"./math/calculation":75,"./math/math":76,"./math/noise":77,"./math/p5.Vector":78,"./math/random":80,"./math/trigonometry":81,"./typography/attributes":82,"./typography/loading_displaying":83,"./typography/p5.Font":84,"./utilities/array_functions":85,"./utilities/conversion":86,"./utilities/string_functions":87,"./utilities/time_date":88}],42:[function(t,e,r){"use strict";var n=t("../core/core");n.ColorConversion={},n.ColorConversion._hsbaToHSLA=function(t){var e=t[0],r=t[1],n=t[2],i=(2-r)*n/2;return 0!==i&&(1===i?r=0:.5>i?r/=2-r:r=r*n/(2-2*i)),[e,r,i,t[3]]},n.ColorConversion._hsbaToRGBA=function(t){var e=6*t[0],r=t[1],n=t[2],i=[];if(0===r)i=[n,n,n,t[3]];else{var o,s,a,u=Math.floor(e),l=n*(1-r),c=n*(1-r*(e-u)),h=n*(1-r*(1+u-e));0===u?(o=n,s=h,a=l):1===u?(o=c,s=n,a=l):2===u?(o=l,s=n,a=h):3===u?(o=l,s=c,a=n):4===u?(o=h,s=l,a=n):(o=n,s=l,a=c),i=[o,s,a,t[3]]}return i},n.ColorConversion._hslaToHSBA=function(t){var e,r=t[0],n=t[1],i=t[2];return e=.5>i?(1+n)*i:i+n-i*n,n=2*(e-i)/e,[r,n,e,t[3]]},n.ColorConversion._hslaToRGBA=function(t){var e=6*t[0],r=t[1],n=t[2],i=[];if(0===r)i=[n,n,n,t[3]];else{var o;o=.5>n?(1+r)*n:n+r-n*r;var s=2*n-o,a=function(t,e,r){return 0>t?t+=6:t>=6&&(t-=6),1>t?e+(r-e)*t:3>t?r:4>t?e+(r-e)*(4-t):e};i=[a(e+2,s,o),a(e,s,o),a(e-2,s,o),t[3]]}return i},n.ColorConversion._rgbaToHSBA=function(t){var e,r,n=t[0],i=t[1],o=t[2],s=Math.max(n,i,o),a=s-Math.min(n,i,o);return 0===a?(e=0,r=0):(r=a/s,n===s?e=(i-o)/a:i===s?e=2+(o-n)/a:o===s&&(e=4+(n-i)/a),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,s,t[3]]},n.ColorConversion._rgbaToHSLA=function(t){var e,r,n=t[0],i=t[1],o=t[2],s=Math.max(n,i,o),a=Math.min(n,i,o),u=s+a,l=s-a;return 0===l?(e=0,r=0):(r=1>u?l/u:l/(2-l),n===s?e=(i-o)/l:i===s?e=2+(o-n)/l:o===s&&(e=4+(n-i)/l),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,u/2,t[3]]},e.exports=n.ColorConversion},{"../core/core":50}],43:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("./p5.Color"),n.prototype.alpha=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.blue=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.brightness=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.color=function(){return arguments[0]instanceof n.Color?arguments[0]:arguments[0]instanceof Array?new n.Color(this,arguments[0]):new n.Color(this,arguments)},n.prototype.green=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.hue=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getHue();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.lerpColor=function(t,e,r){var n,o,s,a,u,l,c=this._renderer._colorMode,h=this._renderer._colorMaxes;if(c===i.RGB)u=t.levels.map(function(t){return t/255}),l=e.levels.map(function(t){return t/255});else if(c===i.HSB)t._getBrightness(),e._getBrightness(),u=t.hsba,l=e.hsba;else{if(c!==i.HSL)throw new Error(c+"cannot be used for interpolation.");t._getLightness(),e._getLightness(),u=t.hsla,l=e.hsla}return r=Math.max(Math.min(r,1),0),n=this.lerp(u[0],l[0],r),o=this.lerp(u[1],l[1],r),s=this.lerp(u[2],l[2],r),a=this.lerp(u[3],l[3],r),n*=h[c][0],o*=h[c][1],s*=h[c][2],a*=h[c][3],this.color(n,o,s,a)},n.prototype.lightness=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.red=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getRed();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.saturation=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.")},e.exports=n},{"../core/constants":49,"../core/core":50,"./p5.Color":44}],44:[function(t,e,r){var n=t("../core/core"),i=t("../core/constants"),o=t("./color_conversion");n.Color=function(t,e){if(this.mode=t._renderer._colorMode,this.maxes=t._renderer._colorMaxes,this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=n.Color._parseInputs.apply(t,e),this.levels=this._array.map(function(t){return Math.round(255*t)}),this},n.Color.prototype.toString=function(){var t=this.levels;return t[3]=this._array[3],"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},n.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},n.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},n.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},n.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},n.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},n.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},n.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",
darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,u=/(\d{1,3})/,l=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,c=new RegExp(l.source+"%"),h={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",l.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i")};n.Color._parseInputs=function(){var t=arguments.length,e=this._renderer._colorMode,r=this._renderer._colorMaxes,a=[];if(t>=3)return a[0]=arguments[0]/r[e][0],a[1]=arguments[1]/r[e][1],a[2]=arguments[2]/r[e][2],"number"==typeof arguments[3]?a[3]=arguments[3]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)}),e===i.HSL?o._hslaToRGBA(a):e===i.HSB?o._hsbaToRGBA(a):a;if(1===t&&"string"==typeof arguments[0]){var u=arguments[0].trim().toLowerCase();if(s[u])return n.Color._parseInputs.apply(this,[s[u]]);if(h.HEX3.test(u))return a=h.HEX3.exec(u).slice(1).map(function(t){return parseInt(t+t,16)/255}),a[3]=1,a;if(h.HEX6.test(u))return a=h.HEX6.exec(u).slice(1).map(function(t){return parseInt(t,16)/255}),a[3]=1,a;if(h.RGB.test(u))return a=h.RGB.exec(u).slice(1).map(function(t){return t/255}),a[3]=1,a;if(h.RGB_PERCENT.test(u))return a=h.RGB_PERCENT.exec(u).slice(1).map(function(t){return parseFloat(t)/100}),a[3]=1,a;if(h.RGBA.test(u))return a=h.RGBA.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):t/255});if(h.RGBA_PERCENT.test(u))return a=h.RGBA_PERCENT.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):parseFloat(t)/100});if(h.HSL.test(u)?(a=h.HSL.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):h.HSLA.test(u)&&(a=h.HSLA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a.length)return o._hslaToRGBA(a);if(h.HSB.test(u)?(a=h.HSB.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):h.HSBA.test(u)&&(a=h.HSBA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a.length)return o._hsbaToRGBA(a);a=[1,1,1,1]}else{if(1!==t&&2!==t||"number"!=typeof arguments[0])throw new Error(arguments+"is not a valid color representation.");a[0]=arguments[0]/r[e][2],a[1]=arguments[0]/r[e][2],a[2]=arguments[0]/r[e][2],"number"==typeof arguments[1]?a[3]=arguments[1]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)})}return a},e.exports=n.Color},{"../core/constants":49,"../core/core":50,"./color_conversion":42}],45:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("./p5.Color"),n.prototype.background=function(){return arguments[0]instanceof n.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},n.prototype.clear=function(){return this._renderer.clear(),this},n.prototype.colorMode=function(){if(arguments[0]===i.RGB||arguments[0]===i.HSB||arguments[0]===i.HSL){this._renderer._colorMode=arguments[0];var t=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(t[0]=arguments[1],t[1]=arguments[1],t[2]=arguments[1],t[3]=arguments[1]):4===arguments.length?(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3]):5===arguments.length&&(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3],t[3]=arguments[4])}return this},n.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},n.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},n.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},n.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},e.exports=n},{"../core/constants":49,"../core/core":50,"./p5.Color":44}],46:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");t("./error_helpers"),n.prototype.arc=function(t,e,r,n,o,s,a){for(var u=new Array(arguments.length),l=0;l<u.length;++l)u[l]=arguments[l];if(this._validateParameters("arc",u,[["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","String"]]),!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===i.DEGREES&&(o=this.radians(o),s=this.radians(s));0>o;)o+=i.TWO_PI;for(;0>s;)s+=i.TWO_PI;return o%=i.TWO_PI,s%=i.TWO_PI,o=o<=i.HALF_PI?Math.atan(r/n*Math.tan(o)):o>i.HALF_PI&&o<=3*i.HALF_PI?Math.atan(r/n*Math.tan(o))+i.PI:Math.atan(r/n*Math.tan(o))+i.TWO_PI,s=s<=i.HALF_PI?Math.atan(r/n*Math.tan(s)):s>i.HALF_PI&&s<=3*i.HALF_PI?Math.atan(r/n*Math.tan(s))+i.PI:Math.atan(r/n*Math.tan(s))+i.TWO_PI,o>s&&(s+=i.TWO_PI),r=Math.abs(r),n=Math.abs(n),this._renderer.arc(t,e,r,n,o,s,a),this},n.prototype.ellipse=function(t,e,r,n){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];return this._validateParameters("ellipse",i,["Number","Number","Number","Number"]),this._renderer._doStroke||this._renderer._doFill?(r=Math.abs(r),n=Math.abs(n),this._renderer.ellipse(t,e,r,n),this):this},n.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters("line",t,[["Number","Number","Number","Number","Number","Number"]]),this._renderer.line(t[0],t[1],t[2],t[3],t[4],t[5])):(this._validateParameters("line",t,[["Number","Number","Number","Number"]]),this._renderer.line(t[0],t[1],t[2],t[3])),this},n.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters("point",t,[["Number","Number","Number"]]),this._renderer.point(t[0],t[1],t[2])):(this._validateParameters("point",t,[["Number","Number"]]),this._renderer.point(t[0],t[1])),this},n.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters("quad",t,[["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11])):(this._validateParameters("quad",t,[["Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])),this},n.prototype.rect=function(t,e,r,n,i,o,s,a){for(var u=new Array(arguments.length),l=0;l<u.length;++l)u[l]=arguments[l];return this._validateParameters("rect",u,[["Number","Number","Number","Number"],["Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer._doStroke||this._renderer._doFill?(this._renderer.rect(t,e,r,n,i,o,s,a),this):void 0},n.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters("triangle",t,[["Number","Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.triangle(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])):(this._validateParameters("triangle",t,[["Number","Number","Number","Number","Number","Number"]]),this._renderer.triangle(t[0],t[1],t[2],t[3],t[4],t[5])),this},e.exports=n},{"./constants":49,"./core":50,"./error_helpers":53}],47:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");n.prototype.ellipseMode=function(t){return t!==i.CORNER&&t!==i.CORNERS&&t!==i.RADIUS&&t!==i.CENTER||(this._renderer._ellipseMode=t),this},n.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},n.prototype.rectMode=function(t){return t!==i.CORNER&&t!==i.CORNERS&&t!==i.RADIUS&&t!==i.CENTER||(this._renderer._rectMode=t),this},n.prototype.smooth=function(){return this._renderer.smooth(),this},n.prototype.strokeCap=function(t){return t!==i.ROUND&&t!==i.SQUARE&&t!==i.PROJECT||this._renderer.strokeCap(t),this},n.prototype.strokeJoin=function(t){return t!==i.ROUND&&t!==i.BEVEL&&t!==i.MITER||this._renderer.strokeJoin(t),this},n.prototype.strokeWeight=function(t){return this._renderer.strokeWeight(t),this},e.exports=n},{"./constants":49,"./core":50}],48:[function(t,e,r){var n=t("./constants");e.exports={modeAdjust:function(t,e,r,i,o){return o===n.CORNER?{x:t,y:e,w:r,h:i}:o===n.CORNERS?{x:t,y:e,w:r-t,h:i-e}:o===n.RADIUS?{x:t-r,y:e-i,w:2*r,h:2*i}:o===n.CENTER?{x:t-.5*r,y:e-.5*i,w:r,h:i}:void 0},arcModeAdjust:function(t,e,r,i,o){return o===n.CORNER?{x:t+.5*r,y:e+.5*i,w:r,h:i}:o===n.CORNERS?{x:t,y:e,w:r+t,h:i+e}:o===n.RADIUS?{x:t,y:e,w:2*r,h:2*i}:o===n.CENTER?{x:t,y:e,w:r,h:i}:void 0}}},{"./constants":49}],49:[function(t,e,r){var n=Math.PI;e.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:n/2,PI:n,QUARTER_PI:n/4,TAU:2*n,TWO_PI:2*n,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],50:[function(t,e,r){"use strict";t("./shim");var n=t("./constants"),i=function(t,e,r){2===arguments.length&&"boolean"==typeof e&&(r=e,e=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=e,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._events.wheel=null,this._loadingScreenId="p5_loading",this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var t=this.preload||window.preload;if(t){var e=document.getElementById(this._loadingScreenId);if(!e){e=document.createElement("div"),e.innerHTML="Loading...",e.style.position="absolute",e.id=this._loadingScreenId;var r=this._userNode||document.body;r.appendChild(e)}for(var n in this._preloadMethods){this._preloadMethods[n]=this._preloadMethods[n]||i;var o=this._preloadMethods[n];o!==i.prototype&&o!==i||(o=this._isGlobal?window:this),this._registeredPreloadMethods[n]=o[n],o[n]=this._wrapPreload(o,n)}t(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var t=this._isGlobal?window:this;if(0===t._preloadCount){var e=document.getElementById(t._loadingScreenId);e&&e.parentNode.removeChild(e),t._setup(),t._runFrames(),t._draw()}},this._decrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone()},this._wrapPreload=function(t,e){return function(){this._incrementPreload();var r=Array.prototype.slice.call(arguments);return r.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[e].apply(t,r)}.bind(this)},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){var t=this._isGlobal?window:this;if("function"==typeof t.preload)for(var e in this._preloadMethods)t[e]=this._preloadMethods[e][e];"function"==typeof t.setup&&t.setup();for(var r=new RegExp(/(^|\s)p5_hidden(?!\S)/g),n=document.getElementsByClassName("p5_hidden"),i=0;i<n.length;i++){var o=n[i];o.style.visibility="",o.className=o.className.replace(r,"")}this._setupDone=!0}.bind(this),this._draw=function(){var t=window.performance.now(),e=t-this._lastFrameTime,r=1e3/this._targetFrameRate,n=5;(!this._loop||e>=r-n)&&(this._renderer.isP3D&&this._renderer._update(),this._setProperty("frameCount",this.frameCount+1),this._updateMouseCoords(),this._updateTouchCoords(),this.redraw(),this._frameRate=1e3/(t-this._lastFrameTime),this._lastFrameTime=t),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(t,e){this[t]=e,this._isGlobal&&(window[t]=e)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var t in this._events)window.removeEventListener(t,this._events[t]);for(var e=0;e<this._elements.length;e++){var r=this._elements[e];r.elt.parentNode&&r.elt.parentNode.removeChild(r.elt);for(var n in r._events)r.elt.removeEventListener(n,r._events[n])}var o=this;if(this._registeredMethods.remove.forEach(function(t){"undefined"!=typeof t&&t.call(o)}),this._isGlobal){for(var s in i.prototype)try{delete window[s]}catch(a){window[s]=void 0}for(var u in this)if(this.hasOwnProperty(u))try{delete window[u]}catch(a){window[u]=void 0}}}}.bind(this);for(var o in n)i.prototype[o]=n[o];if(t)t(this);else{this._isGlobal=!0;for(var s in i.prototype)if("function"==typeof i.prototype[s]){var a=s.substring(2);this._events.hasOwnProperty(a)||(window[s]=i.prototype[s].bind(this))}else window[s]=i.prototype[s];for(var u in this)this.hasOwnProperty(u)&&(window[u]=this[u])}for(var l in this._events){var c=this["_on"+l];if(c){var h=c.bind(this);window.addEventListener(l,h),this._events[l]=h}}var p=function(){this._setProperty("focused",!0)}.bind(this),f=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",p),window.addEventListener("blur",f),this.registerMethod("remove",function(){window.removeEventListener("focus",p),window.removeEventListener("blur",f)}),r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadShape:i.prototype,loadTable:i.prototype,loadFont:i.prototype},i.prototype._registeredMethods={pre:[],post:[],remove:[]},i.prototype._registeredPreloadMethods={},i.prototype.registerPreloadMethod=function(t,e){i.prototype._preloadMethods.hasOwnProperty(t)||(i.prototype._preloadMethods[t]=e)},i.prototype.registerMethod=function(t,e){i.prototype._registeredMethods.hasOwnProperty(t)||(i.prototype._registeredMethods[t]=[]),i.prototype._registeredMethods[t].push(e)},e.exports=i},{"./constants":49,"./shim":59}],51:[function(t,e,r){"use strict";var n=t("./core");t("./error_helpers");var i=20,o=20;n.prototype.bezier=function(t,e,r,n,i,o,s,a){for(var u=new Array(arguments.length),l=0;l<u.length;++l)u[l]=arguments[l];return this._validateParameters("bezier",u,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.bezier(t,e,r,n,i,o,s,a),this):this},n.prototype.bezierDetail=function(t){return i=t,this},n.prototype.bezierPoint=function(t,e,r,n,i){var o=1-i;return Math.pow(o,3)*t+3*Math.pow(o,2)*i*e+3*o*Math.pow(i,2)*r+Math.pow(i,3)*n},n.prototype.bezierTangent=function(t,e,r,n,i){var o=1-i;return 3*n*Math.pow(i,2)-3*r*Math.pow(i,2)+6*r*o*i-6*e*o*i+3*e*Math.pow(o,2)-3*t*Math.pow(o,2)},n.prototype.curve=function(t,e,r,n,i,o,s,a){for(var u=new Array(arguments.length),l=0;l<u.length;++l)u[l]=arguments[l];return this._validateParameters("curve",u,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.curve(t,e,r,n,i,o,s,a),this):void 0},n.prototype.curveDetail=function(t){return o=t,this},n.prototype.curveTightness=function(t){this._renderer._curveTightness=t},n.prototype.curvePoint=function(t,e,r,n,i){var o=i*i*i,s=i*i,a=-.5*o+s-.5*i,u=1.5*o-2.5*s+1,l=-1.5*o+2*s+.5*i,c=.5*o-.5*s;return t*a+e*u+r*l+n*c},n.prototype.curveTangent=function(t,e,r,n,i){var o=i*i,s=-3*o/2+2*i-.5,a=9*o/2-5*i,u=-9*o/2+4*i+.5,l=3*o/2-i;return t*s+e*a+r*u+n*l},e.exports=n},{"./core":50,"./error_helpers":53}],52:[function(t,e,r){"use strict";function n(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!e)throw new Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function i(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var o=t("./core"),s=t("./constants"),a=[s.ARROW,s.CROSS,s.HAND,s.MOVE,s.TEXT,s.WAIT];o.prototype._frameRate=0,o.prototype._lastFrameTime=window.performance.now(),o.prototype._targetFrameRate=60,window.console&&console.log?o.prototype.print=function(t){try{var e=JSON.parse(JSON.stringify(t));console.log(e)}catch(r){console.log(t)}}:o.prototype.print=function(){},o.prototype.println=o.prototype.print,o.prototype.frameCount=0,o.prototype.focused=document.hasFocus(),o.prototype.cursor=function(t,e,r){var n="auto",i=this._curElement.elt;if(a.indexOf(t)>-1)n=t;else if("string"==typeof t){var o="";e&&r&&"number"==typeof e&&"number"==typeof r&&(o=e+" "+r),n="http://"!==t.substring(0,6)?"url("+t+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url("+t+") "+o+", auto":t}i.style.cursor=n},o.prototype.frameRate=function(t){return"number"!=typeof t||0>=t?this._frameRate:(this._setProperty("_targetFrameRate",t),this._runFrames(),this)},o.prototype.getFrameRate=function(){return this.frameRate()},o.prototype.setFrameRate=function(t){return this.frameRate(t)},o.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.prototype.displayWidth=screen.width,o.prototype.displayHeight=screen.height,o.prototype.windowWidth=window.innerWidth,o.prototype.windowHeight=window.innerHeight,o.prototype._onresize=function(t){this._setProperty("windowWidth",window.innerWidth),this._setProperty("windowHeight",window.innerHeight);var e,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(e=r.windowResized(t),void 0===e||e||t.preventDefault())},o.prototype.width=0,o.prototype.height=0,o.prototype.fullScreen=function(t){return"undefined"==typeof t?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(t?n(document.documentElement):i())},o.prototype.pixelDensity=function(t){return"number"!=typeof t?this._pixelDensity:(this._pixelDensity=t,void this.resizeCanvas(this.width,this.height,!0))},o.prototype.displayDensity=function(){return window.devicePixelRatio},o.prototype.getURL=function(){return location.href},o.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},o.prototype.getURLParams=function(){for(var t,e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,r[t[1]]=t[2];return r},e.exports=o},{"./constants":49,"./core":50}],53:[function(t,e,r){"use strict";function n(t,e,r){if(t.match(/^p5\./)){var n=t.split(".");return r instanceof a[n[1]]}return"Boolean"===t||t.toLowerCase()===e||g.indexOf(t)>-1&&m(r)}function i(t,e,r){u&&(o(),u=!1),"undefined"===f(r)?r="#B40033":"number"===f(r)&&(r=w[r])}function o(){var t="transparent",e="#ED225D",r="#ED225D",n="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using “p5.min.js”.","background-color:"+t+";color:"+e+";","background-color:"+r+";color:"+n+";")}function s(t){S.forEach(function(e){t.message&&-1!==t.message.indexOf(e)&&console.log("%c Did you just try to use p5.js's '"+e+"' function or variable? If so, you may want to move it into your sketch's setup() function.","color: #B40033")})}for(var a=t("./core"),u=!1,l={},c=l.toString,h=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],p=0;p<h.length;p++)l["[object "+h[p]+"]"]=h[p].toLowerCase();var f=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t},d=Array.isArray||function(t){return"array"===f(t)},m=function(t){return!d(t)&&t-parseFloat(t)+1>=0},g=["Number","Integer","Number/Constant"],y=0,v=1,_=2,b=3,w=["#2D7BB6","#EE9900","#4DB200","#C83C00"];a.prototype._validateParameters=function(t,e,r){d(r[0])||(r=[r]);for(var o,s=Math.abs(e.length-r[0].length),a=0,u=1,l=r.length;l>u;u++){var c=Math.abs(e.length-r[u].length);s>=c&&(a=u,s=c)}var h="X";s>0&&(o="You wrote "+t+"(",e.length>0&&(o+=h+Array(e.length).join(","+h)),o+="). "+t+" was expecting "+r[a].length+" parameters. Try "+t+"(",r[a].length>0&&(o+=h+Array(r[a].length).join(","+h)),o+=").",r.length>1&&(o+=" "+t+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),i(o,t,y));for(var p=0;p<r.length;p++)for(var m=0;m<r[p].length&&m<e.length;m++){var g=r[p][m],b=f(e[m]);"undefined"===b||null===b?i("It looks like "+t+" received an empty variable in spot #"+(m+1)+". If not intentional, this is often a problem with scope: [link to scope].",t,v):"*"===g||n(g,b,e[m])||(o=t+" was expecting a "+g.toLowerCase()+" for parameter #"+(m+1)+", received ",o+="string"===b?'"'+e[m]+'"':e[m],o+=" instead.",r.length>1&&(o+=" "+t+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),i(o,t,_))}},a.prototype._validateParameters=function(){return!0};var x={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"}};a._friendlyFileLoadError=function(t,e){var r=x[t],n="It looks like there was a problem loading your "+r.fileType+". Try checking if the file path%c ["+e+"] %cis correct,"+(r.message||"")+" or running a local server.";i(n,r.method,b)};var S=["color","random"];"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),e.exports=a},{"./core":50}],54:[function(t,e,r){function n(t,e,r){var n=e.bind(r);r.elt.addEventListener(t,n,!1),r._events[t]=n}var i=t("./core");i.Element=function(t,e){this.elt=t,this._pInst=e,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},i.Element.prototype.parent=function(t){return 0===arguments.length?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof i.Element&&(t=t.elt),t.appendChild(this.elt),this)},i.Element.prototype.id=function(t){return 0===arguments.length?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},i.Element.prototype["class"]=function(t){return 0===arguments.length?this.elt.className:(this.elt.className=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},i.Element.prototype.mousePressed=function(t){return n("mousedown",t,this),n("touchstart",t,this),this},i.Element.prototype.mouseWheel=function(t){return n("wheel",t,this),this},i.Element.prototype.mouseReleased=function(t){return n("mouseup",t,this),n("touchend",t,this),this},i.Element.prototype.mouseClicked=function(t){return n("click",t,this),this},i.Element.prototype.mouseMoved=function(t){return n("mousemove",t,this),n("touchmove",t,this),this},i.Element.prototype.mouseOver=function(t){return n("mouseover",t,this),this},i.Element.prototype.changed=function(t){return n("change",t,this),this},i.Element.prototype.input=function(t){return n("input",t,this),this},i.Element.prototype.mouseOut=function(t){return n("mouseout",t,this),this},i.Element.prototype.touchStarted=function(t){return n("touchstart",t,this),n("mousedown",t,this),this},i.Element.prototype.touchMoved=function(t){return n("touchmove",t,this),n("mousemove",t,this),this},i.Element.prototype.touchEnded=function(t){return n("touchend",t,this),n("mouseup",t,this),this},i.Element.prototype.dragOver=function(t){return n("dragover",t,this),this},i.Element.prototype.dragLeave=function(t){return n("dragleave",t,this),this},i.Element.prototype.drop=function(t,e){function r(e){var r=new i.File(e);return function(e){r.data=e.target.result,t(r)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(n("dragover",function(t){t.stopPropagation(),t.preventDefault()},this),n("dragleave",function(t){t.stopPropagation(),t.preventDefault()},this),arguments.length>1&&n("drop",e,this),n("drop",function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer.files,n=0;n<e.length;n++){var i=e[n],o=new FileReader;o.onload=r(i),i.type.indexOf("text")>-1?o.readAsText(i):o.readAsDataURL(i)}},this)):console.log("The File APIs are not fully supported in this browser."),this},i.Element.prototype._setProperty=function(t,e){this[t]=e},e.exports=i.Element},{"./core":50}],55:[function(t,e,r){var n=t("./core"),i=t("./constants");n.Graphics=function(t,e,r,o){var s=r||i.P2D,a=document.createElement("canvas"),u=this._userNode||document.body;u.appendChild(a),n.Element.call(this,a,o,!1),this._styles=[],this.width=t,this.height=e,this._pixelDensity=o._pixelDensity,s===i.WEBGL?this._renderer=new n.Renderer3D(a,o,!1):this._renderer=new n.Renderer2D(a,o,!1),this._renderer.resize(t,e),this._renderer._applyDefaults(),o._elements.push(this);for(var l in n.prototype)this[l]||("function"==typeof n.prototype[l]?this[l]=n.prototype[l].bind(this):this[l]=n.prototype[l]);return this},n.Graphics.prototype=Object.create(n.Element.prototype),e.exports=n.Graphics},{"./constants":49,"./core":50}],56:[function(t,e,r){function n(t){var e=0,r=0;if(t.offsetParent){do e+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent)}else e+=t.offsetLeft,r+=t.offsetTop;return[e,r]}var i=t("./core"),o=t("../core/constants");i.Renderer=function(t,e,r){i.Element.call(this,t,e),this.canvas=t,this._pInst=e,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},i.Renderer.prototype=Object.create(i.Element.prototype),i.Renderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=e*this._pInst._pixelDensity,this.elt.style.width=t+"px",this.elt.style.height=e+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},i.Renderer.prototype.textLeading=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",t),this):this._textLeading},i.Renderer.prototype.textSize=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textSize",t),this._setProperty("_textLeading",t*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize;
},i.Renderer.prototype.textStyle=function(t){return arguments.length&&arguments[0]?(t!==o.NORMAL&&t!==o.ITALIC&&t!==o.BOLD||this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},i.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},i.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},i.Renderer.prototype._isOpenType=function(t){return t=t||this._textFont,"object"==typeof t&&t.font&&t.font.supported},i.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize=this._textSize+"px",t.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block",e.style.width="1px",e.style.height="0px";var r=document.createElement("div");r.appendChild(t),r.appendChild(e),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),e.style.verticalAlign="baseline";var i=n(e),o=n(t),s=i[1]-o[1];e.style.verticalAlign="bottom",i=n(e),o=n(t);var a=i[1]-o[1],u=a-s;return document.body.removeChild(r),this._setProperty("_textAscent",s),this._setProperty("_textDescent",u),this},e.exports=i.Renderer},{"../core/constants":49,"./core":50}],57:[function(t,e,r){var n=t("./core"),i=t("./canvas"),o=t("./constants"),s=t("../image/filters");t("./p5.Renderer");var a="rgba(0,0,0,0)";n.Renderer2D=function(t,e,r){return n.Renderer.call(this,t,e,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.Renderer2D.prototype=Object.create(n.Renderer.prototype),n.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=o._DEFAULT_FILL,this.drawingContext.strokeStyle=o._DEFAULT_STROKE,this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.Renderer2D.prototype.resize=function(t,e){n.Renderer.prototype.resize.call(this,t,e),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof n.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var t=this.drawingContext.fillStyle,e=this._pInst.color.apply(this._pInst,arguments),r=e.toString();this.drawingContext.fillStyle=r,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=t}this.drawingContext.restore()},n.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},n.Renderer2D.prototype.fill=function(){var t=this.drawingContext,e=this._pInst.color.apply(this._pInst,arguments);t.fillStyle=e.toString()},n.Renderer2D.prototype.stroke=function(){var t=this.drawingContext,e=this._pInst.color.apply(this._pInst,arguments);t.strokeStyle=e.toString()},n.Renderer2D.prototype.image=function(t,e,r,i,o,s,a,u,l){var c;try{this._tint&&(n.MediaElement&&t instanceof n.MediaElement&&t.loadPixels(),t.canvas&&(c=this._getTintedImageCanvas(t))),c||(c=t.canvas||t.elt),this.drawingContext.drawImage(c,e,r,i,o,s,a,u,l)}catch(h){if("NS_ERROR_NOT_AVAILABLE"!==h.name)throw h}},n.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=s._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var n=r.getContext("2d"),i=n.createImageData(t.canvas.width,t.canvas.height),o=i.data,a=0;a<e.length;a+=4){var u=e[a],l=e[a+1],c=e[a+2],h=e[a+3];o[a]=u*this._tint[0]/255,o[a+1]=l*this._tint[1]/255,o[a+2]=c*this._tint[2]/255,o[a+3]=h*this._tint[3]/255}return n.putImageData(i,0,0),r},n.Renderer2D.prototype.blendMode=function(t){this.drawingContext.globalCompositeOperation=t},n.Renderer2D.prototype.blend=function(){var t=this.drawingContext.globalCompositeOperation,e=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=e,this._pInst.copy.apply(this._pInst,r),this.drawingContext.globalCompositeOperation=t},n.Renderer2D.prototype.copy=function(){var t,e,r,i,o,s,a,u,l;if(9===arguments.length)t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],u=arguments[7],l=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this._pInst,e=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],u=arguments[6],l=arguments[7]}n.Renderer2D._copyHelper(t,e,r,i,o,s,a,u,l)},n.Renderer2D._copyHelper=function(t,e,r,n,i,o,s,a,u){var l=t.canvas.width/t.width;this.drawingContext.drawImage(t.canvas,l*e,l*r,l*n,l*i,o,s,a,u)},n.Renderer2D.prototype.get=function(t,e,r,i){if(void 0===t&&void 0===e&&void 0===r&&void 0===i?(t=0,e=0,r=this.width,i=this.height):void 0===r&&void 0===i&&(r=1,i=1),0>t+r||0>e+i||t>this.width||e>this.height)return[0,0,0,255];var o=this._pInst||this,s=o._pixelDensity;if(this.loadPixels.call(o),t=Math.floor(t),e=Math.floor(e),1===r&&1===i)return[o.pixels[4*s*(e*this.width+t)],o.pixels[s*(4*(e*this.width+t)+1)],o.pixels[s*(4*(e*this.width+t)+2)],o.pixels[s*(4*(e*this.width+t)+3)]];var a=t*s,u=e*s,l=Math.min(r,o.width),c=Math.min(i,o.height),h=l*s,p=c*s,f=new n.Image(l,c);return f.canvas.getContext("2d").drawImage(this.canvas,a,u,h,p,0,0,l,c),f},n.Renderer2D.prototype.loadPixels=function(){var t=this._pixelDensity||this._pInst._pixelDensity,e=this.width*t,r=this.height*t,n=this.drawingContext.getImageData(0,0,e,r);this._pInst?(this._pInst._setProperty("imageData",n),this._pInst._setProperty("pixels",n.data)):(this._setProperty("imageData",n),this._setProperty("pixels",n.data))},n.Renderer2D.prototype.set=function(t,e,r){if(t=Math.floor(t),e=Math.floor(e),r instanceof n.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(r.canvas,t,e),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var i=this._pInst||this,o=0,s=0,a=0,u=0,l=4*(e*i._pixelDensity*(this.width*i._pixelDensity)+t*i._pixelDensity);if(i.imageData||i.loadPixels.call(i),"number"==typeof r)l<i.pixels.length&&(o=r,s=r,a=r,u=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<i.pixels.length&&(o=r[0],s=r[1],a=r[2],u=r[3])}else r instanceof n.Color&&l<i.pixels.length&&(o=r.levels[0],s=r.levels[1],a=r.levels[2],u=r.levels[3]);for(var c=0;c<i._pixelDensity;c++)for(var h=0;h<i._pixelDensity;h++)l=4*((e*i._pixelDensity+h)*this.width*i._pixelDensity+(t*i._pixelDensity+c)),i.pixels[l]=o,i.pixels[l+1]=s,i.pixels[l+2]=a,i.pixels[l+3]=u}},n.Renderer2D.prototype.updatePixels=function(t,e,r,n){var i=this._pixelDensity||this._pInst._pixelDensity;void 0===t&&void 0===e&&void 0===r&&void 0===n&&(t=0,e=0,r=this.width,n=this.height),r*=i,n*=i,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,t,e,0,0,r,n):this.drawingContext.putImageData(this.imageData,t,e,0,0,r,n)},n.Renderer2D.prototype._acuteArcToBezier=function(t,e){var r=e/2,n=Math.cos(r),i=Math.sin(r),o=1/Math.tan(r),s=t+r,a=Math.cos(s),u=Math.sin(s),l=(4-n)/3,c=i+(n-l)*o;return{ax:Math.cos(t),ay:Math.sin(t),bx:l*a+c*u,by:l*u-c*a,cx:l*a-c*u,cy:l*u+c*a,dx:Math.cos(t+e),dy:Math.sin(t+e)}},n.Renderer2D.prototype.arc=function(t,e,r,n,s,a,u){for(var l=this.drawingContext,c=i.arcModeAdjust(t,e,r,n,this._ellipseMode),h=c.w/2,p=c.h/2,f=1e-5,d=0,m=[];a-s>f;)d=Math.min(a-s,o.HALF_PI),m.push(this._acuteArcToBezier(s,d)),s+=d;return this._doFill&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(c.x+t.ax*h,c.y+t.ay*p),l.bezierCurveTo(c.x+t.bx*h,c.y+t.by*p,c.x+t.cx*h,c.y+t.cy*p,c.x+t.dx*h,c.y+t.dy*p)}),u!==o.PIE&&null!=u||l.lineTo(c.x,c.y),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(c.x+t.ax*h,c.y+t.ay*p),l.bezierCurveTo(c.x+t.bx*h,c.y+t.by*p,c.x+t.cx*h,c.y+t.cy*p,c.x+t.dx*h,c.y+t.dy*p)}),u===o.PIE?(l.lineTo(c.x,c.y),l.closePath()):u===o.CHORD&&l.closePath(),l.stroke()),this},n.Renderer2D.prototype.ellipse=function(t,e,r,n){var o=this.drawingContext,s=this._doFill,u=this._doStroke;if(s&&!u){if(o.fillStyle===a)return this}else if(!s&&u&&o.strokeStyle===a)return this;var l=i.modeAdjust(t,e,r,n,this._ellipseMode),c=.5522847498,h=l.w/2*c,p=l.h/2*c,f=l.x+l.w,d=l.y+l.h,m=l.x+l.w/2,g=l.y+l.h/2;o.beginPath(),o.moveTo(l.x,g),o.bezierCurveTo(l.x,g-p,m-h,l.y,m,l.y),o.bezierCurveTo(m+h,l.y,f,g-p,f,g),o.bezierCurveTo(f,g+p,m+h,d,m,d),o.bezierCurveTo(m-h,d,l.x,g+p,l.x,g),o.closePath(),s&&o.fill(),u&&o.stroke()},n.Renderer2D.prototype.line=function(t,e,r,n){var i=this.drawingContext;return this._doStroke?i.strokeStyle===a?this:(i.lineWidth%2===1&&i.translate(.5,.5),i.beginPath(),i.moveTo(t,e),i.lineTo(r,n),i.stroke(),i.lineWidth%2===1&&i.translate(-.5,-.5),this):this},n.Renderer2D.prototype.point=function(t,e){var r=this.drawingContext,n=r.strokeStyle,i=r.fillStyle;return this._doStroke?r.strokeStyle===a?this:(t=Math.round(t),e=Math.round(e),r.fillStyle=n,r.lineWidth>1?(r.beginPath(),r.arc(t,e,r.lineWidth/2,0,o.TWO_PI,!1),r.fill()):r.fillRect(t,e,1,1),void(r.fillStyle=i)):this},n.Renderer2D.prototype.quad=function(t,e,r,n,i,o,s,u){var l=this.drawingContext,c=this._doFill,h=this._doStroke;if(c&&!h){if(l.fillStyle===a)return this}else if(!c&&h&&l.strokeStyle===a)return this;return l.beginPath(),l.moveTo(t,e),l.lineTo(r,n),l.lineTo(i,o),l.lineTo(s,u),l.closePath(),c&&l.fill(),h&&l.stroke(),this},n.Renderer2D.prototype.rect=function(t,e,r,n,o,s,u,l){var c=this.drawingContext,h=this._doFill,p=this._doStroke;if(h&&!p){if(c.fillStyle===a)return this}else if(!h&&p&&c.strokeStyle===a)return this;var f=i.modeAdjust(t,e,r,n,this._rectMode);if(this._doStroke&&c.lineWidth%2===1&&c.translate(.5,.5),c.beginPath(),"undefined"==typeof o)c.rect(f.x,f.y,f.w,f.h);else{"undefined"==typeof s&&(s=o),"undefined"==typeof u&&(u=s),"undefined"==typeof l&&(l=u);var d=f.x,m=f.y,g=f.w,y=f.h,v=g/2,_=y/2;2*o>g&&(o=v),2*o>y&&(o=_),2*s>g&&(s=v),2*s>y&&(s=_),2*u>g&&(u=v),2*u>y&&(u=_),2*l>g&&(l=v),2*l>y&&(l=_),c.beginPath(),c.moveTo(d+o,m),c.arcTo(d+g,m,d+g,m+y,s),c.arcTo(d+g,m+y,d,m+y,u),c.arcTo(d,m+y,d,m,l),c.arcTo(d,m,d+g,m,o),c.closePath()}return this._doFill&&c.fill(),this._doStroke&&c.stroke(),this._doStroke&&c.lineWidth%2===1&&c.translate(-.5,-.5),this},n.Renderer2D.prototype.triangle=function(t,e,r,n,i,o){var s=this.drawingContext,u=this._doFill,l=this._doStroke;if(u&&!l){if(s.fillStyle===a)return this}else if(!u&&l&&s.strokeStyle===a)return this;s.beginPath(),s.moveTo(t,e),s.lineTo(r,n),s.lineTo(i,o),s.closePath(),u&&s.fill(),l&&s.stroke()},n.Renderer2D.prototype.endShape=function(t,e,r,n,i,s,a){if(0===e.length)return this;if(!this._doStroke&&!this._doFill)return this;var u,l=t===o.CLOSE;l&&!s&&e.push(e[0]);var c,h,p=e.length;if(!r||a!==o.POLYGON&&null!==a)if(!n||a!==o.POLYGON&&null!==a)if(!i||a!==o.POLYGON&&null!==a)if(a===o.POINTS)for(c=0;p>c;c++)u=e[c],this._doStroke&&this._pInst.stroke(u[6]),this._pInst.point(u[0],u[1]);else if(a===o.LINES)for(c=0;p>c+1;c+=2)u=e[c],this._doStroke&&this._pInst.stroke(e[c+1][6]),this._pInst.line(u[0],u[1],e[c+1][0],e[c+1][1]);else if(a===o.TRIANGLES)for(c=0;p>c+2;c+=3)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(e[c+2][0],e[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this._doFill&&(this._pInst.fill(e[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(e[c+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===o.TRIANGLE_STRIP)for(c=0;p>c+1;c++)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doStroke&&this._pInst.stroke(e[c+1][6]),this._doFill&&this._pInst.fill(e[c+1][5]),p>c+2&&(this.drawingContext.lineTo(e[c+2][0],e[c+2][1]),this._doStroke&&this._pInst.stroke(e[c+2][6]),this._doFill&&this._pInst.fill(e[c+2][5])),this._doFillStrokeClose();else if(a===o.TRIANGLE_FAN){if(p>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[1][0],e[1][1]),this.drawingContext.lineTo(e[2][0],e[2][1]),this._doFill&&this._pInst.fill(e[2][5]),this._doStroke&&this._pInst.stroke(e[2][6]),this._doFillStrokeClose(),c=3;p>c;c++)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[c-1][0],e[c-1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(u[5]),this._doStroke&&this._pInst.stroke(u[6]),this._doFillStrokeClose()}else if(a===o.QUADS)for(c=0;p>c+3;c+=4){for(u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),h=1;4>h;h++)this.drawingContext.lineTo(e[c+h][0],e[c+h][1]);this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(e[c+3][5]),this._doStroke&&this._pInst.stroke(e[c+3][6]),this._doFillStrokeClose()}else if(a===o.QUAD_STRIP){if(p>3)for(c=0;p>c+1;c+=2)u=e[c],this.drawingContext.beginPath(),p>c+3?(this.drawingContext.moveTo(e[c+2][0],e[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(e[c+3][0],e[c+3][1]),this._doFill&&this._pInst.fill(e[c+3][5]),this._doStroke&&this._pInst.stroke(e[c+3][6])):(this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),c=1;p>c;c++)u=e[c],u.isVert&&(u.moveTo?this.drawingContext.moveTo(u[0],u[1]):this.drawingContext.lineTo(u[0],u[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;p>c;c++)e[c].isVert?e[c].moveTo?this.drawingContext.moveTo([0],e[c][1]):this.drawingContext.lineTo(e[c][0],e[c][1]):this.drawingContext.quadraticCurveTo(e[c][0],e[c][1],e[c][2],e[c][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;p>c;c++)e[c].isVert?e[c].moveTo?this.drawingContext.moveTo(e[c][0],e[c][1]):this.drawingContext.lineTo(e[c][0],e[c][1]):this.drawingContext.bezierCurveTo(e[c][0],e[c][1],e[c][2],e[c][3],e[c][4],e[c][5]);this._doFillStrokeClose()}else if(p>3){var f=[],d=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[1][0],e[1][1]),c=1;p>c+2;c++)u=e[c],f[0]=[u[0],u[1]],f[1]=[u[0]+(d*e[c+1][0]-d*e[c-1][0])/6,u[1]+(d*e[c+1][1]-d*e[c-1][1])/6],f[2]=[e[c+1][0]+(d*e[c][0]-d*e[c+2][0])/6,e[c+1][1]+(d*e[c][1]-d*e[c+2][1])/6],f[3]=[e[c+1][0],e[c+1][1]],this.drawingContext.bezierCurveTo(f[1][0],f[1][1],f[2][0],f[2][1],f[3][0],f[3][1]);l&&this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this._doFillStrokeClose()}return r=!1,n=!1,i=!1,s=!1,l&&e.pop(),this},n.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},n.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},n.Renderer2D.prototype.strokeCap=function(t){return t!==o.ROUND&&t!==o.SQUARE&&t!==o.PROJECT||(this.drawingContext.lineCap=t),this},n.Renderer2D.prototype.strokeJoin=function(t){return t!==o.ROUND&&t!==o.BEVEL&&t!==o.MITER||(this.drawingContext.lineJoin=t),this},n.Renderer2D.prototype.strokeWeight=function(t){return"undefined"==typeof t||0===t?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=t,this},n.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},n.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},n.Renderer2D.prototype.bezier=function(t,e,r,n,i,o,s,a){return this._pInst.beginShape(),this._pInst.vertex(t,e),this._pInst.bezierVertex(r,n,i,o,s,a),this._pInst.endShape(),this},n.Renderer2D.prototype.curve=function(t,e,r,n,i,o,s,a){return this._pInst.beginShape(),this._pInst.curveVertex(t,e),this._pInst.curveVertex(r,n),this._pInst.curveVertex(i,o),this._pInst.curveVertex(s,a),this._pInst.endShape(),this},n.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},n.Renderer2D.prototype.applyMatrix=function(t,e,r,n,i,o){this.drawingContext.transform(t,e,r,n,i,o)},n.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.Renderer2D.prototype.rotate=function(t){this.drawingContext.rotate(t)},n.Renderer2D.prototype.scale=function(t,e){return this.drawingContext.scale(t,e),this},n.Renderer2D.prototype.shearX=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.radians(t)),this.drawingContext.transform(1,0,this._pInst.tan(t),1,0,0),this},n.Renderer2D.prototype.shearY=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.radians(t)),this.drawingContext.transform(1,this._pInst.tan(t),0,1,0,0),this},n.Renderer2D.prototype.translate=function(t,e){return this.drawingContext.translate(t,e),this},n.Renderer2D.prototype.text=function(t,e,r,n,i){var s,a,u,l,c,h,p,f,d,m,g=this._pInst,y=Number.MAX_VALUE;if(this._doFill||this._doStroke){if("string"!=typeof t&&(t=t.toString()),t=t.replace(/(\t)/g,"  "),s=t.split("\n"),"undefined"!=typeof n){for(d=0,u=0;u<s.length;u++)for(c="",f=s[u].split(" "),a=0;a<f.length;a++)h=c+f[a]+" ",p=this.textWidth(h),p>n?(c=f[a]+" ",d+=g.textLeading()):c=h;switch(this._rectMode===o.CENTER&&(e-=n/2,r-=i/2),this.drawingContext.textAlign){case o.CENTER:e+=n/2;break;case o.RIGHT:e+=n}if("undefined"!=typeof i){switch(this.drawingContext.textBaseline){case o.BOTTOM:r+=i-d;break;case o._CTX_MIDDLE:r+=(i-d)/2;break;case o.BASELINE:m=!0,this.drawingContext.textBaseline=o.TOP}y=r+i-g.textAscent()}for(u=0;u<s.length;u++){for(c="",f=s[u].split(" "),a=0;a<f.length;a++)h=c+f[a]+" ",p=this.textWidth(h),p>n&&c.length>0?(this._renderText(g,c,e,r,y),c=f[a]+" ",r+=g.textLeading()):c=h;this._renderText(g,c,e,r,y),r+=g.textLeading()}}else for(l=0;l<s.length;l++)this._renderText(g,s[l],e,r,y),r+=g.textLeading();return m&&(this.drawingContext.textBaseline=o.BASELINE),g}},n.Renderer2D.prototype._renderText=function(t,e,r,n,i){return n>=i?void 0:(t.push(),this._isOpenType()?this._textFont._renderPath(e,r,n,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(e,r,n),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:o._DEFAULT_TEXT_FILL,this.drawingContext.fillText(e,r,n))),t.pop(),t)},n.Renderer2D.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t):this.drawingContext.measureText(t).width},n.Renderer2D.prototype.textAlign=function(t,e){if(arguments.length)return t!==o.LEFT&&t!==o.RIGHT&&t!==o.CENTER||(this.drawingContext.textAlign=t),e!==o.TOP&&e!==o.BOTTOM&&e!==o.CENTER&&e!==o.BASELINE||(e===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=e),this._pInst;var r=this.drawingContext.textBaseline;return r===o._CTX_MIDDLE&&(r=o.CENTER),{horizontal:this.drawingContext.textAlign,vertical:r}},n.Renderer2D.prototype._applyTextProperties=function(){var t,e=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+t,e},n.Renderer2D.prototype.push=function(){this.drawingContext.save()},n.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},e.exports=n.Renderer2D},{"../image/filters":67,"./canvas":48,"./constants":49,"./core":50,"./p5.Renderer":56}],58:[function(t,e,r){var n=t("./core"),i=t("./constants");t("./p5.Graphics"),t("./p5.Renderer2D"),t("../3d/p5.Renderer3D");var o="defaultCanvas0";n.prototype.createCanvas=function(t,e,r){var s,a,u=r||i.P2D;if(arguments[3]&&(s="boolean"==typeof arguments[3]?arguments[3]:!1),u===i.WEBGL)a=document.getElementById(o),a&&a.parentNode.removeChild(a),a=document.createElement("canvas"),a.id=o;else if(s){a=document.createElement("canvas");for(var l=0;document.getElementById("defaultCanvas"+l);)l++;o="defaultCanvas"+l,a.id=o}else a=this.canvas;return this._setupDone||(a.className+=" p5_hidden",a.style.visibility="hidden"),this._userNode?this._userNode.appendChild(a):document.body.appendChild(a),u===i.WEBGL?(this._setProperty("_renderer",new n.Renderer3D(a,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new n.Renderer2D(a,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(t,e),this._renderer._applyDefaults(),s&&this._elements.push(this._renderer),this._renderer},n.prototype.resizeCanvas=function(t,e,r){if(this._renderer){var n={};for(var i in this.drawingContext){var o=this.drawingContext[i];"object"!=typeof o&&"function"!=typeof o&&(n[i]=o)}this._renderer.resize(t,e);for(var s in n)this.drawingContext[s]=n[s];r||this.redraw()}},n.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},n.prototype.createGraphics=function(t,e,r){return new n.Graphics(t,e,r,this)},n.prototype.blendMode=function(t){if(t!==i.BLEND&&t!==i.DARKEST&&t!==i.LIGHTEST&&t!==i.DIFFERENCE&&t!==i.MULTIPLY&&t!==i.EXCLUSION&&t!==i.SCREEN&&t!==i.REPLACE&&t!==i.OVERLAY&&t!==i.HARD_LIGHT&&t!==i.SOFT_LIGHT&&t!==i.DODGE&&t!==i.BURN&&t!==i.ADD&&t!==i.NORMAL)throw new Error("Mode "+t+" not recognized.");this._renderer.blendMode(t)},e.exports=n},{"../3d/p5.Renderer3D":38,"./constants":49,"./core":50,"./p5.Graphics":55,"./p5.Renderer2D":57}],59:[function(t,e,r){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var t=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-t}}(),function(){"use strict";"undefined"!=typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=Array.prototype.slice)}()},{}],60:[function(t,e,r){"use strict";var n=t("./core");n.prototype.exit=function(){throw"exit() not implemented, see remove()"},n.prototype.noLoop=function(){this._loop=!1},n.prototype.loop=function(){this._loop=!0,this._draw()},n.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_doFill:this._renderer._doFill,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},n.prototype.pop=function(){this._renderer.pop();var t=this._styles.pop();for(var e in t)this._renderer[e]=t[e]},n.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.prototype.redraw=function(){var t=this.setup||window.setup,e=this.draw||window.draw;if("function"==typeof e){this.push(),"undefined"==typeof t&&this.scale(this._pixelDensity,this._pixelDensity);var r=this;this._registeredMethods.pre.forEach(function(t){t.call(r)}),e(),this._registeredMethods.post.forEach(function(t){t.call(r)}),this.pop()}},n.prototype.size=function(){var t="size() is not a valid p5 function, to set the size of the ";throw t+="drawing canvas, please use createCanvas() instead"},e.exports=n},{"./core":50}],61:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");n.prototype.applyMatrix=function(t,e,r,n,i,o){return this._renderer.applyMatrix(t,e,r,n,i,o),this},n.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},n.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},n.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},n.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.prototype.rotate=function(){var t=arguments[0];return this._angleMode===i.DEGREES&&(t=this.radians(t)),arguments.length>1?this._renderer.rotate(t,arguments[1]):this._renderer.rotate(t),this},n.prototype.rotateX=function(t){for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._validateParameters("rotateX",e,[["Number"]]),this._renderer.rotateX(t),this},n.prototype.rotateY=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return this._validateParameters("rotateY",e,[["Number"]]),this._renderer.rotateY(t),this},n.prototype.rotateZ=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return this._validateParameters("rotateZ",e,[["Number"]]),this._renderer.rotateZ(t),this},n.prototype.scale=function(){for(var t,e,r,i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return i[0]instanceof n.Vector?(t=i[0].x,e=i[0].y,r=i[0].z):i[0]instanceof Array?(t=i[0][0],e=i[0][1],r=i[0][2]||1):1===i.length?t=e=r=i[0]:(t=i[0],e=i[1],r=i[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,t,e,r):this._renderer.scale.call(this._renderer,t,e),this},n.prototype.shearX=function(t){return this._angleMode===i.DEGREES&&(t=this.radians(t)),this._renderer.shearX(t),this},n.prototype.shearY=function(t){return this._angleMode===i.DEGREES&&(t=this.radians(t)),this._renderer.shearY(t),this},n.prototype.translate=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];return this._renderer.isP3D?(this._validateParameters("translate",n,[["Number","Number","Number"]]),this._renderer.translate(t,e,r)):(this._validateParameters("translate",n,[["Number","Number"]]),this._renderer.translate(t,e)),this},e.exports=n},{"./constants":49,"./core":50}],62:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants"),o=null,s=[],a=[],u=!1,l=!1,c=!1,h=!1;n.prototype.beginContour=function(){return a=[],h=!0,this},n.prototype.beginShape=function(t){return o=t===i.POINTS||t===i.LINES||t===i.TRIANGLES||t===i.TRIANGLE_FAN||t===i.TRIANGLE_STRIP||t===i.QUADS||t===i.QUAD_STRIP?t:null,this._renderer.isP3D?this._renderer.beginShape(t):(s=[],a=[]),this},n.prototype.bezierVertex=function(t,e,r,n,i,o){if(0===s.length)throw"vertex() must be used once before calling bezierVertex()";u=!0;for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return l.isVert=!1,h?a.push(l):s.push(l),this},n.prototype.curveVertex=function(t,e){return l=!0,this.vertex(t,e),this},n.prototype.endContour=function(){var t=a[0].slice();t.isVert=a[0].isVert,t.moveTo=!1,a.push(t),s.push(s[0]);for(var e=0;e<a.length;e++)s.push(a[e]);return this},n.prototype.endShape=function(t){if(this._renderer.isP3D)this._renderer.endShape();else{if(0===s.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var e=t===i.CLOSE;e&&!h&&s.push(s[0]),this._renderer.endShape(t,s,l,u,c,h,o),l=!1,u=!1,c=!1,h=!1,e&&s.pop()}return this},n.prototype.quadraticVertex=function(t,e,r,n){if(this._contourInited){var o={};return o.x=t,o.y=e,o.x3=r,o.y3=n,o.type=i.QUADRATIC,this._contourVertices.push(o),this}if(!(s.length>0))throw"vertex() must be used once before calling quadraticVertex()";c=!0;for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.isVert=!1,h?a.push(u):s.push(u),this},n.prototype.vertex=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];if(this._renderer.isP3D)this._validateParameters("vertex",n,[["Number","Number","Number"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2]);else{this._validateParameters("vertex",n,[["Number","Number"],["Number","Number","Number"]]);var o=[];o.isVert=!0,o[0]=t,o[1]=e,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),r&&(o.moveTo=r),h?(0===a.length&&(o.moveTo=!0),a.push(o)):s.push(o)}return this},e.exports=n},{"./constants":49,"./core":50}],63:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.deviceOrientation=void 0,n.prototype.accelerationX=0,n.prototype.accelerationY=0,n.prototype.accelerationZ=0,n.prototype.pAccelerationX=0,n.prototype.pAccelerationY=0,n.prototype.pAccelerationZ=0,n.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},n.prototype.rotationX=0,n.prototype.rotationY=0,n.prototype.rotationZ=0,n.prototype.pRotationX=0,n.prototype.pRotationY=0,n.prototype.pRotationZ=0;var i,o,s,a=0,u=0,l=0,c="clockwise",h="clockwise",p="clockwise";n.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},n.prototype.turnAxis=void 0;var f=.5,d=30;n.prototype.setMoveThreshold=function(t){"number"==typeof t&&(f=t)},n.prototype.setShakeThreshold=function(t){"number"==typeof t&&(d=t)},n.prototype._ondeviceorientation=function(t){this._updatePRotations(),this._setProperty("rotationX",t.beta),this._setProperty("rotationY",t.gamma),this._setProperty("rotationZ",t.alpha),this._handleMotion()},n.prototype._ondevicemotion=function(t){this._updatePAccelerations(),this._setProperty("accelerationX",2*t.acceleration.x),this._setProperty("accelerationY",2*t.acceleration.y),this._setProperty("accelerationZ",2*t.acceleration.z),this._handleMotion()},n.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var t=this.deviceMoved||window.deviceMoved;"function"==typeof t&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&t();var e=this.deviceTurned||window.deviceTurned;if("function"==typeof e){var r=this.rotationX+180,n=this.pRotationX+180,m=a+180;r-n>0&&270>r-n||-270>r-n?c="clockwise":(0>r-n||r-n>270)&&(c="counter-clockwise"),c!==i&&(m=r),Math.abs(r-m)>90&&Math.abs(r-m)<270&&(m=r,this._setProperty("turnAxis","X"),e()),i=c,a=m-180;var g=this.rotationY+180,y=this.pRotationY+180,v=u+180;g-y>0&&270>g-y||-270>g-y?h="clockwise":(0>g-y||g-this.pRotationY>270)&&(h="counter-clockwise"),h!==o&&(v=g),Math.abs(g-v)>90&&Math.abs(g-v)<270&&(v=g,
this._setProperty("turnAxis","Y"),e()),o=h,u=v-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(p="counter-clockwise"),p!==s&&(l=this.rotationZ),Math.abs(this.rotationZ-l)>90&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),e()),s=p,this._setProperty("turnAxis",void 0)}var _=this.deviceShaken||window.deviceShaken;if("function"==typeof _){var b,w;null!==this.pAccelerationX&&(b=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),b+w>d&&_()}},e.exports=n},{"../core/core":50}],64:[function(t,e,r){"use strict";var n=t("../core/core"),i={};n.prototype.isKeyPressed=!1,n.prototype.keyIsPressed=!1,n.prototype.key="",n.prototype.keyCode=0,n.prototype._onkeydown=function(t){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",t.which),i[t.which]=!0;var e=String.fromCharCode(t.which);e||(e=t.which),this._setProperty("key",e);var r=this.keyPressed||window.keyPressed;if("function"==typeof r&&!t.charCode){var n=r(t);n===!1&&t.preventDefault()}},n.prototype._onkeyup=function(t){var e=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),i[t.which]=!1;var r=String.fromCharCode(t.which);if(r||(r=t.which),this._setProperty("key",r),this._setProperty("keyCode",t.which),"function"==typeof e){var n=e(t);n===!1&&t.preventDefault()}},n.prototype._onkeypress=function(t){this._setProperty("keyCode",t.which),this._setProperty("key",String.fromCharCode(t.which));var e=this.keyTyped||window.keyTyped;if("function"==typeof e){var r=e(t);r===!1&&t.preventDefault()}},n.prototype._onblur=function(t){i={}},n.prototype.keyIsDown=function(t){return i[t]},e.exports=n},{"../core/core":50}],65:[function(t,e,r){"use strict";function n(t,e){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}var i=t("../core/core"),o=t("../core/constants");i.prototype._nextMouseX=0,i.prototype._nextMouseY=0,i.prototype.mouseX=0,i.prototype.mouseY=0,i.prototype.pmouseX=0,i.prototype.pmouseY=0,i.prototype.winMouseX=0,i.prototype.winMouseY=0,i.prototype.pwinMouseX=0,i.prototype.pwinMouseY=0,i.prototype.mouseButton=0,i.prototype.mouseIsPressed=!1,i.prototype.isMousePressed=!1,i.prototype._updateNextMouseCoords=function(t){if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type)this._setProperty("_nextMouseX",this._nextTouchX),this._setProperty("_nextMouseY",this._nextTouchY);else if(null!==this._curElement){var e=n(this._curElement.elt,t);this._setProperty("_nextMouseX",e.x),this._setProperty("_nextMouseY",e.y)}this._setProperty("winMouseX",t.pageX),this._setProperty("winMouseY",t.pageY)},i.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("mouseX",this._nextMouseX),this._setProperty("mouseY",this._nextMouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY)},i.prototype._setMouseButton=function(t){1===t.button?this._setProperty("mouseButton",o.CENTER):2===t.button?this._setProperty("mouseButton",o.RIGHT):this._setProperty("mouseButton",o.LEFT)},i.prototype._onmousemove=function(t){var e,r=this._isGlobal?window:this;this._updateNextMouseCoords(t),this._updateNextTouchCoords(t),this.isMousePressed?"function"==typeof r.mouseDragged?(e=r.mouseDragged(t),e===!1&&t.preventDefault()):"function"==typeof r.touchMoved&&(e=r.touchMoved(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseMoved&&(e=r.mouseMoved(t),e===!1&&t.preventDefault())},i.prototype._onmousedown=function(t){var e,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!0),this._setProperty("mouseIsPressed",!0),this._setMouseButton(t),this._updateNextMouseCoords(t),this._updateNextTouchCoords(t),"function"==typeof r.mousePressed?(e=r.mousePressed(t),e===!1&&t.preventDefault()):"function"==typeof r.touchStarted&&(e=r.touchStarted(t),e===!1&&t.preventDefault())},i.prototype._onmouseup=function(t){var e,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!1),this._setProperty("mouseIsPressed",!1),"function"==typeof r.mouseReleased?(e=r.mouseReleased(t),e===!1&&t.preventDefault()):"function"==typeof r.touchEnded&&(e=r.touchEnded(t),e===!1&&t.preventDefault())},i.prototype._ondragend=i.prototype._onmouseup,i.prototype._ondragover=i.prototype._onmousemove,i.prototype._onclick=function(t){var e=this._isGlobal?window:this;if("function"==typeof e.mouseClicked){var r=e.mouseClicked(t);r===!1&&t.preventDefault()}},i.prototype._onwheel=function(t){var e=this._isGlobal?window:this;if("function"==typeof e.mouseWheel){t.delta=t.deltaY;var r=e.mouseWheel(t);r===!1&&t.preventDefault()}},e.exports=i},{"../core/constants":49,"../core/core":50}],66:[function(t,e,r){"use strict";function n(t,e,r){r=r||0;var n=t.getBoundingClientRect(),i=e.touches[r]||e.changedTouches[r];return{x:i.clientX-n.left,y:i.clientY-n.top,id:i.identifier}}var i=t("../core/core");i.prototype._nextTouchX=0,i.prototype._nextTouchY=0,i.prototype.touchX=0,i.prototype.touchY=0,i.prototype.ptouchX=0,i.prototype.ptouchY=0,i.prototype.touches=[],i.prototype.touchIsDown=!1,i.prototype._updateNextTouchCoords=function(t){if("mousedown"===t.type||"mousemove"===t.type||"mouseup"===t.type)this._setProperty("_nextTouchX",this._nextMouseX),this._setProperty("_nextTouchY",this._nextMouseY);else if(null!==this._curElement){var e=n(this._curElement.elt,t,0);this._setProperty("_nextTouchX",e.x),this._setProperty("_nextTouchY",e.y);for(var r=[],i=0;i<t.touches.length;i++)r[i]=n(this._curElement.elt,t,i);this._setProperty("touches",r)}},i.prototype._updateTouchCoords=function(){this._setProperty("ptouchX",this.touchX),this._setProperty("ptouchY",this.touchY),this._setProperty("touchX",this._nextTouchX),this._setProperty("touchY",this._nextTouchY)},i.prototype._ontouchstart=function(t){var e,r=this._isGlobal?window:this;this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),this._setProperty("touchIsDown",!0),"function"==typeof r.touchStarted?(e=r.touchStarted(t),e===!1&&t.preventDefault()):"function"==typeof r.mousePressed&&(e=r.mousePressed(t),e===!1&&t.preventDefault())},i.prototype._ontouchmove=function(t){var e,r=this._isGlobal?window:this;this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),"function"==typeof r.touchMoved?(e=r.touchMoved(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseDragged&&(e=r.mouseDragged(t),e===!1&&t.preventDefault())},i.prototype._ontouchend=function(t){this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),0===this.touches.length&&this._setProperty("touchIsDown",!1);var e,r=this._isGlobal?window:this;"function"==typeof r.touchEnded?(e=r.touchEnded(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseReleased&&(e=r.mouseReleased(t),e===!1&&t.preventDefault())},e.exports=i},{"../core/core":50}],67:[function(t,e,r){"use strict";function n(t){var e=3.5*t|0;if(e=1>e?1:248>e?e:248,s!==e){s=e,a=1+s<<1,u=new Int32Array(a),l=new Array(a);for(var r=0;a>r;r++)l[r]=new Int32Array(256);for(var n,i,o,c,h=1,p=e-1;e>h;h++){u[e+h]=u[p]=i=p*p,o=l[e+h],c=l[p--];for(var f=0;256>f;f++)o[f]=c[f]=i*f}n=u[e]=e*e,o=l[e];for(var d=0;256>d;d++)o[d]=n*d}}function i(t,e){for(var r=o._toPixels(t),i=t.width,c=t.height,h=i*c,p=new Int32Array(h),f=0;h>f;f++)p[f]=o._getARGB(r,f);var d,m,g,y,v,_,b,w,x,S,T=new Int32Array(h),E=new Int32Array(h),A=new Int32Array(h),C=new Int32Array(h),M=0;n(e);var R,P,I,O;for(P=0;c>P;P++){for(R=0;i>R;R++){if(y=g=m=v=d=0,_=R-s,0>_)S=-_,_=0;else{if(_>=i)break;S=0}for(I=S;a>I&&!(_>=i);I++){var D=p[_+M];O=l[I],v+=O[(-16777216&D)>>>24],m+=O[(16711680&D)>>16],g+=O[(65280&D)>>8],y+=O[255&D],d+=u[I],_++}b=M+R,T[b]=v/d,E[b]=m/d,A[b]=g/d,C[b]=y/d}M+=i}for(M=0,w=-s,x=w*i,P=0;c>P;P++){for(R=0;i>R;R++){if(y=g=m=v=d=0,0>w)S=b=-w,_=R;else{if(w>=c)break;S=0,b=w,_=R+x}for(I=S;a>I&&!(b>=c);I++)O=l[I],v+=O[T[_]],m+=O[E[_]],g+=O[A[_]],y+=O[C[_]],d+=u[I],b++,_+=i;p[R+M]=v/d<<24|m/d<<16|g/d<<8|y/d}M+=i,x+=i,w++}o._setPixels(r,p)}var o={};o._toPixels=function(t){return t instanceof ImageData?t.data:t.getContext("2d").getImageData(0,0,t.width,t.height).data},o._getARGB=function(t,e){var r=4*e;return t[r+3]<<24&4278190080|t[r]<<16&16711680|t[r+1]<<8&65280|255&t[r+2]},o._setPixels=function(t,e){for(var r=0,n=0,i=t.length;i>n;n++)r=4*n,t[r+0]=(16711680&e[n])>>>16,t[r+1]=(65280&e[n])>>>8,t[r+2]=255&e[n],t[r+3]=(4278190080&e[n])>>>24},o._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},o._createImageData=function(t,e){return o._tmpCanvas=document.createElement("canvas"),o._tmpCtx=o._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,e)},o.apply=function(t,e,r){var n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),o=e(i,r);o instanceof ImageData?n.putImageData(o,0,0,0,0,t.width,t.height):n.putImageData(i,0,0,0,0,t.width,t.height)},o.threshold=function(t,e){var r=o._toPixels(t);void 0===e&&(e=.5);for(var n=Math.floor(255*e),i=0;i<r.length;i+=4){var s,a=r[i],u=r[i+1],l=r[i+2],c=.2126*a+.7152*u+.0722*l;s=c>=n?255:0,r[i]=r[i+1]=r[i+2]=s}},o.gray=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4){var n=e[r],i=e[r+1],s=e[r+2],a=.2126*n+.7152*i+.0722*s;e[r]=e[r+1]=e[r+2]=a}},o.opaque=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r+3]=255;return e},o.invert=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},o.posterize=function(t,e){var r=o._toPixels(t);if(2>e||e>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var n=e-1,i=0;i<r.length;i+=4){var s=r[i],a=r[i+1],u=r[i+2];r[i]=255*(s*e>>8)/n,r[i+1]=255*(a*e>>8)/n,r[i+2]=255*(u*e>>8)/n}},o.dilate=function(t){for(var e,r,n,i,s,a,u,l,c,h,p,f,d,m,g,y,v,_=o._toPixels(t),b=0,w=_.length?_.length/4:0,x=new Int32Array(w);w>b;)for(e=b,r=b+t.width;r>b;)n=i=o._getARGB(_,b),u=b-1,a=b+1,l=b-t.width,c=b+t.width,e>u&&(u=b),a>=r&&(a=b),0>l&&(l=0),c>=w&&(c=b),f=o._getARGB(_,l),p=o._getARGB(_,u),d=o._getARGB(_,c),h=o._getARGB(_,a),s=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),v=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),g>s&&(i=p,s=g),m>s&&(i=h,s=m),y>s&&(i=f,s=y),v>s&&(i=d,s=v),x[b++]=i;o._setPixels(_,x)},o.erode=function(t){for(var e,r,n,i,s,a,u,l,c,h,p,f,d,m,g,y,v,_=o._toPixels(t),b=0,w=_.length?_.length/4:0,x=new Int32Array(w);w>b;)for(e=b,r=b+t.width;r>b;)n=i=o._getARGB(_,b),u=b-1,a=b+1,l=b-t.width,c=b+t.width,e>u&&(u=b),a>=r&&(a=b),0>l&&(l=0),c>=w&&(c=b),f=o._getARGB(_,l),p=o._getARGB(_,u),d=o._getARGB(_,c),h=o._getARGB(_,a),s=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),v=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),s>g&&(i=p,s=g),s>m&&(i=h,s=m),s>y&&(i=f,s=y),s>v&&(i=d,s=v),x[b++]=i;o._setPixels(_,x)};var s,a,u,l;o.blur=function(t,e){i(t,e)},e.exports=o},{}],68:[function(t,e,r){"use strict";var n=t("../core/core"),i=[];n.prototype.createImage=function(t,e){return new n.Image(t,e)},n.prototype.saveCanvas=function(){var t,e,r;if(3===arguments.length?(t=arguments[0],e=arguments[1],r=arguments[2]):2===arguments.length?"object"==typeof arguments[0]?(t=arguments[0],e=arguments[1]):(e=arguments[0],r=arguments[1]):1===arguments.length&&("object"==typeof arguments[0]?t=arguments[0]:e=arguments[0]),t instanceof n.Element&&(t=t.elt),t instanceof HTMLCanvasElement||(t=null),r||(r=n.prototype._checkFileExtension(e,r)[1],""===r&&(r="png")),t||this._curElement&&this._curElement.elt&&(t=this._curElement.elt),n.prototype._isSafari()){var i="Hello, Safari user!\n";i+="Now capturing a screenshot...\n",i+="To save this image,\n",i+="go to File --> Save As.\n",alert(i),window.location.href=t.toDataURL()}else{var o;if("undefined"==typeof r)r="png",o="image/png";else switch(r){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}var s="image/octet-stream",a=t.toDataURL(o);a=a.replace(o,s),n.prototype.downloadFile(a,e,r)}},n.prototype.saveFrames=function(t,e,r,o,s){var a=r||3;a=n.prototype.constrain(a,0,15),a=1e3*a;var u=o||15;u=n.prototype.constrain(u,0,22);var l=0,c=n.prototype._makeFrame,h=this._curElement.elt,p=setInterval(function(){c(t+l,e,h),l++},1e3/u);setTimeout(function(){if(clearInterval(p),s)s(i);else for(var t=0;t<i.length;t++){var e=i[t];n.prototype.downloadFile(e.imageData,e.filename,e.ext)}i=[]},a+.01)},n.prototype._makeFrame=function(t,e,r){var n;n=this?this._curElement.elt:r;var o;if(e)switch(e.toLowerCase()){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}else e="png",o="image/png";var s="image/octet-stream",a=n.toDataURL(o);a=a.replace(o,s);var u={};u.imageData=a,u.filename=t,u.ext=e,i.push(u)},e.exports=n},{"../core/core":50}],69:[function(t,e,r){"use strict";function n(t,e){return t>0&&e>t?t:e}var i=t("../core/core"),o=t("./filters"),s=t("../core/canvas"),a=t("../core/constants");t("../core/error_helpers"),i.prototype.loadImage=function(t,e,r){var n=new Image,o=new i.Image(1,1,this),s=i._getDecrementPreload.apply(this,arguments);return n.onload=function(){o.width=o.canvas.width=n.width,o.height=o.canvas.height=n.height,o.drawingContext.drawImage(n,0,0),"function"==typeof e&&e(o),s&&e!==s&&s()},n.onerror=function(t){i._friendlyFileLoadError(0,n.src),"function"==typeof r&&r!==s&&r(t)},0!==t.indexOf("data:image/")&&(n.crossOrigin="Anonymous"),n.src=t,o},i.prototype.image=function(t,e,r,i,o,a,u,l,c){if(arguments.length<=5)if(a=e||0,u=r||0,e=0,r=0,t.elt&&t.elt.videoWidth&&!t.canvas){var h=t.elt.videoWidth,p=t.elt.videoHeight;l=i||t.width,c=o||t.width*p/h,i=h,o=p}else l=i||t.width,c=o||t.height,i=t.width,o=t.height;else{if(9!==arguments.length)throw"Wrong number of arguments to image()";e=e||0,r=r||0,i=n(i,t.width),o=n(o,t.height),a=a||0,u=u||0,l=l||t.width,c=c||t.height}var f=s.modeAdjust(a,u,l,c,this._renderer._imageMode);this._renderer.image(t,e,r,i,o,f.x,f.y,f.w,f.h)},i.prototype.tint=function(){var t=this.color.apply(this,arguments);this._renderer._tint=t.levels},i.prototype.noTint=function(){this._renderer._tint=null},i.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=o._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var n=r.getContext("2d"),i=n.createImageData(t.canvas.width,t.canvas.height),s=i.data,a=0;a<e.length;a+=4){var u=e[a],l=e[a+1],c=e[a+2],h=e[a+3];s[a]=u*this._renderer._tint[0]/255,s[a+1]=l*this._renderer._tint[1]/255,s[a+2]=c*this._renderer._tint[2]/255,s[a+3]=h*this._renderer._tint[3]/255}return n.putImageData(i,0,0),r},i.prototype.imageMode=function(t){t!==a.CORNER&&t!==a.CORNERS&&t!==a.CENTER||(this._renderer._imageMode=t)},e.exports=i},{"../core/canvas":48,"../core/constants":49,"../core/core":50,"../core/error_helpers":53,"./filters":67}],70:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./filters");n.Image=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},n.Image.prototype._setProperty=function(t,e){this[t]=e},n.Image.prototype.loadPixels=function(){n.Renderer2D.prototype.loadPixels.call(this)},n.Image.prototype.updatePixels=function(t,e,r,i){n.Renderer2D.prototype.updatePixels.call(this,t,e,r,i)},n.Image.prototype.get=function(t,e,r,i){return n.Renderer2D.prototype.get.call(this,t,e,r,i)},n.Image.prototype.set=function(t,e,r){n.Renderer2D.prototype.set.call(this,t,e,r)},n.Image.prototype.resize=function(t,e){0===t&&0===e?(t=this.canvas.width,e=this.canvas.height):0===t?t=this.canvas.width*e/this.canvas.height:0===e&&(e=this.canvas.height*t/this.canvas.width);var r=document.createElement("canvas");r.width=t,r.height=e,r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=t,this.canvas.height=this.height=e,this.drawingContext.drawImage(r,0,0,t,e,0,0,t,e),this.pixels.length>0&&this.loadPixels()},n.Image.prototype.copy=function(){n.prototype.copy.apply(this,arguments)},n.Image.prototype.mask=function(t){void 0===t&&(t=this);var e=this.drawingContext.globalCompositeOperation,r=1;t instanceof n.Renderer&&(r=t._pInst._pixelDensity);var i=[t,0,0,r*t.width,r*t.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",this.copy.apply(this,i),this.drawingContext.globalCompositeOperation=e},n.Image.prototype.filter=function(t,e){i.apply(this.canvas,i[t.toLowerCase()],e)},n.Image.prototype.blend=function(){n.prototype.blend.apply(this,arguments)},n.Image.prototype.save=function(t,e){var r;if(e)switch(e.toLowerCase()){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png"}else e="png",r="image/png";var i="image/octet-stream",o=this.canvas.toDataURL(r);o=o.replace(r,i),n.prototype.downloadFile(o,t,e)},n.Image.prototype.createTexture=function(t){return this},e.exports=n.Image},{"../core/core":50,"./filters":67}],71:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./filters");t("../color/p5.Color"),n.prototype.pixels=[],n.prototype.blend=function(){this._renderer.blend.apply(this._renderer,arguments)},n.prototype.copy=function(){n.Renderer2D._copyHelper.apply(this,arguments)},n.prototype.filter=function(t,e){i.apply(this.canvas,i[t.toLowerCase()],e)},n.prototype.get=function(t,e,r,n){return this._renderer.get(t,e,r,n)},n.prototype.loadPixels=function(){this._renderer.loadPixels()},n.prototype.set=function(t,e,r){this._renderer.set(t,e,r)},n.prototype.updatePixels=function(t,e,r,n){0!==this.pixels.length&&this._renderer.updatePixels(t,e,r,n)},e.exports=n},{"../color/p5.Color":44,"../core/core":50,"./filters":67}],72:[function(t,e,r){"use strict";function n(t,e){var r={};if(e=e||[],"undefined"==typeof e)for(var n=0;n<t.length;n++)e[n.toString()]=n;for(var i=0;i<e.length;i++){var o=e[i],s=t[i];r[o]=s}return r}function i(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(t,e){e&&e!==!0&&"true"!==e||(e=""),t||(t="untitled");var r="";return t&&t.indexOf(".")>-1&&(r=t.split(".").pop()),e&&r!==e&&(r=e,t=t+"."+r),[t,r]}function s(t){document.body.removeChild(t.target)}var a=t("../core/core"),u=t("reqwest"),l=t("opentype.js");t("../core/error_helpers"),a._getDecrementPreload=function(){var t=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&"function"==typeof t?t:null},a.prototype.loadFont=function(t,e,r){var n=new a.Font(this),i=a._getDecrementPreload.apply(this,arguments);return l.load(t,function(o,s){if(o){if("undefined"!=typeof r&&r!==i)return r(o);throw o}n.font=s,"undefined"!=typeof e&&e(n),i&&e!==i&&i();var a,u,l=["ttf","otf","woff","woff2"],c=t.split("\\").pop().split("/").pop(),h=c.lastIndexOf("."),p=1>h?null:c.substr(h+1);l.indexOf(p)>-1&&(a=c.substr(0,h),u=document.createElement("style"),u.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+a+";\nsrc: url("+t+");\n}\n")),document.head.appendChild(u))}),n},a.prototype.createInput=function(){throw"not yet implemented"},a.prototype.createReader=function(){throw"not yet implemented"},a.prototype.loadBytes=function(){throw"not yet implemented"},a.prototype.loadJSON=function(){for(var t,e=arguments[0],r=arguments[1],n=a._getDecrementPreload.apply(this,arguments),i=[],o="json",s=2;s<arguments.length;s++){var l=arguments[s];"string"==typeof l?"jsonp"!==l&&"json"!==l||(o=l):"function"==typeof l&&(t=l)}return u({url:e,type:o,crossOrigin:!0,error:function(e){t?t(e):console.log(e.statusText)},success:function(t){for(var e in t)i[e]=t[e];"undefined"!=typeof r&&r(t),n&&r!==n&&n()}}),i},a.prototype.loadStrings=function(t,e,r){var n=[],i=new XMLHttpRequest,o=a._getDecrementPreload.apply(this,arguments);return i.addEventListener("error",function(t){r?r(t):console.log(t.responseText)}),i.open("GET",t,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var t=i.responseText.match(/[^\r\n]+/g);for(var s in t)n[s]=t[s];"undefined"!=typeof e&&e(n),o&&e!==o&&o()}else r?r(i):console.log(i.statusText)},i.send(null),n},a.prototype.loadTable=function(t){for(var e=null,r=[],i=!1,o=",",s=!1,l=a._getDecrementPreload.apply(this,arguments),c=1;c<arguments.length;c++)if("function"==typeof arguments[c]&&arguments[c]!==l)e=arguments[c];else if("string"==typeof arguments[c])if(r.push(arguments[c]),"header"===arguments[c]&&(i=!0),"csv"===arguments[c]){if(s)throw new Error("Cannot set multiple separator types.");o=",",s=!0}else if("tsv"===arguments[c]){if(s)throw new Error("Cannot set multiple separator types.");o="	",s=!0}var h=new a.Table;return u({url:t,crossOrigin:!0,type:"csv"}).then(function(t){t=t.responseText;for(var r,s={},u=0,p=1,f=2,d=4,m='"',g="\r",y="\n",v=[],_=0,b=null,w=function(){s.escaped=!1,b=[],S()},x=function(){s.currentState=d,v.push(b),b=null},S=function(){s.currentState=u,s.token=""},T=function(){b.push(s.token),S()};;){if(r=t[_++],null==r){if(s.escaped)throw new Error("Unclosed quote in file.");if(b){T(),x();break}}if(null===b&&w(),s.currentState===u){if(r===m){s.escaped=!0,s.currentState=p;continue}s.currentState=p}s.currentState===p&&s.escaped?r===m?t[_]===m?(s.token+=m,_++):(s.escaped=!1,s.currentState=f):s.token+=r:r===g?(t[_]===y&&_++,T(),x()):r===y?(T(),x()):r===o?T():s.currentState===p&&(s.token+=r)}if(i)h.columns=v.shift();else for(c=0;c<v.length;c++)h.columns[c]=c.toString();var E;for(c=0;c<v.length&&(c!==v.length-1||1!==v[c].length||"undefined"!==v[c][0]);c++)E=new a.TableRow,E.arr=v[c],E.obj=n(v[c],h.columns),h.addRow(E);null!==e&&e(h),l&&e!==l&&l()}).fail(function(r,n){a._friendlyFileLoadError(2,t),"undefined"!=typeof e&&e!==l&&e(!1)}),h},a.prototype.loadXML=function(t,e,r){var n=document.implementation.createDocument(null,null),i=a._getDecrementPreload.apply(this,arguments);return u({url:t,type:"xml",crossOrigin:!0,error:function(t){r?r(t):console.log(t.statusText)}}).then(function(t){var r=t.documentElement;n.appendChild(r),"undefined"!=typeof e&&e(n),i&&e!==i&&i()}),n},a.prototype.parseXML=function(){throw"not yet implemented"},a.prototype.selectFolder=function(){throw"not yet implemented"},a.prototype.selectInput=function(){throw"not yet implemented"},a.prototype.httpGet=function(){var t=Array.prototype.slice.call(arguments);t.push("GET"),a.prototype.httpDo.apply(this,t)},a.prototype.httpPost=function(){var t=Array.prototype.slice.call(arguments);t.push("POST"),a.prototype.httpDo.apply(this,t)},a.prototype.httpDo=function(){if("object"==typeof arguments[0])u(arguments[0]);else{for(var t,e,r="GET",n=arguments[0],i={},o="",s=1;s<arguments.length;s++){var a=arguments[s];"string"==typeof a?"GET"===a||"POST"===a||"PUT"===a?r=a:o=a:"object"==typeof a?i=a:"function"==typeof a&&(t?e=a:t=a)}""===o&&(o=-1!==n.indexOf("json")?"json":-1!==n.indexOf("xml")?"xml":"text"),u({url:n,method:r,data:i,type:o,crossOrigin:!0,success:function(e){"undefined"!=typeof t&&t("text"===o?e.response:e)},error:function(t){e?e(t):console.log(t.statusText)}})}},window.URL=window.URL||window.webkitURL,a.prototype._pWriters=[],a.prototype.beginRaw=function(){throw"not yet implemented"},a.prototype.beginRecord=function(){throw"not yet implemented"},a.prototype.createOutput=function(){throw"not yet implemented"},a.prototype.createWriter=function(t,e){var r;for(var n in a.prototype._pWriters)if(a.prototype._pWriters[n].name===t)return r=new a.PrintWriter(t+window.millis(),e),a.prototype._pWriters.push(r),r;return r=new a.PrintWriter(t,e),a.prototype._pWriters.push(r),r},a.prototype.endRaw=function(){throw"not yet implemented"},a.prototype.endRecord=function(){throw"not yet implemented"},a.PrintWriter=function(t,e){var r=this;this.name=t,this.content="",this.print=function(t){this.content+=t},this.println=function(t){this.content+=t+"\n"},this.flush=function(){this.content=""},this.close=function(){var n=[];n.push(this.content),a.prototype.writeFile(n,t,e);for(var i in a.prototype._pWriters)a.prototype._pWriters[i].name===this.name&&a.prototype._pWriters.splice(i,1);r.flush(),r={}}},a.prototype.saveBytes=function(){throw"not yet implemented"},a.prototype.save=function(t,e,r){var n=arguments,i=this._curElement.elt;if(0===n.length)return void a.prototype.saveCanvas(i);if(n[0]instanceof a.Renderer||n[0]instanceof a.Graphics)return void a.prototype.saveCanvas(n[0].elt,n[1],n[2]);if(1===n.length&&"string"==typeof n[0])a.prototype.saveCanvas(i,n[0]);else{var s=o(n[1],n[2])[1];switch(s){case"json":return void a.prototype.saveJSON(n[0],n[1],n[2]);case"txt":return void a.prototype.saveStrings(n[0],n[1],n[2]);default:n[0]instanceof Array?a.prototype.saveStrings(n[0],n[1],n[2]):n[0]instanceof a.Table?a.prototype.saveTable(n[0],n[1],n[2],n[3]):n[0]instanceof a.Image?a.prototype.saveCanvas(n[0].canvas,n[1]):n[0]instanceof a.SoundFile&&a.prototype.saveSound(n[0],n[1],n[2],n[3])}}},a.prototype.saveJSON=function(t,e,r){var n;n=r?JSON.stringify(t):JSON.stringify(t,void 0,2),console.log(n),this.saveStrings(n.split("\n"),e,"json")},a.prototype.saveJSONObject=a.prototype.saveJSON,a.prototype.saveJSONArray=a.prototype.saveJSON,a.prototype.saveStream=function(){throw"not yet implemented"},a.prototype.saveStrings=function(t,e,r){for(var n=r||"txt",i=this.createWriter(e,n),o=0;o<t.length;o++)o<t.length-1?i.println(t[o]):i.print(t[o]);i.close(),i.flush()},a.prototype.saveXML=function(){throw"not yet implemented"},a.prototype.selectOutput=function(){throw"not yet implemented"},a.prototype.saveTable=function(t,e,r){var n=this.createWriter(e,r),o=t.columns,s=",";if("tsv"===r&&(s="	"),"html"!==r){if("0"!==o[0])for(var a=0;a<o.length;a++)a<o.length-1?n.print(o[a]+s):n.println(o[a]);for(var u=0;u<t.rows.length;u++){var l;for(l=0;l<t.rows[u].arr.length;l++)l<t.rows[u].arr.length-1?n.print(t.rows[u].arr[l]+s):u<t.rows.length-1?n.println(t.rows[u].arr[l]):n.print(t.rows[u].arr[l])}}else{n.println("<html>"),n.println("<head>");var c='  <meta http-equiv="content-type" content';if(c+='="text/html;charset=utf-8" />',n.println(c),n.println("</head>"),n.println("<body>"),n.println("  <table>"),"0"!==o[0]){n.println("    <tr>");for(var h=0;h<o.length;h++){var p=i(o[h]);n.println("      <td>"+p),n.println("      </td>")}n.println("    </tr>")}for(var f=0;f<t.rows.length;f++){n.println("    <tr>");for(var d=0;d<t.columns.length;d++){var m=t.rows[f].getString(d),g=i(m);n.println("      <td>"+g),n.println("      </td>")}n.println("    </tr>")}n.println("  </table>"),n.println("</body>"),n.print("</html>")}n.close(),n.flush()},a.prototype.writeFile=function(t,e,r){var n="application/octet-stream";a.prototype._isSafari()&&(n="text/plain");var i=new Blob(t,{type:n}),o=window.URL.createObjectURL(i);a.prototype.downloadFile(o,e,r)},a.prototype.downloadFile=function(t,e,r){var n=o(e,r),i=n[0],u=n[1],l=document.createElement("a");if(l.href=t,l.download=i,l.onclick=s,l.style.display="none",document.body.appendChild(l),a.prototype._isSafari()){var c="Hello, Safari user! To download this file...\n";c+="1. Go to File --> Save As.\n",c+='2. Choose "Page Source" as the Format.\n',c+='3. Name it with this extension: ."'+u+'"',alert(c)}l.click(),t=null},a.prototype._checkFileExtension=o,a.prototype._isSafari=function(){var t=Object.prototype.toString.call(window.HTMLElement);return t.indexOf("Constructor")>0},e.exports=a},{"../core/core":50,"../core/error_helpers":53,"opentype.js":8,reqwest:29}],73:[function(t,e,r){"use strict";var n=t("../core/core");n.Table=function(t){this.columns=[],this.rows=[]},n.Table.prototype.addRow=function(t){var e=t||new n.TableRow;if("undefined"==typeof e.arr||"undefined"==typeof e.obj)throw"invalid TableRow: "+e;return e.table=this,this.rows.push(e),e},n.Table.prototype.removeRow=function(t){this.rows[t].table=null;var e=this.rows.splice(t+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(e)},n.Table.prototype.getRow=function(t){return this.rows[t]},n.Table.prototype.getRows=function(){return this.rows},n.Table.prototype.findRow=function(t,e){if("string"==typeof e){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[e]===t)return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[e]===t)return this.rows[n];return null},n.Table.prototype.findRows=function(t,e){var r=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)this.rows[n].obj[e]===t&&r.push(this.rows[n]);else for(var i=0;i<this.rows.length;i++)this.rows[i].arr[e]===t&&r.push(this.rows[i]);return r},n.Table.prototype.matchRow=function(t,e){if("number"==typeof e){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[e].match(t))return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[e].match(t))return this.rows[n];return null},n.Table.prototype.matchRows=function(t,e){var r=[];if("number"==typeof e)for(var n=0;n<this.rows.length;n++)this.rows[n].arr[e].match(t)&&r.push(this.rows[n]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[e].match(t)&&r.push(this.rows[i]);return r},n.Table.prototype.getColumn=function(t){var e=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)e.push(this.rows[r].obj[t]);else for(var n=0;n<this.rows.length;n++)e.push(this.rows[n].arr[t]);return e},n.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.Table.prototype.addColumn=function(t){var e=t||null;this.columns.push(e)},n.Table.prototype.getColumnCount=function(){return this.columns.length},n.Table.prototype.getRowCount=function(){return this.rows.length},n.Table.prototype.removeTokens=function(t,e){for(var r=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=[],i=0;i<t.length;i++)n.push(r(t.charAt(i)));var o=new RegExp(n.join("|"),"g");if("undefined"==typeof e)for(var s=0;s<this.columns.length;s++)for(var a=0;a<this.rows.length;a++){var u=this.rows[a].arr[s];u=u.replace(o,""),this.rows[a].arr[s]=u,this.rows[a].obj[this.columns[s]]=u}else if("string"==typeof e)for(var l=0;l<this.rows.length;l++){var c=this.rows[l].obj[e];c=c.replace(o,""),this.rows[l].obj[e]=c;var h=this.columns.indexOf(e);this.rows[l].arr[h]=c}else for(var p=0;p<this.rows.length;p++){var f=this.rows[p].arr[e];f=f.replace(o,""),this.rows[p].arr[e]=f,this.rows[p].obj[this.columns[e]]=f}},n.Table.prototype.trim=function(t){var e=new RegExp(" ","g");if("undefined"==typeof t)for(var r=0;r<this.columns.length;r++)for(var n=0;n<this.rows.length;n++){var i=this.rows[n].arr[r];i=i.replace(e,""),this.rows[n].arr[r]=i,this.rows[n].obj[this.columns[r]]=i}else if("string"==typeof t)for(var o=0;o<this.rows.length;o++){var s=this.rows[o].obj[t];s=s.replace(e,""),this.rows[o].obj[t]=s;var a=this.columns.indexOf(t);this.rows[o].arr[a]=s}else for(var u=0;u<this.rows.length;u++){var l=this.rows[u].arr[t];l=l.replace(e,""),this.rows[u].arr[t]=l,this.rows[u].obj[this.columns[t]]=l}},n.Table.prototype.removeColumn=function(t){var e,r;"string"==typeof t?(e=t,r=this.columns.indexOf(t),console.log("string")):(r=t,e=this.columns[t]);var n=this.columns.splice(r+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(n);for(var i=0;i<this.rows.length;i++){var o=this.rows[i].arr,s=o.splice(r+1,o.length);o.pop(),this.rows[i].arr=o.concat(s),delete this.rows[i].obj[e]}},n.Table.prototype.set=function(t,e,r){this.rows[t].set(e,r)},n.Table.prototype.setNum=function(t,e,r){this.rows[t].setNum(e,r)},n.Table.prototype.setString=function(t,e,r){this.rows[t].setString(e,r)},n.Table.prototype.get=function(t,e){return this.rows[t].get(e)},n.Table.prototype.getNum=function(t,e){return this.rows[t].getNum(e)},
n.Table.prototype.getString=function(t,e){return this.rows[t].getString(e)},n.Table.prototype.getObject=function(t){for(var e,r,n,i={},o=0;o<this.rows.length;o++)if(e=this.rows[o].obj,"string"==typeof t){if(r=this.columns.indexOf(t),!(r>=0))throw'This table has no column named "'+t+'"';n=e[t],i[n]=e}else i[o]=this.rows[o].obj;return i},n.Table.prototype.getArray=function(){for(var t=[],e=0;e<this.rows.length;e++)t.push(this.rows[e].arr);return t},e.exports=n.Table},{"../core/core":50}],74:[function(t,e,r){"use strict";var n=t("../core/core");n.TableRow=function(t,e){var r=[],n={};t&&(e=e||",",r=t.split(e));for(var i=0;i<r.length;i++){var o=i,s=r[i];n[o]=s}this.arr=r,this.obj=n,this.table=null},n.TableRow.prototype.set=function(t,e){if("string"==typeof t){var r=this.table.columns.indexOf(t);if(!(r>=0))throw'This table has no column named "'+t+'"';this.obj[t]=e,this.arr[r]=e}else{if(!(t<this.table.columns.length))throw"Column #"+t+" is out of the range of this table";this.arr[t]=e;var n=this.table.columns[t];this.obj[n]=e}},n.TableRow.prototype.setNum=function(t,e){var r=parseFloat(e,10);this.set(t,r)},n.TableRow.prototype.setString=function(t,e){var r=e.toString();this.set(t,r)},n.TableRow.prototype.get=function(t){return"string"==typeof t?this.obj[t]:this.arr[t]},n.TableRow.prototype.getNum=function(t){var e;if(e="string"==typeof t?parseFloat(this.obj[t],10):parseFloat(this.arr[t],10),"NaN"===e.toString())throw"Error: "+this.obj[t]+" is NaN (Not a Number)";return e},n.TableRow.prototype.getString=function(t){return"string"==typeof t?this.obj[t].toString():this.arr[t].toString()},e.exports=n.TableRow},{"../core/core":50}],75:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.abs=Math.abs,n.prototype.ceil=Math.ceil,n.prototype.constrain=function(t,e,r){return Math.max(Math.min(t,r),e)},n.prototype.dist=function(t,e,r,n,i,o){return 4===arguments.length?Math.sqrt((r-t)*(r-t)+(n-e)*(n-e)):6===arguments.length?Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)+(o-r)*(o-r)):void 0},n.prototype.exp=Math.exp,n.prototype.floor=Math.floor,n.prototype.lerp=function(t,e,r){return r*(e-t)+t},n.prototype.log=Math.log,n.prototype.mag=function(t,e){return Math.sqrt(t*t+e*e)},n.prototype.map=function(t,e,r,n,i){return(t-e)/(r-e)*(i-n)+n},n.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},n.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},n.prototype.norm=function(t,e,r){return this.map(t,e,r,0,1)},n.prototype.pow=Math.pow,n.prototype.round=Math.round,n.prototype.sq=function(t){return t*t},n.prototype.sqrt=Math.sqrt,e.exports=n},{"../core/core":50}],76:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.createVector=function(t,e,r){return this instanceof n?new n.Vector(this,arguments):new n.Vector(t,e,r)},e.exports=n},{"../core/core":50}],77:[function(t,e,r){"use strict";var n,i=t("../core/core"),o=4,s=1<<o,a=8,u=1<<a,l=4095,c=4,h=.5,p=function(t){return.5*(1-Math.cos(t*Math.PI))};i.prototype.noise=function(t,e,r){if(e=e||0,r=r||0,null==n){n=new Array(l+1);for(var i=0;l+1>i;i++)n[i]=Math.random()}0>t&&(t=-t),0>e&&(e=-e),0>r&&(r=-r);for(var f,d,m,g,y,v=Math.floor(t),_=Math.floor(e),b=Math.floor(r),w=t-v,x=e-_,S=r-b,T=0,E=.5,A=0;c>A;A++){var C=v+(_<<o)+(b<<a);f=p(w),d=p(x),m=n[C&l],m+=f*(n[C+1&l]-m),g=n[C+s&l],g+=f*(n[C+s+1&l]-g),m+=d*(g-m),C+=u,g=n[C&l],g+=f*(n[C+1&l]-g),y=n[C+s&l],y+=f*(n[C+s+1&l]-y),g+=d*(y-g),m+=p(S)*(g-m),T+=m*E,E*=h,v<<=1,w*=2,_<<=1,x*=2,b<<=1,S*=2,w>=1&&(v++,w--),x>=1&&(_++,x--),S>=1&&(b++,S--)}return T},i.prototype.noiseDetail=function(t,e){t>0&&(c=t),e>0&&(h=e)},i.prototype.noiseSeed=function(t){var e=function(){var t,e,r=4294967296,n=1664525,i=1013904223;return{setSeed:function(n){e=t=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return t},rand:function(){return e=(n*e+i)%r,e/r}}}();e.setSeed(t),n=new Array(l+1);for(var r=0;l+1>r;r++)n[r]=e.rand()},e.exports=i},{"../core/core":50}],78:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./polargeometry"),o=t("../core/constants");n.Vector=function(){var t,e,r;arguments[0]instanceof n?(this.p5=arguments[0],t=arguments[1][0]||0,e=arguments[1][1]||0,r=arguments[1][2]||0):(t=arguments[0]||0,e=arguments[1]||0,r=arguments[2]||0),this.x=t,this.y=e,this.z=r},n.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"},n.Vector.prototype.set=function(t,e,r){return t instanceof n.Vector?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this):t instanceof Array?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0,this):(this.x=t||0,this.y=e||0,this.z=r||0,this)},n.Vector.prototype.copy=function(){return this.p5?new n.Vector(this.p5,[this.x,this.y,this.z]):new n.Vector(this.x,this.y,this.z)},n.Vector.prototype.add=function(t,e,r){return t instanceof n.Vector?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this):t instanceof Array?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0,this):(this.x+=t||0,this.y+=e||0,this.z+=r||0,this)},n.Vector.prototype.sub=function(t,e,r){return t instanceof n.Vector?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this):t instanceof Array?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0,this):(this.x-=t||0,this.y-=e||0,this.z-=r||0,this)},n.Vector.prototype.mult=function(t){return this.x*=t||0,this.y*=t||0,this.z*=t||0,this},n.Vector.prototype.div=function(t){return this.x/=t,this.y/=t,this.z/=t,this},n.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},n.Vector.prototype.magSq=function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},n.Vector.prototype.dot=function(t,e,r){return t instanceof n.Vector?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(e||0)+this.z*(r||0)},n.Vector.prototype.cross=function(t){var e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return this.p5?new n.Vector(this.p5,[e,r,i]):new n.Vector(e,r,i)},n.Vector.prototype.dist=function(t){var e=t.copy().sub(this);return e.mag()},n.Vector.prototype.normalize=function(){return this.div(this.mag())},n.Vector.prototype.limit=function(t){var e=this.magSq();return e>t*t&&(this.div(Math.sqrt(e)),this.mult(t)),this},n.Vector.prototype.setMag=function(t){return this.normalize().mult(t)},n.Vector.prototype.heading=function(){var t=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===o.RADIANS?t:i.radiansToDegrees(t):t},n.Vector.prototype.rotate=function(t){this.p5&&this.p5._angleMode===o.DEGREES&&(t=i.degreesToRadians(t));var e=this.heading()+t,r=this.mag();return this.x=Math.cos(e)*r,this.y=Math.sin(e)*r,this},n.Vector.prototype.lerp=function(t,e,r,i){return t instanceof n.Vector?this.lerp(t.x,t.y,t.z,e):(this.x+=(t-this.x)*i||0,this.y+=(e-this.y)*i||0,this.z+=(r-this.z)*i||0,this)},n.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},n.Vector.prototype.equals=function(t,e,r){var i,o,s;return t instanceof n.Vector?(i=t.x||0,o=t.y||0,s=t.z||0):t instanceof Array?(i=t[0]||0,o=t[1]||0,s=t[2]||0):(i=t||0,o=e||0,s=r||0),this.x===i&&this.y===o&&this.z===s},n.Vector.fromAngle=function(t){return this.p5&&this.p5._angleMode===o.DEGREES&&(t=i.degreesToRadians(t)),this.p5?new n.Vector(this.p5,[Math.cos(t),Math.sin(t),0]):new n.Vector(Math.cos(t),Math.sin(t),0)},n.Vector.random2D=function(){var t;return t=this.p5?this.p5._angleMode===o.DEGREES?this.p5.random(360):this.p5.random(o.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(t)},n.Vector.random3D=function(){var t,e;this.p5?(t=this.p5.random(0,o.TWO_PI),e=this.p5.random(-1,1)):(t=Math.random()*Math.PI*2,e=2*Math.random()-1);var r=Math.sqrt(1-e*e)*Math.cos(t),i=Math.sqrt(1-e*e)*Math.sin(t);return this.p5?new n.Vector(this.p5,[r,i,e]):new n.Vector(r,i,e)},n.Vector.add=function(t,e,r){return r?r.set(t):r=t.copy(),r.add(e),r},n.Vector.sub=function(t,e,r){return r?r.set(t):r=t.copy(),r.sub(e),r},n.Vector.mult=function(t,e,r){return r?r.set(t):r=t.copy(),r.mult(e),r},n.Vector.div=function(t,e,r){return r?r.set(t):r=t.copy(),r.div(e),r},n.Vector.dot=function(t,e){return t.dot(e)},n.Vector.cross=function(t,e){return t.cross(e)},n.Vector.dist=function(t,e){return t.dist(e)},n.Vector.lerp=function(t,e,r,n){return n?n.set(t):n=t.copy(),n.lerp(e,r),n},n.Vector.angleBetween=function(t,e){var r=Math.acos(t.dot(e)/(t.mag()*e.mag()));return this.p5&&this.p5._angleMode===o.DEGREES&&(r=i.radiansToDegrees(r)),r},e.exports=n.Vector},{"../core/constants":49,"../core/core":50,"./polargeometry":79}],79:[function(t,e,r){e.exports={degreesToRadians:function(t){return 2*Math.PI*t/360},radiansToDegrees:function(t){return 360*t/(2*Math.PI)}}},{}],80:[function(t,e,r){"use strict";var n=t("../core/core"),i=!1,o=function(){var t,e,r=4294967296,n=1664525,i=1013904223;return{setSeed:function(n){e=t=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return t},rand:function(){return e=(n*e+i)%r,e/r}}}();n.prototype.randomSeed=function(t){o.setSeed(t),i=!0},n.prototype.random=function(t,e){var r;if(r=i?o.rand():Math.random(),0===arguments.length)return r;if(1===arguments.length)return r*t;if(t>e){var n=t;t=e,e=n}return r*(e-t)+t};var s,a=!1;n.prototype.randomGaussian=function(t,e){var r,n,i,o;if(a)r=s,a=!1;else{do n=this.random(2)-1,i=this.random(2)-1,o=n*n+i*i;while(o>=1);o=Math.sqrt(-2*Math.log(o)/o),r=n*o,s=i*o,a=!0}var u=t||0,l=e||1;return r*l+u},e.exports=n},{"../core/core":50}],81:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./polargeometry"),o=t("../core/constants");n.prototype._angleMode=o.RADIANS,n.prototype.acos=function(t){return this._angleMode===o.RADIANS?Math.acos(t):i.radiansToDegrees(Math.acos(t))},n.prototype.asin=function(t){return this._angleMode===o.RADIANS?Math.asin(t):i.radiansToDegrees(Math.asin(t))},n.prototype.atan=function(t){return this._angleMode===o.RADIANS?Math.atan(t):i.radiansToDegrees(Math.atan(t))},n.prototype.atan2=function(t,e){return this._angleMode===o.RADIANS?Math.atan2(t,e):i.radiansToDegrees(Math.atan2(t,e))},n.prototype.cos=function(t){return this._angleMode===o.RADIANS?Math.cos(t):Math.cos(this.radians(t))},n.prototype.sin=function(t){return this._angleMode===o.RADIANS?Math.sin(t):Math.sin(this.radians(t))},n.prototype.tan=function(t){return this._angleMode===o.RADIANS?Math.tan(t):Math.tan(this.radians(t))},n.prototype.degrees=function(t){return i.radiansToDegrees(t)},n.prototype.radians=function(t){return i.degreesToRadians(t)},n.prototype.angleMode=function(t){t!==o.DEGREES&&t!==o.RADIANS||(this._angleMode=t)},e.exports=n},{"../core/constants":49,"../core/core":50,"./polargeometry":79}],82:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.textAlign=function(t,e){return this._renderer.textAlign.apply(this._renderer,arguments)},n.prototype.textLeading=function(t){return this._renderer.textLeading.apply(this._renderer,arguments)},n.prototype.textSize=function(t){return this._renderer.textSize.apply(this._renderer,arguments)},n.prototype.textStyle=function(t){return this._renderer.textStyle.apply(this._renderer,arguments)},n.prototype.textWidth=function(t){return this._renderer.textWidth.apply(this._renderer,arguments)},n.prototype.textAscent=function(){return this._renderer.textAscent()},n.prototype.textDescent=function(){return this._renderer.textDescent()},n.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},e.exports=n},{"../core/core":50}],83:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("../core/error_helpers"),n.prototype.text=function(t,e,r,n,i){for(var o=new Array(arguments.length),s=0;s<o.length;++s)o[s]=arguments[s];return this._validateParameters("text",o,[["*","Number","Number"],["*","Number","Number","Number","Number"]]),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},n.prototype.textFont=function(t,e){if(arguments.length){if(!t)throw Error("null font passed to textFont");return this._renderer._setProperty("_textFont",t),e&&(this._renderer._setProperty("_textSize",e),this._renderer._setProperty("_textLeading",e*i._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},e.exports=n},{"../core/constants":49,"../core/core":50,"../core/error_helpers":53}],84:[function(t,e,r){"use strict";function n(t,e){for(var r=a(e,{sampleFactor:.1,simplifyThreshold:0}),n=f(t,0,1),o=n/(n*r.sampleFactor),s=[],u=0;n>u;u+=o)s.push(f(t,u));return r.simplifyThreshold&&i(s,r.simplifyThreshold),s}function i(t,e){e="undefined"==typeof e?0:e;for(var r=0,n=t.length-1;t.length>3&&n>=0;--n)l(u(t,n-1),u(t,n),u(t,n+1),e)&&(t.splice(n%t.length,1),r++);return r}function o(t){for(var e,r=[],n=0;n<t.length;n++)"M"===t[n].type&&(e&&r.push(e),e=[]),e.push(s(t[n]));return r.push(e),r}function s(t){var e=[t.type];return"M"===t.type||"L"===t.type?e.push(t.x,t.y):"C"===t.type?e.push(t.x1,t.y1,t.x2,t.y2,t.x,t.y):"Q"===t.type&&e.push(t.x1,t.y1,t.x,t.y),e}function a(t,e){if("object"!=typeof t)t=e;else for(var r in e)"undefined"==typeof t[r]&&(t[r]=e[r]);return t}function u(t,e){var r=t.length;return t[0>e?e%r+r:e%r]}function l(t,e,r,n){if(!n)return 0===c(t,e,r);"undefined"==typeof l.tmpPoint1&&(l.tmpPoint1=[],l.tmpPoint2=[]);var i=l.tmpPoint1,o=l.tmpPoint2;i.x=e.x-t.x,i.y=e.y-t.y,o.x=r.x-e.x,o.y=r.y-e.y;var s=i.x*o.x+i.y*o.y,a=Math.sqrt(i.x*i.x+i.y*i.y),u=Math.sqrt(o.x*o.x+o.y*o.y),h=Math.acos(s/(a*u));return n>h}function c(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function h(t,e,r,n,i,o,s,a,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),p=u*u,f=p*u,d=c*t+3*h*u*r+3*l*u*u*i+f*s,m=c*e+3*h*u*n+3*l*u*u*o+f*a,g=t+2*u*(r-t)+p*(i-2*r+t),y=e+2*u*(n-e)+p*(o-2*n+e),v=r+2*u*(i-r)+p*(s-2*i+r),_=n+2*u*(o-n)+p*(a-2*o+n),b=l*t+u*r,w=l*e+u*n,x=l*i+u*s,S=l*o+u*a,T=90-180*Math.atan2(g-v,y-_)/Math.PI;return(g>v||_>y)&&(T+=180),{x:d,y:m,m:{x:g,y:y},n:{x:v,y:_},start:{x:b,y:w},end:{x:x,y:S},alpha:T}}function p(t,e,r,n,i,o,s,a,u){return null==u?b(t,e,r,n,i,o,s,a):h(t,e,r,n,i,o,s,a,w(t,e,r,n,i,o,s,a,u))}function f(t,e,r){t=m(t);for(var n,i,o,s,a,u="",l={},c=0,f=0,d=t.length;d>f;f++){if(o=t[f],"M"===o[0])n=+o[1],i=+o[2];else{if(s=p(n,i,o[1],o[2],o[3],o[4],o[5],o[6]),c+s>e&&!r)return a=p(n,i,o[1],o[2],o[3],o[4],o[5],o[6],e-c),{x:a.x,y:a.y,alpha:a.alpha};c+=s,n=+o[5],i=+o[6]}u+=o.shift()+o}return l.end=u,a=r?c:h(n,i,o[0],o[1],o[2],o[3],o[4],o[5],1),a.alpha&&(a={x:a.x,y:a.y,alpha:a.alpha}),a}function d(t){var e=[],r=0,n=0,i=0,o=0,s=0;"M"===t[0][0]&&(r=+t[0][1],n=+t[0][2],i=r,o=n,s++,e[0]=["M",r,n]);for(var a,u,l,c=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),h=s,p=t.length;p>h;h++){if(e.push(u=[]),l=t[h],l[0]!==String.prototype.toUpperCase.call(l[0]))switch(u[0]=String.prototype.toUpperCase.call(l[0]),u[0]){case"A":u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=+(l[6]+r),u[7]=+(l[7]+n);break;case"V":u[1]=+l[1]+n;break;case"H":u[1]=+l[1]+r;break;case"R":a=[r,n].concat(l.slice(1));for(var f=2,d=a.length;d>f;f++)a[f]=+a[f]+r,a[++f]=+a[f]+n;e.pop(),e=e.concat(y(a,c));break;case"M":i=+l[1]+r,o=+l[2]+n;break;default:for(f=1,d=l.length;d>f;f++)u[f]=+l[f]+(f%2?r:n)}else if("R"===l[0])a=[r,n].concat(l.slice(1)),e.pop(),e=e.concat(y(a,c)),u=["R"].concat(l.slice(-2));else for(var m=0,g=l.length;g>m;m++)u[m]=l[m];switch(u[0]){case"Z":r=i,n=o;break;case"H":r=u[1];break;case"V":n=u[1];break;case"M":i=u[u.length-2],o=u[u.length-1];break;default:r=u[u.length-2],n=u[u.length-1]}}return e}function m(t,e){for(var r=d(t),n=e&&d(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,r){var n,i,o={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in o||(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(g.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*e.x-e.bx,i=2*e.y-e.by):(n=e.x,i=e.y),t=["C",n,i].concat(t.slice(1));break;case"T":"Q"===r||"T"===r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(_(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(_(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(v(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(v(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(v(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(v(e.x,e.y,e.X,e.Y))}return t}),a=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)l[e]="A",n&&(c[e]="A"),t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),m=Math.max(r.length,n&&n.length||0)}},u=function(t,e,i,o,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=t[s][1],i.y=t[s][2],m=Math.max(r.length,n&&n.length||0))},l=[],c=[],h="",p="",f=0,m=Math.max(r.length,n&&n.length||0);m>f;f++){r[f]&&(h=r[f][0]),"C"!==h&&(l[f]=h,f&&(p=l[f-1])),r[f]=s(r[f],i,p),"A"!==l[f]&&"C"===h&&(l[f]="C"),a(r,f),n&&(n[f]&&(h=n[f][0]),"C"!==h&&(c[f]=h,f&&(p=c[f-1])),n[f]=s(n[f],o,p),"A"!==c[f]&&"C"===h&&(c[f]="C"),a(n,f)),u(r,n,i,o,f),u(n,r,o,i,f);var y=r[f],b=n&&n[f],w=y.length,x=n&&b.length;i.x=y[w-2],i.y=y[w-1],i.bx=parseFloat(y[w-4])||i.x,i.by=parseFloat(y[w-3])||i.y,o.bx=n&&(parseFloat(b[x-4])||o.x),o.by=n&&(parseFloat(b[x-3])||o.y),o.x=n&&b[x-2],o.y=n&&b[x-1]}return n?[r,n]:r}function g(t,e,r,n,i,o,s,a,u,l){var c,h,p,f,d,m=Math.PI,y=120*m/180,v=m/180*(+i||0),_=[],b=function(t,e,r){var n=t*Math.cos(r)-e*Math.sin(r),i=t*Math.sin(r)+e*Math.cos(r);return{x:n,y:i}};if(l)c=l[0],h=l[1],p=l[2],f=l[3];else{d=b(t,e,-v),t=d.x,e=d.y,d=b(a,u,-v),a=d.x,u=d.y;var w=(t-a)/2,x=(e-u)/2,S=w*w/(r*r)+x*x/(n*n);S>1&&(S=Math.sqrt(S),r=S*r,n=S*n);var T=r*r,E=n*n,A=(o===s?-1:1)*Math.sqrt(Math.abs((T*E-T*x*x-E*w*w)/(T*x*x+E*w*w)));p=A*r*x/n+(t+a)/2,f=A*-n*w/r+(e+u)/2,c=Math.asin(((e-f)/n).toFixed(9)),h=Math.asin(((u-f)/n).toFixed(9)),c=p>t?m-c:c,h=p>a?m-h:h,0>c&&(c=2*m+c),0>h&&(h=2*m+h),s&&c>h&&(c-=2*m),!s&&h>c&&(h-=2*m)}var C=h-c;if(Math.abs(C)>y){var M=h,R=a,P=u;h=c+y*(s&&h>c?1:-1),a=p+r*Math.cos(h),u=f+n*Math.sin(h),_=g(a,u,r,n,i,0,s,R,P,[h,M,p,f])}C=h-c;var I=Math.cos(c),O=Math.sin(c),D=Math.cos(h),k=Math.sin(h),$=Math.tan(C/4),N=4/3*r*$,L=4/3*n*$,F=[t,e],U=[t+N*O,e-L*I],B=[a+N*k,u-L*D],H=[a,u];if(U[0]=2*F[0]-U[0],U[1]=2*F[1]-U[1],l)return[U,B,H].concat(_);_=[U,B,H].concat(_).join().split(",");for(var q=[],G=0,V=_.length;V>G;G++)q[G]=G%2?b(_[G-1],_[G],v).y:b(_[G],_[G+1],v).x;return q}function y(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?o[3]={x:+t[0],y:+t[1]}:i-2===n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}function v(t,e,r,n){return[t,e,r,n,r,n]}function _(t,e,r,n,i,o){var s=1/3,a=2/3;return[s*t+a*r,s*e+a*n,s*i+a*r,s*o+a*n,i,o]}function b(t,e,r,n,i,o,s,a,u){null==u&&(u=1),u=u>1?1:0>u?0:u;for(var l=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=0,f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;c>d;d++){var m=l*h[d]+l,g=x(m,t,r,i,s),y=x(m,e,n,o,a),v=g*g+y*y;p+=f[d]*Math.sqrt(v)}return l*p}function w(t,e,r,n,i,o,s,a,u){if(!(0>u||b(t,e,r,n,i,o,s,a)<u)){var l,c=1,h=c/2,p=c-h,f=.01;for(l=b(t,e,r,n,i,o,s,a,p);Math.abs(l-u)>f;)h/=2,p+=(u>l?1:-1)*h,l=b(t,e,r,n,i,o,s,a,p);return p}}function x(t,e,r,n,i){var o=-3*e+9*r-9*n+3*i,s=t*o+6*e-12*r+6*n;return t*s-3*e+3*r}function S(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];e=t.length;for(var r="";e--;)r+=t[e]===Object(t[e])?JSON.stringify(t[e]):t[e];return r}var T=t("../core/core"),E=t("../core/constants");T.Font=function(t){this.parent=t,this.cache={},this.font=void 0},T.Font.prototype.list=function(){throw"not yet implemented"},T.Font.prototype.textBounds=function(t,e,r,n,i){e=void 0!==e?e:0,r=void 0!==r?r:0,n=n||this.parent._renderer._textSize;var o=this.cache[S("textBounds",t,e,r,n)];if(!o){var s,a,u,l,c=[],h=[],p=this,f=this._scale(n);this.font.forEachGlyph(t,e,r,n,i,function(t,e,r,i){c.push(e),h.push(r);var o=t.getMetrics();"space"!==t.name?(c.push(e+o.xMax*f),h.push(r+-o.yMin*f),h.push(r+-o.yMax*f)):c.push(e+p.font.charToGlyph(" ").advanceWidth*p._scale(n))}),s=Math.max(0,Math.min.apply(null,c)),a=Math.max(0,Math.min.apply(null,h)),u=Math.max(0,Math.max.apply(null,c)),l=Math.max(0,Math.max.apply(null,h)),o={x:s,y:a,h:l-a,w:u-s,advance:s-e},this.cache[S("textBounds",t,e,r,n)]=o}return o},T.Font.prototype.textToPoints=function(t,e,r,i,s){var a=0,u=[],l=this._getGlyphs(t);i=i||this.parent._renderer._textSize;for(var c=0;c<l.length;c++){for(var h=l[c].getPath(e,r,i),p=o(h.commands),f=0;f<p.length;f++)for(var d=n(p[f],s),m=0;m<d.length;m++)d[m].x+=a,u.push(d[m]);a+=l[c].advanceWidth*this._scale(i)}return u},T.Font.prototype._getGlyphs=function(t){return this.font.stringToGlyphs(t)},T.Font.prototype._getPath=function(t,e,r,n){var i=this.parent,o=i._renderer.drawingContext,s=this._handleAlignment(i,o,t,e,r);return this.font.getPath(t,s.x,s.y,i._renderer._textSize,n)},T.Font.prototype._getPathData=function(t,e,r,n){var i=3;return"string"==typeof t&&arguments.length>2?t=this._getPath(t,e,r,n):"object"==typeof e&&(n=e),n&&"number"==typeof n.decimals&&(i=n.decimals),t.toPathData(i)},T.Font.prototype._getSVG=function(t,e,r,n){var i=3;return"string"==typeof t&&arguments.length>2?t=this._getPath(t,e,r,n):"object"==typeof e&&(n=e),n&&("number"==typeof n.decimals&&(i=n.decimals),"number"==typeof n.strokeWidth&&(t.strokeWidth=n.strokeWidth),"undefined"!=typeof n.fill&&(t.fill=n.fill),"undefined"!=typeof n.stroke&&(t.stroke=n.stroke)),t.toSVG(i)},T.Font.prototype._renderPath=function(t,e,r,n){var i,o=n&&n.renderer||this.parent._renderer,s=o.drawingContext;i="object"==typeof t&&t.commands?t.commands:this._getPath(t,e,r,o._textSize,n).commands,s.beginPath();for(var a=0;a<i.length;a+=1){var u=i[a];"M"===u.type?s.moveTo(u.x,u.y):"L"===u.type?s.lineTo(u.x,u.y):"C"===u.type?s.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,u.x,u.y):"Q"===u.type?s.quadraticCurveTo(u.x1,u.y1,u.x,u.y):"Z"===u.type&&s.closePath()}return o._doStroke&&o._strokeSet&&s.stroke(),o._doFill&&(s.fillStyle=o._fillSet?s.fillStyle:E._DEFAULT_TEXT_FILL,s.fill()),this},T.Font.prototype._textWidth=function(t,e){if(" "===t)return this.font.charToGlyph(" ").advanceWidth*this._scale(e);var r=this.textBounds(t,0,0,e);return r.w+r.advance},T.Font.prototype._textAscent=function(t){return this.font.ascender*this._scale(t)},T.Font.prototype._textDescent=function(t){return-this.font.descender*this._scale(t)},T.Font.prototype._scale=function(t){return 1/this.font.unitsPerEm*(t||this.parent._renderer._textSize)},T.Font.prototype._handleAlignment=function(t,e,r,n,i){var o=this._textWidth(r),s=this._textAscent(),a=this._textDescent(),u=s+a;return e.textAlign===E.CENTER?n-=o/2:e.textAlign===E.RIGHT&&(n-=o),e.textBaseline===E.TOP?i+=u:e.textBaseline===E._CTX_MIDDLE?i+=u/2-a:e.textBaseline===E.BOTTOM&&(i-=a),{x:n,y:i}},e.exports=T.Font},{"../core/constants":49,"../core/core":50}],85:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.append=function(t,e){return t.push(e),t},n.prototype.arrayCopy=function(t,e,r,n,i){var o,s;"undefined"!=typeof i?(s=Math.min(i,t.length),o=n,t=t.slice(e,s+e)):("undefined"!=typeof r?(s=r,s=Math.min(s,t.length)):s=t.length,o=0,r=e,t=t.slice(0,s)),Array.prototype.splice.apply(r,[o,s].concat(t))},n.prototype.concat=function(t,e){return t.concat(e)},n.prototype.reverse=function(t){return t.reverse()},n.prototype.shorten=function(t){return t.pop(),t},n.prototype.shuffle=function(t,e){var r=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t);t=e||r?t:t.slice();for(var n,i,o=t.length;o>1;)n=Math.random()*o|0,i=t[--o],t[o]=t[n],t[n]=i;return t},n.prototype.sort=function(t,e){var r=e?t.slice(0,Math.min(e,t.length)):t,n=e?t.slice(Math.min(e,t.length)):[];return r="string"==typeof r[0]?r.sort():r.sort(function(t,e){return t-e}),r.concat(n)},n.prototype.splice=function(t,e,r){return Array.prototype.splice.apply(t,[r,0].concat(e)),t},n.prototype.subset=function(t,e,r){return"undefined"!=typeof r?t.slice(e,e+r):t.slice(e,t.length)},e.exports=n},{"../core/core":50}],86:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype["float"]=function(t){return parseFloat(t)},n.prototype["int"]=function(t,e){return"string"==typeof t?(e=e||10,parseInt(t,e)):"number"==typeof t?0|t:"boolean"==typeof t?t?1:0:t instanceof Array?t.map(function(t){return n.prototype["int"](t,e)}):void 0},n.prototype.str=function(t){return t instanceof Array?t.map(n.prototype.str):String(t)},n.prototype["boolean"]=function(t){return"number"==typeof t?0!==t:"string"==typeof t?"true"===t.toLowerCase():"boolean"==typeof t?t:t instanceof Array?t.map(n.prototype["boolean"]):void 0},n.prototype["byte"]=function(t){var e=n.prototype["int"](t,10);return"number"==typeof e?(e+128)%256-128:e instanceof Array?e.map(n.prototype["byte"]):void 0},n.prototype["char"]=function(t){return"number"!=typeof t||isNaN(t)?t instanceof Array?t.map(n.prototype["char"]):"string"==typeof t?n.prototype["char"](parseInt(t,10)):void 0:String.fromCharCode(t)},n.prototype.unchar=function(t){return"string"==typeof t&&1===t.length?t.charCodeAt(0):t instanceof Array?t.map(n.prototype.unchar):void 0},n.prototype.hex=function(t,e){if(e=void 0===e||null===e?e=8:e,t instanceof Array)return t.map(function(t){return n.prototype.hex(t,e)});if("number"==typeof t){0>t&&(t=4294967295+t+1);for(var r=Number(t).toString(16).toUpperCase();r.length<e;)r="0"+r;return r.length>=e&&(r=r.substring(r.length-e,r.length)),r}},n.prototype.unhex=function(t){return t instanceof Array?t.map(n.prototype.unhex):parseInt("0x"+t,16)},e.exports=n},{"../core/core":50}],87:[function(t,e,r){"use strict";function n(){var t=arguments[0],e=0>t,r=e?t.toString().substring(1):t.toString(),n=r.indexOf("."),i=-1!==n?r.substring(0,n):r,o=-1!==n?r.substring(n+1):"",s=e?"-":"";if(3===arguments.length){var a="";(-1!==n||arguments[2]-o.length>0)&&(a="."),o.length>arguments[2]&&(o=o.substring(0,arguments[2]));for(var u=0;u<arguments[1]-i.length;u++)s+="0";s+=i,s+=a,s+=o;for(var l=0;l<arguments[2]-o.length;l++)s+="0";return s}for(var c=0;c<Math.max(arguments[1]-i.length,0);c++)s+="0";return s+=r}function i(){var t=arguments[0].toString(),e=t.indexOf("."),r=-1!==e?t.substring(e):"",n=-1!==e?t.substring(0,e):t;if(n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===arguments[1])r="";else if(void 0!==arguments[1])if(arguments[1]>r.length){r+=-1===e?".":"";for(var i=arguments[1]-r.length+1,o=0;i>o;o++)r+="0"}else r=r.substring(0,arguments[1]+1);return n+r}function o(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function s(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var a=t("../core/core");a.prototype.join=function(t,e){return t.join(e)},a.prototype.match=function(t,e){return t.match(e)},a.prototype.matchAll=function(t,e){for(var r=new RegExp(e,"g"),n=r.exec(t),i=[];null!==n;)i.push(n),n=r.exec(t);return i},a.prototype.nf=function(){if(arguments[0]instanceof Array){var t=arguments[1],e=arguments[2];return arguments[0].map(function(r){return n(r,t,e)})}var r=Object.prototype.toString.call(arguments[0]);return"[object Arguments]"===r?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):n.apply(this,arguments)},a.prototype.nfc=function(){if(arguments[0]instanceof Array){var t=arguments[1];return arguments[0].map(function(e){return i(e,t)})}return i.apply(this,arguments)},a.prototype.nfp=function(){var t=this.nf.apply(this,arguments);return t instanceof Array?t.map(o):o(t)},a.prototype.nfs=function(){var t=this.nf.apply(this,arguments);return t instanceof Array?t.map(s):s(t)},a.prototype.split=function(t,e){return t.split(e)},a.prototype.splitTokens=function(){var t,e,r,n;return n=arguments[1],arguments.length>1?(r=/\]/g.exec(n),e=/\[/g.exec(n),e&&r?(n=n.slice(0,r.index)+n.slice(r.index+1),e=/\[/g.exec(n),n=n.slice(0,e.index)+n.slice(e.index+1),t=new RegExp("[\\["+n+"\\]]","g")):r?(n=n.slice(0,r.index)+n.slice(r.index+1),t=new RegExp("["+n+"\\]]","g")):e?(n=n.slice(0,e.index)+n.slice(e.index+1),t=new RegExp("["+n+"\\[]","g")):t=new RegExp("["+n+"]","g")):t=/\s/g,arguments[0].split(t).filter(function(t){return t})},a.prototype.trim=function(t){return t instanceof Array?t.map(this.trim):t.trim()},e.exports=a},{"../core/core":50}],88:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.day=function(){return(new Date).getDate()},n.prototype.hour=function(){return(new Date).getHours()},n.prototype.minute=function(){return(new Date).getMinutes()},n.prototype.millis=function(){return window.performance.now()},n.prototype.month=function(){return(new Date).getMonth()+1},n.prototype.second=function(){return(new Date).getSeconds()},n.prototype.year=function(){return(new Date).getFullYear()},e.exports=n},{"../core/core":50}]},{},[41])(41)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(require,module,exports){!function(t,e){"function"==typeof define&&define.amd?define("p5.sound",["p5"],function(t){e(t)}):e("object"==typeof exports?require("./p5"):t.p5)}(this,function(p5){var sndcore;sndcore=function(){"use strict";!function(t,e,r){function n(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}return e=e||{},window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return n(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var e=t?this.internal_createDelay(t):this.internal_createDelay();return n(e.delayTime),e},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,r,n){"undefined"!=typeof n?t.internal_start(e||0,r,n):t.internal_start(e||0,r||0)}):t.start=function(t,e,r){e||r?this.noteGrainOn(t||0,e,r):this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},n(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return n(t.threshold),n(t.knee),n(t.ratio),n(t.reduction),n(t.attack),n(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return n(t.frequency),n(t.detune),n(t.Q),n(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0);
}):t.start=function(t){this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),n(t.frequency),n(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext),e}(window);var t=new window.AudioContext;p5.prototype.getAudioContext=function(){return t},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=document.createElement("audio");p5.prototype.isSupported=function(){return!!e.canPlayType};var r=function(){return!!e.canPlayType&&e.canPlayType('audio/ogg; codecs="vorbis"')},n=function(){return!!e.canPlayType&&e.canPlayType("audio/mpeg;")},i=function(){return!!e.canPlayType&&e.canPlayType('audio/wav; codecs="1"')},o=function(){return!!e.canPlayType&&(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;"))},s=function(){return!!e.canPlayType&&e.canPlayType("audio/x-aiff;")};p5.prototype.isFileSupported=function(t){switch(t.toLowerCase()){case"mp3":return n();case"wav":return i();case"ogg":return r();case"mp4":return o();case"aiff":return s();default:return!1}};var a=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);if(a){var u=!1,l=function(){if(!u){var e=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=e,r.connect(t.destination),r.start(0),console.log("start ios!"),"running"===t.state&&(u=!0)}};document.addEventListener("touchend",l,!1),document.addEventListener("touchstart",l,!1)}}();var master;master=function(){"use strict";var t=function(){var t=p5.prototype.getAudioContext();this.input=t.createGain(),this.output=t.createGain(),this.limiter=t.createDynamicsCompressor(),this.limiter.threshold.value=0,this.limiter.ratio.value=100,this.audiocontext=t,this.output.disconnect(),this.inputSources=[],this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=t.createGain(),this.fftMeter=t.createGain(),this.output.connect(this.meter),this.output.connect(this.fftMeter),this.output.connect(this.audiocontext.destination),this.soundArray=[],this.parts=[],this.extensions=[]},e=new t;return p5.prototype.getMasterVolume=function(){return e.output.gain.value},p5.prototype.masterVolume=function(t,r,n){if("number"==typeof t){var r=r||0,n=n||0,i=e.audiocontext.currentTime,o=e.output.gain.value;e.output.gain.cancelScheduledValues(i+n),e.output.gain.linearRampToValueAtTime(o,i+n),e.output.gain.linearRampToValueAtTime(t,i+n+r)}else{if(!t)return e.output.gain;t.connect(e.output.gain)}},p5.soundOut=e,p5.soundOut._silentNode=e.audiocontext.createGain(),p5.soundOut._silentNode.gain.value=0,p5.soundOut._silentNode.connect(e.audiocontext.destination),e}(sndcore);var helpers;helpers=function(){"use strict";var t=master;p5.prototype.sampleRate=function(){return t.audiocontext.sampleRate},p5.prototype.freqToMidi=function(t){var e=Math.log(t/440)/Math.log(2),r=Math.round(12*e)+57;return r},p5.prototype.midiToFreq=function(t){return 440*Math.pow(2,(t-69)/12)},p5.prototype.soundFormats=function(){t.extensions=[];for(var e=0;e<arguments.length;e++){if(arguments[e]=arguments[e].toLowerCase(),!(["mp3","wav","ogg","m4a","aac"].indexOf(arguments[e])>-1))throw arguments[e]+" is not a valid sound format!";t.extensions.push(arguments[e])}},p5.prototype.disposeSound=function(){for(var e=0;e<t.soundArray.length;e++)t.soundArray[e].dispose()},p5.prototype.registerMethod("remove",p5.prototype.disposeSound),p5.prototype._checkFileFormats=function(e){var r;if("string"==typeof e){r=e;var n=r.split(".").pop();if(["mp3","wav","ogg","m4a","aac"].indexOf(n)>-1){var i=p5.prototype.isFileSupported(n);if(i)r=r;else for(var o=r.split("."),s=o[o.length-1],a=0;a<t.extensions.length;a++){var u=t.extensions[a],i=p5.prototype.isFileSupported(u);if(i){s="",2===o.length&&(s+=o[0]);for(var a=1;a<=o.length-2;a++){var l=o[a];s+="."+l}r=s+=".",r=r+=u;break}}}else for(var a=0;a<t.extensions.length;a++){var u=t.extensions[a],i=p5.prototype.isFileSupported(u);if(i){r=r+"."+u;break}}}else if("object"==typeof e)for(var a=0;a<e.length;a++){var u=e[a].split(".").pop(),i=p5.prototype.isFileSupported(u);if(i){r=e[a];break}}return r},p5.prototype._mathChain=function(t,e,r,n,i){for(var o in t.mathOps)t.mathOps[o]instanceof i&&(t.mathOps[o].dispose(),r=o,r<t.mathOps.length-1&&(n=t.mathOps[o+1]));return t.mathOps[r-1].disconnect(),t.mathOps[r-1].connect(e),e.connect(n),t.mathOps[r]=e,t}}(master);var errorHandler;errorHandler=function(){"use strict";var t=function(t,e,r){var n,i,o=new Error;o.name=t,o.originalStack=o.stack+e,n=o.stack+e,o.failedPath=r;var i=n.split("\n");return i=i.filter(function(t){return!t.match(/(p5.|native code|globalInit)/g)}),o.stack=i.join("\n"),o};return t}();var panner;panner=function(){"use strict";var t=master,e=t.audiocontext;"undefined"!=typeof e.createStereoPanner?(p5.Panner=function(t,r,n){this.stereoPanner=this.input=e.createStereoPanner(),t.connect(this.stereoPanner),this.stereoPanner.connect(r)},p5.Panner.prototype.pan=function(t,r){var n=r||0,i=e.currentTime+n;this.stereoPanner.pan.linearRampToValueAtTime(t,i)},p5.Panner.prototype.inputChannels=function(t){},p5.Panner.prototype.connect=function(t){this.stereoPanner.connect(t)},p5.Panner.prototype.disconnect=function(t){this.stereoPanner.disconnect()}):(p5.Panner=function(t,r,n){this.input=e.createGain(),t.connect(this.input),this.left=e.createGain(),this.right=e.createGain(),this.left.channelInterpretation="discrete",this.right.channelInterpretation="discrete",n>1?(this.splitter=e.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right)),this.output=e.createChannelMerger(2),this.left.connect(this.output,0,1),this.right.connect(this.output,0,0),this.output.connect(r)},p5.Panner.prototype.pan=function(t,r){var n=r||0,i=e.currentTime+n,o=(t+1)/2,s=Math.cos(o*Math.PI/2),a=Math.sin(o*Math.PI/2);this.left.gain.linearRampToValueAtTime(a,i),this.right.gain.linearRampToValueAtTime(s,i)},p5.Panner.prototype.inputChannels=function(t){1===t?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===t&&(this.splitter=e.createChannelSplitter(2),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))},p5.Panner.prototype.connect=function(t){this.output.connect(t)},p5.Panner.prototype.disconnect=function(t){this.output.disconnect()}),p5.Panner3D=function(t,r){var n=e.createPanner();return n.panningModel="HRTF",n.distanceModel="linear",n.setPosition(0,0,0),t.connect(n),n.connect(r),n.pan=function(t,e,r){n.setPosition(t,e,r)},n}}(master);var soundfile;soundfile=function(){"use strict";function t(t,e){for(var r={},n=t.length,i=0;n>i;i++){if(t[i]>e){var o=t[i],s=new l(o,i);r[i]=s,i+=6e3}i++}return r}function e(t){for(var e=[],r=Object.keys(t).sort(),n=0;n<r.length;n++)for(var i=0;10>i;i++){var o=t[r[n]],s=t[r[n+i]];if(o&&s){var a=o.sampleIndex,u=s.sampleIndex,l=u-a;l>0&&o.intervals.push(l);var c=e.some(function(t,e){return t.interval===l?(t.count++,t):void 0});c||e.push({interval:l,count:1})}}return e}function r(t,e){var r=[];return t.forEach(function(t,n){try{var o=Math.abs(60/(t.interval/e));o=i(o);var s=r.some(function(e){return e.tempo===o?e.count+=t.count:void 0});if(!s){if(isNaN(o))return;r.push({tempo:Math.round(o),count:t.count})}}catch(a){throw a}}),r}function n(t,e,r,n){for(var o=[],s=Object.keys(t).sort(),a=0;a<s.length;a++)for(var u=s[a],l=t[u],c=0;c<l.intervals.length;c++){var h=Math.round(Math.abs(60/(l.intervals[c]/r)));h=i(h);Math.abs(h-e)<n&&o.push(l.sampleIndex/44100)}return o=o.filter(function(t,e,r){var n=r[e+1]-t;return n>.01?!0:void 0})}function i(t){if(isFinite(t)&&0!=t){for(;90>t;)t*=2;for(;t>180&&t>90;)t/=2;return t}}var o=errorHandler,s=master,a=s.audiocontext;p5.SoundFile=function(t,e,r,n){if("undefined"!=typeof t){if("string"==typeof t||"string"==typeof t[0]){var i=p5.prototype._checkFileFormats(t);this.url=i}else if("object"==typeof t&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";t.file&&(t=t.file),this.file=t}this._onended=function(){},this._looping=!1,this._playing=!1,this._paused=!1,this._pauseTime=0,this._cues=[],this._lastPos=0,this._counterNode,this._scopeNode,this.bufferSourceNodes=[],this.bufferSourceNode=null,this.buffer=null,this.playbackRate=1,this.gain=1,this.input=s.audiocontext.createGain(),this.output=s.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.pauseTime=0,this.mode="sustain",this.startMillis=null,this.panPosition=0,this.panner=new p5.Panner(this.output,s.input,2),(this.url||this.file)&&this.load(e,r),s.soundArray.push(this),"function"==typeof n?this._whileLoading=n:this._whileLoading=function(){}},p5.prototype.registerPreloadMethod("loadSound",p5.prototype),p5.prototype.loadSound=function(t,e,r,n){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var i=new p5.SoundFile(t,e,r,n);return i},p5.SoundFile.prototype.load=function(t,e){var r=this,n=(new Error).stack;if(void 0!=this.url&&""!=this.url){var i=new XMLHttpRequest;i.addEventListener("progress",function(t){r._updateProgress(t)},!1),i.open("GET",this.url,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status)a.decodeAudioData(i.response,function(e){r.buffer=e,r.panner.inputChannels(e.numberOfChannels),t&&t(r)},function(t){var i=new o("decodeAudioData",n,r.url),s="AudioContext error at decodeAudioData for "+r.url;e?(i.msg=s,e(i)):console.error(s+"\n The error stack trace includes: \n"+i.stack)});else{var s=new o("loadSound",n,r.url),u="Unable to load "+r.url+". The request status was: "+i.status+" ("+i.statusText+")";e?(s.message=u,e(s)):console.error(u+"\n The error stack trace includes: \n"+s.stack)}},i.onerror=function(t){var i=new o("loadSound",n,r.url),s="There was no response from the server at "+r.url+". Check the url and internet connectivity.";e?(i.message=s,e(i)):console.error(s+"\n The error stack trace includes: \n"+i.stack)},i.send()}else if(void 0!=this.file){var s=new FileReader,r=this;s.onload=function(){a.decodeAudioData(s.result,function(e){r.buffer=e,r.panner.inputChannels(e.numberOfChannels),t&&t(r)})},s.onerror=function(t){onerror&&onerror(t)},s.readAsArrayBuffer(this.file)}},p5.SoundFile.prototype._updateProgress=function(t){if(t.lengthComputable){var e=Math.log(t.loaded/t.total*9.9);this._whileLoading(e)}else this._whileLoading("size unknown")},p5.SoundFile.prototype.isLoaded=function(){return!!this.buffer},p5.SoundFile.prototype.play=function(t,e,r,n,i){var o,a,u=this,l=s.audiocontext.currentTime,t=t||0;if(0>t&&(t=0),t+=l,!this.buffer)throw"not ready to play file, buffer has yet to load. Try preload()";if(this._pauseTime=0,"restart"===this.mode&&this.buffer&&this.bufferSourceNode){var l=s.audiocontext.currentTime;this.bufferSourceNode.stop(t),this._counterNode.stop(t)}if(this.bufferSourceNode=this._initSourceNode(),this._counterNode&&(this._counterNode=void 0),this._counterNode=this._initCounterNode(),n){if(!(n>=0&&n<this.buffer.duration))throw"start time out of range";o=n}else o=0;i=i?i<=this.buffer.duration-o?i:this.buffer.duration:this.buffer.duration-o;var c=r||1;this.bufferSourceNode.connect(this.output),this.output.gain.value=c,e=e||Math.abs(this.playbackRate),this.bufferSourceNode.playbackRate.setValueAtTime(e,l),this._paused?(this.bufferSourceNode.start(t,this.pauseTime,i),this._counterNode.start(t,this.pauseTime,i)):(this.bufferSourceNode.start(t,o,i),this._counterNode.start(t,o,i)),this._playing=!0,this._paused=!1,this.bufferSourceNodes.push(this.bufferSourceNode),this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1;var h=function(t){this._playing=!1,this.removeEventListener("ended",h,!1),u._onended(u),u.bufferSourceNodes.forEach(function(t,e){t._playing===!1&&u.bufferSourceNodes.splice(e)}),0===u.bufferSourceNodes.length&&(u._playing=!1)};if(this.bufferSourceNode.onended=h,this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping,this._looping===!0){var a=o+i;this.bufferSourceNode.loopStart=o,this.bufferSourceNode.loopEnd=a,this._counterNode.loopStart=o,this._counterNode.loopEnd=a}},p5.SoundFile.prototype.playMode=function(t){var e=t.toLowerCase();if("restart"===e&&this.buffer&&this.bufferSourceNode)for(var r=0;r<this.bufferSourceNodes.length-1;r++){var n=s.audiocontext.currentTime;this.bufferSourceNodes[r].stop(n)}if("restart"!==e&&"sustain"!==e)throw'Invalid play mode. Must be either "restart" or "sustain"';this.mode=e},p5.SoundFile.prototype.pause=function(t){var e=s.audiocontext.currentTime,t=t||0,r=t+e;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(r),this._counterNode.stop(r),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0},p5.SoundFile.prototype.loop=function(t,e,r,n,i){this._looping=!0,this.play(t,e,r,n,i)},p5.SoundFile.prototype.setLoop=function(t){if(t===!0)this._looping=!0;else{if(t!==!1)throw"Error: setLoop accepts either true or false";this._looping=!1}this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)},p5.SoundFile.prototype.isLooping=function(){return this.bufferSourceNode?this._looping===!0&&this.isPlaying()===!0:!1},p5.SoundFile.prototype.isPlaying=function(){return this._playing},p5.SoundFile.prototype.isPaused=function(){return this._paused},p5.SoundFile.prototype.stop=function(t){var e=t||0;if("sustain"==this.mode)this.stopAll(e),this._playing=!1,this.pauseTime=0,this._paused=!1;else if(this.buffer&&this.bufferSourceNode){var r=s.audiocontext.currentTime,n=e||0;this.pauseTime=0,this.bufferSourceNode.stop(r+n),this._counterNode.stop(r+n),this._playing=!1,this._paused=!1}},p5.SoundFile.prototype.stopAll=function(t){var e=s.audiocontext.currentTime,r=t||0;if(this.buffer&&this.bufferSourceNode){for(var n=0;n<this.bufferSourceNodes.length;n++)if(void 0!=typeof this.bufferSourceNodes[n])try{this.bufferSourceNodes[n].onended=function(){},this.bufferSourceNodes[n].stop(e+r)}catch(i){}this._counterNode.stop(e+r),this._onended(this)}},p5.SoundFile.prototype.setVolume=function(t,e,r){if("number"==typeof t){var e=e||0,r=r||0,n=s.audiocontext.currentTime,i=this.output.gain.value;this.output.gain.cancelScheduledValues(n+r),this.output.gain.linearRampToValueAtTime(i,n+r),this.output.gain.linearRampToValueAtTime(t,n+r+e)}else{if(!t)return this.output.gain;t.connect(this.output.gain)}},p5.SoundFile.prototype.amp=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.fade=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.getVolume=function(){return this.output.gain.value},p5.SoundFile.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},p5.SoundFile.prototype.getPan=function(){return this.panPosition},p5.SoundFile.prototype.rate=function(t){if(this.playbackRate!==t||!this.bufferSourceNode||this.bufferSourceNode.playbackRate.value!==t){this.playbackRate=t;var e=t;if(0===this.playbackRate&&this._playing&&this.pause(),this.playbackRate<0&&!this.reversed){var r=this.currentTime();this.bufferSourceNode.playbackRate.value;this.reverseBuffer(),e=Math.abs(t);var n=(r-this.duration())/e;this.pauseTime=n}else this.playbackRate>0&&this.reversed&&this.reverseBuffer();if(this.bufferSourceNode){var i=s.audiocontext.currentTime;this.bufferSourceNode.playbackRate.cancelScheduledValues(i),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(e),i),this._counterNode.playbackRate.cancelScheduledValues(i),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(e),i)}}},p5.SoundFile.prototype.setPitch=function(t){var e=midiToFreq(t)/midiToFreq(60);this.rate(e)},p5.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate},p5.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0},p5.SoundFile.prototype.currentTime=function(){return this._pauseTime>0?this._pauseTime:this._lastPos/a.sampleRate},p5.SoundFile.prototype.jump=function(t,e){if(0>t||t>this.buffer.duration)throw"jump time out of range";if(e>this.buffer.duration-t)throw"end time out of range";var r=t||0,n=e||this.buffer.duration-t;this.isPlaying()&&this.stop(),this.play(0,this.playbackRate,this.output.gain.value,r,n)},p5.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels},p5.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate},p5.SoundFile.prototype.frames=function(){return this.buffer.length},p5.SoundFile.prototype.getPeaks=function(t){if(!this.buffer)throw"Cannot load peaks yet, buffer is not loaded";if(t||(t=5*window.width),this.buffer){for(var e=this.buffer,r=e.length/t,n=~~(r/10)||1,i=e.numberOfChannels,o=new Float32Array(Math.round(t)),s=0;i>s;s++)for(var a=e.getChannelData(s),u=0;t>u;u++){for(var l=~~(u*r),c=~~(l+r),h=0,p=l;c>p;p+=n){var f=a[p];f>h?h=f:-f>h&&(h=f)}(0===s||Math.abs(h)>o[u])&&(o[u]=h)}return o}},p5.SoundFile.prototype.reverseBuffer=function(){var t=this.getVolume();if(this.setVolume(0,.01,0),this.pause(),!this.buffer)throw"SoundFile is not done loading";for(var e=0;e<this.buffer.numberOfChannels;e++)Array.prototype.reverse.call(this.buffer.getChannelData(e));this.reversed=!this.reversed,this.setVolume(t,.01,.0101),this.play()},p5.SoundFile.prototype.onended=function(t){return this._onended=t,this},p5.SoundFile.prototype.add=function(){},p5.SoundFile.prototype.dispose=function(){var t=s.audiocontext.currentTime,e=s.soundArray.indexOf(this);if(s.soundArray.splice(e,1),this.stop(t),this.buffer&&this.bufferSourceNode){for(var r=0;r<this.bufferSourceNodes.length-1;r++)if(null!==this.bufferSourceNodes[r]){this.bufferSourceNodes[r].disconnect();try{this.bufferSourceNodes[r].stop(t)}catch(n){}this.bufferSourceNodes[r]=null}if(this.isPlaying()){try{this._counterNode.stop(t)}catch(n){console.log(n)}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null),this.panner&&(this.panner.disconnect(),this.panner=null)},p5.SoundFile.prototype.connect=function(t){t?t.hasOwnProperty("input")?this.panner.connect(t.input):this.panner.connect(t):this.panner.connect(s.input)},p5.SoundFile.prototype.disconnect=function(){this.panner.disconnect()},p5.SoundFile.prototype.getLevel=function(t){console.warn("p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead")},p5.SoundFile.prototype.setPath=function(t,e){var r=p5.prototype._checkFileFormats(t);this.url=r,this.load(e)},p5.SoundFile.prototype.setBuffer=function(t){var e=t.length,r=t[0].length,n=a.createBuffer(e,r,a.sampleRate);!t[0]instanceof Float32Array&&(t[0]=new Float32Array(t[0]));for(var i=0;e>i;i++){var o=n.getChannelData(i);o.set(t[i])}this.buffer=n,this.panner.inputChannels(e)},p5.SoundFile.prototype._initCounterNode=function(){var t=this,e=a.currentTime,r=a.createBufferSource();return t._scopeNode&&(t._scopeNode.disconnect(),t._scopeNode.onaudioprocess=void 0,t._scopeNode=null),t._scopeNode=a.createScriptProcessor(256,1,1),r.buffer=u(t.buffer),r.playbackRate.setValueAtTime(t.playbackRate,e),r.connect(t._scopeNode),t._scopeNode.connect(p5.soundOut._silentNode),t._scopeNode.onaudioprocess=function(e){var r=e.inputBuffer.getChannelData(0);t._lastPos=r[r.length-1]||0,t._onTimeUpdate(t._lastPos)},r},p5.SoundFile.prototype._initSourceNode=function(){var t=this,e=a.currentTime,r=a.createBufferSource();return r.buffer=t.buffer,r.playbackRate.setValueAtTime(t.playbackRate,e),r};var u=function(t){for(var e=new Float32Array(t.length),r=a.createBuffer(1,t.length,44100),n=0;n<t.length;n++)e[n]=n;return r.getChannelData(0).set(e),r};p5.SoundFile.prototype.processPeaks=function(i,o,s,a){var u=this.buffer.length,l=this.buffer.sampleRate,h=this.buffer,p=o||.9,f=p,d=s||.22,m=a||200,g=new OfflineAudioContext(1,u,l),y=g.createBufferSource();y.buffer=h;var v=g.createBiquadFilter();v.type="lowpass",y.connect(v),v.connect(g.destination),y.start(0),g.startRendering(),g.oncomplete=function(o){var s=o.renderedBuffer,a=s.getChannelData(0);do c=t(a,f),f-=.005;while(Object.keys(c).length<m&&f>=d);var u=e(c),l=r(u,s.sampleRate),h=l.sort(function(t,e){return e.count-t.count}).splice(0,5);this.tempo=h[0].tempo;var p=5,g=n(c,h[0].tempo,s.sampleRate,p);i(g)}};var l=function(t,e){this.sampleIndex=e,this.amplitude=t,this.tempos=[],this.intervals=[]},c=[];p5.SoundFile.prototype.addCue=function(t,e,r){var n=this._cueIDCounter++,i=new h(e,t,n,r);return this._cues.push(i),n},p5.SoundFile.prototype.removeCue=function(t){for(var e=this._cues.length,r=0;e>r;r++){var n=this._cues[r];n.id===t&&this.cues.splice(r,1)}0===this._cues.length},p5.SoundFile.prototype.clearCues=function(){this._cues=[]},p5.SoundFile.prototype._onTimeUpdate=function(t){for(var e=t/this.buffer.sampleRate,r=this._cues.length,n=0;r>n;n++){var i=this._cues[n],o=i.time,s=i.val;this._prevTime<o&&e>=o&&i.callback(s)}this._prevTime=e};var h=function(t,e,r,n){this.callback=t,this.time=e,this.id=r,this.val=n}}(sndcore,errorHandler,master);var amplitude;amplitude=function(){"use strict";var t=master;p5.Amplitude=function(e){this.bufferSize=2048,this.audiocontext=t.audiocontext,this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1),this.input=this.processor,this.output=this.audiocontext.createGain(),this.smoothing=e||0,this.volume=0,this.average=0,this.stereoVol=[0,0],this.stereoAvg=[0,0],this.stereoVolNorm=[0,0],this.volMax=.001,this.normalize=!1,this.processor.onaudioprocess=this._audioProcess.bind(this),this.processor.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),t.meter.connect(this.processor),t.soundArray.push(this)},p5.Amplitude.prototype.setInput=function(e,r){t.meter.disconnect(),r&&(this.smoothing=r),null==e?(console.log("Amplitude input source is not ready! Connecting to master output instead"),t.meter.connect(this.processor)):e instanceof p5.Signal?e.output.connect(this.processor):e?(e.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):t.meter.connect(this.processor)},p5.Amplitude.prototype.connect=function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):this.output.connect(e):this.output.connect(this.panner.connect(t.input))},p5.Amplitude.prototype.disconnect=function(t){this.output.disconnect()},p5.Amplitude.prototype._audioProcess=function(t){for(var e=0;e<t.inputBuffer.numberOfChannels;e++){for(var r,n=t.inputBuffer.getChannelData(e),i=n.length,o=0,s=0,a=0;i>a;a++)r=n[a],this.normalize?(o+=Math.max(Math.min(r/this.volMax,1),-1),s+=Math.max(Math.min(r/this.volMax,1),-1)*Math.max(Math.min(r/this.volMax,1),-1)):(o+=r,s+=r*r);var u=o/i,l=Math.sqrt(s/i);this.stereoVol[e]=Math.max(l,this.stereoVol[e]*this.smoothing),this.stereoAvg[e]=Math.max(u,this.stereoVol[e]*this.smoothing),this.volMax=Math.max(this.stereoVol[e],this.volMax)}var c=this,h=this.stereoVol.reduce(function(t,e,r){return c.stereoVolNorm[r-1]=Math.max(Math.min(c.stereoVol[r-1]/c.volMax,1),0),c.stereoVolNorm[r]=Math.max(Math.min(c.stereoVol[r]/c.volMax,1),0),t+e});this.volume=h/this.stereoVol.length,this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)},p5.Amplitude.prototype.getLevel=function(t){return"undefined"!=typeof t?this.normalize?this.stereoVolNorm[t]:this.stereoVol[t]:this.normalize?this.volNorm:this.volume},p5.Amplitude.prototype.toggleNormalize=function(t){"boolean"==typeof t?this.normalize=t:this.normalize=!this.normalize},p5.Amplitude.prototype.smooth=function(t){t>=0&&1>t?this.smoothing=t:console.log("Error: smoothing must be between 0 and 1")},p5.Amplitude.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.input.disconnect(),this.output.disconnect(),this.input=this.processor=void 0,this.output=void 0}}(master);var fft;fft=function(){"use strict";var t=master;p5.FFT=function(e,r){this.smoothing=e||.8,this.bins=r||1024;var n=2*r||2048;this.input=this.analyser=t.audiocontext.createAnalyser(),t.fftMeter.connect(this.analyser),this.analyser.smoothingTimeConstant=this.smoothing,this.analyser.fftSize=n,this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount),this.bass=[20,140],this.lowMid=[140,400],this.mid=[400,2600],this.highMid=[2600,5200],this.treble=[5200,14e3],t.soundArray.push(this)},p5.FFT.prototype.setInput=function(e){e?(e.output?e.output.connect(this.analyser):e.connect&&e.connect(this.analyser),t.fftMeter.disconnect()):t.fftMeter.connect(this.analyser)},p5.FFT.prototype.waveform=function(){for(var t,e,r,o=0;o<arguments.length;o++)"number"==typeof arguments[o]&&(t=arguments[o],this.analyser.fftSize=2*t),"string"==typeof arguments[o]&&(e=arguments[o]);if(e&&!p5.prototype._isSafari())return n(this,this.timeDomain),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;i(this,this.timeDomain),this.analyser.getByteTimeDomainData(this.timeDomain);for(var r=new Array,o=0;o<this.timeDomain.length;o++){var s=p5.prototype.map(this.timeDomain[o],0,255,-1,1);r.push(s)}return r},p5.FFT.prototype.analyze=function(){for(var t,n,i=0;i<arguments.length;i++)"number"==typeof arguments[i]&&(t=this.bins=arguments[i],this.analyser.fftSize=2*this.bins),"string"==typeof arguments[i]&&(n=arguments[i]);if(n&&"db"===n.toLowerCase())return e(this),this.analyser.getFloatFrequencyData(this.freqDomain),this.freqDomain;r(this,this.freqDomain),this.analyser.getByteFrequencyData(this.freqDomain);var o=Array.apply([],this.freqDomain);return o.length===this.analyser.fftSize,o.constructor===Array,o},p5.FFT.prototype.getEnergy=function(e,r){var n=t.audiocontext.sampleRate/2;if("bass"===e?(e=this.bass[0],r=this.bass[1]):"lowMid"===e?(e=this.lowMid[0],r=this.lowMid[1]):"mid"===e?(e=this.mid[0],r=this.mid[1]):"highMid"===e?(e=this.highMid[0],r=this.highMid[1]):"treble"===e&&(e=this.treble[0],r=this.treble[1]),"number"!=typeof e)throw"invalid input for getEnergy()";if(r){if(e&&r){if(e>r){var i=r;r=e,e=i}for(var o=Math.round(e/n*this.freqDomain.length),s=Math.round(r/n*this.freqDomain.length),a=0,u=0,l=o;s>=l;l++)a+=this.freqDomain[l],u+=1;var c=a/u;return c}throw"invalid input for getEnergy()"}var h=Math.round(e/n*this.freqDomain.length);return this.freqDomain[h]},p5.FFT.prototype.getFreq=function(t,e){console.log("getFreq() is deprecated. Please use getEnergy() instead.");var r=this.getEnergy(t,e);return r},p5.FFT.prototype.getCentroid=function(){for(var e=t.audiocontext.sampleRate/2,r=0,n=0,i=0;i<this.freqDomain.length;i++)r+=i*this.freqDomain[i],n+=this.freqDomain[i];var o=0;0!=n&&(o=r/n);var s=o*(e/this.freqDomain.length);return s},p5.FFT.prototype.smooth=function(t){t&&(this.smoothing=t),this.analyser.smoothingTimeConstant=t},p5.FFT.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.analyser.disconnect(),this.analyser=void 0};var e=function(t){t.freqDomain instanceof Float32Array==!1&&(t.freqDomain=new Float32Array(t.analyser.frequencyBinCount))},r=function(t){t.freqDomain instanceof Uint8Array==!1&&(t.freqDomain=new Uint8Array(t.analyser.frequencyBinCount))},n=function(t){t.timeDomain instanceof Float32Array==!1&&(t.timeDomain=new Float32Array(t.analyser.frequencyBinCount))},i=function(t){t.timeDomain instanceof Uint8Array==!1&&(t.timeDomain=new Uint8Array(t.analyser.frequencyBinCount))}}(master);var Tone_core_Tone;Tone_core_Tone=function(){"use strict";function t(t){return void 0===t}function e(t){return"function"==typeof t}var r;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");r=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,r,n){if(e.input)Array.isArray(e.input)?(t(n)&&(n=0),this.connect(e.input[n])):this.connect(e.input,r,n);else try{e instanceof AudioNode?this._nativeConnect(e,r,n):this._nativeConnect(e,r)}catch(i){throw new Error("error connecting to node: "+e)}};var n=function(e,r){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(r)||1===r?this.output=this.context.createGain():r>1&&(this.output=new Array(e))};n.prototype.set=function(e,r,i){if(this.isObject(e))i=r;else if(this.isString(e)){var o={};o[e]=r,e=o}for(var s in e){r=e[s];var a=this;if(-1!==s.indexOf(".")){for(var u=s.split("."),l=0;l<u.length-1;l++)a=a[u[l]];s=u[u.length-1]}var c=a[s];t(c)||(n.Signal&&c instanceof n.Signal||n.Param&&c instanceof n.Param?c.value!==r&&(t(i)?c.value=r:c.rampTo(r,i)):c instanceof AudioParam?c.value!==r&&(c.value=r):c instanceof n?c.set(r):c!==r&&(a[s]=r))}return this},n.prototype.get=function(r){t(r)?r=this._collectDefaults(this.constructor):this.isString(r)&&(r=[r]);for(var i={},o=0;o<r.length;o++){var s=r[o],a=this,u=i;if(-1!==s.indexOf(".")){for(var l=s.split("."),c=0;c<l.length-1;c++){var h=l[c];u[h]=u[h]||{},u=u[h],a=a[h]}s=l[l.length-1]}var p=a[s];this.isObject(r[s])?u[s]=p.get():n.Signal&&p instanceof n.Signal?u[s]=p.value:n.Param&&p instanceof n.Param?u[s]=p.value:p instanceof AudioParam?u[s]=p.value:p instanceof n?u[s]=p.get():e(p)||t(p)||(u[s]=p)}return i},n.prototype._collectDefaults=function(e){var r=[];if(t(e.defaults)||(r=Object.keys(e.defaults)),!t(e._super))for(var n=this._collectDefaults(e._super),i=0;i<n.length;i++)-1===r.indexOf(n[i])&&r.push(n[i]);return r},n.prototype.toString=function(){for(var t in n){var r=t[0].match(/^[A-Z]$/),i=n[t]===this.constructor;if(e(n[t])&&r&&i)return t}return"Tone"},n.context=r,n.prototype.context=n.context,n.prototype.bufferSize=2048,n.prototype.blockTime=128/n.context.sampleRate,n.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var i=null;n.prototype.noGC=function(){return this.output.connect(i),this},AudioNode.prototype.noGC=function(){return this.connect(i),this},n.prototype.connect=function(t,e,r){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,r)):this.output.connect(t,e,r),this},n.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.output.disconnect(),this},n.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var r=arguments[e];t.connect(r),t=r}return this},n.prototype.connectParallel=function(){var t=arguments[0];if(arguments.length>1)for(var e=1;e<arguments.length;e++){var r=arguments[e];t.connect(r)}return this},n.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){
var r=arguments[e];t.connect(r),t=r}return this},n.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=n.prototype.chain,AudioNode.prototype.fan=n.prototype.fan,n.prototype.defaultArg=function(e,r){if(this.isObject(e)&&this.isObject(r)){var n={};for(var i in e)n[i]=this.defaultArg(r[i],e[i]);for(var o in r)n[o]=this.defaultArg(e[o],r[o]);return n}return t(e)?r:e},n.prototype.optionsObject=function(t,e,r){var n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(var i=0;i<e.length;i++)n[e[i]]=t[i];return this.isUndef(r)?n:this.defaultArg(n,r)},n.prototype.isUndef=t,n.prototype.isFunction=e,n.prototype.isNumber=function(t){return"number"==typeof t},n.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},n.prototype.isBoolean=function(t){return"boolean"==typeof t},n.prototype.isArray=function(t){return Array.isArray(t)},n.prototype.isString=function(t){return"string"==typeof t},n.noOp=function(){},n.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},n.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},n.State={Started:"started",Stopped:"stopped",Paused:"paused"},n.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},n.prototype.dbToGain=function(t){return Math.pow(2,t/6)},n.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},n.prototype.now=function(){return this.context.currentTime},n.extend=function(e,r){function i(){}t(r)&&(r=n),i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e,e._super=r};var o=[];return n._initAudioContext=function(t){t(n.context),o.push(t)},n.setContext=function(t){n.prototype.context=t,n.context=t;for(var e=0;e<o.length;e++)o[e](t)},n.startMobile=function(){var t=n.context.createOscillator(),e=n.context.createGain();e.gain.value=0,t.connect(e),e.connect(n.context.destination);var r=n.context.currentTime;t.start(r),t.stop(r+1)},n._initAudioContext(function(t){n.prototype.blockTime=128/t.sampleRate,i=t.createGain(),i.gain.value=0,i.connect(t.destination)}),n.version="r7-dev",n}();var Tone_signal_SignalBase;Tone_signal_SignalBase=function(t){"use strict";return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,r,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,r,n),this},t.SignalBase}(Tone_core_Tone);var Tone_signal_WaveShaper;Tone_signal_WaveShaper=function(t){"use strict";return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,r=this._curve.length;r>e;e++){var n=e/r*2-1;this._curve[e]=t(n,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new Error("invalid oversampling: "+t);this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}(Tone_core_Tone);var Tone_core_Type;Tone_core_Type=function(Tone){"use strict";function getTransportBpm(){return Tone.Transport&&Tone.Transport.bpm?Tone.Transport.bpm.value:120}function getTransportTimeSignature(){return Tone.Transport&&Tone.Transport.timeSignature?Tone.Transport.timeSignature:4}function toNotationHelper(t,e,r,n){for(var i=this.toSeconds(t),o=this.notationToSeconds(n[n.length-1],e,r),s="",a=0;a<n.length;a++){var u=this.notationToSeconds(n[a],e,r),l=i/u,c=1e-6;if(c>1-l%1&&(l+=c),l=Math.floor(l),l>0){if(s+=1===l?n[a]:l.toString()+"*"+n[a],i-=l*u,o>i)break;s+=" + "}}return""===s&&(s="0"),s}Tone.Type={Default:"number",Time:"time",Frequency:"frequency",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",TransportTime:"transportTime",Ticks:"tick",Note:"note",Milliseconds:"milliseconds",Notation:"notation"},Tone.prototype.isNowRelative=function(){var t=new RegExp(/^\s*\+(.)+/i);return function(e){return t.test(e)}}(),Tone.prototype.isTicks=function(){var t=new RegExp(/^\d+i$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNotation=function(){var t=new RegExp(/^[0-9]+[mnt]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTransportTime=function(){var t=new RegExp(/^(\d+(\.\d+)?\:){1,2}(\d+(\.\d+)?)?$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNote=function(){var t=new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i);return function(e){return t.test(e)}}(),Tone.prototype.isFrequency=function(){var t=new RegExp(/^\d*\.?\d+hz$/i);return function(e){return t.test(e)}}(),Tone.prototype.notationToSeconds=function(t,e,r){e=this.defaultArg(e,getTransportBpm()),r=this.defaultArg(r,getTransportTimeSignature());var n=60/e;"1n"===t&&(t="1m");var i=parseInt(t,10),o=0;0===i&&(o=0);var s=t.slice(-1);return o="t"===s?4/i*2/3:"n"===s?4/i:"m"===s?i*r:0,n*o},Tone.prototype.transportTimeToSeconds=function(t,e,r){e=this.defaultArg(e,getTransportBpm()),r=this.defaultArg(r,getTransportTimeSignature());var n=0,i=0,o=0,s=t.split(":");2===s.length?(n=parseFloat(s[0]),i=parseFloat(s[1])):1===s.length?i=parseFloat(s[0]):3===s.length&&(n=parseFloat(s[0]),i=parseFloat(s[1]),o=parseFloat(s[2]));var a=n*r+i+o/4;return a*(60/e)},Tone.prototype.ticksToSeconds=function(t,e){if(this.isUndef(Tone.Transport))return 0;t=parseFloat(t),e=this.defaultArg(e,getTransportBpm());var r=60/e/Tone.Transport.PPQ;return r*t},Tone.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},Tone.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},Tone.prototype.secondsToSamples=function(t){return t*this.context.sampleRate},Tone.prototype.secondsToTransportTime=function(t,e,r){e=this.defaultArg(e,getTransportBpm()),r=this.defaultArg(r,getTransportTimeSignature());var n=60/e,i=t/n,o=Math.floor(i/r),s=i%1*4;i=Math.floor(i)%r;var a=[o,i,s];return a.join(":")},Tone.prototype.secondsToFrequency=function(t){return 1/t},Tone.prototype.toTransportTime=function(t,e,r){var n=this.toSeconds(t);return this.secondsToTransportTime(n,e,r)},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):this.isNote(t)?this.noteToFrequency(t):t},Tone.prototype.toTicks=function(t){if(this.isUndef(Tone.Transport))return 0;var e=Tone.Transport.bpm.value,r=0;if(this.isNowRelative(t))t=t.replace("+",""),r=Tone.Transport.ticks;else if(this.isUndef(t))return Tone.Transport.ticks;var n=this.toSeconds(t),i=60/e,o=n/i,s=o*Tone.Transport.PPQ;return Math.round(s+r)},Tone.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},Tone.prototype.toSeconds=function(time,now){if(now=this.defaultArg(now,this.now()),this.isNumber(time))return time;if(this.isString(time)){var plusTime=0;this.isNowRelative(time)&&(time=time.replace("+",""),plusTime=now);var betweenParens=time.match(/\(([^)(]+)\)/g);if(betweenParens)for(var j=0;j<betweenParens.length;j++){var symbol=betweenParens[j].replace(/[\(\)]/g,""),symbolVal=this.toSeconds(symbol);time=time.replace(betweenParens[j],symbolVal)}if(-1!==time.indexOf("@")){var quantizationSplit=time.split("@");if(this.isUndef(Tone.Transport))throw new Error("quantization requires Tone.Transport");var toQuantize=quantizationSplit[0].trim();""===toQuantize&&(toQuantize=void 0),plusTime>0&&(toQuantize="+"+toQuantize,plusTime=0);var subdivision=quantizationSplit[1].trim();time=Tone.Transport.quantize(toQuantize,subdivision)}else{var components=time.split(/[\(\)\-\+\/\*]/);if(components.length>1){for(var originalTime=time,i=0;i<components.length;i++){var symb=components[i].trim();if(""!==symb){var val=this.toSeconds(symb);time=time.replace(symb,val)}}try{time=eval(time)}catch(e){throw new EvalError("cannot evaluate Time: "+originalTime)}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):this.isTicks(time)?this.ticksToSeconds(time):parseFloat(time)}return time+plusTime}return now},Tone.prototype.toNotation=function(t,e,r){var n=["1m","2n","4n","8n","16n","32n","64n","128n"],i=toNotationHelper.call(this,t,e,r,n),o=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],s=toNotationHelper.call(this,t,e,r,o);return s.split("+").length<i.split("+").length?s:i},Tone.prototype.fromUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Time:return this.toSeconds(t);case Tone.Type.Frequency:return this.toFrequency(t);case Tone.Type.Decibels:return this.dbToGain(t);case Tone.Type.NormalRange:return Math.min(Math.max(t,0),1);case Tone.Type.AudioRange:return Math.min(Math.max(t,-1),1);case Tone.Type.Positive:return Math.max(t,0);default:return t}},Tone.prototype.toUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Decibels:return this.gainToDb(t);default:return t}};var noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return Tone.A4=440,Tone.prototype.noteToFrequency=function(t){var e=t.split(/(-?\d+)/);if(3===e.length){var r=noteToScaleIndex[e[0].toLowerCase()],n=e[1],i=r+12*(parseInt(n,10)+1);return this.midiToFrequency(i)}return 0},Tone.prototype.frequencyToNote=function(t){var e=Math.log(t/Tone.A4)/Math.LN2,r=Math.round(12*e)+57,n=Math.floor(r/12);0>n&&(r+=-12*n);var i=scaleIndexToNote[r%12];return i+n.toString()},Tone.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},Tone.prototype.midiToNote=function(t){var e=Math.floor(t/12)-1,r=t%12;return scaleIndexToNote[r]+e},Tone.prototype.noteToMidi=function(t){var e=t.split(/(\d+)/);if(3===e.length){var r=noteToScaleIndex[e[0].toLowerCase()],n=e[1];return r+12*(parseInt(n,10)+1)}return 0},Tone.prototype.midiToFrequency=function(t){return Tone.A4*Math.pow(2,(t-69)/12)},Tone}(Tone_core_Tone);var Tone_core_Param;Tone_core_Param=function(t){"use strict";return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._param.value=e}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.setValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e){var r=this.now(),n=this.value;return this.setValueAtTime(Math.max(n,this._minOutput),r),this.exponentialRampToValueAtTime(t,r+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e){var r=this.now();return this.setRampPoint(r),this.linearRampToValueAtTime(t,r+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,r){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),r=Math.max(this._minOutput,r),this._param.setTargetAtTime(t,this.toSeconds(e),r),this},t.Param.prototype.setValueCurveAtTime=function(t,e,r){for(var n=0;n<t.length;n++)t[n]=this._fromUnits(t[n]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(r)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,r){return r=this.defaultArg(r,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,r):this.linearRampToValue(e,r),this},t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this},t.Param}(Tone_core_Tone);var Tone_core_Gain;Tone_core_Gain=function(t){"use strict";return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}(Tone_core_Tone,Tone_core_Param);var Tone_signal_Signal;Tone_signal_Signal=function(t){"use strict";return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var r=e.createBuffer(1,128,e.sampleRate),n=r.getChannelData(0),i=0;i<n.length;i++)n[i]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=r,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}(Tone_core_Tone,Tone_signal_WaveShaper,Tone_core_Type,Tone_core_Param);var Tone_signal_Add;Tone_signal_Add=function(t){"use strict";return t.Add=function(e){t.call(this,2,0),this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}(Tone_core_Tone);var Tone_signal_Multiply;Tone_signal_Multiply=function(t){"use strict";return t.Multiply=function(e){t.call(this,2,0),this._mult=this.input[0]=this.output=this.context.createGain(),this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.disconnect(),this._mult=null,this._param=null,this},t.Multiply}(Tone_core_Tone);var Tone_signal_Scale;Tone_signal_Scale=function(t){"use strict";return t.Scale=function(e,r){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(r,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}(Tone_core_Tone,Tone_signal_Add,Tone_signal_Multiply);var signal;signal=function(){"use strict";var t=Tone_signal_Signal,e=Tone_signal_Add,r=Tone_signal_Multiply,n=Tone_signal_Scale,i=Tone_core_Tone,o=master;i.setContext(o.audiocontext),p5.Signal=function(e){var r=new t(e);return r},t.prototype.fade=t.prototype.linearRampToValueAtTime,r.prototype.fade=t.prototype.fade,e.prototype.fade=t.prototype.fade,n.prototype.fade=t.prototype.fade,t.prototype.setInput=function(t){t.connect(this)},r.prototype.setInput=t.prototype.setInput,e.prototype.setInput=t.prototype.setInput,n.prototype.setInput=t.prototype.setInput,t.prototype.add=function(t){var r=new e(t);return this.connect(r),r},r.prototype.add=t.prototype.add,e.prototype.add=t.prototype.add,n.prototype.add=t.prototype.add,t.prototype.mult=function(t){var e=new r(t);return this.connect(e),e},r.prototype.mult=t.prototype.mult,e.prototype.mult=t.prototype.mult,n.prototype.mult=t.prototype.mult,t.prototype.scale=function(t,e,r,i){var o,s;4===arguments.length?(o=p5.prototype.map(r,t,e,0,1)-.5,s=p5.prototype.map(i,t,e,0,1)-.5):(o=arguments[0],s=arguments[1]);var a=new n(o,s);return this.connect(a),a},r.prototype.scale=t.prototype.scale,e.prototype.scale=t.prototype.scale,n.prototype.scale=t.prototype.scale}(Tone_signal_Signal,Tone_signal_Add,Tone_signal_Multiply,Tone_signal_Scale,Tone_core_Tone,master);var oscillator;oscillator=function(){"use strict";var t=master,e=Tone_signal_Add,r=Tone_signal_Multiply,n=Tone_signal_Scale;p5.Oscillator=function(e,r){if("string"==typeof e){var n=r;r=e,e=n}if("number"==typeof r){var n=r;r=e,e=n}this.started=!1,this.phaseAmount=void 0,this.oscillator=t.audiocontext.createOscillator(),this.f=e||440,this.oscillator.type=r||"sine",this.oscillator.frequency.setValueAtTime(this.f,t.audiocontext.currentTime);this.oscillator;this.output=t.audiocontext.createGain(),this._freqMods=[],this.output.gain.value=.5,this.output.gain.setValueAtTime(.5,t.audiocontext.currentTime),this.oscillator.connect(this.output),this.panPosition=0,this.connection=t.input,this.panner=new p5.Panner(this.output,this.connection,1),this.mathOps=[this.output],t.soundArray.push(this)},p5.Oscillator.prototype.start=function(e,r){if(this.started){var n=t.audiocontext.currentTime;this.stop(n)}if(!this.started){var i=r||this.f,o=this.oscillator.type;this.oscillator&&(this.oscillator.disconnect(),this.oscillator=void 0),this.oscillator=t.audiocontext.createOscillator(),this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(i),t.audiocontext.currentTime),this.oscillator.type=o,this.oscillator.connect(this.output),e=e||0,this.oscillator.start(e+t.audiocontext.currentTime),this.freqNode=this.oscillator.frequency;for(var s in this._freqMods)"undefined"!=typeof this._freqMods[s].connect&&this._freqMods[s].connect(this.oscillator.frequency);this.started=!0}},p5.Oscillator.prototype.stop=function(e){if(this.started){var r=e||0,n=t.audiocontext.currentTime;this.oscillator.stop(r+n),this.started=!1}},p5.Oscillator.prototype.amp=function(e,r,n){var i=this;if("number"==typeof e){var r=r||0,n=n||0,o=t.audiocontext.currentTime,s=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(s,o+n),this.output.gain.linearRampToValueAtTime(e,o+n+r)}else{if(!e)return this.output.gain;e.connect(i.output.gain)}},p5.Oscillator.prototype.fade=p5.Oscillator.prototype.amp,p5.Oscillator.prototype.getAmp=function(){return this.output.gain.value},p5.Oscillator.prototype.freq=function(e,r,n){if("number"!=typeof e||isNaN(e)){if(!e)return this.oscillator.frequency;e.output&&(e=e.output),e.connect(this.oscillator.frequency),this._freqMods.push(e)}else{this.f=e;var i=t.audiocontext.currentTime,r=r||0,n=n||0;0==r?(this.oscillator.frequency.cancelScheduledValues(i),this.oscillator.frequency.setValueAtTime(e,n+i)):e>0?this.oscillator.frequency.exponentialRampToValueAtTime(e,n+r+i):this.oscillator.frequency.linearRampToValueAtTime(e,n+r+i),this.phaseAmount&&this.phase(this.phaseAmount)}},p5.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value},p5.Oscillator.prototype.setType=function(t){this.oscillator.type=t},p5.Oscillator.prototype.getType=function(){return this.oscillator.type},p5.Oscillator.prototype.connect=function(e){e?e.hasOwnProperty("input")?(this.panner.connect(e.input),this.connection=e.input):(this.panner.connect(e),this.connection=e):this.panner.connect(t.input)},p5.Oscillator.prototype.disconnect=function(t){this.output.disconnect(),this.panner.disconnect(),this.output.connect(this.panner),this.oscMods=[]},p5.Oscillator.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},p5.Oscillator.prototype.getPan=function(){return this.panPosition},p5.Oscillator.prototype.dispose=function(){var e=t.soundArray.indexOf(this);if(t.soundArray.splice(e,1),this.oscillator){var r=t.audiocontext.currentTime;this.stop(r),this.disconnect(),this.panner=null,this.oscillator=null}this.osc2&&this.osc2.dispose()},p5.Oscillator.prototype.phase=function(e){var r=p5.prototype.map(e,0,1,0,1/this.f),n=t.audiocontext.currentTime;this.phaseAmount=e,this.dNode||(this.dNode=t.audiocontext.createDelay(),this.oscillator.disconnect(),this.oscillator.connect(this.dNode),this.dNode.connect(this.output)),this.dNode.delayTime.setValueAtTime(r,n)};var i=function(t,e,r,n,i){var o=t.oscillator;for(var s in t.mathOps)t.mathOps[s]instanceof i&&(o.disconnect(),t.mathOps[s].dispose(),r=s,r<t.mathOps.length-2&&(n=t.mathOps[s+1]));return r==t.mathOps.length-1&&t.mathOps.push(n),s>0&&(o=t.mathOps[s-1]),o.disconnect(),o.connect(e),e.connect(n),t.mathOps[r]=e,t};p5.Oscillator.prototype.add=function(t){var r=new e(t),n=this.mathOps.length-1,o=this.output;return i(this,r,n,o,e)},p5.Oscillator.prototype.mult=function(t){var e=new r(t),n=this.mathOps.length-1,o=this.output;return i(this,e,n,o,r)},p5.Oscillator.prototype.scale=function(t,e,r,o){var s,a;4===arguments.length?(s=p5.prototype.map(r,t,e,0,1)-.5,a=p5.prototype.map(o,t,e,0,1)-.5):(s=arguments[0],a=arguments[1]);var u=new n(s,a),l=this.mathOps.length-1,c=this.output;return i(this,u,l,c,n)},p5.SinOsc=function(t){p5.Oscillator.call(this,t,"sine")},p5.SinOsc.prototype=Object.create(p5.Oscillator.prototype),p5.TriOsc=function(t){p5.Oscillator.call(this,t,"triangle")},p5.TriOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SawOsc=function(t){p5.Oscillator.call(this,t,"sawtooth")},p5.SawOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SqrOsc=function(t){p5.Oscillator.call(this,t,"square")},p5.SqrOsc.prototype=Object.create(p5.Oscillator.prototype)}(master,Tone_signal_Signal,Tone_signal_Add,Tone_signal_Multiply,Tone_signal_Scale);var Tone_core_Timeline;Tone_core_Timeline=function(t){"use strict";return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error("events must have a time attribute");if(t.time=this.toSeconds(t.time),this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){t=this.toSeconds(t);var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){t=this.toSeconds(t);var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){t=this.toSeconds(t);var e=this._search(t);return e-1>=0?this._timeline[e-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){t=this.toSeconds(t);var e=this._search(t);e>=0?this._timeline=this._timeline.slice(0,e):this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){t=this.toSeconds(t);var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){for(var e=0,r=this._timeline.length,n=r;n>=e&&r>e;){var i=Math.floor(e+(n-e)/2),o=this._timeline[i];if(o.time===t){for(var s=i;s<this._timeline.length;s++){var a=this._timeline[s];a.time===t&&(i=s)}return i}o.time>t?n=i-1:o.time<t&&(e=i+1)}return e-1},t.Timeline.prototype._iterate=function(t,e,r){this._iterating=!0,e=this.defaultArg(e,0),r=this.defaultArg(r,this._timeline.length-1);for(var n=e;r>=n;n++)t(this._timeline[n]);if(this._iterating=!1,this._toRemove.length>0){for(var i=0;i<this._toRemove.length;i++){var o=this._timeline.indexOf(this._toRemove[i]);-1!==o&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){t=this.toSeconds(t);var r=this._search(t);return-1!==r&&this._iterate(e,0,r),this},t.Timeline.prototype.forEachAfter=function(t,e){t=this.toSeconds(t);var r=this._search(t);return this._iterate(e,r+1),this},t.Timeline.prototype.forEachFrom=function(t,e){t=this.toSeconds(t);for(var r=this._search(t);r>=0&&this._timeline[r].time>=t;)r--;return this._iterate(e,r+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){t=this.toSeconds(t);var r=this._search(t);return-1!==r&&this._iterate(function(r){r.time===t&&e(r)},0,r),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}(Tone_core_Tone);var Tone_signal_TimelineSignal;Tone_signal_TimelineSignal=function(t){"use strict";return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._events=new t.Timeline(10),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._initial=e,this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,r){return e=this._fromUnits(e),r=this.toSeconds(r),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:r}),this._param.setValueAtTime(e,r),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,r){return e=this._fromUnits(e),r=this.toSeconds(r),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:r}),this._param.linearRampToValueAtTime(e,r),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,r){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),r=this.toSeconds(r),this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:e,time:r}),this._param.exponentialRampToValueAtTime(e,r),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,r,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),r=this.toSeconds(r),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:r,constant:n}),this._param.setTargetAtTime(e,r,n),this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return this._events.cancel(t),this._param.cancelScheduledValues(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var r=this.getValueAtTime(e),n=this._searchAfter(e);return n&&(this.cancelScheduledValues(e),n.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(r,e):n.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(r,e)),this.setValueAtTime(r,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,r){return this.setRampPoint(e),this.linearRampToValueAtTime(t,r),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,r){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,r),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var r=this._searchAfter(e),n=this._searchBefore(e),i=this._initial;if(null===n)i=this._initial;else if(n.type===t.TimelineSignal.Type.Target){var o,s=this._events.getEventBefore(n.time);o=null===s?this._initial:s.value,i=this._exponentialApproach(n.time,o,n.value,n.constant,e)}else i=null===r?n.value:r.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,r.time,r.value,e):r.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,r.time,r.value,e):n.value;return i},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,r,n,i){return r+(e-r)*Math.exp(-(i-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,r,n,i){return e+(n-e)*((i-t)/(r-t))},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,r,n,i){return e=Math.max(this._minOutput,e),e*Math.pow(n/e,(i-t)/(r-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}(Tone_core_Tone,Tone_signal_Signal);var env;env=function(){"use strict";var t=master,e=Tone_signal_Add,r=Tone_signal_Multiply,n=Tone_signal_Scale,i=Tone_signal_TimelineSignal,o=Tone_core_Tone;o.setContext(t.audiocontext),p5.Env=function(e,r,n,o,s,a){t.audiocontext.currentTime;this.aTime=e||.1,this.aLevel=r||1,this.dTime=n||.5,this.dLevel=o||0,this.rTime=s||0,this.rLevel=a||0,this._rampHighPercentage=.98,this._rampLowPercentage=.02,this.output=t.audiocontext.createGain(),this.control=new i,this._init(),this.control.connect(this.output),this.connection=null,this.mathOps=[this.control],
this.isExponential=!1,this.sourceToClear=null,this.wasTriggered=!1,t.soundArray.push(this)},p5.Env.prototype._init=function(){var e=t.audiocontext.currentTime,r=e;this.control.setTargetAtTime(1e-5,r,.001),this._setRampAD(this.aTime,this.dTime)},p5.Env.prototype.set=function(t,e,r,n,i,o){this.aTime=t,this.aLevel=e,this.dTime=r||0,this.dLevel=n||0,this.rTime=t4||0,this.rLevel=l4||0,this._setRampAD(t,r)},p5.Env.prototype.setADSR=function(t,e,r,n){this.aTime=t,this.dTime=e||0,this.sPercent=r||0,this.dLevel="undefined"!=typeof r?r*(this.aLevel-this.rLevel)+this.rLevel:0,this.rTime=n||0,this._setRampAD(t,e)},p5.Env.prototype.setRange=function(t,e){this.aLevel=t||1,this.rLevel=e||0},p5.Env.prototype._setRampAD=function(t,e){this._rampAttackTime=this.checkExpInput(t),this._rampDecayTime=this.checkExpInput(e);var r=1;r=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=t/this.checkExpInput(r),r=Math.log(1/this._rampLowPercentage),this._rampDecayTC=e/this.checkExpInput(r)},p5.Env.prototype.setRampPercentages=function(t,e){this._rampHighPercentage=this.checkExpInput(t),this._rampLowPercentage=this.checkExpInput(e);var r=1;r=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=this._rampAttackTime/this.checkExpInput(r),r=Math.log(1/this._rampLowPercentage),this._rampDecayTC=this._rampDecayTime/this.checkExpInput(r)},p5.Env.prototype.setInput=function(t){for(var e=0;e<arguments.length;e++)this.connect(arguments[e])},p5.Env.prototype.setExp=function(t){this.isExponential=t},p5.Env.prototype.checkExpInput=function(t){return 0>=t&&(t=1e-8),t},p5.Env.prototype.play=function(e,r,n){var i=(t.audiocontext.currentTime,r||0),n=n||0;e&&this.connection!==e&&this.connect(e),this.triggerAttack(e,i),this.triggerRelease(e,i+this.aTime+this.dTime+n)},p5.Env.prototype.triggerAttack=function(e,r){var n=t.audiocontext.currentTime,i=r||0,o=n+i;this.lastAttack=o,this.wasTriggered=!0,e&&this.connection!==e&&this.connect(e);var s=this.control.getValueAtTime(o);this.control.cancelScheduledValues(o),1==this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(s),o):this.control.linearRampToValueAtTime(s,o),o+=this.aTime,1==this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel),o),s=this.checkExpInput(this.control.getValueAtTime(o)),this.control.cancelScheduledValues(o),this.control.exponentialRampToValueAtTime(s,o)):(this.control.linearRampToValueAtTime(this.aLevel,o),s=this.control.getValueAtTime(o),this.control.cancelScheduledValues(o),this.control.linearRampToValueAtTime(s,o)),o+=this.dTime,1==this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel),o),s=this.checkExpInput(this.control.getValueAtTime(o)),this.control.cancelScheduledValues(o),this.control.exponentialRampToValueAtTime(s,o)):(this.control.linearRampToValueAtTime(this.dLevel,o),s=this.control.getValueAtTime(o),this.control.cancelScheduledValues(o),this.control.linearRampToValueAtTime(s,o))},p5.Env.prototype.triggerRelease=function(e,r){if(this.wasTriggered){var n=t.audiocontext.currentTime,i=r||0,o=n+i;e&&this.connection!==e&&this.connect(e);var s=this.control.getValueAtTime(o);this.control.cancelScheduledValues(o),1==this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(s),o):this.control.linearRampToValueAtTime(s,o),o+=this.rTime,1==this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel),o),s=this.checkExpInput(this.control.getValueAtTime(o)),this.control.cancelScheduledValues(o),this.control.exponentialRampToValueAtTime(s,o)):(this.control.linearRampToValueAtTime(this.rLevel,o),s=this.control.getValueAtTime(o),this.control.cancelScheduledValues(o),this.control.linearRampToValueAtTime(s,o)),this.wasTriggered=!1}},p5.Env.prototype.ramp=function(e,r,n,i){var o=t.audiocontext.currentTime,s=r||0,a=o+s,u=this.checkExpInput(n),l="undefined"!=typeof i?this.checkExpInput(i):void 0;e&&this.connection!==e&&this.connect(e);var c=this.checkExpInput(this.control.getValueAtTime(a));this.control.cancelScheduledValues(a),u>c?(this.control.setTargetAtTime(u,a,this._rampAttackTC),a+=this._rampAttackTime):c>u&&(this.control.setTargetAtTime(u,a,this._rampDecayTC),a+=this._rampDecayTime),void 0!==l&&(l>u?this.control.setTargetAtTime(l,a,this._rampAttackTC):u>l&&this.control.setTargetAtTime(l,a,this._rampDecayTC))},p5.Env.prototype.connect=function(e){this.connection=e,(e instanceof p5.Oscillator||e instanceof p5.SoundFile||e instanceof p5.AudioIn||e instanceof p5.Reverb||e instanceof p5.Noise||e instanceof p5.Filter||e instanceof p5.Delay)&&(e=e.output.gain),e instanceof AudioParam&&e.setValueAtTime(0,t.audiocontext.currentTime),e instanceof p5.Signal&&e.setValue(0),this.output.connect(e)},p5.Env.prototype.disconnect=function(t){this.output.disconnect()},p5.Env.prototype.add=function(t){var r=new e(t),n=this.mathOps.length,i=this.output;return p5.prototype._mathChain(this,r,n,i,e)},p5.Env.prototype.mult=function(t){var e=new r(t),n=this.mathOps.length,i=this.output;return p5.prototype._mathChain(this,e,n,i,r)},p5.Env.prototype.scale=function(t,e,r,i){var o=new n(t,e,r,i),s=this.mathOps.length,a=this.output;return p5.prototype._mathChain(this,o,s,a,n)},p5.Env.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1);t.audiocontext.currentTime;this.disconnect();try{this.control.dispose(),this.control=null}catch(r){}for(var n=1;n<this.mathOps.length;n++)mathOps[n].dispose()}}(master,Tone_signal_Add,Tone_signal_Multiply,Tone_signal_Scale,Tone_signal_TimelineSignal,Tone_core_Tone);var pulse;pulse=function(){"use strict";function t(){for(var t=e.audiocontext,r=t.createBuffer(1,2048,t.sampleRate),n=r.getChannelData(0),i=0;2048>i;i++)n[i]=1;var o=t.createBufferSource();return o.buffer=r,o.loop=!0,o}var e=master;p5.Pulse=function(r,n){p5.Oscillator.call(this,r,"sawtooth"),this.w=n||0,this.osc2=new p5.SawOsc(r),this.dNode=e.audiocontext.createDelay(),this.dcOffset=t(),this.dcGain=e.audiocontext.createGain(),this.dcOffset.connect(this.dcGain),this.dcGain.connect(this.output),this.f=r||440;var i=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=i,this.dcGain.gain.value=1.7*(.5-this.w),this.osc2.disconnect(),this.osc2.panner.disconnect(),this.osc2.amp(-1),this.osc2.output.connect(this.dNode),this.dNode.connect(this.output),this.output.gain.value=1,this.output.connect(this.panner)},p5.Pulse.prototype=Object.create(p5.Oscillator.prototype),p5.Pulse.prototype.width=function(t){if("number"==typeof t){if(1>=t&&t>=0){this.w=t;var e=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=e}this.dcGain.gain.value=1.7*(.5-this.w)}else{t.connect(this.dNode.delayTime);var r=new p5.SignalAdd(-.5);r.setInput(t),r=r.mult(-1),r=r.mult(1.7),r.connect(this.dcGain.gain)}},p5.Pulse.prototype.start=function(r,n){var i=e.audiocontext.currentTime,o=n||0;if(!this.started){var s=r||this.f,a=this.oscillator.type;this.oscillator=e.audiocontext.createOscillator(),this.oscillator.frequency.setValueAtTime(s,i),this.oscillator.type=a,this.oscillator.connect(this.output),this.oscillator.start(o+i),this.osc2.oscillator=e.audiocontext.createOscillator(),this.osc2.oscillator.frequency.setValueAtTime(s,o+i),this.osc2.oscillator.type=a,this.osc2.oscillator.connect(this.osc2.output),this.osc2.start(o+i),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],this.dcOffset=t(),this.dcOffset.connect(this.dcGain),this.dcOffset.start(o+i),void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1])),this.started=!0,this.osc2.started=!0}},p5.Pulse.prototype.stop=function(t){if(this.started){var r=t||0,n=e.audiocontext.currentTime;this.oscillator.stop(r+n),this.osc2.oscillator.stop(r+n),this.dcOffset.stop(r+n),this.started=!1,this.osc2.started=!1}},p5.Pulse.prototype.freq=function(t,r,n){if("number"==typeof t){this.f=t;var i=e.audiocontext.currentTime,r=r||0,n=n||0,o=this.oscillator.frequency.value;this.oscillator.frequency.cancelScheduledValues(i),this.oscillator.frequency.setValueAtTime(o,i+n),this.oscillator.frequency.exponentialRampToValueAtTime(t,n+r+i),this.osc2.oscillator.frequency.cancelScheduledValues(i),this.osc2.oscillator.frequency.setValueAtTime(o,i+n),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(t,n+r+i),this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else t.output&&(t.output.disconnect(),t.output.connect(this.oscillator.frequency),t.output.connect(this.osc2.oscillator.frequency),this.freqMod=t)}}(master,oscillator);var noise;noise=function(){"use strict";var t=master;p5.Noise=function(t){p5.Oscillator.call(this),delete this.f,delete this.freq,delete this.oscillator,this.buffer=e},p5.Noise.prototype=Object.create(p5.Oscillator.prototype);var e=function(){for(var e=2*t.audiocontext.sampleRate,r=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),n=r.getChannelData(0),i=0;e>i;i++)n[i]=2*Math.random()-1;return r.type="white",r}(),r=function(){var e,r,n,i,o,s,a,u=2*t.audiocontext.sampleRate,l=t.audiocontext.createBuffer(1,u,t.audiocontext.sampleRate),c=l.getChannelData(0);e=r=n=i=o=s=a=0;for(var h=0;u>h;h++){var p=2*Math.random()-1;e=.99886*e+.0555179*p,r=.99332*r+.0750759*p,n=.969*n+.153852*p,i=.8665*i+.3104856*p,o=.55*o+.5329522*p,s=-.7616*s-.016898*p,c[h]=e+r+n+i+o+s+a+.5362*p,c[h]*=.11,a=.115926*p}return l.type="pink",l}(),n=function(){for(var e=2*t.audiocontext.sampleRate,r=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),n=r.getChannelData(0),i=0,o=0;e>o;o++){var s=2*Math.random()-1;n[o]=(i+.02*s)/1.02,i=n[o],n[o]*=3.5}return r.type="brown",r}();p5.Noise.prototype.setType=function(i){switch(i){case"white":this.buffer=e;break;case"pink":this.buffer=r;break;case"brown":this.buffer=n;break;default:this.buffer=e}if(this.started){var o=t.audiocontext.currentTime;this.stop(o),this.start(o+.01)}},p5.Noise.prototype.getType=function(){return this.buffer.type},p5.Noise.prototype.start=function(){this.started&&this.stop(),this.noise=t.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output);var e=t.audiocontext.currentTime;this.noise.start(e),this.started=!0},p5.Noise.prototype.stop=function(){var e=t.audiocontext.currentTime;this.noise&&(this.noise.stop(e),this.started=!1)},p5.Noise.prototype.dispose=function(){var e=t.audiocontext.currentTime,r=t.soundArray.indexOf(this);t.soundArray.splice(r,1),this.noise&&(this.noise.disconnect(),this.stop(e)),this.output&&this.output.disconnect(),this.panner&&this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise=null}}(master);var audioin;audioin=function(){"use strict";var t=master;p5.AudioIn=function(e){this.input=t.audiocontext.createGain(),this.output=t.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=0,this.enabled=!1,this.amplitude=new p5.Amplitude,this.output.connect(this.amplitude.input),"undefined"==typeof window.MediaStreamTrack?e?e():window.alert("This browser does not support AudioIn"):"function"==typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(this._gotSources),t.soundArray.push(this)},p5.AudioIn.prototype.start=function(e,r){var n=this;if(t.inputSources[n.currentSource]){var i=t.inputSources[n.currentSource].id,o={audio:{optional:[{sourceId:i}]}};window.navigator.getUserMedia(o,this._onStream=function(r){n.stream=r,n.enabled=!0,n.mediaStream=t.audiocontext.createMediaStreamSource(r),n.mediaStream.connect(n.output),e&&e(),n.amplitude.setInput(n.output)},this._onStreamError=function(t){r?r(t):console.error(t)})}else window.navigator.getUserMedia({audio:!0},this._onStream=function(r){n.stream=r,n.enabled=!0,n.mediaStream=t.audiocontext.createMediaStreamSource(r),n.mediaStream.connect(n.output),n.amplitude.setInput(n.output),e&&e()},this._onStreamError=function(t){r?r(t):console.error(t)})},p5.AudioIn.prototype.stop=function(){this.stream&&this.stream.getTracks()[0].stop()},p5.AudioIn.prototype.connect=function(e){e?e.hasOwnProperty("input")?this.output.connect(e.input):e.hasOwnProperty("analyser")?this.output.connect(e.analyser):this.output.connect(e):this.output.connect(t.input)},p5.AudioIn.prototype.disconnect=function(){this.output.disconnect(),this.output.connect(this.amplitude.input)},p5.AudioIn.prototype.getLevel=function(t){return t&&(this.amplitude.smoothing=t),this.amplitude.getLevel()},p5.AudioIn.prototype._gotSources=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("audio"===r.kind)return r}},p5.AudioIn.prototype.amp=function(e,r){if(r){var n=r||0,i=this.output.gain.value;this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(i,t.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(e,n+t.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(t.audiocontext.currentTime),this.output.gain.setValueAtTime(e,t.audiocontext.currentTime)},p5.AudioIn.prototype.listSources=function(){return console.log("listSources is deprecated - please use AudioIn.getSources"),console.log("input sources: "),t.inputSources.length>0?t.inputSources:"This browser does not support MediaStreamTrack.getSources()"},p5.AudioIn.prototype.getSources=function(e){"function"==typeof window.MediaStreamTrack.getSources?window.MediaStreamTrack.getSources(function(r){for(var n=0,i=r.length;i>n;n++){var o=r[n];"audio"===o.kind&&t.inputSources.push(o)}e(t.inputSources)}):console.log("This browser does not support MediaStreamTrack.getSources()")},p5.AudioIn.prototype.setSource=function(e){var r=this;t.inputSources.length>0&&e<t.inputSources.length?(r.currentSource=e,console.log("set source to "+t.inputSources[r.currentSource].id)):console.log("unable to set input source")},p5.AudioIn.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.stop(),this.output&&this.output.disconnect(),this.amplitude&&this.amplitude.disconnect(),this.amplitude=null,this.output=null}}(master,errorHandler);var filter;filter=function(){"use strict";var t=master;p5.Filter=function(e){this.ac=t.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.biquad=this.ac.createBiquadFilter(),this.input.connect(this.biquad),this.biquad.connect(this.output),this.connect(),e&&this.setType(e),t.soundArray.push(this)},p5.Filter.prototype.process=function(t,e,r){t.connect(this.input),this.set(e,r)},p5.Filter.prototype.set=function(t,e,r){t&&this.freq(t,r),e&&this.res(e,r)},p5.Filter.prototype.freq=function(t,e){var r=this,n=e||0;return 0>=t&&(t=1),"number"==typeof t?(r.biquad.frequency.value=t,r.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+n),r.biquad.frequency.exponentialRampToValueAtTime(t,this.ac.currentTime+.02+n)):t&&t.connect(this.biquad.frequency),r.biquad.frequency.value},p5.Filter.prototype.res=function(t,e){var r=this,n=e||0;return"number"==typeof t?(r.biquad.Q.value=t,r.biquad.Q.cancelScheduledValues(r.ac.currentTime+.01+n),r.biquad.Q.linearRampToValueAtTime(t,r.ac.currentTime+.02+n)):t&&freq.connect(this.biquad.Q),r.biquad.Q.value},p5.Filter.prototype.setType=function(t){this.biquad.type=t},p5.Filter.prototype.amp=function(e,r,n){var r=r||0,n=n||0,i=t.audiocontext.currentTime,o=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.linearRampToValueAtTime(o,i+n+.001),this.output.gain.linearRampToValueAtTime(e,i+n+r+.001)},p5.Filter.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e)},p5.Filter.prototype.disconnect=function(){this.output.disconnect()},p5.Filter.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.input.disconnect(),this.input=void 0,this.output.disconnect(),this.output=void 0,this.biquad.disconnect(),this.biquad=void 0},p5.LowPass=function(){p5.Filter.call(this,"lowpass")},p5.LowPass.prototype=Object.create(p5.Filter.prototype),p5.HighPass=function(){p5.Filter.call(this,"highpass")},p5.HighPass.prototype=Object.create(p5.Filter.prototype),p5.BandPass=function(){p5.Filter.call(this,"bandpass")},p5.BandPass.prototype=Object.create(p5.Filter.prototype)}(master);var delay;delay=function(){"use strict";var t=master;p5.Delay=function(){this.ac=t.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this._split=this.ac.createChannelSplitter(2),this._merge=this.ac.createChannelMerger(2),this._leftGain=this.ac.createGain(),this._rightGain=this.ac.createGain(),this.leftDelay=this.ac.createDelay(),this.rightDelay=this.ac.createDelay(),this._leftFilter=new p5.Filter,this._rightFilter=new p5.Filter,this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this.input.connect(this._split),this.leftDelay.connect(this._leftGain),this.rightDelay.connect(this._rightGain),this._leftGain.connect(this._leftFilter.input),this._rightGain.connect(this._rightFilter.input),this._merge.connect(this.output),this.output.connect(p5.soundOut.input),this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this.setType(0),this._maxDelay=this.leftDelay.delayTime.maxValue,t.soundArray.push(this)},p5.Delay.prototype.process=function(t,e,r,n){var i=r||0,o=e||0;if(i>=1)throw new Error("Feedback value will force a positive feedback loop.");if(o>=this._maxDelay)throw new Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");t.connect(this.input),this.leftDelay.delayTime.setValueAtTime(o,this.ac.currentTime),this.rightDelay.delayTime.setValueAtTime(o,this.ac.currentTime),this._leftGain.gain.setValueAtTime(i,this.ac.currentTime),this._rightGain.gain.setValueAtTime(i,this.ac.currentTime),n&&(this._leftFilter.freq(n),this._rightFilter.freq(n))},p5.Delay.prototype.delayTime=function(t){"number"!=typeof t?(t.connect(this.leftDelay.delayTime),t.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime))},p5.Delay.prototype.feedback=function(t){if("number"!=typeof t)t.connect(this._leftGain.gain),t.connect(this._rightGain.gain);else{if(t>=1)throw new Error("Feedback value will force a positive feedback loop.");this._leftGain.gain.exponentialRampToValueAtTime(t,this.ac.currentTime),this._rightGain.gain.exponentialRampToValueAtTime(t,this.ac.currentTime)}},p5.Delay.prototype.filter=function(t,e){this._leftFilter.set(t,e),this._rightFilter.set(t,e)},p5.Delay.prototype.setType=function(t){switch(1===t&&(t="pingPong"),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._split.connect(this.leftDelay,0),this._split.connect(this.rightDelay,1),t){case"pingPong":this._rightFilter.setType(this._leftFilter.biquad.type),this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.rightDelay),this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._leftFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._leftFilter.output.connect(this.rightDelay)}},p5.Delay.prototype.amp=function(e,r,n){var r=r||0,n=n||0,i=t.audiocontext.currentTime,o=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.linearRampToValueAtTime(o,i+n+.001),this.output.gain.linearRampToValueAtTime(e,i+n+r+.001)},p5.Delay.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e)},p5.Delay.prototype.disconnect=function(){this.output.disconnect()},p5.Delay.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.input.disconnect(),this.output.disconnect(),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._merge.disconnect(),this._leftGain.disconnect(),this._rightGain.disconnect(),this.leftDelay.disconnect(),this.rightDelay.disconnect(),this.input=void 0,this.output=void 0,this._split=void 0,this._leftFilter=void 0,this._rightFilter=void 0,this._merge=void 0,this._leftGain=void 0,this._rightGain=void 0,this.leftDelay=void 0,this.rightDelay=void 0}}(master,filter);var reverb;reverb=function(){"use strict";var t=master,e=errorHandler;p5.Reverb=function(){this.ac=t.audiocontext,this.convolverNode=this.ac.createConvolver(),this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.convolverNode),this.convolverNode.connect(this.output),this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse(),this.connect(),t.soundArray.push(this)},p5.Reverb.prototype.process=function(t,e,r,n){t.connect(this.input);var i=!1;e&&(this._seconds=e,i=!0),r&&(this._decay=r),n&&(this._reverse=n),i&&this._buildImpulse()},p5.Reverb.prototype.set=function(t,e,r){var n=!1;t&&(this._seconds=t,n=!0),e&&(this._decay=e),r&&(this._reverse=r),n&&this._buildImpulse()},p5.Reverb.prototype.amp=function(e,r,n){var r=r||0,n=n||0,i=t.audiocontext.currentTime,o=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.linearRampToValueAtTime(o,i+n+.001),this.output.gain.linearRampToValueAtTime(e,i+n+r+.001)},p5.Reverb.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e.input?e.input:e)},p5.Reverb.prototype.disconnect=function(){this.output.disconnect()},p5.Reverb.prototype._buildImpulse=function(){var t,e,r=this.ac.sampleRate,n=r*this._seconds,i=this._decay,o=this.ac.createBuffer(2,n,r),s=o.getChannelData(0),a=o.getChannelData(1);for(e=0;n>e;e++)t=this.reverse?n-e:e,s[e]=(2*Math.random()-1)*Math.pow(1-t/n,i),a[e]=(2*Math.random()-1)*Math.pow(1-t/n,i);this.convolverNode.buffer=o},p5.Reverb.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.convolverNode&&(this.convolverNode.buffer=null,this.convolverNode=null),"undefined"!=typeof this.output&&(this.output.disconnect(),this.output=null),"undefined"!=typeof this.panner&&(this.panner.disconnect(),this.panner=null)},p5.Convolver=function(e,r,n){this.ac=t.audiocontext,this.convolverNode=this.ac.createConvolver(),this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.convolverNode),this.convolverNode.connect(this.output),e?(this.impulses=[],this._loadBuffer(e,r,n)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse()),this.connect(),t.soundArray.push(this)},p5.Convolver.prototype=Object.create(p5.Reverb.prototype),p5.prototype.registerPreloadMethod("createConvolver",p5.prototype),p5.prototype.createConvolver=function(t,e,r){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var n=new p5.Convolver(t,e,r);return n.impulses=[],n},p5.Convolver.prototype._loadBuffer=function(t,r,n){var t=p5.prototype._checkFileFormats(t),i=this,o=(new Error).stack,s=p5.prototype.getAudioContext(),a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){if(200==a.status)s.decodeAudioData(a.response,function(e){var n={},o=t.split("/");n.name=o[o.length-1],n.audioBuffer=e,i.impulses.push(n),i.convolverNode.buffer=n.audioBuffer,r&&r(n)},function(t){var r=new e("decodeAudioData",o,i.url),s="AudioContext error at decodeAudioData for "+i.url;n?(r.msg=s,n(r)):console.error(s+"\n The error stack trace includes: \n"+r.stack)});else{var u=new e("loadConvolver",o,i.url),l="Unable to load "+i.url+". The request status was: "+a.status+" ("+a.statusText+")";n?(u.message=l,n(u)):console.error(l+"\n The error stack trace includes: \n"+u.stack)}},a.onerror=function(t){var r=new e("loadConvolver",o,i.url),s="There was no response from the server at "+i.url+". Check the url and internet connectivity.";n?(r.message=s,n(r)):console.error(s+"\n The error stack trace includes: \n"+r.stack)},a.send()},p5.Convolver.prototype.set=null,p5.Convolver.prototype.process=function(t){t.connect(this.input)},p5.Convolver.prototype.impulses=[],p5.Convolver.prototype.addImpulse=function(t,e,r){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this._loadBuffer(t,e,r)},p5.Convolver.prototype.resetImpulse=function(t,e,r){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this.impulses=[],this._loadBuffer(t,e,r)},p5.Convolver.prototype.toggleImpulse=function(t){if("number"==typeof t&&t<this.impulses.length&&(this.convolverNode.buffer=this.impulses[t].audioBuffer),"string"==typeof t)for(var e=0;e<this.impulses.length;e++)if(this.impulses[e].name===t){this.convolverNode.buffer=this.impulses[e].audioBuffer;break}},p5.Convolver.prototype.dispose=function(){for(var t in this.impulses)this.impulses[t]=null;this.convolverNode.disconnect(),this.concolverNode=null,"undefined"!=typeof this.output&&(this.output.disconnect(),this.output=null),"undefined"!=typeof this.panner&&(this.panner.disconnect(),this.panner=null)}}(master,errorHandler,sndcore);var Tone_core_TimelineState;Tone_core_TimelineState=function(t){"use strict";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:this.toSeconds(e)})},t.TimelineState}(Tone_core_Tone,Tone_core_Timeline);var Tone_core_Clock;Tone_core_Clock=function(t){"use strict";return t.Clock=function(){var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._lookAhead="auto",this._computedLookAhead=1/60,this._threshold=.5,this._nextTick=-1,this._lastUpdate=0,this._loopID=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this._readOnly("frequency"),this._loop()},t.extend(t.Clock),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){"auto"===t?this._lookAhead="auto":this._lookAhead=this.toSeconds(t)}}),t.Clock.prototype.start=function(e,r){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:r}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Stopped&&this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(e){if(this._loopID=requestAnimationFrame(this._boundLoop),"auto"===this._lookAhead){if(!this.isUndef(e)){var r=(e-this._lastUpdate)/1e3;this._lastUpdate=e,r<this._threshold&&(this._computedLookAhead=(9*this._computedLookAhead+r)/10)}}else this._computedLookAhead=this._lookAhead;var n=this.now(),i=2*this._computedLookAhead,o=this._state.getEvent(n+i),s=t.State.Stopped;if(o&&(s=o.state,-1===this._nextTick&&s===t.State.Started&&(this._nextTick=o.time,this.isUndef(o.offset)||(this.ticks=o.offset))),s===t.State.Started)for(;n+i>this._nextTick;){n>this._nextTick+this._threshold&&(this._nextTick=n);var a=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++}else s===t.State.Stopped&&(this._nextTick=-1,this.ticks=0)},t.Clock.prototype.getStateAtTime=function(t){return this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){cancelAnimationFrame(this._loopID),t.TimelineState.prototype.dispose.call(this),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=t.noOp,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}(Tone_core_Tone,Tone_signal_TimelineSignal);var metro;metro=function(){"use strict";var t=master,e=Tone_core_Clock;t.audiocontext;p5.Metro=function(){this.clock=new e({callback:this.ontick.bind(this)}),this.syncedParts=[],this.bpm=120,this._init(),this.tickCallback=function(){}};var r=0,n=0;p5.Metro.prototype.ontick=function(e){var i=e-r,o=e-t.audiocontext.currentTime;if(!(-.02>=i-n)){r=e;for(var s in this.syncedParts){var a=this.syncedParts[s];if(!a.isPlaying)return;a.incrementStep(o);for(var u in a.phrases){var l=a.phrases[u],c=l.sequence,h=this.metroTicks%c.length;0!==c[h]&&(this.metroTicks<c.length||!l.looping)&&l.callback(o,c[h])}}this.metroTicks+=1,this.tickCallback(o)}},p5.Metro.prototype.setBPM=function(e,r){var i=60/(e*this.tatums),o=t.audiocontext.currentTime;n=i;var r=r||0;this.clock.frequency.setValueAtTime(this.clock.frequency.value,o),this.clock.frequency.linearRampToValueAtTime(e,o+r),this.bpm=e},p5.Metro.prototype.getBPM=function(t){return this.clock.getRate()/this.tatums*60},p5.Metro.prototype._init=function(){this.metroTicks=0},p5.Metro.prototype.resetSync=function(t){this.syncedParts=[t]},p5.Metro.prototype.pushSync=function(t){this.syncedParts.push(t)},p5.Metro.prototype.start=function(e){var r=e||0,n=t.audiocontext.currentTime;this.clock.start(n+r),this.setBPM(this.bpm)},p5.Metro.prototype.stop=function(e){var r=e||0,n=t.audiocontext.currentTime;this.clock._oscillator&&this.clock.stop(n+r)},p5.Metro.prototype.beatLength=function(t){this.tatums=1/t/4}}(master,Tone_core_Clock);var looper;looper=function(){"use strict";function t(t){t.currentPart++,t.currentPart>=t.parts.length?(t.scoreStep=0,t.onended()):(t.scoreStep=0,t.parts[t.currentPart-1].stop(),t.parts[t.currentPart].start())}var e=master,r=120;p5.prototype.setBPM=function(t,n){r=t;for(var i in e.parts)e.parts[i].setBPM(r,n)},p5.Phrase=function(t,e,r){this.phraseStep=0,this.name=t,this.callback=e,this.sequence=r},p5.Part=function(t,n){this.length=t||0,this.partStep=0,this.phrases=[],this.isPlaying=!1,this.noLoop(),this.tatums=n||.0625,this.metro=new p5.Metro,this.metro._init(),this.metro.beatLength(this.tatums),this.metro.setBPM(r),e.parts.push(this),this.callback=function(){}},p5.Part.prototype.setBPM=function(t,e){this.metro.setBPM(t,e)},p5.Part.prototype.getBPM=function(){return this.metro.getBPM()},p5.Part.prototype.start=function(t){if(!this.isPlaying){this.isPlaying=!0,this.metro.resetSync(this);var e=t||0;this.metro.start(e)}},p5.Part.prototype.loop=function(t){this.looping=!0,this.onended=function(){this.partStep=0};var e=t||0;this.start(e)},p5.Part.prototype.noLoop=function(){this.looping=!1,this.onended=function(){this.stop()}},p5.Part.prototype.stop=function(t){this.partStep=0,this.pause(t)},p5.Part.prototype.pause=function(t){this.isPlaying=!1;var e=t||0;this.metro.stop(e)},p5.Part.prototype.addPhrase=function(t,e,r){var n;if(3===arguments.length)n=new p5.Phrase(t,e,r);else{if(!(arguments[0]instanceof p5.Phrase))throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";n=arguments[0]}this.phrases.push(n),n.sequence.length>this.length&&(this.length=n.sequence.length)},p5.Part.prototype.removePhrase=function(t){for(var e in this.phrases)this.phrases[e].name===t&&this.phrases.split(e,1);
},p5.Part.prototype.getPhrase=function(t){for(var e in this.phrases)if(this.phrases[e].name===t)return this.phrases[e]},p5.Part.prototype.replaceSequence=function(t,e){for(var r in this.phrases)this.phrases[r].name===t&&(this.phrases[r].sequence=e)},p5.Part.prototype.incrementStep=function(t){this.partStep<this.length-1?(this.callback(t),this.partStep+=1):this.looping||this.partStep!=this.length-1||(console.log("done"),this.onended())},p5.Part.prototype.onStep=function(t){this.callback=t},p5.Score=function(){this.parts=[],this.currentPart=0;var e=this;for(var r in arguments)this.parts[r]=arguments[r],this.parts[r].nextPart=this.parts[r+1],this.parts[r].onended=function(){e.resetPart(r),t(e)};this.looping=!1},p5.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop(),this.resetParts()},this.currentPart=0},p5.Score.prototype.start=function(){this.parts[this.currentPart].start(),this.scoreStep=0},p5.Score.prototype.stop=function(){this.parts[this.currentPart].stop(),this.currentPart=0,this.scoreStep=0},p5.Score.prototype.pause=function(){this.parts[this.currentPart].stop()},p5.Score.prototype.loop=function(){this.looping=!0,this.start()},p5.Score.prototype.noLoop=function(){this.looping=!1},p5.Score.prototype.resetParts=function(){for(var t in this.parts)this.resetPart(t)},p5.Score.prototype.resetPart=function(t){this.parts[t].stop(),this.parts[t].partStep=0;for(var e in this.parts[t].phrases)this.parts[t].phrases[e].phraseStep=0},p5.Score.prototype.setBPM=function(t,e){for(var r in this.parts)this.parts[r].setBPM(t,e)}}(master);var soundRecorder;soundRecorder=function(){"use strict";function t(t,e){for(var r=t.length+e.length,n=new Float32Array(r),i=0,o=0;r>o;)n[o++]=t[i],n[o++]=e[i],i++;return n}function e(t,e,r){for(var n=r.length,i=0;n>i;i++)t.setUint8(e+i,r.charCodeAt(i))}var r=master,n=r.audiocontext;p5.SoundRecorder=function(){this.input=n.createGain(),this.output=n.createGain(),this.recording=!1,this.bufferSize=1024,this._channels=2,this._clear(),this._jsNode=n.createScriptProcessor(this.bufferSize,this._channels,2),this._jsNode.onaudioprocess=this._audioprocess.bind(this),this._callback=function(){},this._jsNode.connect(p5.soundOut._silentNode),this.setInput(),r.soundArray.push(this)},p5.SoundRecorder.prototype.setInput=function(t){this.input.disconnect(),this.input=null,this.input=n.createGain(),this.input.connect(this._jsNode),this.input.connect(this.output),t?t.connect(this.input):p5.soundOut.output.connect(this.input)},p5.SoundRecorder.prototype.record=function(t,e,r){this.recording=!0,e&&(this.sampleLimit=Math.round(e*n.sampleRate)),t&&r?this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer),r()}:t&&(this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer)})},p5.SoundRecorder.prototype.stop=function(){this.recording=!1,this._callback(),this._clear()},p5.SoundRecorder.prototype._clear=function(){this._leftBuffers=[],this._rightBuffers=[],this.recordedSamples=0,this.sampleLimit=null},p5.SoundRecorder.prototype._audioprocess=function(t){if(this.recording!==!1&&this.recording===!0)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();else{var e=t.inputBuffer.getChannelData(0),r=t.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(e)),this._rightBuffers.push(new Float32Array(r)),this.recordedSamples+=this.bufferSize}},p5.SoundRecorder.prototype._getBuffer=function(){var t=[];return t.push(this._mergeBuffers(this._leftBuffers)),t.push(this._mergeBuffers(this._rightBuffers)),t},p5.SoundRecorder.prototype._mergeBuffers=function(t){for(var e=new Float32Array(this.recordedSamples),r=0,n=t.length,i=0;n>i;i++){var o=t[i];e.set(o,r),r+=o.length}return e},p5.SoundRecorder.prototype.dispose=function(){this._clear();var t=r.soundArray.indexOf(this);r.soundArray.splice(t,1),this._callback=function(){},this.input&&this.input.disconnect(),this.input=null,this._jsNode=null},p5.prototype.saveSound=function(r,n){var i,o;i=r.buffer.getChannelData(0),o=r.buffer.numberOfChannels>1?r.buffer.getChannelData(1):i;var s=t(i,o),a=new ArrayBuffer(44+2*s.length),u=new DataView(a);e(u,0,"RIFF"),u.setUint32(4,44+2*s.length,!0),e(u,8,"WAVE"),e(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,2,!0),u.setUint32(24,44100,!0),u.setUint32(28,176400,!0),u.setUint16(32,4,!0),u.setUint16(34,16,!0),e(u,36,"data"),u.setUint32(40,2*s.length,!0);for(var l=s.length,c=44,h=1,p=0;l>p;p++)u.setInt16(c,s[p]*(32767*h),!0),c+=2;p5.prototype.writeFile([u],n,"wav")}}(sndcore,master);var peakdetect;peakdetect=function(){"use strict";p5.PeakDetect=function(t,e,r,n){this.framesPerPeak=n||20,this.framesSinceLastPeak=0,this.decayRate=.95,this.threshold=r||.35,this.cutoff=0,this.cutoffMult=1.5,this.energy=0,this.penergy=0,this.currentValue=0,this.isDetected=!1,this.f1=t||40,this.f2=e||2e4,this._onPeak=function(){}},p5.PeakDetect.prototype.update=function(t){var e=this.energy=t.getEnergy(this.f1,this.f2)/255;e>this.cutoff&&e>this.threshold&&e-this.penergy>0?(this._onPeak(),this.isDetected=!0,this.cutoff=e*this.cutoffMult,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold))),this.currentValue=e,this.penergy=e},p5.PeakDetect.prototype.onPeak=function(t,e){var r=this;r._onPeak=function(){t(r.energy,e)}}}(master);var gain;gain=function(){"use strict";var t=master;p5.Gain=function(){this.ac=t.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.output),t.soundArray.push(this)},p5.Gain.prototype.setInput=function(t){t.connect(this.input)},p5.Gain.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e.input?e.input:e)},p5.Gain.prototype.disconnect=function(){this.output.disconnect()},p5.Gain.prototype.amp=function(e,r,n){var r=r||0,n=n||0,i=t.audiocontext.currentTime,o=this.output.gain.value;this.output.gain.cancelScheduledValues(i),this.output.gain.linearRampToValueAtTime(o,i+n),this.output.gain.linearRampToValueAtTime(e,i+n+r)},p5.Gain.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.output.disconnect(),this.input.disconnect(),this.output=void 0,this.input=void 0}}(master,sndcore);var src_app;src_app=function(){"use strict";var t=sndcore;return t}(sndcore,master,helpers,errorHandler,panner,soundfile,amplitude,fft,signal,oscillator,env,pulse,noise,audioin,filter,delay,reverb,metro,looper,soundRecorder,peakdetect,gain)})},{"./p5":26}],28:[function(require,module,exports){(function(global){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p5=t()}}(function(){var define,module,exports;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){},{}],2:[function(t,e,r){"use strict";r.argument=function(t,e){if(!t)throw new Error(e)},r.assert=r.argument},{}],3:[function(t,e,r){"use strict";function n(t,e,r,n,i){t.beginPath(),t.moveTo(e,r),t.lineTo(n,i),t.stroke()}r.line=n},{}],4:[function(t,e,r){"use strict";function n(t){this.font=t}function i(t){this.cmap=t}function o(t,e){this.encoding=t,this.charset=e}function s(t){var e;switch(t.version){case 1:this.names=r.standardNames.slice();break;case 2:for(this.names=new Array(t.numberOfGlyphs),e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<r.standardNames.length?this.names[e]=r.standardNames[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-r.standardNames.length];break;case 2.5:for(this.names=new Array(t.numberOfGlyphs),e=0;e<t.numberOfGlyphs;e++)this.names[e]=r.standardNames[e+t.glyphNameIndex[e]];break;case 3:this.names=[]}}function a(t){for(var e,r=t.tables.cmap.glyphIndexMap,n=Object.keys(r),i=0;i<n.length;i+=1){var o=n[i],s=r[o];e=t.glyphs.get(s),e.addUnicode(parseInt(o))}for(i=0;i<t.glyphs.length;i+=1)e=t.glyphs.get(i),t.cffEncoding?e.name=t.cffEncoding.charset[i]:e.name=t.glyphNames.glyphIndexToName(i)}var u=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],h=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];n.prototype.charToGlyphIndex=function(t){var e=t.charCodeAt(0),r=this.font.glyphs;if(!r)return null;for(var n=0;n<r.length;n+=1)for(var i=r.get(n),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===e)return n},i.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.charCodeAt(0)]||0},o.prototype.charToGlyphIndex=function(t){var e=t.charCodeAt(0),r=this.encoding[e];return this.charset.indexOf(r)},s.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)},s.prototype.glyphIndexToName=function(t){return this.names[t]},r.cffStandardStrings=u,r.cffStandardEncoding=l,r.cffExpertEncoding=c,r.standardNames=h,r.DefaultEncoding=n,r.CmapEncoding=i,r.CffEncoding=o,r.GlyphNames=s,r.addGlyphNames=a},{}],5:[function(t,e,r){"use strict";function n(t){t=t||{},this.familyName=t.familyName||" ",this.styleName=t.styleName||" ",this.designer=t.designer||" ",this.designerURL=t.designerURL||" ",this.manufacturer=t.manufacturer||" ",this.manufacturerURL=t.manufacturerURL||" ",this.license=t.license||" ",this.licenseURL=t.licenseURL||" ",this.version=t.version||"Version 0.1",this.description=t.description||" ",this.copyright=t.copyright||" ",this.trademark=t.trademark||" ",this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.supported=!0,this.glyphs=new a.GlyphSet(this,t.glyphs||[]),this.encoding=new s.DefaultEncoding(this),this.tables={}}var i=t("./path"),o=t("./tables/sfnt"),s=t("./encoding"),a=t("./glyphset");n.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},n.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},n.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r},n.prototype.stringToGlyphs=function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t[r];e.push(this.charToGlyph(n))}return e},n.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},n.prototype.nameToGlyph=function(t){var e=this.nametoGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r},n.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},n.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var r=this.getGposKerningValue;return r?r(t,e):this.kerningPairs[t+","+e]||0},n.prototype.forEachGlyph=function(t,e,r,n,i,o){if(this.supported){e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:72,i=i||{};for(var s=void 0===i.kerning?!0:i.kerning,a=1/this.unitsPerEm*n,u=this.stringToGlyphs(t),l=0;l<u.length;l+=1){var c=u[l];if(o(c,e,r,n,i),c.advanceWidth&&(e+=c.advanceWidth*a),s&&l<u.length-1){var h=this.getKerningValue(c,u[l+1]);e+=h*a}}}},n.prototype.getPath=function(t,e,r,n,o){var s=new i.Path;return this.forEachGlyph(t,e,r,n,o,function(t,e,r,n){var i=t.getPath(e,r,n);s.extend(i)}),s},n.prototype.draw=function(t,e,r,n,i,o){this.getPath(e,r,n,i,o).draw(t)},n.prototype.drawPoints=function(t,e,r,n,i,o){this.forEachGlyph(e,r,n,i,o,function(e,r,n,i){e.drawPoints(t,r,n,i)})},n.prototype.drawMetrics=function(t,e,r,n,i,o){this.forEachGlyph(e,r,n,i,o,function(e,r,n,i){e.drawMetrics(t,r,n,i)})},n.prototype.validate=function(){function t(t,e){t||r.push(e)}function e(e){t(n[e]&&n[e].trim().length>0,"No "+e+" specified.")}var r=[],n=this;e("familyName"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),t(this.unitsPerEm>0,"No unitsPerEm specified.")},n.prototype.toTables=function(){return o.fontToTable(this)},n.prototype.toBuffer=function(){for(var t=this.toTables(),e=t.encode(),r=new ArrayBuffer(e.length),n=new Uint8Array(r),i=0;i<e.length;i++)n[i]=e[i];return r},n.prototype.download=function(){var t=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",e=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,e.byteLength,function(r){r.root.getFile(t,{create:!0},function(t){t.createWriter(function(r){var n=new DataView(e),i=new Blob([n],{type:"font/opentype"});r.write(i),r.addEventListener("writeend",function(){location.href=t.toURL()},!1)})})},function(t){throw t})},r.Font=n},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":25}],6:[function(t,e,r){"use strict";function n(t,e){var r=e||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(t){r=t}}}function i(t){this.bindConstructorValues(t)}var o=t("./check"),s=t("./draw"),a=t("./path");i.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],t.xMin&&(this.xMin=t.xMin),t.yMin&&(this.yMin=t.yMin),t.xMax&&(this.xMax=t.xMax),t.yMax&&(this.yMax=t.yMax),t.advanceWidth&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",n(this,t.path))},i.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},i.prototype.getPath=function(t,e,r){t=void 0!==t?t:0,e=void 0!==e?e:0,r=void 0!==r?r:72;for(var n=1/this.path.unitsPerEm*r,i=new a.Path,o=this.path.commands,s=0;s<o.length;s+=1){var u=o[s];"M"===u.type?i.moveTo(t+u.x*n,e+-u.y*n):"L"===u.type?i.lineTo(t+u.x*n,e+-u.y*n):"Q"===u.type?i.quadraticCurveTo(t+u.x1*n,e+-u.y1*n,t+u.x*n,e+-u.y*n):"C"===u.type?i.curveTo(t+u.x1*n,e+-u.y1*n,t+u.x2*n,e+-u.y2*n,t+u.x*n,e+-u.y*n):"Z"===u.type&&i.closePath()}return i},i.prototype.getContours=function(){if(void 0===this.points)return[];for(var t=[],e=[],r=0;r<this.points.length;r+=1){var n=this.points[r];e.push(n),n.lastPointOfContour&&(t.push(e),e=[])}return o.argument(0===e.length,"There are still points left in the current contour."),t},i.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],r=[],n=0;n<t.length;n+=1){var i=t[n];"Z"!==i.type&&(e.push(i.x),r.push(i.y)),"Q"!==i.type&&"C"!==i.type||(e.push(i.x1),r.push(i.y1)),"C"===i.type&&(e.push(i.x2),r.push(i.y2))}var o={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,r),leftSideBearing:0};return o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},i.prototype.draw=function(t,e,r,n){this.getPath(e,r,n).draw(t)},i.prototype.drawPoints=function(t,e,r,n){function i(e,r,n,i){var o=2*Math.PI;t.beginPath();for(var s=0;s<e.length;s+=1)t.moveTo(r+e[s].x*i,n+e[s].y*i),t.arc(r+e[s].x*i,n+e[s].y*i,2,0,o,!1);t.closePath(),t.fill()}e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var o=1/this.path.unitsPerEm*n,s=[],a=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&s.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}t.fillStyle="blue",i(s,e,r,o),t.fillStyle="red",i(a,e,r,o)},i.prototype.drawMetrics=function(t,e,r,n){var i;e=void 0!==e?e:0,r=void 0!==r?r:0,n=void 0!==n?n:24,i=1/this.path.unitsPerEm*n,t.lineWidth=1,t.strokeStyle="black",s.line(t,e,-1e4,e,1e4),s.line(t,-1e4,r,1e4,r);var o=this.xMin||0,a=this.yMin||0,u=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;t.strokeStyle="blue",s.line(t,e+o*i,-1e4,e+o*i,1e4),s.line(t,e+u*i,-1e4,e+u*i,1e4),s.line(t,-1e4,r+-a*i,1e4,r+-a*i),s.line(t,-1e4,r+-l*i,1e4,r+-l*i),t.strokeStyle="green",s.line(t,e+c*i,-1e4,e+c*i,1e4)},r.Glyph=i},{"./check":2,"./draw":3,"./path":10}],7:[function(t,e,r){"use strict";function n(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var r=0;r<e.length;r++)this.glyphs[r]=e[r];this.length=e&&e.length||0}function i(t,e){return new a.Glyph({index:e,font:t})}function o(t,e,r,n,i,o){return function(){var s=new a.Glyph({index:e,font:t});return s.path=function(){r(s,n,i);var e=o(t.glyphs,s);return e.unitsPerEm=t.unitsPerEm,e},s}}function s(t,e,r,n){return function(){var i=new a.Glyph({index:e,font:t});return i.path=function(){var e=r(t,i,n);return e.unitsPerEm=t.unitsPerEm,e},i}}var a=t("./glyph");n.prototype.get=function(t){return"function"==typeof this.glyphs[t]&&(this.glyphs[t]=this.glyphs[t]()),this.glyphs[t]},n.prototype.push=function(t,e){this.glyphs[t]=e,this.length++},r.GlyphSet=n,r.glyphLoader=i,r.ttfGlyphLoader=o,r.cffGlyphLoader=s},{"./glyph":6}],8:[function(t,e,r){"use strict";function n(t){for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n<t.length;n+=1)r[n]=t[n];return e}function i(e,r){var i=t("fs");i.readFile(e,function(t,e){return t?r(t.message):void r(null,n(e))})}function o(t,e){var r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?e("Font could not be loaded: "+r.statusText):e(null,r.response)},r.send()}function s(t){var e,r,n,i,o,s,a,c=new l.Font,p=new DataView(t,0),A=h.getFixed(p,0);if(1===A)c.outlinesFormat="truetype";else{if(A=h.getTag(p,0),"OTTO"!==A)throw new Error("Unsupported OpenType version "+A);c.outlinesFormat="cff"}for(var C=h.getUShort(p,4),M=12,R=0;C>R;R+=1){var P=h.getTag(p,M),I=h.getULong(p,M+8);switch(P){case"cmap":c.tables.cmap=f.parse(p,I),c.encoding=new u.CmapEncoding(c.tables.cmap),c.encoding||(c.supported=!1);break;case"head":c.tables.head=y.parse(p,I),c.unitsPerEm=c.tables.head.unitsPerEm,e=c.tables.head.indexToLocFormat;break;case"hhea":c.tables.hhea=v.parse(p,I),c.ascender=c.tables.hhea.ascender,c.descender=c.tables.hhea.descender,c.numberOfHMetrics=c.tables.hhea.numberOfHMetrics;break;case"hmtx":r=I;break;case"maxp":c.tables.maxp=x.parse(p,I),c.numGlyphs=c.tables.maxp.numGlyphs;break;case"name":c.tables.name=S.parse(p,I),c.familyName=c.tables.name.fontFamily,c.styleName=c.tables.name.fontSubfamily;break;case"OS/2":c.tables.os2=T.parse(p,I);break;case"post":c.tables.post=E.parse(p,I),c.glyphNames=new u.GlyphNames(c.tables.post);break;case"glyf":n=I;break;case"loca":i=I;break;case"CFF ":o=I;break;case"kern":s=I;break;case"GPOS":a=I}M+=16}if(n&&i){var O=0===e,D=w.parse(p,i,c.numGlyphs,O);c.glyphs=m.parse(p,n,D,c),_.parse(p,r,c.numberOfHMetrics,c.numGlyphs,c.glyphs),u.addGlyphNames(c)}else o?(d.parse(p,o,c),u.addGlyphNames(c)):c.supported=!1;return c.supported&&(s?c.kerningPairs=b.parse(p,s):c.kerningPairs={},a&&g.parse(p,a,c)),c}function a(t,e){var r="undefined"==typeof window,n=r?i:o;n(t,function(t,r){if(t)return e(t);var n=s(r);return n.supported?e(null,n):e("Font is not supported (is this a Postscript font?)")})}var u=t("./encoding"),l=t("./font"),c=t("./glyph"),h=t("./parse"),p=t("./path"),f=t("./tables/cmap"),d=t("./tables/cff"),m=t("./tables/glyf"),g=t("./tables/gpos"),y=t("./tables/head"),v=t("./tables/hhea"),_=t("./tables/hmtx"),b=t("./tables/kern"),w=t("./tables/loca"),x=t("./tables/maxp"),S=t("./tables/name"),T=t("./tables/os2"),E=t("./tables/post");r._parse=h,r.Font=l.Font,r.Glyph=c.Glyph,r.Path=p.Path,r.parse=s,r.load=a},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/glyf":14,"./tables/gpos":15,"./tables/head":16,"./tables/hhea":17,"./tables/hmtx":18,"./tables/kern":19,"./tables/loca":20,"./tables/maxp":21,"./tables/name":22,"./tables/os2":23,"./tables/post":24,fs:1}],9:[function(t,e,r){"use strict";function n(t,e){this.data=t,this.offset=e,this.relativeOffset=0}r.getByte=function(t,e){return t.getUint8(e)},r.getCard8=r.getByte,r.getUShort=function(t,e){return t.getUint16(e,!1)},r.getCard16=r.getUShort,r.getShort=function(t,e){return t.getInt16(e,!1)},r.getULong=function(t,e){return t.getUint32(e,!1)},r.getFixed=function(t,e){var r=t.getInt16(e,!1),n=t.getUint16(e+2,!1);return r+n/65535},r.getTag=function(t,e){for(var r="",n=e;e+4>n;n+=1)r+=String.fromCharCode(t.getInt8(n));return r},r.getOffset=function(t,e,r){for(var n=0,i=0;r>i;i+=1)n<<=8,n+=t.getUint8(e+i);return n},r.getBytes=function(t,e,r){for(var n=[],i=e;r>i;i+=1)n.push(t.getUint8(i));return n},r.bytesToString=function(t){for(var e="",r=0;r<t.length;r+=1)e+=String.fromCharCode(t[r]);return e};var i={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};n.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},n.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},n.prototype.parseCard8=n.prototype.parseByte,n.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},n.prototype.parseCard16=n.prototype.parseUShort,n.prototype.parseSID=n.prototype.parseUShort,n.prototype.parseOffset16=n.prototype.parseUShort,n.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},n.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},n.prototype.parseULong=function(){
var t=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},n.prototype.parseFixed=function(){var t=r.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},n.prototype.parseOffset16List=n.prototype.parseUShortList=function(t){for(var e=new Array(t),n=this.data,i=this.offset+this.relativeOffset,o=0;t>o;o++)e[o]=r.getUShort(n,i),i+=2;return this.relativeOffset+=2*t,e},n.prototype.parseString=function(t){var e=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=t;for(var i=0;t>i;i++)n+=String.fromCharCode(e.getUint8(r+i));return n},n.prototype.parseTag=function(){return this.parseString(4)},n.prototype.parseLongDateTime=function(){var t=r.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,t},n.prototype.parseFixed=function(){var t=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t/65536},n.prototype.parseVersion=function(){var t=r.getUShort(this.data,this.offset+this.relativeOffset),e=r.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+e/4096/10},n.prototype.skip=function(t,e){void 0===e&&(e=1),this.relativeOffset+=i[t]*e},r.Parser=n},{}],10:[function(t,e,r){"use strict";function n(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}n.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})},n.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})},n.prototype.curveTo=n.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.commands.push({type:"C",x1:t,y1:e,x2:r,y2:n,x:i,y:o})},n.prototype.quadTo=n.prototype.quadraticCurveTo=function(t,e,r,n){this.commands.push({type:"Q",x1:t,y1:e,x:r,y:n})},n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})},n.prototype.extend=function(t){t.commands&&(t=t.commands),Array.prototype.push.apply(this.commands,t)},n.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var r=this.commands[e];"M"===r.type?t.moveTo(r.x,r.y):"L"===r.type?t.lineTo(r.x,r.y):"C"===r.type?t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?t.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},n.prototype.toPathData=function(t){function e(e){return Math.round(e)===e?""+Math.round(e):e.toFixed(t)}function r(){for(var t="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(t+=" "),t+=e(n)}return t}t=void 0!==t?t:2;for(var n="",i=0;i<this.commands.length;i+=1){var o=this.commands[i];"M"===o.type?n+="M"+r(o.x,o.y):"L"===o.type?n+="L"+r(o.x,o.y):"C"===o.type?n+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?n+="Q"+r(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(n+="Z")}return n},n.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&"black"!==this.fill&&(e+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>"},r.Path=n},{}],11:[function(t,e,r){"use strict";function n(t,e,r){var n;for(n=0;n<e.length;n+=1){var i=e[n];this[i.name]=i.value}if(this.tableName=t,this.fields=e,r){var o=Object.keys(r);for(n=0;n<o.length;n+=1){var s=o[n],a=r[s];void 0!==this[s]&&(this[s]=a)}}}var i=t("./check"),o=t("./types").encode,s=t("./types").sizeOf;n.prototype.sizeOf=function(){for(var t=0,e=0;e<this.fields.length;e+=1){var r=this.fields[e],n=this[r.name];if(void 0===n&&(n=r.value),"function"==typeof n.sizeOf)t+=n.sizeOf();else{var o=s[r.type];i.assert("function"==typeof o,"Could not find sizeOf function for field"+r.name),t+=o(n)}}return t},n.prototype.encode=function(){return o.TABLE(this)},r.Table=n},{"./check":2,"./types":26}],12:[function(t,e,r){"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r+=1)if(!n(t[r],e[r]))return!1;return!0}return!1}function i(t,e,r){var n,i,o,s=[],a=[],u=$.getCard16(t,e);if(0!==u){var l=$.getByte(t,e+2);i=e+(u+1)*l+2;var c=e+3;for(n=0;u+1>n;n+=1)s.push($.getOffset(t,c,l)),c+=l;o=i+s[u]}else o=e+2;for(n=0;n<s.length-1;n+=1){var h=$.getBytes(t,i+s[n],i+s[n+1]);r&&(h=r(h)),a.push(h)}return{objects:a,startOffset:e,endOffset:o}}function o(t){for(var e="",r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=t.parseByte(),o=i>>4,s=15&i;if(o===r)break;if(e+=n[o],s===r)break;e+=n[s]}return parseFloat(e)}function s(t,e){var r,n,i,s;if(28===e)return r=t.parseByte(),n=t.parseByte(),r<<8|n;if(29===e)return r=t.parseByte(),n=t.parseByte(),i=t.parseByte(),s=t.parseByte(),r<<24|n<<16|i<<8|s;if(30===e)return o(t);if(e>=32&&246>=e)return e-139;if(e>=247&&250>=e)return r=t.parseByte(),256*(e-247)+r+108;if(e>=251&&254>=e)return r=t.parseByte(),256*-(e-251)-r-108;throw new Error("Invalid b0 "+e)}function a(t){for(var e={},r=0;r<t.length;r+=1){var n,i=t[r][0],o=t[r][1];if(n=1===o.length?o[0]:o,e.hasOwnProperty(i))throw new Error("Object "+e+" already has key "+i);e[i]=n}return e}function u(t,e,r){e=void 0!==e?e:0;var n=new $.Parser(t,e),i=[],o=[];for(r=void 0!==r?r:t.length;n.relativeOffset<r;){var u=n.parseByte();21>=u?(12===u&&(u=1200+n.parseByte()),i.push([u,o]),o=[]):o.push(s(n,u))}return a(i)}function l(t,e){return e=390>=e?D.cffStandardStrings[e]:t[e-391]}function c(t,e,r){for(var n={},i=0;i<e.length;i+=1){var o=e[i],s=t[o.op];void 0===s&&(s=void 0!==o.value?o.value:null),"SID"===o.type&&(s=l(r,s)),n[o.name]=s}return n}function h(t,e){var r={};return r.formatMajor=$.getCard8(t,e),r.formatMinor=$.getCard8(t,e+1),r.size=$.getCard8(t,e+2),r.offsetSize=$.getCard8(t,e+3),r.startOffset=e,r.endOffset=e+4,r}function p(t,e){var r=u(t,0,t.byteLength);return c(r,F,e)}function f(t,e,r,n){var i=u(t,e,r);return c(i,U,n)}function d(t,e,r,n){var i,o,s,a=new $.Parser(t,e);r-=1;var u=[".notdef"],c=a.parseCard8();if(0===c)for(i=0;r>i;i+=1)o=a.parseSID(),u.push(l(n,o));else if(1===c)for(;u.length<=r;)for(o=a.parseSID(),s=a.parseCard8(),i=0;s>=i;i+=1)u.push(l(n,o)),o+=1;else{if(2!==c)throw new Error("Unknown charset format "+c);for(;u.length<=r;)for(o=a.parseSID(),s=a.parseCard16(),i=0;s>=i;i+=1)u.push(l(n,o)),o+=1}return u}function m(t,e,r){var n,i,o={},s=new $.Parser(t,e),a=s.parseCard8();if(0===a){var u=s.parseCard8();for(n=0;u>n;n+=1)i=s.parseCard8(),o[i]=n}else{if(1!==a)throw new Error("Unknown encoding format "+a);var l=s.parseCard8();for(i=1,n=0;l>n;n+=1)for(var c=s.parseCard8(),h=s.parseCard8(),p=c;c+h>=p;p+=1)o[p]=i,i+=1}return new D.CffEncoding(o,r)}function g(t,e,r){function n(t,e){m&&c.closePath(),c.moveTo(t,e),m=!0}function i(){var e;e=h.length%2!==0,e&&!f&&(d=h.shift()+t.nominalWidthX),p+=h.length>>1,h.length=0,f=!0}function o(r){for(var v,_,b,w,x,S,T,E,A,C,M,R,P=0;P<r.length;){var I=r[P];switch(P+=1,I){case 1:i();break;case 3:i();break;case 4:h.length>1&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),y+=h.pop(),n(g,y);break;case 5:for(;h.length>0;)g+=h.shift(),y+=h.shift(),c.lineTo(g,y);break;case 6:for(;h.length>0&&(g+=h.shift(),c.lineTo(g,y),0!==h.length);)y+=h.shift(),c.lineTo(g,y);break;case 7:for(;h.length>0&&(y+=h.shift(),c.lineTo(g,y),0!==h.length);)g+=h.shift(),c.lineTo(g,y);break;case 8:for(;h.length>0;)s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 10:x=h.pop()+t.subrsBias,S=t.subrs[x],S&&o(S);break;case 11:return;case 12:switch(I=r[P],P+=1,I){case 35:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l+h.shift(),A=T+h.shift(),C=E+h.shift(),M=A+h.shift(),R=C+h.shift(),g=M+h.shift(),y=R+h.shift(),h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 34:s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l,A=T+h.shift(),C=l,M=A+h.shift(),R=y,g=M+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 36:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l,A=T+h.shift(),C=l,M=A+h.shift(),R=C+h.shift(),g=M+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;case 37:s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),T=u+h.shift(),E=l+h.shift(),A=T+h.shift(),C=E+h.shift(),M=A+h.shift(),R=C+h.shift(),Math.abs(M-g)>Math.abs(R-y)?g=M+h.shift():y=R+h.shift(),c.curveTo(s,a,u,l,T,E),c.curveTo(A,C,M,R,g,y);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+I),h.length=0}break;case 14:h.length>0&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),m&&(c.closePath(),m=!1);break;case 18:i();break;case 19:case 20:i(),P+=p+7>>3;break;case 21:h.length>2&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),y+=h.pop(),g+=h.pop(),n(g,y);break;case 22:h.length>1&&!f&&(d=h.shift()+t.nominalWidthX,f=!0),g+=h.pop(),n(g,y);break;case 23:i();break;case 24:for(;h.length>2;)s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);g+=h.shift(),y+=h.shift(),c.lineTo(g,y);break;case 25:for(;h.length>6;)g+=h.shift(),y+=h.shift(),c.lineTo(g,y);s=g+h.shift(),a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 26:for(h.length%2&&(g+=h.shift());h.length>0;)s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u,y=l+h.shift(),c.curveTo(s,a,u,l,g,y);break;case 27:for(h.length%2&&(y+=h.shift());h.length>0;)s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l,c.curveTo(s,a,u,l,g,y);break;case 28:v=r[P],_=r[P+1],h.push((v<<24|_<<16)>>16),P+=2;break;case 29:x=h.pop()+t.gsubrsBias,S=t.gsubrs[x],S&&o(S);break;case 30:for(;h.length>0&&(s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y),0!==h.length);)s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),y=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y);break;case 31:for(;h.length>0&&(s=g+h.shift(),a=y,u=s+h.shift(),l=a+h.shift(),y=l+h.shift(),g=u+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y),0!==h.length);)s=g,a=y+h.shift(),u=s+h.shift(),l=a+h.shift(),g=u+h.shift(),y=l+(1===h.length?h.shift():0),c.curveTo(s,a,u,l,g,y);break;default:32>I?console.log("Glyph "+e.index+": unknown operator "+I):247>I?h.push(I-139):251>I?(v=r[P],P+=1,h.push(256*(I-247)+v+108)):255>I?(v=r[P],P+=1,h.push(256*-(I-251)-v-108)):(v=r[P],_=r[P+1],b=r[P+2],w=r[P+3],P+=4,h.push((v<<24|_<<16|b<<8|w)/65536))}}}var s,a,u,l,c=new N.Path,h=[],p=0,f=!1,d=t.defaultWidthX,m=!1,g=0,y=0;return o(r),e.advanceWidth=d,c}function y(t){var e;return e=t.length<1240?107:t.length<33900?1131:32768}function v(t,e,r){r.tables.cff={};var n=h(t,e),o=i(t,n.endOffset,$.bytesToString),s=i(t,o.endOffset),a=i(t,s.endOffset,$.bytesToString),u=i(t,a.endOffset);r.gsubrs=u.objects,r.gsubrsBias=y(r.gsubrs);var l=new DataView(new Uint8Array(s.objects[0]).buffer),c=p(l,a.objects);r.tables.cff.topDict=c;var v=e+c["private"][1],_=f(t,v,c["private"][0],a.objects);if(r.defaultWidthX=_.defaultWidthX,r.nominalWidthX=_.nominalWidthX,0!==_.subrs){var b=v+_.subrs,w=i(t,b);r.subrs=w.objects,r.subrsBias=y(r.subrs)}else r.subrs=[],r.subrsBias=0;var x=i(t,e+c.charStrings);r.nGlyphs=x.objects.length;var S=d(t,e+c.charset,r.nGlyphs,a.objects);0===c.encoding?r.cffEncoding=new D.CffEncoding(D.cffStandardEncoding,S):1===c.encoding?r.cffEncoding=new D.CffEncoding(D.cffExpertEncoding,S):r.cffEncoding=m(t,e+c.encoding,S),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new k.GlyphSet(r);for(var T=0;T<r.nGlyphs;T+=1){var E=x.objects[T];r.glyphs.push(T,k.cffGlyphLoader(r,T,g,E))}}function _(t,e){var r,n=D.cffStandardStrings.indexOf(t);return n>=0&&(r=n),n=e.indexOf(t),n>=0?r=n+D.cffStandardStrings.length:(r=D.cffStandardStrings.length+e.length,e.push(t)),r}function b(){return new L.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function w(t){var e=new L.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var r=0;r<t.length;r+=1)e.names.push({name:"name_"+r,type:"NAME",value:t[r]});return e}function x(t,e,r){for(var i={},o=0;o<t.length;o+=1){var s=t[o],a=e[s.name];void 0===a||n(a,s.value)||("SID"===s.type&&(a=_(a,r)),i[s.op]={name:s.name,type:s.type,value:a})}return i}function S(t,e){var r=new L.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=x(F,t,e),r}function T(t){var e=new L.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function E(t){var e=new L.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var r=0;r<t.length;r+=1)e.strings.push({name:"string_"+r,type:"STRING",value:t[r]});return e}function A(){return new L.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function C(t,e){for(var r=new L.Table("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<t.length;n+=1){var i=t[n],o=_(i,e);r.fields.push({name:"glyph_"+n,type:"SID",value:o})}return r}function M(t){var e=[],r=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var n=0,i=0,o=0;o<r.commands.length;o+=1){var s,a,u=r.commands[o];if("Q"===u.type){var l=1/3,c=2/3;u={type:"C",x:u.x,y:u.y,x1:l*n+c*u.x1,y1:l*i+c*u.y1,x2:l*u.x+c*u.x1,y2:l*u.y+c*u.y1}}if("M"===u.type)s=Math.round(u.x-n),a=Math.round(u.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(u.x),i=Math.round(u.y);else if("L"===u.type)s=Math.round(u.x-n),a=Math.round(u.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),n=Math.round(u.x),i=Math.round(u.y);else if("C"===u.type){var h=Math.round(u.x1-n),p=Math.round(u.y1-i),f=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);s=Math.round(u.x-u.x2),a=Math.round(u.y-u.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:p}),e.push({name:"dx2",type:"NUMBER",value:f}),e.push({name:"dy2",type:"NUMBER",value:d}),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(u.x),i=Math.round(u.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function R(t){for(var e=new L.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<t.length;r+=1){var n=t.get(r),i=M(n);e.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return e}function P(t,e){var r=new L.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=x(U,t,e),r}function I(t){var e=new L.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return e.privateDicts=[{name:"privateDict_0",type:"TABLE",value:t}],e}function O(t,e){for(var r,n=new L.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),i=1/e.unitsPerEm,o={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},s={},a=[],u=1;u<t.length;u+=1)r=t.get(u),a.push(r.name);var l=[];n.header=b(),n.nameIndex=w([e.postScriptName]);var c=S(o,l);n.topDictIndex=T(c),n.globalSubrIndex=A(),n.charsets=C(a,l),n.charStringsIndex=R(t);var h=P(s,l);n.privateDictIndex=I(h),n.stringIndex=E(l);var p=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return o.charset=p,o.encoding=0,o.charStrings=o.charset+n.charsets.sizeOf(),o["private"][1]=o.charStrings+n.charStringsIndex.sizeOf(),c=S(o,l),n.topDictIndex=T(c),n}var D=t("../encoding"),k=t("../glyphset"),$=t("../parse"),N=t("../path"),L=t("../table"),F=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],U=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];r.parse=v,r.make=O},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(t,e,r){"use strict";function n(t,e){var r,n={};n.version=u.getUShort(t,e),a.argument(0===n.version,"cmap table version should be 0."),n.numTables=u.getUShort(t,e+2);var i=-1;for(r=0;r<n.numTables;r+=1){var o=u.getUShort(t,e+4+8*r),s=u.getUShort(t,e+4+8*r+2);if(3===o&&(1===s||0===s)){i=u.getULong(t,e+4+8*r+4);break}}if(-1===i)return null;var l=new u.Parser(t,e+i);n.format=l.parseUShort(),a.argument(4===n.format,"Only format 4 cmap tables are supported."),n.length=l.parseUShort(),n.language=l.parseUShort();var c;n.segCount=c=l.parseUShort()>>1,l.skip("uShort",3),n.glyphIndexMap={};var h=new u.Parser(t,e+i+14),p=new u.Parser(t,e+i+16+2*c),f=new u.Parser(t,e+i+16+4*c),d=new u.Parser(t,e+i+16+6*c),m=e+i+16+8*c;for(r=0;c-1>r;r+=1)for(var g,y=h.parseUShort(),v=p.parseUShort(),_=f.parseShort(),b=d.parseUShort(),w=v;y>=w;w+=1)0!==b?(m=d.offset+d.relativeOffset-2,m+=b,m+=2*(w-v),g=u.getUShort(t,m),0!==g&&(g=g+_&65535)):g=w+_&65535,n.glyphIndexMap[w]=g;return n}function i(t,e,r){t.segments.push({end:e,start:e,delta:-(e-r),offset:0})}function o(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function s(t){var e,r=new l.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(r.segments=[],e=0;e<t.length;e+=1){for(var n=t.get(e),s=0;s<n.unicodes.length;s+=1)i(r,n.unicodes[s],e);r.segments=r.segments.sort(function(t,e){return t.start-e.start})}o(r);var a;a=r.segments.length,r.segCountX2=2*a,r.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange;var u=[],c=[],h=[],p=[],f=[];for(e=0;a>e;e+=1){var d=r.segments[e];u=u.concat({name:"end_"+e,type:"USHORT",value:d.end}),c=c.concat({name:"start_"+e,type:"USHORT",value:d.start}),h=h.concat({name:"idDelta_"+e,type:"SHORT",value:d.delta}),p=p.concat({name:"idRangeOffset_"+e,type:"USHORT",value:d.offset}),void 0!==d.glyphId&&(f=f.concat({name:"glyph_"+e,type:"USHORT",value:d.glyphId}))}return r.fields=r.fields.concat(u),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(c),r.fields=r.fields.concat(h),r.fields=r.fields.concat(p),r.fields=r.fields.concat(f),r.length=14+2*u.length+2+2*c.length+2*h.length+2*p.length+2*f.length,r}var a=t("../check"),u=t("../parse"),l=t("../table");r.parse=n,r.make=s},{"../check":2,"../parse":9,"../table":11}],14:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o;return(e&n)>0?(o=t.parseByte(),0===(e&i)&&(o=-o),o=r+o):o=(e&i)>0?r:r+t.parseShort(),o}function i(t,e,r){var i=new p.Parser(e,r);t.numberOfContours=i.parseShort(),t.xMin=i.parseShort(),t.yMin=i.parseShort(),t.xMax=i.parseShort(),t.yMax=i.parseShort();var o,s;if(t.numberOfContours>0){var a,u=t.endPointIndices=[];for(a=0;a<t.numberOfContours;a+=1)u.push(i.parseUShort());for(t.instructionLength=i.parseUShort(),t.instructions=[],a=0;a<t.instructionLength;a+=1)t.instructions.push(i.parseByte());var l=u[u.length-1]+1;for(o=[],a=0;l>a;a+=1)if(s=i.parseByte(),o.push(s),(8&s)>0)for(var h=i.parseByte(),f=0;h>f;f+=1)o.push(s),a+=1;if(c.argument(o.length===l,"Bad flags."),u.length>0){var d,m=[];if(l>0){for(a=0;l>a;a+=1)s=o[a],d={},d.onCurve=!!(1&s),d.lastPointOfContour=u.indexOf(a)>=0,m.push(d);var g=0;for(a=0;l>a;a+=1)s=o[a],d=m[a],d.x=n(i,s,g,2,16),g=d.x;var y=0;for(a=0;l>a;a+=1)s=o[a],d=m[a],d.y=n(i,s,y,4,32),y=d.y}t.points=m}else t.points=[]}else if(0===t.numberOfContours)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var v=!0;v;){o=i.parseUShort();var _={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(_.dx=i.parseShort(),_.dy=i.parseShort()):(_.dx=i.parseChar(),_.dy=i.parseChar()),(8&o)>0?_.xScale=_.yScale=i.parseF2Dot14():(64&o)>0?(_.xScale=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()):(128&o)>0&&(_.xScale=i.parseF2Dot14(),_.scale01=i.parseF2Dot14(),_.scale10=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()),t.components.push(_),v=!!(32&o)}}}function o(t,e){for(var r=[],n=0;n<t.length;n+=1){var i=t[n],o={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(o)}return r}function s(t){for(var e=[],r=[],n=0;n<t.length;n+=1){var i=t[n];r.push(i),i.lastPointOfContour&&(e.push(r),r=[])}return c.argument(0===r.length,"There are still points left in the current contour."),e}function a(t){var e=new f.Path;if(!t)return e;for(var r=s(t),n=0;n<r.length;n+=1){var i,o,a=r[n],u=a[0],l=a[a.length-1];u.onCurve?(i=null,o=!0):(u=l.onCurve?l:{x:(u.x+l.x)/2,y:(u.y+l.y)/2},i=u,o=!1),e.moveTo(u.x,u.y);for(var c=o?1:0;c<a.length;c+=1){var h=a[c],p=0===c?u:a[c-1];if(p.onCurve&&h.onCurve)e.lineTo(h.x,h.y);else if(p.onCurve&&!h.onCurve)i=h;else if(p.onCurve||h.onCurve){if(p.onCurve||!h.onCurve)throw new Error("Invalid state.");e.quadraticCurveTo(i.x,i.y,h.x,h.y),i=null}else{var d={x:(p.x+h.x)/2,y:(p.y+h.y)/2};e.quadraticCurveTo(p.x,p.y,d.x,d.y),i=h}}u!==l&&(i?e.quadraticCurveTo(i.x,i.y,u.x,u.y):e.lineTo(u.x,u.y))}return e.closePath(),e}function u(t,e){if(e.isComposite)for(var r=0;r<e.components.length;r+=1){var n=e.components[r],i=t.get(n.glyphIndex);if(i.points){var s=o(i.points,n);e.points=e.points.concat(s)}}return a(e.points)}function l(t,e,r,n){var o,s=new h.GlyphSet(n);for(o=0;o<r.length-1;o+=1){var a=r[o],l=r[o+1];a!==l?s.push(o,h.ttfGlyphLoader(n,o,i,t,e+a,u)):s.push(o,h.glyphLoader(n,o))}return s}var c=t("../check"),h=t("../glyphset"),p=t("../parse"),f=t("../path");r.parse=l},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],15:[function(t,e,r){"use strict";function n(t,e){for(var r=new c.Parser(t,e),n=r.parseUShort(),i=[],o=0;n>o;o++)i[r.parseTag()]={offset:r.parseUShort()};return i}function i(t,e){var r=new c.Parser(t,e),n=r.parseUShort(),i=r.parseUShort();if(1===n)return r.parseUShortList(i);if(2===n){for(var o=[];i--;)for(var s=r.parseUShort(),a=r.parseUShort(),u=r.parseUShort(),l=s;a>=l;l++)o[u++]=l;return o}}function o(t,e){var r=new c.Parser(t,e),n=r.parseUShort();if(1===n){var i=r.parseUShort(),o=r.parseUShort(),s=r.parseUShortList(o);return function(t){return s[t-i]||0}}if(2===n){for(var a=r.parseUShort(),u=[],l=[],h=[],p=0;a>p;p++)u[p]=r.parseUShort(),l[p]=r.parseUShort(),h[p]=r.parseUShort();return function(t){for(var e=0,r=u.length-1;r>e;){var n=e+r+1>>1;t<u[n]?r=n-1:e=n}return u[e]<=t&&t<=l[e]?h[e]||0:0}}}function s(t,e){var r,n,s=new c.Parser(t,e),a=s.parseUShort(),u=s.parseUShort(),l=i(t,e+u),h=s.parseUShort(),p=s.parseUShort();if(4===h&&0===p){var f={};if(1===a){for(var d=s.parseUShort(),m=[],g=s.parseOffset16List(d),y=0;d>y;y++){var v=g[y],_=f[v];if(!_){_={},s.relativeOffset=v;for(var b=s.parseUShort();b--;){var w=s.parseUShort();h&&(r=s.parseShort()),p&&(n=s.parseShort()),_[w]=r}}m[l[y]]=_}return function(t,e){var r=m[t];return r?r[e]:void 0}}if(2===a){for(var x=s.parseUShort(),S=s.parseUShort(),T=s.parseUShort(),E=s.parseUShort(),A=o(t,e+x),C=o(t,e+S),M=[],R=0;T>R;R++)for(var P=M[R]=[],I=0;E>I;I++)h&&(r=s.parseShort()),p&&(n=s.parseShort()),P[I]=r;var O={};for(R=0;R<l.length;R++)O[l[R]]=1;return function(t,e){if(O[t]){var r=A(t),n=C(e),i=M[r];return i?i[n]:void 0}}}}}function a(t,e){var r=new c.Parser(t,e),n=r.parseUShort(),i=r.parseUShort(),o=16&i,a=r.parseUShort(),u=r.parseOffset16List(a),l={lookupType:n,lookupFlag:i,markFilteringSet:o?r.parseUShort():-1};if(2===n){for(var h=[],p=0;a>p;p++)h.push(s(t,e+u[p]));l.getKerningValue=function(t,e){for(var r=h.length;r--;){var n=h[r](t,e);if(void 0!==n)return n}return 0}}return l}function u(t,e,r){var i=new c.Parser(t,e),o=i.parseFixed();l.argument(1===o,"Unsupported GPOS table version."),n(t,e+i.parseUShort()),n(t,e+i.parseUShort());var s=i.parseUShort();i.relativeOffset=s;for(var u=i.parseUShort(),h=i.parseOffset16List(u),p=e+s,f=0;u>f;f++){var d=a(t,p+h[f]);2!==d.lookupType||r.getGposKerningValue||(r.getGposKerningValue=d.getKerningValue)}}var l=t("../check"),c=t("../parse");r.parse=u},{"../check":2,"../parse":9}],16:[function(t,e,r){"use strict";function n(t,e){var r={},n=new s.Parser(t,e);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),o.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function i(t){return new a.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var o=t("../check"),s=t("../parse"),a=t("../table");r.parse=n,r.make=i},{"../check":2,"../parse":9,"../table":11}],17:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function i(t){return new s.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],18:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var s,a,u=new o.Parser(t,e),l=0;n>l;l+=1){r>l&&(s=u.parseUShort(),a=u.parseShort());var c=i.get(l);c.advanceWidth=s,c.leftSideBearing=a}}function i(t){for(var e=new s.Table("hmtx",[]),r=0;r<t.length;r+=1){var n=t.get(r),i=n.advanceWidth||0,o=n.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return e}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],19:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e),s=n.parseUShort();i.argument(0===s,"Unsupported kern table version."),n.skip("uShort",1);var a=n.parseUShort();i.argument(0===a,"Unsupported kern sub-table version."),n.skip("uShort",2);var u=n.parseUShort();n.skip("uShort",3);for(var l=0;u>l;l+=1){var c=n.parseUShort(),h=n.parseUShort(),p=n.parseShort();r[c+","+h]=p}return r}var i=t("../check"),o=t("../parse");r.parse=n},{"../check":2,"../parse":9}],20:[function(t,e,r){"use strict";function n(t,e,r,n){for(var o=new i.Parser(t,e),s=n?o.parseUShort:o.parseULong,a=[],u=0;r+1>u;u+=1){var l=s.call(o);n&&(l*=2),a.push(l)}return a}var i=t("../parse");r.parse=n},{"../parse":9}],21:[function(t,e,r){"use strict";function n(t,e){var r={},n=new o.Parser(t,e);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function i(t){return new s.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var o=t("../parse"),s=t("../table");r.parse=n,r.make=i},{"../parse":9,"../table":11}],22:[function(t,e,r){"use strict";function n(t,e){var r={},n=new l.Parser(t,e);r.format=n.parseUShort();for(var i=n.parseUShort(),o=n.offset+n.parseUShort(),s=0,a=0;i>a;a++){var u=n.parseUShort(),c=n.parseUShort(),p=n.parseUShort(),f=n.parseUShort(),d=h[f],m=n.parseUShort(),g=n.parseUShort();if(3===u&&1===c&&1033===p){for(var y=[],v=m/2,_=0;v>_;_++,g+=2)y[_]=l.getShort(t,o+g);var b=String.fromCharCode.apply(null,y);d?r[d]=b:(s++,r["unknown"+s]=b)}}return 1===r.format&&(r.langTagCount=n.parseUShort()),r}function i(t,e,r,n,i,o){return new c.Table("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function o(t,e,r,n){var o=u.STRING(r);return t.records.push(i(1,0,0,e,o.length,n)),t.strings.push(o),n+=o.length}function s(t,e,r,n){var o=u.UTF16(r);return t.records.push(i(3,1,1033,e,o.length,n)),t.strings.push(o),n+=o.length}function a(t){var e=new c.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);e.records=[],e.strings=[];var r,n,i=0;for(r=0;r<h.length;r+=1)void 0!==t[h[r]]&&(n=t[h[r]],i=o(e,r,n,i));for(r=0;r<h.length;r+=1)void 0!==t[h[r]]&&(n=t[h[r]],i=s(e,r,n,i));for(e.count=e.records.length,e.stringOffset=6+12*e.count,r=0;r<e.records.length;r+=1)e.fields.push({
name:"record_"+r,type:"TABLE",value:e.records[r]});for(r=0;r<e.strings.length;r+=1)e.fields.push({name:"string_"+r,type:"LITERAL",value:e.strings[r]});return e}var u=t("../types").encode,l=t("../parse"),c=t("../table"),h=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];r.parse=n,r.make=a},{"../parse":9,"../table":11,"../types":26}],23:[function(t,e,r){"use strict";function n(t){for(var e=0;e<u.length;e+=1){var r=u[e];if(t>=r.begin&&t<r.end)return e}return-1}function i(t,e){var r={},n=new s.Parser(t,e);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var i=0;10>i;i++)r.panose[i]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function o(t){return new a.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var s=t("../parse"),a=t("../table"),u=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];r.unicodeRanges=u,r.getUnicodeRange=n,r.parse=i,r.make=o},{"../parse":9,"../table":11}],24:[function(t,e,r){"use strict";function n(t,e){var r,n={},i=new s.Parser(t,e);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=o.standardNames.slice();break;case 2:for(n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();for(n.names=[],r=0;r<n.numberOfGlyphs;r++)if(n.glyphNameIndex[r]>=o.standardNames.length){var a=i.parseChar();n.names.push(i.parseString(a))}break;case 2.5:for(n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.offset[r]=i.parseChar()}return n}function i(){return new a.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var o=t("../encoding"),s=t("../parse"),a=t("../table");r.parse=n,r.make=i},{"../encoding":4,"../parse":9,"../table":11}],25:[function(t,e,r){"use strict";function n(t){return Math.log(t)/Math.log(2)|0}function i(t){for(;t.length%4!==0;)t.push(0);for(var e=0,r=0;r<t.length;r+=4)e+=(t[r]<<24)+(t[r+1]<<16)+(t[r+2]<<8)+t[r+3];return e%=Math.pow(2,32)}function o(t,e,r,n){return new h.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==t?t:""},{name:"checkSum",type:"ULONG",value:void 0!==e?e:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function s(t){var e=new h.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var r=Math.pow(2,n(e.numTables));e.searchRange=16*r,e.entrySelector=n(r),e.rangeShift=16*e.numTables-e.searchRange;for(var s=[],a=[],u=e.sizeOf()+o().sizeOf()*e.numTables;u%4!==0;)u+=1,a.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<t.length;l+=1){var p=t[l];c.argument(4===p.tableName.length,"Table name"+p.tableName+" is invalid.");var f=p.sizeOf(),d=o(p.tableName,i(p.encode()),u,f);for(s.push({name:d.tag+" Table Record",type:"TABLE",value:d}),a.push({name:p.tableName+" table",type:"TABLE",value:p}),u+=f,c.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!==0;)u+=1,a.push({name:"padding",type:"BYTE",value:0})}return s.sort(function(t,e){return t.value.tag>e.value.tag?1:-1}),e.fields=e.fields.concat(s),e.fields=e.fields.concat(a),e}function a(t,e,r){for(var n=0;n<e.length;n+=1){var i=t.charToGlyphIndex(e[n]);if(i>0){var o=t.glyphs.get(i);return o.getMetrics()}}return r}function u(t){for(var e=0,r=0;r<t.length;r+=1)e+=t[r];return e/t.length}function l(t){for(var e,r=[],n=[],o=[],l=[],c=[],h=[],w=[],x=0,S=0,T=0,E=0,A=0,C=0;C<t.glyphs.length;C+=1){var M=t.glyphs.get(C),R=0|M.unicode;(e>R||null===e)&&(e=R),R>x&&(x=R);var P=_.getUnicodeRange(R);if(32>P)S|=1<<P;else if(64>P)T|=1<<P-32;else if(96>P)E|=1<<P-64;else{if(!(123>P))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");A|=1<<P-96}if(".notdef"!==M.name){var I=M.getMetrics();r.push(I.xMin),n.push(I.yMin),o.push(I.xMax),l.push(I.yMax),h.push(I.leftSideBearing),w.push(I.rightSideBearing),c.push(M.advanceWidth)}}var O={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,l),advanceWidthMax:Math.max.apply(null,c),advanceWidthAvg:u(c),minLeftSideBearing:Math.min.apply(null,h),maxLeftSideBearing:Math.max.apply(null,h),minRightSideBearing:Math.min.apply(null,w)};O.ascender=void 0!==t.ascender?t.ascender:O.yMax,O.descender=void 0!==t.descender?t.descender:O.yMin;var D=d.make({unitsPerEm:t.unitsPerEm,xMin:O.xMin,yMin:O.yMin,xMax:O.xMax,yMax:O.yMax}),k=m.make({ascender:O.ascender,descender:O.descender,advanceWidthMax:O.advanceWidthMax,minLeftSideBearing:O.minLeftSideBearing,minRightSideBearing:O.minRightSideBearing,xMaxExtent:O.maxLeftSideBearing+(O.xMax-O.xMin),numberOfHMetrics:t.glyphs.length}),$=y.make(t.glyphs.length),N=_.make({xAvgCharWidth:Math.round(O.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:e,usLastCharIndex:x,ulUnicodeRange1:S,ulUnicodeRange2:T,ulUnicodeRange3:E,ulUnicodeRange4:A,sTypoAscender:O.ascender,sTypoDescender:O.descender,sTypoLineGap:0,usWinAscent:O.ascender,usWinDescent:-O.descender,sxHeight:a(t,"xyvw",{yMax:0}).yMax,sCapHeight:a(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",O).yMax,usBreakChar:t.hasChar(" ")?32:0}),L=g.make(t.glyphs),F=p.make(t.glyphs),U=t.familyName+" "+t.styleName,B=t.familyName.replace(/\s/g,"")+"-"+t.styleName,H=v.make({copyright:t.copyright,fontFamily:t.familyName,fontSubfamily:t.styleName,uniqueID:t.manufacturer+":"+U,fullName:U,version:t.version,postScriptName:B,trademark:t.trademark,manufacturer:t.manufacturer,designer:t.designer,description:t.description,manufacturerURL:t.manufacturerURL,designerURL:t.designerURL,license:t.license,licenseURL:t.licenseURL,preferredFamily:t.familyName,preferredSubfamily:t.styleName}),q=b.make(),G=f.make(t.glyphs,{version:t.version,fullName:U,familyName:t.familyName,weightName:t.styleName,postScriptName:B,unitsPerEm:t.unitsPerEm}),V=[D,k,$,N,H,F,q,G,L],j=s(V),z=j.encode(),W=i(z),Y=j.fields,X=!1;for(C=0;C<Y.length;C+=1)if("head table"===Y[C].name){Y[C].value.checkSumAdjustment=2981146554-W,X=!0;break}if(!X)throw new Error("Could not find head table with checkSum to adjust.");return j}var c=t("../check"),h=t("../table"),p=t("./cmap"),f=t("./cff"),d=t("./head"),m=t("./hhea"),g=t("./hmtx"),y=t("./maxp"),v=t("./name"),_=t("./os2"),b=t("./post");r.computeCheckSum=i,r.make=s,r.fontToTable=l},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":16,"./hhea":17,"./hmtx":18,"./maxp":21,"./name":22,"./os2":23,"./post":24}],26:[function(t,e,r){"use strict";function n(t){return function(){return t}}var i=t("./check"),o=32768,s=2147483648,a={},u={},l={};u.BYTE=function(t){return i.argument(t>=0&&255>=t,"Byte value should be between 0 and 255."),[t]},l.BYTE=n(1),u.CHAR=function(t){return[t.charCodeAt(0)]},l.BYTE=n(1),u.CHARARRAY=function(t){for(var e=[],r=0;r<t.length;r+=1)e.push(t.charCodeAt(r));return e},l.CHARARRAY=function(t){return t.length},u.USHORT=function(t){return[t>>8&255,255&t]},l.USHORT=n(2),u.SHORT=function(t){return t>=o&&(t=-(2*o-t)),[t>>8&255,255&t]},l.SHORT=n(2),u.UINT24=function(t){return[t>>16&255,t>>8&255,255&t]},l.UINT24=n(3),u.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},l.ULONG=n(4),u.LONG=function(t){return t>=s&&(t=-(2*s-t)),[t>>24&255,t>>16&255,t>>8&255,255&t]},l.LONG=n(4),u.FIXED=u.ULONG,l.FIXED=l.ULONG,u.FWORD=u.SHORT,l.FWORD=l.SHORT,u.UFWORD=u.USHORT,l.UFWORD=l.USHORT,u.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},l.LONGDATETIME=n(8),u.TAG=function(t){return i.argument(4===t.length,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]},l.TAG=n(4),u.Card8=u.BYTE,l.Card8=l.BYTE,u.Card16=u.USHORT,l.Card16=l.USHORT,u.OffSize=u.BYTE,l.OffSize=l.BYTE,u.SID=u.USHORT,l.SID=l.USHORT,u.NUMBER=function(t){return t>=-107&&107>=t?[t+139]:t>=108&&1131>=t?(t-=108,[(t>>8)+247,255&t]):t>=-1131&&-108>=t?(t=-t-108,[(t>>8)+251,255&t]):t>=-32768&&32767>=t?u.NUMBER16(t):u.NUMBER32(t)},l.NUMBER=function(t){return u.NUMBER(t).length},u.NUMBER16=function(t){return[28,t>>8&255,255&t]},l.NUMBER16=n(2),u.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,255&t]},l.NUMBER32=n(4),u.REAL=function(t){var e=t.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));e=(Math.round(t*n)/n).toString()}var i,o,s="";for(i=0,o=e.length;o>i;i+=1){var a=e[i];s+="e"===a?"-"===e[++i]?"c":"b":"."===a?"a":"-"===a?"e":a}s+=1&s.length?"f":"ff";var u=[30];for(i=0,o=s.length;o>i;i+=2)u.push(parseInt(s.substr(i,2),16));return u},l.REAL=function(t){return u.REAL(t).length},u.NAME=u.CHARARRAY,l.NAME=l.CHARARRAY,u.STRING=u.CHARARRAY,l.STRING=l.CHARARRAY,u.UTF16=function(t){for(var e=[],r=0;r<t.length;r+=1)e.push(0),e.push(t.charCodeAt(r));return e},l.UTF16=function(t){return 2*t.length},u.INDEX=function(t){var e,r=1,n=[r],i=[],o=0;for(e=0;e<t.length;e+=1){var s=u.OBJECT(t[e]);Array.prototype.push.apply(i,s),o+=s.length,r+=s.length,n.push(r)}if(0===i.length)return[0,0];var a=[],l=1+Math.floor(Math.log(o)/Math.log(2))/8|0,c=[void 0,u.BYTE,u.USHORT,u.UINT24,u.ULONG][l];for(e=0;e<n.length;e+=1){var h=c(n[e]);Array.prototype.push.apply(a,h)}return Array.prototype.concat(u.Card16(t.length),u.OffSize(l),a,i)},l.INDEX=function(t){return u.INDEX(t).length},u.DICT=function(t){for(var e=[],r=Object.keys(t),n=r.length,i=0;n>i;i+=1){var o=parseInt(r[i],0),s=t[o];e=e.concat(u.OPERAND(s.value,s.type)),e=e.concat(u.OPERATOR(o))}return e},l.DICT=function(t){return u.DICT(t).length},u.OPERATOR=function(t){return 1200>t?[t]:[12,t-1200]},u.OPERAND=function(t,e){var r=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)i.argument(t.length===e.length,"Not enough arguments given for type"+e),r=r.concat(u.OPERAND(t[n],e[n]));else if("SID"===e)r=r.concat(u.NUMBER(t));else if("offset"===e)r=r.concat(u.NUMBER32(t));else if("number"===e)r=r.concat(u.NUMBER(t));else{if("real"!==e)throw new Error("Unknown operand type "+e);r=r.concat(u.REAL(t))}return r},u.OP=u.BYTE,l.OP=l.BYTE;var c="function"==typeof WeakMap&&new WeakMap;u.CHARSTRING=function(t){if(c&&c.has(t))return c.get(t);for(var e=[],r=t.length,n=0;r>n;n+=1){var i=t[n];e=e.concat(u[i.type](i.value))}return c&&c.set(t,e),e},l.CHARSTRING=function(t){return u.CHARSTRING(t).length},u.OBJECT=function(t){var e=u[t.type];return i.argument(void 0!==e,"No encoding function for type "+t.type),e(t.value)},u.TABLE=function(t){for(var e=[],r=t.fields.length,n=0;r>n;n+=1){var o=t.fields[n],s=u[o.type];i.argument(void 0!==s,"No encoding function for field type "+o.type);var a=t[o.name];void 0===a&&(a=o.value);var l=s(a);e=e.concat(l)}return e},u.LITERAL=function(t){return t},l.LITERAL=function(t){return t.length},r.decode=a,r.encode=u,r.sizeOf=l},{"./check":2}],27:[function(_dereq_,module,exports){!function(t,e,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):e[t]=r()}("reqwest",this,function(){function succeed(t){var e=protocolRe.exec(t.url);return e=e&&e[1]||window.location.protocol,httpsRe.test(e)?twoHundo.test(t.request.status):!!t.request.response}function handleReadyState(t,e,r){return function(){return t._aborted?r(t.request):t._timedOut?r(t.request,"Request is aborted: timeout"):void(t.request&&4==t.request[readyState]&&(t.request.onreadystatechange=noop,succeed(t)?e(t.request):r(t.request)))}}function setHeaders(t,e){var r,n=e.headers||{};n.Accept=n.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"];var i="function"==typeof FormData&&e.data instanceof FormData;e.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||i||(n[contentType]=e.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in t&&t.setRequestHeader(r,n[r])}function setCredentials(t,e){"undefined"!=typeof e.withCredentials&&"undefined"!=typeof t.withCredentials&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,r,n){var i=uniqid++,o=t.jsonpCallback||"callback",s=t.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),u=n.match(a),l=doc.createElement("script"),c=0,h=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?n=n.replace(a,"$1="+s):s=u[3]:n=urlappend(n,o+"="+s),win[s]=generalCallback,l.type="text/javascript",l.src=n,l.async=!0,"undefined"==typeof l.onreadystatechange||h||(l.htmlFor=l.id="_reqwest_"+i),l.onload=l.onreadystatechange=function(){return l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c?!1:(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),e(lastValue),lastValue=void 0,head.removeChild(l),void(c=1))},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(t,e){var r,n=this.o,i=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,s=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,a=!1;return"jsonp"!=n.type&&"GET"!=i||!s||(o=urlappend(o,s),s=null),"jsonp"==n.type?handleJsonp(n,t,e,o):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(i,o,n.async!==!1),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=t,r.onerror=e,r.onprogress=function(){},a=!0):r.onreadystatechange=handleReadyState(this,t,e),n.before&&n.before(r),a?setTimeout(function(){r.send(s)},200):r.send(s),r)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){return t.match("json")?"json":t.match("javascript")?"js":t.match("text")?"html":t.match("xml")?"xml":void 0}function init(o,fn){function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(t,e,r){for(t=self.request,self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,r);complete(t)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var r,n,i,o,s=t.name,a=t.tagName.toLowerCase(),u=function(t){t&&!t.disabled&&e(s,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(t.type)||(r=/checkbox/i.test(t.type),n=/radio/i.test(t.type),i=t.value,(!(r||n)||t.checked)&&e(s,normalize(r&&""===i?"on":i)));break;case"textarea":e(s,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())u(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(o=0;t.length&&o<t.length;o++)t.options[o].selected&&u(t.options[o])}}function eachFormElement(){var t,e,r=this,n=function(t,e){var n,i,o;for(n=0;n<e.length;n++)for(o=t[byTag](e[n]),i=0;i<o.length;i++)serial(o[i],r)};for(e=0;e<arguments.length;e++)t=arguments[e],/input|select|textarea/i.test(t.tagName)&&serial(t,r),n(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply(function(e,r){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(r)):t[e]=r},arguments),t}function buildParams(t,e,r,n){var i,o,s,a=/\[\]$/;if(isArray(e))for(o=0;e&&o<e.length;o++)s=e[o],r||a.test(t)?n(t,s):buildParams(t+"["+("object"==typeof s?o:"")+"]",s,r,n);else if(e&&"[object Object]"===e.toString())for(i in e)buildParams(t+"["+i+"]",e[i],r,n);else n(t,e)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(t){if(t.crossOrigin===!0){var e=win[xmlHttpRequest]?new XMLHttpRequest:null;if(e&&"withCredentials"in e)return e;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(t){return t}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return t=t||function(){},e=e||function(){},this._fulfilled?this._responseArgs.resp=t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this},"catch":function(t){return this.fail(t)}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply(function(e,r){t.push({name:e,value:r})},arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e,r=Array.prototype.slice.call(arguments,0);return t=r.pop(),t&&t.nodeType&&r.push(t)&&(t=null),t&&(t=t.type),e="map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString,e.apply(null,r)},reqwest.toQueryString=function(t,e){var r,n,i=e||!1,o=[],s=encodeURIComponent,a=function(t,e){e="function"==typeof e?e():null==e?"":e,o[o.length]=s(t)+"="+s(e)};if(isArray(t))for(n=0;t&&n<t.length;n++)a(t[n].name,t[n].value);else for(r in t)t.hasOwnProperty(r)&&buildParams(r,t[r],i,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest.ajaxSetup=function(t){t=t||{};for(var e in t)globalSetupOptions[e]=t[e]},reqwest})},{}],28:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.camera=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];this._validateParameters("camera",n,["Number","Number","Number"]),this._renderer.translate(-t,-e,-r)},n.prototype.perspective=function(t,e,r,i){for(var o=new Array(arguments.length),s=0;s<o.length;++s)o[s]=arguments[s];this._validateParameters("perspective",o,["Number","Number","Number","Number"]),this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.perspective(t,e,r,i),this._renderer._setCamera=!0},n.prototype.ortho=function(t,e,r,i,o,s){for(var a=new Array(arguments.length),u=0;u<a.length;++u)a[u]=arguments[u];this._validateParameters("ortho",a,["Number","Number","Number","Number","Number","Number"]),t/=this.width,e/=this.width,i/=this.height,r/=this.height,this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.ortho(t,e,r,i,o,s),this._renderer._setCamera=!0},e.exports=n},{"../core/core":49}],29:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},e.exports=n},{"../core/core":49}],30:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.ambientLight=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o),o.uAmbientColor=i.getUniformLocation(o,"uAmbientColor["+this._renderer.ambientLightCount+"]");var s=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),a=s._array;return i.uniform3f(o.uAmbientColor,a[0],a[1],a[2]),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor"),i.uniform4f(o.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,o.uAmbientLightCount=i.getUniformLocation(o,"uAmbientLightCount"),i.uniform1i(o.uAmbientLightCount,this._renderer.ambientLightCount),this},n.prototype.directionalLight=function(t,e,r,n,i,o,s){var a=this._renderer.GL,u=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(u),u.uDirectionalColor=a.getUniformLocation(u,"uDirectionalColor["+this._renderer.directionalLightCount+"]");var l=this._renderer._pInst.color.apply(this._renderer._pInst,[t,e,r]),c=l._array;a.uniform3f(u.uDirectionalColor,c[0],c[1],c[2]);var h,p,f;if("number"==typeof arguments[arguments.length-1])h=arguments[arguments.length-3],p=arguments[arguments.length-2],f=arguments[arguments.length-1];else try{h=arguments[arguments.length-1].x,p=arguments[arguments.length-1].y,f=arguments[arguments.length-1].z}catch(d){throw d}return u.uLightingDirection=a.getUniformLocation(u,"uLightingDirection["+this._renderer.directionalLightCount+"]"),a.uniform3f(u.uLightingDirection,h,p,f),u.uMaterialColor=a.getUniformLocation(u,"uMaterialColor"),a.uniform4f(u.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,u.uDirectionalLightCount=a.getUniformLocation(u,"uDirectionalLightCount"),a.uniform1i(u.uDirectionalLightCount,this._renderer.directionalLightCount),this},n.prototype.pointLight=function(t,e,r,n,i,o,s){var a=this._renderer.GL,u=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(u),u.uPointLightColor=a.getUniformLocation(u,"uPointLightColor["+this._renderer.pointLightCount+"]");var l=this._renderer._pInst.color.apply(this._renderer._pInst,[t,e,r]),c=l._array;a.uniform3f(u.uPointLightColor,c[0],c[1],c[2]);var h,p,f;if("number"==typeof arguments[arguments.length-1])h=arguments[arguments.length-3],p=arguments[arguments.length-2],f=arguments[arguments.length-1];else try{h=arguments[arguments.length-1].x,p=arguments[arguments.length-1].y,f=arguments[arguments.length-1].z}catch(d){throw d}return u.uPointLightLocation=a.getUniformLocation(u,"uPointLightLocation["+this._renderer.pointLightCount+"]"),a.uniform3f(u.uPointLightLocation,h,p,f),u.uMaterialColor=a.getUniformLocation(u,"uMaterialColor"),a.uniform4f(u.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,u.uPointLightCount=a.getUniformLocation(u,"uPointLightCount"),a.uniform1i(u.uPointLightCount,this._renderer.pointLightCount),this},e.exports=n},{"../core/core":49}],31:[function(t,e,r){"use strict";function n(t,e){for(var r={v:[],vt:[],vn:[]},n={},o=0;o<e.length;++o){var s=e[o].trim().split(/\b\s+/);if(s.length>0)if("v"===s[0]||"vn"===s[0]){var a=new i.Vector(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));r[s[0]].push(a)}else if("vt"===s[0]){var u=[parseFloat(s[1]),parseFloat(s[2])];r[s[0]].push(u)}else if("f"===s[0])for(var l=3;l<s.length;++l){for(var c=[],h=[1,l-1,l],p=0;p<h.length;++p){var f=s[h[p]],d=0;if(void 0!==n[f])d=n[f];else{for(var m=f.split("/"),g=0;g<m.length;g++)m[g]=parseInt(m[g])-1;d=n[f]=t.vertices.length,t.vertices.push(r.v[m[0]].copy()),r.vt[m[1]]?t.uvs.push(r.vt[m[1]].slice()):t.uvs.push([0,0]),r.vn[m[2]]&&t.vertexNormals.push(r.vn[m[2]].copy())}c.push(d)}t.faces.push(c)}}return 0===t.vertexNormals.length&&t.computeNormals(),
t}var i=t("../core/core");t("./p5.Geometry"),i.prototype.loadModel=function(t){var e=new i.Geometry;return e.gid=t,this.loadStrings(t,function(t){n(e,t)}.bind(this)),e},i.prototype.model=function(t){t.vertices.length>0&&(this._renderer.geometryInHash(t.gid)||this._renderer.createBuffers(t.gid,t),this._renderer.drawBuffers(t.gid))},e.exports=i},{"../core/core":49,"./p5.Geometry":33}],32:[function(t,e,r){"use strict";function n(t){return 0===(t&t-1)}var i=t("../core/core");i.prototype.normalMaterial=function(){return this._renderer._getShader("normalVert","normalFrag"),this},i.prototype.texture=function(t){var e=this._renderer.GL,r=this._renderer._getShader("lightVert","lightTextureFrag");if(e.useProgram(r),t instanceof i.Image){if(!t.isTexture){var o=e.createTexture();t.createTexture(o),e.bindTexture(e.TEXTURE_2D,o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),t._setProperty("isTexture",!0)}t.loadPixels();var s=new Uint8Array(t.pixels);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,s)}else if(t instanceof i.MediaElement){if(!t.loadedmetadata)return;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.elt)}return n(t.width)&&n(t.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.uniform1i(e.getUniformLocation(r,"uSampler"),0),e.uniform1i(e.getUniformLocation(r,"isTexture"),!0),this},i.prototype.ambientMaterial=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var s=this._renderer._applyColorBlend(t,e,r,n);return i.uniform4f(o.uMaterialColor,s[0],s[1],s[2],s[3]),o.uSpecular=i.getUniformLocation(o,"uSpecular"),i.uniform1i(o.uSpecular,!1),i.uniform1i(i.getUniformLocation(o,"isTexture"),!1),this},i.prototype.specularMaterial=function(t,e,r,n){var i=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o),i.uniform1i(i.getUniformLocation(o,"isTexture"),!1),o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var s=this._renderer._applyColorBlend(t,e,r,n);return i.uniform4f(o.uMaterialColor,s[0],s[1],s[2],s[3]),o.uSpecular=i.getUniformLocation(o,"uSpecular"),i.uniform1i(o.uSpecular,!0),this},i.Renderer3D.prototype._applyColorBlend=function(t,e,r,n){var i=this.GL,o=this._pInst.color.apply(this._pInst,arguments),s=o._array;return s[s.length-1]<1?(i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA)):(i.depthMask(!0),i.disable(i.BLEND)),s},e.exports=i},{"../core/core":49}],33:[function(t,e,r){"use strict";var n=t("../core/core");n.Geometry=function(t,e,r){return this.vertices=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.detailX=void 0!==t?t:1,this.detailY=void 0!==e?e:1,r instanceof Function&&r.call(this),this},n.Geometry.prototype.computeFaces=function(){for(var t,e,r,n,i=this.detailX+1,o=0;o<this.detailY;o++)for(var s=0;s<this.detailX;s++)t=o*i+s,e=o*i+s+1,r=(o+1)*i+s+1,n=(o+1)*i+s,this.faces.push([t,e,n]),this.faces.push([n,e,r]);return this},n.Geometry.prototype._getFaceNormal=function(t,e){var r=this.faces[t],i=this.vertices[r[e%3]],o=this.vertices[r[(e+1)%3]],s=this.vertices[r[(e+2)%3]],a=n.Vector.cross(n.Vector.sub(o,i),n.Vector.sub(s,i)),u=n.Vector.mag(a)/(n.Vector.mag(n.Vector.sub(o,i))*n.Vector.mag(n.Vector.sub(s,i)));return a=a.normalize(),a.mult(Math.asin(u))},n.Geometry.prototype.computeNormals=function(){for(var t=0;t<this.vertices.length;t++){for(var e=new n.Vector,r=0;r<this.faces.length;r++)this.faces[r][0]!==t&&this.faces[r][1]!==t&&this.faces[r][2]!==t||(e=e.add(this._getFaceNormal(r,t)));e=e.normalize(),this.vertexNormals.push(e)}},n.Geometry.prototype.averageNormals=function(){for(var t=0;t<=this.detailY;t++){var e=this.detailX+1,r=n.Vector.add(this.vertexNormals[t*e],this.vertexNormals[t*e+this.detailX]);r=n.Vector.div(r,2),this.vertexNormals[t*e]=r,this.vertexNormals[t*e+this.detailX]=r}return this},n.Geometry.prototype.averagePoleNormals=function(){for(var t=new n.Vector(0,0,0),e=0;e<this.detailX;e++)t.add(this.vertexNormals[e]);for(t=n.Vector.div(t,this.detailX),e=0;e<this.detailX;e++)this.vertexNormals[e]=t;for(t=new n.Vector(0,0,0),e=this.vertices.length-1;e>this.vertices.length-1-this.detailX;e--)t.add(this.vertexNormals[e]);for(t=n.Vector.div(t,this.detailX),e=this.vertices.length-1;e>this.vertices.length-1-this.detailX;e--)this.vertexNormals[e]=t;return this},e.exports=n.Geometry},{"../core/core":49}],34:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../math/polargeometry"),o=t("../core/constants"),s="undefined"!=typeof Float32Array?Float32Array:Array;n.Matrix=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return t[0]instanceof n?(this.p5=t[0],"mat3"===t[1]?this.mat3=t[2]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[1]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):"mat3"===t[0]?this.mat3=t[1]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[0]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},n.Matrix.prototype.set=function(t){return t instanceof n.Matrix?(this.mat4=t.mat4,this):t instanceof s?(this.mat4=t,this):this},n.Matrix.prototype.get=function(){return new n.Matrix(this.mat4)},n.Matrix.prototype.copy=function(){var t=new n.Matrix;return t.mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15],t},n.Matrix.identity=function(){return new n.Matrix},n.Matrix.prototype.transpose=function(t){var e,r,i,o,a,u;return t instanceof n.Matrix?(e=t.mat4[1],r=t.mat4[2],i=t.mat4[3],o=t.mat4[6],a=t.mat4[7],u=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=e,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=i,this.mat4[13]=a,this.mat4[14]=u,this.mat4[15]=t.mat4[15]):t instanceof s&&(e=t[1],r=t[2],i=t[3],o=t[6],a=t[7],u=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=e,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=i,this.mat4[13]=a,this.mat4[14]=u,this.mat4[15]=t[15]),this},n.Matrix.prototype.invert=function(t){var e,r,i,o,a,u,l,c,h,p,f,d,m,g,y,v;t instanceof n.Matrix?(e=t.mat4[0],r=t.mat4[1],i=t.mat4[2],o=t.mat4[3],a=t.mat4[4],u=t.mat4[5],l=t.mat4[6],c=t.mat4[7],h=t.mat4[8],p=t.mat4[9],f=t.mat4[10],d=t.mat4[11],m=t.mat4[12],g=t.mat4[13],y=t.mat4[14],v=t.mat4[15]):t instanceof s&&(e=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],m=t[12],g=t[13],y=t[14],v=t[15]);var _=e*u-r*a,b=e*l-i*a,w=e*c-o*a,x=r*l-i*u,S=r*c-o*u,T=i*c-o*l,E=h*g-p*m,A=h*y-f*m,C=h*v-d*m,M=p*y-f*g,R=p*v-d*g,P=f*v-d*y,I=_*P-b*R+w*M+x*C-S*A+T*E;return I?(I=1/I,this.mat4[0]=(u*P-l*R+c*M)*I,this.mat4[1]=(i*R-r*P-o*M)*I,this.mat4[2]=(g*T-y*S+v*x)*I,this.mat4[3]=(f*S-p*T-d*x)*I,this.mat4[4]=(l*C-a*P-c*A)*I,this.mat4[5]=(e*P-i*C+o*A)*I,this.mat4[6]=(y*w-m*T-v*b)*I,this.mat4[7]=(h*T-f*w+d*b)*I,this.mat4[8]=(a*R-u*C+c*E)*I,this.mat4[9]=(r*C-e*R-o*E)*I,this.mat4[10]=(m*S-g*w+v*_)*I,this.mat4[11]=(p*w-h*S-d*_)*I,this.mat4[12]=(u*A-a*M-l*E)*I,this.mat4[13]=(e*M-r*A+i*E)*I,this.mat4[14]=(g*b-m*x-y*_)*I,this.mat4[15]=(h*x-p*b+f*_)*I,this):null},n.Matrix.prototype.invert3x3=function(){var t=this.mat3[0],e=this.mat3[1],r=this.mat3[2],n=this.mat3[3],i=this.mat3[4],o=this.mat3[5],s=this.mat3[6],a=this.mat3[7],u=this.mat3[8],l=u*i-o*a,c=-u*n+o*s,h=a*n-i*s,p=t*l+e*c+r*h;return p?(p=1/p,this.mat3[0]=l*p,this.mat3[1]=(-u*e+r*a)*p,this.mat3[2]=(o*e-r*i)*p,this.mat3[3]=c*p,this.mat3[4]=(u*t-r*s)*p,this.mat3[5]=(-o*t+r*n)*p,this.mat3[6]=h*p,this.mat3[7]=(-a*t+e*s)*p,this.mat3[8]=(i*t-e*n)*p,this):null},n.Matrix.prototype.transpose3x3=function(t){var e=t[1],r=t[2],n=t[5];return this.mat3[1]=t[3],this.mat3[2]=t[6],this.mat3[3]=e,this.mat3[5]=t[7],this.mat3[6]=r,this.mat3[7]=n,this},n.Matrix.prototype.inverseTranspose=function(t){return void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=t.mat4[0],this.mat3[1]=t.mat4[1],this.mat3[2]=t.mat4[2],this.mat3[3]=t.mat4[4],this.mat3[4]=t.mat4[5],this.mat3[5]=t.mat4[6],this.mat3[6]=t.mat4[8],this.mat3[7]=t.mat4[9],this.mat3[8]=t.mat4[10]),this.invert3x3().transpose3x3(this.mat3),this},n.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],e=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],i=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],s=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],a=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],u=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],l=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],h=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return t*h-e*c+r*l+n*u-i*a+o*s},n.Matrix.prototype.mult=function(t){var e=new s(16),r=new s(16);t instanceof n.Matrix?r=t.mat4:t instanceof s&&(r=t);var i=this.mat4[0],o=this.mat4[1],a=this.mat4[2],u=this.mat4[3];return e[0]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[1]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[2]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[3]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[4],o=this.mat4[5],a=this.mat4[6],u=this.mat4[7],e[4]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[5]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[6]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[7]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[8],o=this.mat4[9],a=this.mat4[10],u=this.mat4[11],e[8]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[9]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[10]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[11]=i*r[3]+o*r[7]+a*r[11]+u*r[15],i=this.mat4[12],o=this.mat4[13],a=this.mat4[14],u=this.mat4[15],e[12]=i*r[0]+o*r[4]+a*r[8]+u*r[12],e[13]=i*r[1]+o*r[5]+a*r[9]+u*r[13],e[14]=i*r[2]+o*r[6]+a*r[10]+u*r[14],e[15]=i*r[3]+o*r[7]+a*r[11]+u*r[15],this.mat4=e,this},n.Matrix.prototype.scale=function(){for(var t,e,r,i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];i[0]instanceof n.Vector?(t=i[0].x,e=i[0].y,r=i[0].z):i[0]instanceof Array&&(t=i[0][0],e=i[0][1],r=i[0][2]);var a=new s(16);return a[0]=this.mat4[0]*t,a[1]=this.mat4[1]*t,a[2]=this.mat4[2]*t,a[3]=this.mat4[3]*t,a[4]=this.mat4[4]*e,a[5]=this.mat4[5]*e,a[6]=this.mat4[6]*e,a[7]=this.mat4[7]*e,a[8]=this.mat4[8]*r,a[9]=this.mat4[9]*r,a[10]=this.mat4[10]*r,a[11]=this.mat4[11]*r,a[12]=this.mat4[12],a[13]=this.mat4[13],a[14]=this.mat4[14],a[15]=this.mat4[15],this.mat4=a,this},n.Matrix.prototype.rotate=function(t,e){var r,s,a,u,l;this.p5?this.p5._angleMode===o.DEGREES&&(u=i.degreesToRadians(t)):u=t,e instanceof n.Vector?(r=e.x,s=e.y,a=e.z):e instanceof Array&&(r=e[0],s=e[1],a=e[2]),l=Math.sqrt(r*r+s*s+a*a),r*=1/l,s*=1/l,a*=1/l;var c=this.mat4[0],h=this.mat4[1],p=this.mat4[2],f=this.mat4[3],d=this.mat4[4],m=this.mat4[5],g=this.mat4[6],y=this.mat4[7],v=this.mat4[8],_=this.mat4[9],b=this.mat4[10],w=this.mat4[11],x=Math.sin(u),S=Math.cos(u),T=1-S,E=r*r*T+S,A=s*r*T+a*x,C=a*r*T-s*x,M=r*s*T-a*x,R=s*s*T+S,P=a*s*T+r*x,I=r*a*T+s*x,O=s*a*T-r*x,D=a*a*T+S;return this.mat4[0]=c*E+d*A+v*C,this.mat4[1]=h*E+m*A+_*C,this.mat4[2]=p*E+g*A+b*C,this.mat4[3]=f*E+y*A+w*C,this.mat4[4]=c*M+d*R+v*P,this.mat4[5]=h*M+m*R+_*P,this.mat4[6]=p*M+g*R+b*P,this.mat4[7]=f*M+y*R+w*P,this.mat4[8]=c*I+d*O+v*D,this.mat4[9]=h*I+m*O+_*D,this.mat4[10]=p*I+g*O+b*D,this.mat4[11]=f*I+y*O+w*D,this},n.Matrix.prototype.translate=function(t){var e=t[0],r=t[1],n=t[2]||0;this.mat4[12]=this.mat4[0]*e+this.mat4[4]*r+this.mat4[8]*n+this.mat4[12],this.mat4[13]=this.mat4[1]*e+this.mat4[5]*r+this.mat4[9]*n+this.mat4[13],this.mat4[14]=this.mat4[2]*e+this.mat4[6]*r+this.mat4[10]*n+this.mat4[14],this.mat4[15]=this.mat4[3]*e+this.mat4[7]*r+this.mat4[11]*n+this.mat4[15]},n.Matrix.prototype.rotateX=function(t){this.rotate(t,[1,0,0])},n.Matrix.prototype.rotateY=function(t){this.rotate(t,[0,1,0])},n.Matrix.prototype.rotateZ=function(t){this.rotate(t,[0,0,1])},n.Matrix.prototype.perspective=function(t,e,r,n){var i=1/Math.tan(t/2),o=1/(r-n);return this.mat4[0]=i/e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=i,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(n+r)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*n*r*o,this.mat4[15]=0,this},n.Matrix.prototype.ortho=function(t,e,r,n,i,o){var s=1/(t-e),a=1/(r-n),u=1/(i-o);return this.mat4[0]=-2*s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*u,this.mat4[11]=0,this.mat4[12]=(t+e)*s,this.mat4[13]=(n+r)*a,this.mat4[14]=(o+i)*u,this.mat4[15]=1,this},e.exports=n.Matrix},{"../core/constants":48,"../core/core":49,"../math/polargeometry":79}],35:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");n.Renderer3D.prototype.beginShape=function(t){return this.immediateMode.shapeMode=void 0!==t?t:i.LINE_STRIP,void 0===this.immediateMode.vertexPositions?(this.immediateMode.vertexPositions=[],this.immediateMode.vertexColors=[],this.immediateMode.vertexBuffer=this.GL.createBuffer(),this.immediateMode.colorBuffer=this.GL.createBuffer()):(this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0),this.isImmediateDrawing=!0,this},n.Renderer3D.prototype.vertex=function(t,e,r){this.immediateMode.vertexPositions.push(t,e,r);var n=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.vertexColors.push(n[0],n[1],n[2],n[3]),this},n.Renderer3D.prototype.endShape=function(t,e,r,n,o,s){var a=this.GL;if(this._bindImmediateBuffers(this.immediateMode.vertexPositions,this.immediateMode.vertexColors),t)if("fill"===this.drawMode)switch(this.immediateMode.shapeMode){case i.LINE_STRIP:this.immediateMode.shapeMode=i.TRIANGLE_FAN;break;case i.LINES:this.immediateMode.shapeMode=i.TRIANGLE_FAN;break;case i.TRIANGLES:this.immediateMode.shapeMode=i.TRIANGLE_FAN}else switch(this.immediateMode.shapeMode){case i.LINE_STRIP:this.immediateMode.shapeMode=i.LINE_LOOP;break;case i.LINES:this.immediateMode.shapeMode=i.LINE_LOOP}if(this.immediateMode.shapeMode===i.QUADS||this.immediateMode.shapeMode===i.QUAD_STRIP)throw new Error("sorry, "+this.immediateMode.shapeMode+" not yet implemented in webgl mode.");return a.enable(a.BLEND),a.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.vertexPositions.length/3),this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0,this.isImmediateDrawing=!1,this},n.Renderer3D.prototype._bindImmediateBuffers=function(t,e){this._setDefaultCamera();var r=this.GL,n=this._getCurShaderId(),i=this.mHash[n];return i.vertexPositionAttribute=r.getAttribLocation(i,"aPosition"),r.enableVertexAttribArray(i.vertexPositionAttribute),r.bindBuffer(r.ARRAY_BUFFER,this.immediateMode.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.DYNAMIC_DRAW),r.vertexAttribPointer(i.vertexPositionAttribute,3,r.FLOAT,!1,0,0),i.vertexColorAttribute=r.getAttribLocation(i,"aVertexColor"),r.enableVertexAttribArray(i.vertexColorAttribute),r.bindBuffer(r.ARRAY_BUFFER,this.immediateMode.colorBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.DYNAMIC_DRAW),r.vertexAttribPointer(i.vertexColorAttribute,4,r.FLOAT,!1,0,0),this._setMatrixUniforms(n),this},n.Renderer3D.prototype._getColorVertexShader=function(){var t,e=this.GL,r="immediateVert|vertexColorFrag";return this.materialInHash(r)?t=this.mHash[r]:(t=this._initShaders("immediateVert","vertexColorFrag",!0),this.mHash[r]=t,t.vertexColorAttribute=e.getAttribLocation(t,"aVertexColor"),e.enableVertexAttribArray(t.vertexColorAttribute)),t},e.exports=n.Renderer3D},{"../core/constants":48,"../core/core":49}],36:[function(t,e,r){"use strict";function n(t){return t.length>0?t.reduce(function(t,e){return t.concat(e)}):[]}function i(t){return n(t.map(function(t){return[t.x,t.y,t.z]}))}var o=t("../core/core"),s=0;o.Renderer3D.prototype._initBufferDefaults=function(t){if(s++,s>1e3){var e=Object.keys(this.gHash)[0];delete this.gHash[e],s--}var r=this.GL;this.gHash[t]={},this.gHash[t].vertexBuffer=r.createBuffer(),this.gHash[t].normalBuffer=r.createBuffer(),this.gHash[t].uvBuffer=r.createBuffer(),this.gHash[t].indexBuffer=r.createBuffer()},o.Renderer3D.prototype.createBuffers=function(t,e){var r=this.GL;this._setDefaultCamera(),this._initBufferDefaults(t);var o=this.mHash[this._getCurShaderId()];this.gHash[t].numberOfItems=3*e.faces.length,r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i(e.vertices)),r.STATIC_DRAW),o.vertexPositionAttribute=r.getAttribLocation(o,"aPosition"),r.enableVertexAttribArray(o.vertexPositionAttribute),r.vertexAttribPointer(o.vertexPositionAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].normalBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i(e.vertexNormals)),r.STATIC_DRAW),o.vertexNormalAttribute=r.getAttribLocation(o,"aNormal"),r.enableVertexAttribArray(o.vertexNormalAttribute),r.vertexAttribPointer(o.vertexNormalAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[t].uvBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(n(e.uvs)),r.STATIC_DRAW),o.textureCoordAttribute=r.getAttribLocation(o,"aTexCoord"),r.enableVertexAttribArray(o.textureCoordAttribute),r.vertexAttribPointer(o.textureCoordAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.gHash[t].indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(n(e.faces)),r.STATIC_DRAW)},o.Renderer3D.prototype.drawBuffers=function(t){this._setDefaultCamera();var e=this.GL,r=this._getCurShaderId(),n=this.mHash[r];return e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].vertexBuffer),e.vertexAttribPointer(n.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].normalBuffer),e.vertexAttribPointer(n.vertexNormalAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.gHash[t].uvBuffer),e.vertexAttribPointer(n.textureCoordAttribute,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.gHash[t].indexBuffer),this._setMatrixUniforms(r),e.drawElements(e.TRIANGLES,this.gHash[t].numberOfItems,e.UNSIGNED_SHORT,0),this},e.exports=o.Renderer3D},{"../core/core":49}],37:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./shader");t("../core/p5.Renderer"),t("./p5.Matrix");var o=[],s=1e3,a={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};n.Renderer3D=function(t,e,r){return n.Renderer.call(this,t,e,r),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this._isSetCamera=!1,this.uMVMatrix=new n.Matrix,this.uPMatrix=new n.Matrix,this.uNMatrix=new n.Matrix("mat3"),this.gHash={},this.mHash={},this.isImmediateDrawing=!1,this.immediateMode={},this.curFillColor=[.5,.5,.5,1],this.curStrokeColor=[.5,.5,.5,1],this.pointSize=5,this},n.Renderer3D.prototype=Object.create(n.Renderer.prototype),n.Renderer3D.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.Renderer3D: enabled webgl context");var t=this.drawingContext;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}catch(e){throw new Error(e)}},n.Renderer3D.prototype._setDefaultCamera=function(){if(!this._isSetCamera){var t=this.width,e=this.height;this.uPMatrix=n.Matrix.identity(),this.uPMatrix.perspective(60/180*Math.PI,t/e,.1,100),this._isSetCamera=!0}},n.Renderer3D.prototype._update=function(){this.uMVMatrix=n.Matrix.identity(),this.translate(0,0,-800),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},n.Renderer3D.prototype.background=function(){var t=this.GL,e=this._pInst.color.apply(this._pInst,arguments),r=e.levels[0]/255,n=e.levels[1]/255,i=e.levels[2]/255,o=e.levels[3]/255;t.clearColor(r,n,i,o),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},n.Renderer3D.prototype._initShaders=function(t,e,r){var n=this.GL,o=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(o,i[t]),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+n.getShaderInfoLog(o)),null;var s=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(s,i[e]),n.compileShader(s),!n.getShaderParameter(s,n.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+n.getShaderInfoLog(s)),null;var a=n.createProgram();return n.attachShader(a,o),n.attachShader(a,s),n.linkProgram(a),n.getProgramParameter(a,n.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(a,r),a},n.Renderer3D.prototype._getLocation=function(t,e){var r=this.GL;r.useProgram(t),t.uResolution=r.getUniformLocation(t,"uResolution"),r.uniform1f(t.uResolution,s),t.uPMatrixUniform=r.getUniformLocation(t,"uProjectionMatrix"),t.uMVMatrixUniform=r.getUniformLocation(t,"uModelViewMatrix"),void 0===e&&(t.uNMatrixUniform=r.getUniformLocation(t,"uNormalMatrix"),t.samplerUniform=r.getUniformLocation(t,"uSampler"))},n.Renderer3D.prototype._setUniform1f=function(t,e,r){var n=this.GL,i=this.mHash[t];return n.useProgram(i),i[e]=n.getUniformLocation(i,e),n.uniform1f(i[e],r),this},n.Renderer3D.prototype._setMatrixUniforms=function(t){var e=this.GL,r=this.mHash[t];e.useProgram(r),e.uniformMatrix4fv(r.uPMatrixUniform,!1,this.uPMatrix.mat4),e.uniformMatrix4fv(r.uMVMatrixUniform,!1,this.uMVMatrix.mat4),e.uniformMatrix3fv(r.uNMatrixUniform,!1,this.uNMatrix.mat3)},n.Renderer3D.prototype._getShader=function(t,e,r){var n=t+"|"+e;if(!this.materialInHash(n)){var i=this._initShaders(t,e,r);this.mHash[n]=i}return this.curShaderId=n,this.mHash[this.curShaderId]},n.Renderer3D.prototype._getCurShaderId=function(){var t,e;return"fill"!==this.drawMode&&void 0===this.curShaderId?(t="normalVert|normalFrag",e=this._initShaders("normalVert","normalFrag"),this.mHash[t]=e,this.curShaderId=t):this.isImmediateDrawing&&"fill"===this.drawMode&&(t="immediateVert|vertexColorFrag",e=this._initShaders("immediateVert","vertexColorFrag"),this.mHash[t]=e,this.curShaderId=t),this.curShaderId},n.Renderer3D.prototype.fill=function(t,e,r,n){var i,o=this.GL,s=this._applyColorBlend(t,e,r,n);return this.curFillColor=s,this.drawMode="fill",this.isImmediateDrawing?(i=this._getShader("immediateVert","vertexColorFrag"),o.useProgram(i)):(i=this._getShader("normalVert","basicFrag"),o.useProgram(i),i.uMaterialColor=o.getUniformLocation(i,"uMaterialColor"),o.uniform4f(i.uMaterialColor,s[0],s[1],s[2],s[3])),this},n.Renderer3D.prototype.stroke=function(t,e,r,n){var i=this._pInst.color.apply(this._pInst,arguments),o=i._array;return this.curStrokeColor=o,this.drawMode="stroke",this},n.Renderer3D.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},n.Renderer3D.prototype.strokeWeight=function(t){return this.pointSize=t,this},n.Renderer3D.prototype.geometryInHash=function(t){return void 0!==this.gHash[t]},n.Renderer3D.prototype.materialInHash=function(t){return void 0!==this.mHash[t]},n.Renderer3D.prototype.resize=function(t,e){var r=this.GL;n.Renderer.prototype.resize.call(this,t,e),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)},n.Renderer3D.prototype.clear=function(){var t=this.GL;t.clearColor(arguments[0],arguments[1],arguments[2],arguments[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},n.Renderer3D.prototype.translate=function(t,e,r){return t/=s,e=-e/s,r/=s,this.uMVMatrix.translate([t,e,r]),this},n.Renderer3D.prototype.scale=function(t,e,r){return this.uMVMatrix.scale([t,e,r]),this},n.Renderer3D.prototype.rotate=function(t,e){return this.uMVMatrix.rotate(t,e),this.uNMatrix.inverseTranspose(this.uMVMatrix),this},n.Renderer3D.prototype.rotateX=function(t){return this.rotate(t,[1,0,0]),this},n.Renderer3D.prototype.rotateY=function(t){return this.rotate(t,[0,1,0]),this},n.Renderer3D.prototype.rotateZ=function(t){return this.rotate(t,[0,0,1]),this},n.Renderer3D.prototype.push=function(){o.push(this.uMVMatrix.copy())},n.Renderer3D.prototype.pop=function(){if(0===o.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=o.pop()},n.Renderer3D.prototype._applyTextProperties=function(){console.error("text commands not yet implemented in webgl")},e.exports=n.Renderer3D},{"../core/core":49,"../core/p5.Renderer":55,"./p5.Matrix":34,"./shader":39}],38:[function(t,e,r){"use strict";var n=t("../core/core");t("./p5.Geometry"),n.prototype.plane=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0]||50,i=t[1]||r,o="number"==typeof t[2]?t[2]:1,s="number"==typeof t[3]?t[3]:1,a="plane|"+r+"|"+i+"|"+o+"|"+s;if(!this._renderer.geometryInHash(a)){var u=function(){for(var t,e,o,s=0;s<=this.detailY;s++){e=s/this.detailY;for(var a=0;a<=this.detailX;a++)t=a/this.detailX,o=new n.Vector(r*t-r/2,i*e-i/2,0),this.vertices.push(o),this.uvs.push([t,e])}},l=new n.Geometry(o,s,u);l.computeFaces().computeNormals(),this._renderer.createBuffers(a,l)}this._renderer.drawBuffers(a)},n.prototype.box=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0]||50,i=t[1]||r,o=t[2]||r,s="number"==typeof t[3]?t[3]:4,a="number"==typeof t[4]?t[4]:4,u="box|"+r+"|"+i+"|"+o+"|"+s+"|"+a;if(!this._renderer.geometryInHash(u)){var l=function(){for(var t=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]],e=0,s=0;s<t.length;s++){for(var a=t[s],u=4*s,l=0;4>l;l++){var c=a[l],h=new n.Vector((2*(1&c)-1)*r/2,((2&c)-1)*i/2,((4&c)/2-1)*o/2);this.vertices.push(h),this.uvs.push([1&l,(2&l)/2]),e++}this.faces.push([u,u+1,u+2]),this.faces.push([u+2,u+1,u+3])}},c=new n.Geometry(s,a,l);c.computeNormals(),this._renderer.createBuffers(u,c)}return this._renderer.drawBuffers(u),this},n.prototype.sphere=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0]||50,i="number"==typeof t[1]?t[1]:24,o="number"==typeof t[2]?t[2]:16,s="sphere|"+r+"|"+i+"|"+o;if(!this._renderer.geometryInHash(s)){var a=function(){for(var t,e,i,o=0;o<=this.detailY;o++){e=o/this.detailY;for(var s=0;s<=this.detailX;s++){t=s/this.detailX;var a=2*Math.PI*t,u=Math.PI*e-Math.PI/2;i=new n.Vector(r*Math.cos(u)*Math.sin(a),r*Math.sin(u),r*Math.cos(u)*Math.cos(a)),this.vertices.push(i),this.uvs.push([t,e])}}},u=new n.Geometry(i,o,a);u.computeFaces().computeNormals(),this._renderer.createBuffers(s,u)}return this._renderer.drawBuffers(s),this};var i=function(t,e,r,i,o,s,a){i=3>i?3:i,o=1>o?1:o,s=void 0===s?!0:s,a=void 0===a?!0:a;var u,l,c=(s?2:0)+(a?2:0),h=i+1,p=Math.atan2(t-e,r),f=s?-2:0,d=o+(a?2:0);for(u=f;d>=u;++u){var m,g=u/o,y=r*g;for(0>u?(y=0,g=1,m=t):u>o?(y=r,g=1,m=e):m=t+(e-t)*(u/o),-2!==u&&u!==o+2||(m=0,g=0),y-=r/2,l=0;h>l;++l)this.vertices.push(new n.Vector(Math.sin(l*Math.PI*2/i)*m,y,Math.cos(l*Math.PI*2/i)*m)),this.vertexNormals.push(new n.Vector(0>u||u>o?0:Math.sin(l*Math.PI*2/i)*Math.cos(p),0>u?-1:u>o?1:Math.sin(p),0>u||u>o?0:Math.cos(l*Math.PI*2/i)*Math.cos(p))),this.uvs.push([l/i,g])}for(u=0;o+c>u;++u)for(l=0;i>l;++l)this.faces.push([h*(u+0)+0+l,h*(u+0)+1+l,h*(u+1)+1+l]),this.faces.push([h*(u+0)+0+l,h*(u+1)+1+l,h*(u+1)+0+l])};n.prototype.cylinder=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0]||50,o=t[1]||r,s="number"==typeof t[2]?t[2]:24,a="number"==typeof t[3]?t[3]:16,u="cylinder|"+r+"|"+o+"|"+s+"|"+a;if(!this._renderer.geometryInHash(u)){var l=new n.Geometry(s,a);i.call(l,r,r,o,s,a,!0,!0),l.computeNormals(),this._renderer.createBuffers(u,l)}return this._renderer.drawBuffers(u),this},n.prototype.cone=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0]||50,o=t[1]||r,s="number"==typeof t[2]?t[2]:24,a="number"==typeof t[3]?t[3]:16,u="cone|"+r+"|"+o+"|"+s+"|"+a;if(!this._renderer.geometryInHash(u)){var l=new n.Geometry(s,a);i.call(l,r,0,o,s,a,!0,!0),l.computeNormals(),this._renderer.createBuffers(u,l)}return this._renderer.drawBuffers(u),this},n.prototype.ellipsoid=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r="number"==typeof t[2]?t[2]:24,i="number"==typeof t[3]?t[3]:24,o=t[0]||50,s=t[1]||o,a=t[2]||o,u="ellipsoid|"+o+"|"+s+"|"+a+"|"+r+"|"+i;if(!this._renderer.geometryInHash(u)){var l=function(){for(var t,e,r,i=0;i<=this.detailY;i++){e=i/this.detailY;for(var u=0;u<=this.detailX;u++){t=u/this.detailX;var l=2*Math.PI*t,c=Math.PI*e-Math.PI/2;r=new n.Vector(o*Math.cos(c)*Math.sin(l),s*Math.sin(c),a*Math.cos(c)*Math.cos(l)),this.vertices.push(r),this.uvs.push([t,e])}}},c=new n.Geometry(r,i,l);c.computeFaces().computeNormals(),this._renderer.createBuffers(u,c)}return this._renderer.drawBuffers(u),this},n.prototype.torus=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r="number"==typeof t[2]?t[2]:24,i="number"==typeof t[3]?t[3]:16,o=t[0]||50,s=t[1]||10,a="torus|"+o+"|"+s+"|"+r+"|"+i;if(!this._renderer.geometryInHash(a)){var u=function(){for(var t,e,r,i=0;i<=this.detailY;i++){e=i/this.detailY;for(var a=0;a<=this.detailX;a++){t=a/this.detailX;var u=2*Math.PI*t,l=2*Math.PI*e;r=new n.Vector((o+s*Math.cos(l))*Math.cos(u),(o+s*Math.cos(l))*Math.sin(u),s*Math.sin(l)),this.vertices.push(r),this.uvs.push([t,e])}}},l=new n.Geometry(r,i,u);l.computeFaces().computeNormals(),this._renderer.createBuffers(a,l)}return this._renderer.drawBuffers(a),this},n.Renderer3D.prototype.point=function(t,e,r){return console.log("point not yet implemented in webgl"),this},n.Renderer3D.prototype.triangle=function(t){var e=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],l=t[7],c=t[8],h="tri|"+e+"|"+r+"|"+i+"|"+o+"|"+s+"|"+a+u+"|"+l+"|"+c;if(!this.geometryInHash(h)){var p=function(){var t=[];t.push(new n.Vector(e,r,i)),t.push(new n.Vector(o,s,a)),t.push(new n.Vector(u,l,c)),this.vertices=t,this.faces=[[0,1,2]],this.uvs=[[0,0],[0,1],[1,1]]},f=new n.Geometry(1,1,p);f.computeNormals(),this.createBuffers(h,f)}return this.drawBuffers(h),this},n.Renderer3D.prototype.ellipse=function(t){var e=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5]||24,u=t[6]||16,l="ellipse|"+t[0]+"|"+t[1]+"|"+t[2]+"|"+t[3]+"|"+t[4];if(!this.geometryInHash(l)){var c=function(){for(var t,a,u,l=0;l<=this.detailY;l++){a=l/this.detailY;for(var c=0;c<=this.detailX;c++){t=c/this.detailX;var h=2*Math.PI*t;if(0===a)u=new n.Vector(e,r,i);else{var p=e+o*Math.sin(h),f=r+s*Math.cos(h),d=i;u=new n.Vector(p,f,d)}this.vertices.push(u),this.uvs.push([t,a])}}},h=new n.Geometry(a,u,c);h.computeFaces().computeNormals(),this.createBuffers(l,h)}return this.drawBuffers(l),this},n.Renderer3D.prototype.rect=function(t){var e="rect|"+t[0]+"|"+t[1]+"|"+t[2]+"|"+t[3]+"|"+t[4],r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5]||24,l=t[6]||16;if(!this.geometryInHash(e)){var c=function(){for(var t,e,u,l=0;l<=this.detailY;l++){e=l/this.detailY;for(var c=0;c<=this.detailX;c++)t=c/this.detailX,u=new n.Vector((r+s)*t,(i+a)*e,o),this.vertices.push(u),this.uvs.push([t,e])}},h=new n.Geometry(u,l,c);h.computeFaces().computeNormals(),this.createBuffers(e,h)}return this.drawBuffers(e),this},n.Renderer3D.prototype.quad=function(t){var e=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d="quad|"+e+"|"+r+"|"+i+"|"+o+"|"+s+"|"+a+u+"|"+l+"|"+c+h+"|"+p+"|"+f;
if(!this.geometryInHash(d)){var m=function(){this.vertices.push(new n.Vector(e,r,i)),this.vertices.push(new n.Vector(o,s,a)),this.vertices.push(new n.Vector(u,l,c)),this.vertices.push(new n.Vector(h,p,f))},g=new n.Geometry(2,2,m);g.computeNormals().computeUVs(),g.faces=[[0,1,2],[2,3,1]],this.createBuffers(d,g)}return this.drawBuffers(d),this},n.Renderer3D.prototype.bezier=function(t){var e=t[12]||20;this.beginShape();for(var r=[0,0,0,0],n=[0,0,0],i=0;e>=i;i++)r[0]=Math.pow(1-i/e,3),r[1]=3*(i/e)*Math.pow(1-i/e,2),r[2]=3*Math.pow(i/e,2)*(1-i/e),r[3]=Math.pow(i/e,3),n[0]=t[0]*r[0]+t[3]*r[1]+t[6]*r[2]+t[9]*r[3],n[1]=t[1]*r[0]+t[4]*r[1]+t[7]*r[2]+t[10]*r[3],n[2]=t[2]*r[0]+t[5]*r[1]+t[8]*r[2]+t[11]*r[3],this.vertex(n[0],n[1],n[2]);return this.endShape(),this},n.Renderer3D.prototype.curve=function(t){var e=t[12];this.beginShape();for(var r=[0,0,0,0],n=[0,0,0],i=0;e>=i;i++)r[0]=.5*Math.pow(i/e,3),r[1]=.5*Math.pow(i/e,2),r[2]=i/e*.5,r[3]=.5,n[0]=r[0]*(-t[0]+3*t[3]-3*t[6]+t[9])+r[1]*(2*t[0]-5*t[3]+4*t[6]-t[9])+r[2]*(-t[0]+t[6])+r[3]*(2*t[3]),n[1]=r[0]*(-t[1]+3*t[4]-3*t[7]+t[10])+r[1]*(2*t[1]-5*t[4]+4*t[7]-t[10])+r[2]*(-t[1]+t[7])+r[3]*(2*t[4]),n[2]=r[0]*(-t[2]+3*t[5]-3*t[8]+t[11])+r[1]*(2*t[2]-5*t[5]+4*t[8]-t[11])+r[2]*(-t[2]+t[8])+r[3]*(2*t[5]),this.vertex(n[0],n[1],n[2]);return this.endShape(),this},e.exports=n},{"../core/core":49,"./p5.Geometry":33}],39:[function(t,e,r){e.exports={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution *vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uResolution;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertTexCoord = aTexCoord;\n}",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uResolution;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    //loc = loc / uResolution;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n  \n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \n    }\n  }\n}"}},{}],40:[function(t,e,r){"use strict";var n=t("./core/core");t("./color/p5.Color"),t("./core/p5.Element"),t("./typography/p5.Font"),t("./core/p5.Graphics"),t("./core/p5.Renderer2D"),t("./image/p5.Image"),t("./math/p5.Vector"),t("./io/p5.TableRow"),t("./io/p5.Table"),t("./io/p5.XML"),t("./color/creating_reading"),t("./color/setting"),t("./core/constants"),t("./utilities/conversion"),t("./utilities/array_functions"),t("./utilities/string_functions"),t("./core/environment"),t("./image/image"),t("./image/loading_displaying"),t("./image/pixels"),t("./io/files"),t("./events/keyboard"),t("./events/acceleration"),t("./events/mouse"),t("./utilities/time_date"),t("./events/touch"),t("./math/math"),t("./math/calculation"),t("./math/random"),t("./math/noise"),t("./math/trigonometry"),t("./core/rendering"),t("./core/2d_primitives"),t("./core/attributes"),t("./core/curves"),t("./core/vertex"),t("./core/structure"),t("./core/transform"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./3d/p5.Renderer3D"),t("./3d/p5.Geometry"),t("./3d/p5.Renderer3D.Retained"),t("./3d/p5.Renderer3D.Immediate"),t("./3d/primitives"),t("./3d/loading"),t("./3d/p5.Matrix"),t("./3d/material"),t("./3d/light"),t("./3d/shader"),t("./3d/camera"),t("./3d/interaction");var i=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&new n};"complete"===document.readyState?i():window.addEventListener("load",i,!1),e.exports=n},{"./3d/camera":28,"./3d/interaction":29,"./3d/light":30,"./3d/loading":31,"./3d/material":32,"./3d/p5.Geometry":33,"./3d/p5.Matrix":34,"./3d/p5.Renderer3D":37,"./3d/p5.Renderer3D.Immediate":35,"./3d/p5.Renderer3D.Retained":36,"./3d/primitives":38,"./3d/shader":39,"./color/creating_reading":42,"./color/p5.Color":43,"./color/setting":44,"./core/2d_primitives":45,"./core/attributes":46,"./core/constants":48,"./core/core":49,"./core/curves":50,"./core/environment":51,"./core/p5.Element":53,"./core/p5.Graphics":54,"./core/p5.Renderer2D":56,"./core/rendering":57,"./core/structure":59,"./core/transform":60,"./core/vertex":61,"./events/acceleration":62,"./events/keyboard":63,"./events/mouse":64,"./events/touch":65,"./image/image":67,"./image/loading_displaying":68,"./image/p5.Image":69,"./image/pixels":70,"./io/files":71,"./io/p5.Table":72,"./io/p5.TableRow":73,"./io/p5.XML":74,"./math/calculation":75,"./math/math":76,"./math/noise":77,"./math/p5.Vector":78,"./math/random":80,"./math/trigonometry":81,"./typography/attributes":82,"./typography/loading_displaying":83,"./typography/p5.Font":84,"./utilities/array_functions":85,"./utilities/conversion":86,"./utilities/string_functions":87,"./utilities/time_date":88}],41:[function(t,e,r){"use strict";var n=t("../core/core");n.ColorConversion={},n.ColorConversion._hsbaToHSLA=function(t){var e=t[0],r=t[1],n=t[2],i=(2-r)*n/2;return 0!==i&&(1===i?r=0:.5>i?r/=2-r:r=r*n/(2-2*i)),[e,r,i,t[3]]},n.ColorConversion._hsbaToRGBA=function(t){var e=6*t[0],r=t[1],n=t[2],i=[];if(0===r)i=[n,n,n,t[3]];else{var o,s,a,u=Math.floor(e),l=n*(1-r),c=n*(1-r*(e-u)),h=n*(1-r*(1+u-e));0===u?(o=n,s=h,a=l):1===u?(o=c,s=n,a=l):2===u?(o=l,s=n,a=h):3===u?(o=l,s=c,a=n):4===u?(o=h,s=l,a=n):(o=n,s=l,a=c),i=[o,s,a,t[3]]}return i},n.ColorConversion._hslaToHSBA=function(t){var e,r=t[0],n=t[1],i=t[2];return e=.5>i?(1+n)*i:i+n-i*n,n=2*(e-i)/e,[r,n,e,t[3]]},n.ColorConversion._hslaToRGBA=function(t){var e=6*t[0],r=t[1],n=t[2],i=[];if(0===r)i=[n,n,n,t[3]];else{var o;o=.5>n?(1+r)*n:n+r-n*r;var s=2*n-o,a=function(t,e,r){return 0>t?t+=6:t>=6&&(t-=6),1>t?e+(r-e)*t:3>t?r:4>t?e+(r-e)*(4-t):e};i=[a(e+2,s,o),a(e,s,o),a(e-2,s,o),t[3]]}return i},n.ColorConversion._rgbaToHSBA=function(t){var e,r,n=t[0],i=t[1],o=t[2],s=Math.max(n,i,o),a=s-Math.min(n,i,o);return 0===a?(e=0,r=0):(r=a/s,n===s?e=(i-o)/a:i===s?e=2+(o-n)/a:o===s&&(e=4+(n-i)/a),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,s,t[3]]},n.ColorConversion._rgbaToHSLA=function(t){var e,r,n=t[0],i=t[1],o=t[2],s=Math.max(n,i,o),a=Math.min(n,i,o),u=s+a,l=s-a;return 0===l?(e=0,r=0):(r=1>u?l/u:l/(2-l),n===s?e=(i-o)/l:i===s?e=2+(o-n)/l:o===s&&(e=4+(n-i)/l),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,u/2,t[3]]},e.exports=n.ColorConversion},{"../core/core":49}],42:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("./p5.Color"),n.prototype.alpha=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.blue=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.brightness=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.color=function(){return arguments[0]instanceof n.Color?arguments[0]:arguments[0]instanceof Array?this instanceof n.Renderer?new n.Color(this,arguments[0]):new n.Color(this._renderer,arguments[0]):this instanceof n.Renderer?new n.Color(this,arguments):new n.Color(this._renderer,arguments)},n.prototype.green=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.hue=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getHue();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.lerpColor=function(t,e,r){var n,o,s,a,u,l,c=this._renderer._colorMode,h=this._renderer._colorMaxes;if(c===i.RGB)u=t.levels.map(function(t){return t/255}),l=e.levels.map(function(t){return t/255});else if(c===i.HSB)t._getBrightness(),e._getBrightness(),u=t.hsba,l=e.hsba;else{if(c!==i.HSL)throw new Error(c+"cannot be used for interpolation.");t._getLightness(),e._getLightness(),u=t.hsla,l=e.hsla}return r=Math.max(Math.min(r,1),0),n=this.lerp(u[0],l[0],r),o=this.lerp(u[1],l[1],r),s=this.lerp(u[2],l[2],r),a=this.lerp(u[3],l[3],r),n*=h[c][0],o*=h[c][1],s*=h[c][2],a*=h[c][3],this.color(n,o,s,a)},n.prototype.lightness=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.red=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getRed();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.saturation=function(t){if(t instanceof n.Color||t instanceof Array)return this.color(t)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.")},e.exports=n},{"../core/constants":48,"../core/core":49,"./p5.Color":43}],43:[function(t,e,r){var n=t("../core/core"),i=t("../core/constants"),o=t("./color_conversion");n.Color=function(t,e){if(this.mode=t._colorMode,this.maxes=t._colorMaxes,this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=n.Color._parseInputs.apply(t,e),this.levels=this._array.map(function(t){return Math.round(255*t)}),this},n.Color.prototype.toString=function(){var t=this.levels;return t[3]=this._array[3],"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},n.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},n.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},n.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},n.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},n.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},n.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},n.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,u=/(\d{1,3})/,l=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,c=new RegExp(l.source+"%"),h={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",l.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",c.source,",",c.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",c.source,",",c.source,",",l.source,"\\)$"].join(a.source),"i")};n.Color._parseInputs=function(){var t=arguments.length,e=this._colorMode,r=this._colorMaxes,a=[];if(t>=3)return a[0]=arguments[0]/r[e][0],a[1]=arguments[1]/r[e][1],a[2]=arguments[2]/r[e][2],"number"==typeof arguments[3]?a[3]=arguments[3]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)}),e===i.HSL?o._hslaToRGBA(a):e===i.HSB?o._hsbaToRGBA(a):a;if(1===t&&"string"==typeof arguments[0]){var u=arguments[0].trim().toLowerCase();if(s[u])return n.Color._parseInputs.apply(this,[s[u]]);if(h.HEX3.test(u))return a=h.HEX3.exec(u).slice(1).map(function(t){return parseInt(t+t,16)/255}),a[3]=1,a;if(h.HEX6.test(u))return a=h.HEX6.exec(u).slice(1).map(function(t){return parseInt(t,16)/255}),a[3]=1,a;if(h.RGB.test(u))return a=h.RGB.exec(u).slice(1).map(function(t){return t/255}),a[3]=1,a;if(h.RGB_PERCENT.test(u))return a=h.RGB_PERCENT.exec(u).slice(1).map(function(t){return parseFloat(t)/100}),a[3]=1,a;if(h.RGBA.test(u))return a=h.RGBA.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):t/255});if(h.RGBA_PERCENT.test(u))return a=h.RGBA_PERCENT.exec(u).slice(1).map(function(t,e){return 3===e?parseFloat(t):parseFloat(t)/100});if(h.HSL.test(u)?(a=h.HSL.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):h.HSLA.test(u)&&(a=h.HSLA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a.length)return o._hslaToRGBA(a);if(h.HSB.test(u)?(a=h.HSB.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):h.HSBA.test(u)&&(a=h.HSBA.exec(u).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a.length)return o._hsbaToRGBA(a);a=[1,1,1,1]}else{if(1!==t&&2!==t||"number"!=typeof arguments[0])throw new Error(arguments+"is not a valid color representation.");a[0]=arguments[0]/r[e][2],a[1]=arguments[0]/r[e][2],a[2]=arguments[0]/r[e][2],"number"==typeof arguments[1]?a[3]=arguments[1]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)})}return a},e.exports=n.Color},{"../core/constants":48,"../core/core":49,"./color_conversion":41}],44:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("./p5.Color"),n.prototype.background=function(){return arguments[0]instanceof n.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},n.prototype.clear=function(){return this._renderer.clear(),this},n.prototype.colorMode=function(){if(arguments[0]===i.RGB||arguments[0]===i.HSB||arguments[0]===i.HSL){this._renderer._colorMode=arguments[0];var t=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(t[0]=arguments[1],t[1]=arguments[1],t[2]=arguments[1],t[3]=arguments[1]):4===arguments.length?(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3]):5===arguments.length&&(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3],t[3]=arguments[4])}return this},n.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},n.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},n.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},n.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},e.exports=n},{"../core/constants":48,"../core/core":49,"./p5.Color":43}],45:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");t("./error_helpers"),n.prototype.arc=function(t,e,r,n,o,s,a){for(var u=new Array(arguments.length),l=0;l<u.length;++l)u[l]=arguments[l];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===i.DEGREES&&(o=this.radians(o),s=this.radians(s));0>o;)o+=i.TWO_PI;for(;0>s;)s+=i.TWO_PI;return o%=i.TWO_PI,s%=i.TWO_PI,s===o&&(s+=i.TWO_PI),o=o<=i.HALF_PI?Math.atan(r/n*Math.tan(o)):o>i.HALF_PI&&o<=3*i.HALF_PI?Math.atan(r/n*Math.tan(o))+i.PI:Math.atan(r/n*Math.tan(o))+i.TWO_PI,s=s<=i.HALF_PI?Math.atan(r/n*Math.tan(s)):s>i.HALF_PI&&s<=3*i.HALF_PI?Math.atan(r/n*Math.tan(s))+i.PI:Math.atan(r/n*Math.tan(s))+i.TWO_PI,o>s&&(s+=i.TWO_PI),r=Math.abs(r),n=Math.abs(n),this._renderer.arc(t,e,r,n,o,s,a),this},n.prototype.ellipse=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(t[3]<0&&(t[3]=Math.abs(t[3])),t[4]<0&&(t[4]=Math.abs(t[4]))):(t[2]<0&&(t[2]=Math.abs(t[2])),t[3]<0&&(t[3]=Math.abs(t[3]))),this._renderer._doStroke||this._renderer._doFill?(this._renderer.isP3D?this._renderer.ellipse(t):this._renderer.ellipse(t[0],t[1],t[2],t[3]),this):this},n.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.line(t[0],t[1],t[2],t[3],t[4],t[5]):this._renderer.line(t[0],t[1],t[2],t[3]),this},n.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.point(t[0],t[1],t[2]):this._renderer.point(t[0],t[1]),this},n.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]):this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this},n.prototype.rect=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?(t[3]<0&&(t[3]=Math.abs(t[3])),t[4]<0&&(t[4]=Math.abs(t[4]))):(t[2]<0&&(t[2]=Math.abs(t[2])),t[3]<0&&(t[3]=Math.abs(t[3]))),this._renderer._doStroke||this._renderer._doFill?(this._renderer.rect(t),this):void 0},n.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.triangle(t):this._renderer.triangle(t[0],t[1],t[2],t[3],t[4],t[5]),this},e.exports=n},{"./constants":48,"./core":49,"./error_helpers":52}],46:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");n.prototype.ellipseMode=function(t){return t!==i.CORNER&&t!==i.CORNERS&&t!==i.RADIUS&&t!==i.CENTER||(this._renderer._ellipseMode=t),this},n.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},n.prototype.rectMode=function(t){return t!==i.CORNER&&t!==i.CORNERS&&t!==i.RADIUS&&t!==i.CENTER||(this._renderer._rectMode=t),this},n.prototype.smooth=function(){return this._renderer.smooth(),this},n.prototype.strokeCap=function(t){return t!==i.ROUND&&t!==i.SQUARE&&t!==i.PROJECT||this._renderer.strokeCap(t),this},n.prototype.strokeJoin=function(t){return t!==i.ROUND&&t!==i.BEVEL&&t!==i.MITER||this._renderer.strokeJoin(t),this},n.prototype.strokeWeight=function(t){return this._renderer.strokeWeight(t),this},e.exports=n},{"./constants":48,"./core":49}],47:[function(t,e,r){var n=t("./constants");e.exports={modeAdjust:function(t,e,r,i,o){return o===n.CORNER?{x:t,y:e,w:r,h:i}:o===n.CORNERS?{x:t,y:e,w:r-t,h:i-e}:o===n.RADIUS?{x:t-r,y:e-i,w:2*r,h:2*i}:o===n.CENTER?{x:t-.5*r,y:e-.5*i,w:r,h:i}:void 0},arcModeAdjust:function(t,e,r,i,o){return o===n.CORNER?{x:t+.5*r,y:e+.5*i,w:r,h:i}:o===n.CORNERS?{x:t,y:e,w:r+t,h:i+e}:o===n.RADIUS?{x:t,y:e,w:2*r,h:2*i}:o===n.CENTER?{x:t,y:e,w:r,h:i}:void 0}}},{"./constants":48}],48:[function(t,e,r){var n=Math.PI;e.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:n/2,PI:n,QUARTER_PI:n/4,TAU:2*n,TWO_PI:2*n,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],49:[function(t,e,r){"use strict";t("./shim");var n=t("./constants"),i=function(t,e,r){2===arguments.length&&"boolean"==typeof e&&(r=e,e=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=e,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var t=this.preload||window.preload;if(t){var e=document.getElementById(this._loadingScreenId);if(!e){e=document.createElement("div"),e.innerHTML="Loading...",e.style.position="absolute",e.id=this._loadingScreenId;var r=this._userNode||document.body;r.appendChild(e)}for(var n in this._preloadMethods){this._preloadMethods[n]=this._preloadMethods[n]||i;var o=this._preloadMethods[n];o!==i.prototype&&o!==i||(o=this._isGlobal?window:this),this._registeredPreloadMethods[n]=o[n],o[n]=this._wrapPreload(o,n)}t(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var t=this._isGlobal?window:this;if(0===t._preloadCount){var e=document.getElementById(t._loadingScreenId);e&&e.parentNode.removeChild(e),t._setup(),t._runFrames(),t._draw()}},this._decrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone()},this._wrapPreload=function(t,e){return function(){this._incrementPreload();var r=Array.prototype.slice.call(arguments);return r.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[e].apply(t,r)}.bind(this)},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){var t=this._isGlobal?window:this;if("function"==typeof t.preload)for(var e in this._preloadMethods)t[e]=this._preloadMethods[e][e],t[e]&&this&&(t[e]=t[e].bind(this));"function"==typeof t.setup&&t.setup();for(var r=document.getElementsByTagName("canvas"),n=0;n<r.length;n++){var i=r[n];"true"===i.dataset.hidden&&(i.style.visibility="",delete i.dataset.hidden)}this._setupDone=!0}.bind(this),this._draw=function(){var t=window.performance.now(),e=t-this._lastFrameTime,r=1e3/this._targetFrameRate,n=5;(!this._loop||e>=r-n)&&(this._renderer.isP3D&&this._renderer._update(),this._setProperty("frameCount",this.frameCount+1),this._updateMouseCoords(),this._updateTouchCoords(),this.redraw(),this._frameRate=1e3/(t-this._lastFrameTime),this._lastFrameTime=t),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(t,e){this[t]=e,this._isGlobal&&(window[t]=e)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var t in this._events)window.removeEventListener(t,this._events[t]);for(var e=0;e<this._elements.length;e++){var r=this._elements[e];r.elt.parentNode&&r.elt.parentNode.removeChild(r.elt);for(var n in r._events)r.elt.removeEventListener(n,r._events[n])}var o=this;if(this._registeredMethods.remove.forEach(function(t){"undefined"!=typeof t&&t.call(o)}),this._isGlobal){for(var s in i.prototype)try{delete window[s]}catch(a){window[s]=void 0}for(var u in this)if(this.hasOwnProperty(u))try{delete window[u]}catch(a){window[u]=void 0}}}}.bind(this),this._registeredMethods.init.forEach(function(t){"undefined"!=typeof t&&t.call(this)},this);var n=this._createFriendlyGlobalFunctionBinder();if(t)t(this);else{this._isGlobal=!0;for(var o in i.prototype)if("function"==typeof i.prototype[o]){
var s=o.substring(2);this._events.hasOwnProperty(s)||n(o,i.prototype[o].bind(this))}else n(o,i.prototype[o]);for(var a in this)this.hasOwnProperty(a)&&n(a,this[a])}for(var u in this._events){var l=this["_on"+u];if(l){var c=l.bind(this);window.addEventListener(u,c),this._events[u]=c}}var h=function(){this._setProperty("focused",!0)}.bind(this),p=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",h),window.addEventListener("blur",p),this.registerMethod("remove",function(){window.removeEventListener("focus",h),window.removeEventListener("blur",p)}),r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};for(var o in n)i.prototype[o]=n[o];i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadShape:i.prototype,loadTable:i.prototype,loadFont:i.prototype},i.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},i.prototype._registeredPreloadMethods={},i.prototype.registerPreloadMethod=function(t,e){i.prototype._preloadMethods.hasOwnProperty(t)||(i.prototype._preloadMethods[t]=e)},i.prototype.registerMethod=function(t,e){i.prototype._registeredMethods.hasOwnProperty(t)||(i.prototype._registeredMethods[t]=[]),i.prototype._registeredMethods[t].push(e)},i.prototype._createFriendlyGlobalFunctionBinder=function(t){t=t||{};var e=t.globalObject||window,r=t.log||console.log.bind(console),n={print:!0};return function(t,o){if("undefined"!=typeof IS_MINIFIED||"function"!=typeof o||t in i.prototype._preloadMethods)e[t]=o;else try{if(t in e&&!(t in n))throw new Error('global "'+t+'" already exists');Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o},set:function(n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}),r('You just changed the value of "'+t+"\", which was a p5 function. This could cause problems later if you're not careful.")}})}catch(s){r('p5 had problems creating the global function "'+t+'", possibly because your code is already using that name as a variable. You may want to rename your variable to something else.'),e[t]=o}}},e.exports=i},{"./constants":48,"./shim":58}],50:[function(t,e,r){"use strict";var n=t("./core");t("./error_helpers");var i=20,o=20;n.prototype.bezier=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._validateParameters("bezier",t,["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]):this._validateParameters("bezier",t,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.isP3D?(t.push(i),this._renderer.bezier(t)):this._renderer.bezier(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},n.prototype.bezierDetail=function(t){return i=t,this},n.prototype.bezierPoint=function(t,e,r,n,i){var o=1-i;return Math.pow(o,3)*t+3*Math.pow(o,2)*i*e+3*o*Math.pow(i,2)*r+Math.pow(i,3)*n},n.prototype.bezierTangent=function(t,e,r,n,i){var o=1-i;return 3*n*Math.pow(i,2)-3*r*Math.pow(i,2)+6*r*o*i-6*e*o*i+3*e*Math.pow(o,2)-3*t*Math.pow(o,2)},n.prototype.curve=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._validateParameters("curve",t,["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]):this._validateParameters("curve",t,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.isP3D?(t.push(o),this._renderer.curve(t)):this._renderer.curve(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},n.prototype.curveDetail=function(t){return o=t,this},n.prototype.curveTightness=function(t){this._renderer._curveTightness=t},n.prototype.curvePoint=function(t,e,r,n,i){var o=i*i*i,s=i*i,a=-.5*o+s-.5*i,u=1.5*o-2.5*s+1,l=-1.5*o+2*s+.5*i,c=.5*o-.5*s;return t*a+e*u+r*l+n*c},n.prototype.curveTangent=function(t,e,r,n,i){var o=i*i,s=-3*o/2+2*i-.5,a=9*o/2-5*i,u=-9*o/2+4*i+.5,l=3*o/2-i;return t*s+e*a+r*u+n*l},e.exports=n},{"./core":49,"./error_helpers":52}],51:[function(t,e,r){"use strict";function n(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!e)throw new Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function i(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var o=t("./core"),s=t("./constants"),a=[s.ARROW,s.CROSS,s.HAND,s.MOVE,s.TEXT,s.WAIT];o.prototype._frameRate=0,o.prototype._lastFrameTime=window.performance.now(),o.prototype._targetFrameRate=60,window.console&&console.log?o.prototype.print=function(t){try{var e=JSON.parse(JSON.stringify(t));console.log(e)}catch(r){console.log(t)}}:o.prototype.print=function(){},o.prototype.println=o.prototype.print,o.prototype.frameCount=0,o.prototype.focused=document.hasFocus(),o.prototype.cursor=function(t,e,r){var n="auto",i=this._curElement.elt;if(a.indexOf(t)>-1)n=t;else if("string"==typeof t){var o="";e&&r&&"number"==typeof e&&"number"==typeof r&&(o=e+" "+r),n="http://"!==t.substring(0,6)?"url("+t+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url("+t+") "+o+", auto":t}i.style.cursor=n},o.prototype.frameRate=function(t){return"number"!=typeof t||0>=t?this._frameRate:(this._setProperty("_targetFrameRate",t),this._runFrames(),this)},o.prototype.getFrameRate=function(){return this.frameRate()},o.prototype.setFrameRate=function(t){return this.frameRate(t)},o.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.prototype.displayWidth=screen.width,o.prototype.displayHeight=screen.height,o.prototype.windowWidth=window.innerWidth,o.prototype.windowHeight=window.innerHeight,o.prototype._onresize=function(t){this._setProperty("windowWidth",window.innerWidth),this._setProperty("windowHeight",window.innerHeight);var e,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(e=r.windowResized(t),void 0===e||e||t.preventDefault())},o.prototype.width=0,o.prototype.height=0,o.prototype.fullscreen=function(t){return"undefined"==typeof t?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(t?n(document.documentElement):i())},o.prototype.pixelDensity=function(t){return"number"!=typeof t?this._pixelDensity:(this._pixelDensity=t,void this.resizeCanvas(this.width,this.height,!0))},o.prototype.displayDensity=function(){return window.devicePixelRatio},o.prototype.getURL=function(){return location.href},o.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},o.prototype.getURLParams=function(){for(var t,e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,r[t[1]]=t[2];return r},e.exports=o},{"./constants":48,"./core":49}],52:[function(t,e,r){"use strict";function n(t,e,r){if(t.match(/^p5\./)){var n=t.split(".");return r instanceof u[n[1]]}return"Boolean"===t||t.toLowerCase()===e||y.indexOf(t)>-1&&g(r)}function i(t,e,r){l&&(o(),l=!1),"undefined"===d(r)?r="#B40033":"number"===d(r)&&(r=x[r])}function o(){var t="transparent",e="#ED225D",r="#ED225D",n="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using “p5.min.js”.","background-color:"+t+";color:"+e+";","background-color:"+r+";color:"+n+";")}function s(){var e={},r=function(t){return Object.getOwnPropertyNames(t).filter(function(t){return"_"===t[0]?!1:t in e?!1:(e[t]=!0,!0)}).map(function(e){var r;return r="function"==typeof t[e]?"function":e===e.toUpperCase()?"constant":"variable",{name:e,type:r}})};T=[].concat(r(u.prototype),r(t("./constants"))),T.sort(function(t,e){return e.name.length-t.name.length})}function a(t,e){e||(e=console.log.bind(console)),T||s(),T.some(function(r){return t.message&&-1!==t.message.indexOf(r.name)?(e("%cDid you just try to use p5.js's "+r.name+("function"===r.type?"() ":" ")+r.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+E,"color: #B40033"),!0):void 0})}for(var u=t("./core"),l=!1,c={},h=c.toString,p=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],f=0;f<p.length;f++)c["[object "+p[f]+"]"]=p[f].toLowerCase();var d=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[h.call(t)]||"object":typeof t},m=Array.isArray||function(t){return"array"===d(t)},g=function(t){return!m(t)&&t-parseFloat(t)+1>=0},y=["Number","Integer","Number/Constant"],v=0,_=1,b=2,w=3,x=["#2D7BB6","#EE9900","#4DB200","#C83C00"];u.prototype._validateParameters=function(t,e,r){m(r[0])||(r=[r]);for(var o,s=Math.abs(e.length-r[0].length),a=0,u=1,l=r.length;l>u;u++){var c=Math.abs(e.length-r[u].length);s>=c&&(a=u,s=c)}var h="X";s>0&&(o="You wrote "+t+"(",e.length>0&&(o+=h+Array(e.length).join(","+h)),o+="). "+t+" was expecting "+r[a].length+" parameters. Try "+t+"(",r[a].length>0&&(o+=h+Array(r[a].length).join(","+h)),o+=").",r.length>1&&(o+=" "+t+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),i(o,t,v));for(var p=0;p<r.length;p++)for(var f=0;f<r[p].length&&f<e.length;f++){var g=r[p][f],y=d(e[f]);"undefined"===y||null===y?i("It looks like "+t+" received an empty variable in spot #"+(f+1)+". If not intentional, this is often a problem with scope: [link to scope].",t,_):"*"===g||n(g,y,e[f])||(o=t+" was expecting a "+g.toLowerCase()+" for parameter #"+(f+1)+", received ",o+="string"===y?'"'+e[f]+'"':e[f],o+=" instead.",r.length>1&&(o+=" "+t+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),i(o,t,b))}},u.prototype._validateParameters=function(){return!0};var S={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"}};u._friendlyFileLoadError=function(t,e){var r=S[t],n="It looks like there was a problem loading your "+r.fileType+". Try checking if the file path%c ["+e+"] %cis correct,"+(r.message||"")+" or running a local server.";i(n,r.method,w)};var T=null,E="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";u.prototype._helpForMisusedAtTopLevelCode=a,"complete"!==document.readyState&&(window.addEventListener("error",a,!1),window.addEventListener("load",function(){window.removeEventListener("error",a,!1)})),e.exports=u},{"./constants":48,"./core":49}],53:[function(t,e,r){function n(t,e,r){var n=e.bind(r);r.elt.addEventListener(t,n,!1),r._events[t]=n}var i=t("./core");i.Element=function(t,e){this.elt=t,this._pInst=e,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},i.Element.prototype.parent=function(t){return 0===arguments.length?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof i.Element&&(t=t.elt),t.appendChild(this.elt),this)},i.Element.prototype.id=function(t){return 0===arguments.length?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},i.Element.prototype["class"]=function(t){return 0===arguments.length?this.elt.className:(this.elt.className=t,this)},i.Element.prototype.mousePressed=function(t){return n("mousedown",t,this),n("touchstart",t,this),this},i.Element.prototype.mouseWheel=function(t){return n("wheel",t,this),this},i.Element.prototype.mouseReleased=function(t){return n("mouseup",t,this),n("touchend",t,this),this},i.Element.prototype.mouseClicked=function(t){return n("click",t,this),this},i.Element.prototype.mouseMoved=function(t){return n("mousemove",t,this),n("touchmove",t,this),this},i.Element.prototype.mouseOver=function(t){return n("mouseover",t,this),this},i.Element.prototype.changed=function(t){return n("change",t,this),this},i.Element.prototype.input=function(t){return n("input",t,this),this},i.Element.prototype.mouseOut=function(t){return n("mouseout",t,this),this},i.Element.prototype.touchStarted=function(t){return n("touchstart",t,this),n("mousedown",t,this),this},i.Element.prototype.touchMoved=function(t){return n("touchmove",t,this),n("mousemove",t,this),this},i.Element.prototype.touchEnded=function(t){return n("touchend",t,this),n("mouseup",t,this),this},i.Element.prototype.dragOver=function(t){return n("dragover",t,this),this},i.Element.prototype.dragLeave=function(t){return n("dragleave",t,this),this},i.Element.prototype.drop=function(t,e){function r(e){var r=new i.File(e);return function(e){r.data=e.target.result,t(r)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(n("dragover",function(t){t.stopPropagation(),t.preventDefault()},this),n("dragleave",function(t){t.stopPropagation(),t.preventDefault()},this),arguments.length>1&&n("drop",e,this),n("drop",function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer.files,n=0;n<e.length;n++){var i=e[n],o=new FileReader;o.onload=r(i),i.type.indexOf("text")>-1?o.readAsText(i):o.readAsDataURL(i)}},this)):console.log("The File APIs are not fully supported in this browser."),this},i.Element.prototype._setProperty=function(t,e){this[t]=e},e.exports=i.Element},{"./core":49}],54:[function(t,e,r){var n=t("./core"),i=t("./constants");n.Graphics=function(t,e,r,o){var s=r||i.P2D,a=document.createElement("canvas"),u=this._userNode||document.body;u.appendChild(a),n.Element.call(this,a,o,!1),this._styles=[],this.width=t,this.height=e,this._pixelDensity=o._pixelDensity,s===i.WEBGL?this._renderer=new n.Renderer3D(a,this,!1):this._renderer=new n.Renderer2D(a,this,!1),this._renderer.resize(t,e),this._renderer._applyDefaults(),o._elements.push(this);for(var l in n.prototype)this[l]||("function"==typeof n.prototype[l]?this[l]=n.prototype[l].bind(this):this[l]=n.prototype[l]);return this},n.Graphics.prototype=Object.create(n.Element.prototype),e.exports=n.Graphics},{"./constants":48,"./core":49}],55:[function(t,e,r){function n(t){var e=0,r=0;if(t.offsetParent){do e+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent)}else e+=t.offsetLeft,r+=t.offsetTop;return[e,r]}var i=t("./core"),o=t("../core/constants");i.Renderer=function(t,e,r){i.Element.call(this,t,e),this.canvas=t,this._pInst=e,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},i.Renderer.prototype=Object.create(i.Element.prototype),i.Renderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=e*this._pInst._pixelDensity,this.elt.style.width=t+"px",this.elt.style.height=e+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},i.Renderer.prototype.textLeading=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",t),this):this._textLeading},i.Renderer.prototype.textSize=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textSize",t),this._setProperty("_textLeading",t*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},i.Renderer.prototype.textStyle=function(t){return arguments.length&&arguments[0]?(t!==o.NORMAL&&t!==o.ITALIC&&t!==o.BOLD||this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},i.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},i.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},i.Renderer.prototype._applyDefaults=function(){return this},i.Renderer.prototype._isOpenType=function(t){return t=t||this._textFont,"object"==typeof t&&t.font&&t.font.supported},i.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize=this._textSize+"px",t.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block",e.style.width="1px",e.style.height="0px";var r=document.createElement("div");r.appendChild(t),r.appendChild(e),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),e.style.verticalAlign="baseline";var i=n(e),o=n(t),s=i[1]-o[1];e.style.verticalAlign="bottom",i=n(e),o=n(t);var a=i[1]-o[1],u=a-s;return document.body.removeChild(r),this._setProperty("_textAscent",s),this._setProperty("_textDescent",u),this},e.exports=i.Renderer},{"../core/constants":48,"./core":49}],56:[function(t,e,r){var n=t("./core"),i=t("./canvas"),o=t("./constants"),s=t("../image/filters");t("./p5.Renderer");var a="rgba(0,0,0,0)";n.Renderer2D=function(t,e,r){return n.Renderer.call(this,t,e,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.Renderer2D.prototype=Object.create(n.Renderer.prototype),n.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=o._DEFAULT_FILL,this.drawingContext.strokeStyle=o._DEFAULT_STROKE,this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.Renderer2D.prototype.resize=function(t,e){n.Renderer.prototype.resize.call(this,t,e),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof n.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var t=this.drawingContext.fillStyle,e=this._pInst.color.apply(this,arguments),r=e.toString();this.drawingContext.fillStyle=r,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=t}this.drawingContext.restore()},n.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},n.Renderer2D.prototype.fill=function(){var t=this.drawingContext,e=this._pInst.color.apply(this,arguments);t.fillStyle=e.toString()},n.Renderer2D.prototype.stroke=function(){var t=this.drawingContext,e=this._pInst.color.apply(this,arguments);t.strokeStyle=e.toString()},n.Renderer2D.prototype.image=function(t,e,r,i,o,s,a,u,l){var c;try{this._tint&&(n.MediaElement&&t instanceof n.MediaElement&&t.loadPixels(),t.canvas&&(c=this._getTintedImageCanvas(t))),c||(c=t.canvas||t.elt),this.drawingContext.drawImage(c,e,r,i,o,s,a,u,l)}catch(h){if("NS_ERROR_NOT_AVAILABLE"!==h.name)throw h}},n.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=s._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var n=r.getContext("2d"),i=n.createImageData(t.canvas.width,t.canvas.height),o=i.data,a=0;a<e.length;a+=4){var u=e[a],l=e[a+1],c=e[a+2],h=e[a+3];o[a]=u*this._tint[0]/255,o[a+1]=l*this._tint[1]/255,o[a+2]=c*this._tint[2]/255,o[a+3]=h*this._tint[3]/255}return n.putImageData(i,0,0),r},n.Renderer2D.prototype.blendMode=function(t){this.drawingContext.globalCompositeOperation=t},n.Renderer2D.prototype.blend=function(){var t=this.drawingContext.globalCompositeOperation,e=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=e,this._pInst?this._pInst.copy.apply(this._pInst,r):this.copy.apply(this,r),this.drawingContext.globalCompositeOperation=t},n.Renderer2D.prototype.copy=function(){var t,e,r,i,o,s,a,u,l;if(9===arguments.length)t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],u=arguments[7],l=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this._pInst,e=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],u=arguments[6],l=arguments[7]}n.Renderer2D._copyHelper(t,e,r,i,o,s,a,u,l)},n.Renderer2D._copyHelper=function(t,e,r,n,i,o,s,a,u){var l=t.canvas.width/t.width;this.drawingContext.drawImage(t.canvas,l*e,l*r,l*n,l*i,o,s,a,u)},n.Renderer2D.prototype.get=function(t,e,r,i){if(void 0===t&&void 0===e&&void 0===r&&void 0===i?(t=0,e=0,r=this.width,i=this.height):void 0===r&&void 0===i&&(r=1,i=1),0>t+r||0>e+i||t>this.width||e>this.height)return[0,0,0,255];var o=this._pInst||this,s=o._pixelDensity;if(this.loadPixels.call(o),t=Math.floor(t),e=Math.floor(e),1===r&&1===i)return[o.pixels[4*s*(e*this.width+t)],o.pixels[s*(4*(e*this.width+t)+1)],o.pixels[s*(4*(e*this.width+t)+2)],o.pixels[s*(4*(e*this.width+t)+3)]];var a=t*s,u=e*s,l=Math.min(r,o.width),c=Math.min(i,o.height),h=l*s,p=c*s,f=new n.Image(l,c);return f.canvas.getContext("2d").drawImage(this.canvas,a,u,h,p,0,0,l,c),f},n.Renderer2D.prototype.loadPixels=function(){var t=this._pixelDensity||this._pInst._pixelDensity,e=this.width*t,r=this.height*t,n=this.drawingContext.getImageData(0,0,e,r);this._pInst?(this._pInst._setProperty("imageData",n),this._pInst._setProperty("pixels",n.data)):(this._setProperty("imageData",n),this._setProperty("pixels",n.data))},n.Renderer2D.prototype.set=function(t,e,r){if(t=Math.floor(t),e=Math.floor(e),r instanceof n.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(r.canvas,t,e),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var i=this._pInst||this,o=0,s=0,a=0,u=0,l=4*(e*i._pixelDensity*(this.width*i._pixelDensity)+t*i._pixelDensity);if(i.imageData||i.loadPixels.call(i),"number"==typeof r)l<i.pixels.length&&(o=r,s=r,a=r,u=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<i.pixels.length&&(o=r[0],s=r[1],a=r[2],u=r[3])}else r instanceof n.Color&&l<i.pixels.length&&(o=r.levels[0],s=r.levels[1],a=r.levels[2],u=r.levels[3]);for(var c=0;c<i._pixelDensity;c++)for(var h=0;h<i._pixelDensity;h++)l=4*((e*i._pixelDensity+h)*this.width*i._pixelDensity+(t*i._pixelDensity+c)),i.pixels[l]=o,i.pixels[l+1]=s,i.pixels[l+2]=a,i.pixels[l+3]=u}},n.Renderer2D.prototype.updatePixels=function(t,e,r,n){var i=this._pixelDensity||this._pInst._pixelDensity;void 0===t&&void 0===e&&void 0===r&&void 0===n&&(t=0,e=0,r=this.width,n=this.height),r*=i,n*=i,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,t,e,0,0,r,n):this.drawingContext.putImageData(this.imageData,t,e,0,0,r,n)},n.Renderer2D.prototype._acuteArcToBezier=function(t,e){var r=e/2,n=Math.cos(r),i=Math.sin(r),o=1/Math.tan(r),s=t+r,a=Math.cos(s),u=Math.sin(s),l=(4-n)/3,c=i+(n-l)*o;return{ax:Math.cos(t),ay:Math.sin(t),bx:l*a+c*u,by:l*u-c*a,cx:l*a-c*u,cy:l*u+c*a,dx:Math.cos(t+e),dy:Math.sin(t+e)}},n.Renderer2D.prototype.arc=function(t,e,r,n,s,a,u){for(var l=this.drawingContext,c=i.arcModeAdjust(t,e,r,n,this._ellipseMode),h=c.w/2,p=c.h/2,f=1e-5,d=0,m=[];a-s>f;)d=Math.min(a-s,o.HALF_PI),m.push(this._acuteArcToBezier(s,d)),s+=d;return this._doFill&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(c.x+t.ax*h,c.y+t.ay*p),l.bezierCurveTo(c.x+t.bx*h,c.y+t.by*p,c.x+t.cx*h,c.y+t.cy*p,c.x+t.dx*h,c.y+t.dy*p)}),u!==o.PIE&&null!=u||l.lineTo(c.x,c.y),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(c.x+t.ax*h,c.y+t.ay*p),l.bezierCurveTo(c.x+t.bx*h,c.y+t.by*p,c.x+t.cx*h,c.y+t.cy*p,c.x+t.dx*h,c.y+t.dy*p)}),u===o.PIE?(l.lineTo(c.x,c.y),l.closePath()):u===o.CHORD&&l.closePath(),l.stroke()),this},n.Renderer2D.prototype.ellipse=function(t,e,r,n){var o=this.drawingContext,s=this._doFill,u=this._doStroke;if(s&&!u){if(o.fillStyle===a)return this}else if(!s&&u&&o.strokeStyle===a)return this;var l=i.modeAdjust(t,e,r,n,this._ellipseMode),c=.5522847498,h=l.w/2*c,p=l.h/2*c,f=l.x+l.w,d=l.y+l.h,m=l.x+l.w/2,g=l.y+l.h/2;o.beginPath(),o.moveTo(l.x,g),o.bezierCurveTo(l.x,g-p,m-h,l.y,m,l.y),o.bezierCurveTo(m+h,l.y,f,g-p,f,g),o.bezierCurveTo(f,g+p,m+h,d,m,d),o.bezierCurveTo(m-h,d,l.x,g+p,l.x,g),o.closePath(),s&&o.fill(),u&&o.stroke()},n.Renderer2D.prototype.line=function(t,e,r,n){var i=this.drawingContext;return this._doStroke?i.strokeStyle===a?this:(i.lineWidth%2===1&&i.translate(.5,.5),i.beginPath(),i.moveTo(t,e),i.lineTo(r,n),i.stroke(),i.lineWidth%2===1&&i.translate(-.5,-.5),this):this},n.Renderer2D.prototype.point=function(t,e){var r=this.drawingContext,n=r.strokeStyle,i=r.fillStyle;return this._doStroke?r.strokeStyle===a?this:(t=Math.round(t),e=Math.round(e),r.fillStyle=n,r.lineWidth>1?(r.beginPath(),r.arc(t,e,r.lineWidth/2,0,o.TWO_PI,!1),r.fill()):r.fillRect(t,e,1,1),void(r.fillStyle=i)):this},n.Renderer2D.prototype.quad=function(t,e,r,n,i,o,s,u){var l=this.drawingContext,c=this._doFill,h=this._doStroke;if(c&&!h){if(l.fillStyle===a)return this}else if(!c&&h&&l.strokeStyle===a)return this;return l.beginPath(),l.moveTo(t,e),l.lineTo(r,n),l.lineTo(i,o),l.lineTo(s,u),l.closePath(),c&&l.fill(),h&&l.stroke(),this},n.Renderer2D.prototype.rect=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=this.drawingContext,p=this._doFill,f=this._doStroke;if(p&&!f){if(h.fillStyle===a)return this}else if(!p&&f&&h.strokeStyle===a)return this;var d=i.modeAdjust(e,r,n,o,this._rectMode);if(this._doStroke&&h.lineWidth%2===1&&h.translate(.5,.5),h.beginPath(),"undefined"==typeof s)h.rect(d.x,d.y,d.w,d.h);else{"undefined"==typeof u&&(u=s),"undefined"==typeof l&&(l=u),"undefined"==typeof c&&(c=l);var m=d.x,g=d.y,y=d.w,v=d.h,_=y/2,b=v/2;2*s>y&&(s=_),2*s>v&&(s=b),2*u>y&&(u=_),2*u>v&&(u=b),2*l>y&&(l=_),2*l>v&&(l=b),2*c>y&&(c=_),2*c>v&&(c=b),h.beginPath(),h.moveTo(m+s,g),h.arcTo(m+y,g,m+y,g+v,u),h.arcTo(m+y,g+v,m,g+v,l),h.arcTo(m,g+v,m,g,c),h.arcTo(m,g,m+y,g,s),h.closePath()}return this._doFill&&h.fill(),this._doStroke&&h.stroke(),this._doStroke&&h.lineWidth%2===1&&h.translate(-.5,-.5),this},n.Renderer2D.prototype.triangle=function(t,e,r,n,i,o){var s=this.drawingContext,u=this._doFill,l=this._doStroke;if(u&&!l){if(s.fillStyle===a)return this}else if(!u&&l&&s.strokeStyle===a)return this;s.beginPath(),s.moveTo(t,e),s.lineTo(r,n),s.lineTo(i,o),s.closePath(),u&&s.fill(),l&&s.stroke()},n.Renderer2D.prototype.endShape=function(t,e,r,n,i,s,a){if(0===e.length)return this;if(!this._doStroke&&!this._doFill)return this;var u,l=t===o.CLOSE;l&&!s&&e.push(e[0]);var c,h,p=e.length;if(!r||a!==o.POLYGON&&null!==a)if(!n||a!==o.POLYGON&&null!==a)if(!i||a!==o.POLYGON&&null!==a)if(a===o.POINTS)for(c=0;p>c;c++)u=e[c],this._doStroke&&this._pInst.stroke(u[6]),this._pInst.point(u[0],u[1]);else if(a===o.LINES)for(c=0;p>c+1;c+=2)u=e[c],this._doStroke&&this._pInst.stroke(e[c+1][6]),this._pInst.line(u[0],u[1],e[c+1][0],e[c+1][1]);else if(a===o.TRIANGLES)for(c=0;p>c+2;c+=3)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(e[c+2][0],e[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this._doFill&&(this._pInst.fill(e[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(e[c+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===o.TRIANGLE_STRIP)for(c=0;p>c+1;c++)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doStroke&&this._pInst.stroke(e[c+1][6]),this._doFill&&this._pInst.fill(e[c+1][5]),p>c+2&&(this.drawingContext.lineTo(e[c+2][0],e[c+2][1]),this._doStroke&&this._pInst.stroke(e[c+2][6]),this._doFill&&this._pInst.fill(e[c+2][5])),this._doFillStrokeClose();else if(a===o.TRIANGLE_FAN){if(p>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[1][0],e[1][1]),this.drawingContext.lineTo(e[2][0],e[2][1]),this._doFill&&this._pInst.fill(e[2][5]),this._doStroke&&this._pInst.stroke(e[2][6]),this._doFillStrokeClose(),c=3;p>c;c++)u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[c-1][0],e[c-1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(u[5]),this._doStroke&&this._pInst.stroke(u[6]),this._doFillStrokeClose()}else if(a===o.QUADS)for(c=0;p>c+3;c+=4){for(u=e[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),h=1;4>h;h++)this.drawingContext.lineTo(e[c+h][0],e[c+h][1]);this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(e[c+3][5]),this._doStroke&&this._pInst.stroke(e[c+3][6]),this._doFillStrokeClose()}else if(a===o.QUAD_STRIP){if(p>3)for(c=0;p>c+1;c+=2)u=e[c],this.drawingContext.beginPath(),p>c+3?(this.drawingContext.moveTo(e[c+2][0],e[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this.drawingContext.lineTo(e[c+3][0],e[c+3][1]),this._doFill&&this._pInst.fill(e[c+3][5]),this._doStroke&&this._pInst.stroke(e[c+3][6])):(this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(e[c+1][0],e[c+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),c=1;p>c;c++)u=e[c],u.isVert&&(u.moveTo?this.drawingContext.moveTo(u[0],u[1]):this.drawingContext.lineTo(u[0],u[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;p>c;c++)e[c].isVert?e[c].moveTo?this.drawingContext.moveTo([0],e[c][1]):this.drawingContext.lineTo(e[c][0],e[c][1]):this.drawingContext.quadraticCurveTo(e[c][0],e[c][1],e[c][2],e[c][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;p>c;c++)e[c].isVert?e[c].moveTo?this.drawingContext.moveTo(e[c][0],e[c][1]):this.drawingContext.lineTo(e[c][0],e[c][1]):this.drawingContext.bezierCurveTo(e[c][0],e[c][1],e[c][2],e[c][3],e[c][4],e[c][5]);this._doFillStrokeClose()}else if(p>3){var f=[],d=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[1][0],e[1][1]),c=1;p>c+2;c++)u=e[c],f[0]=[u[0],u[1]],f[1]=[u[0]+(d*e[c+1][0]-d*e[c-1][0])/6,u[1]+(d*e[c+1][1]-d*e[c-1][1])/6],f[2]=[e[c+1][0]+(d*e[c][0]-d*e[c+2][0])/6,e[c+1][1]+(d*e[c][1]-d*e[c+2][1])/6],f[3]=[e[c+1][0],e[c+1][1]],this.drawingContext.bezierCurveTo(f[1][0],f[1][1],f[2][0],f[2][1],f[3][0],f[3][1]);l&&this.drawingContext.lineTo(e[c+1][0],e[c+1][1]),this._doFillStrokeClose()}return r=!1,n=!1,i=!1,s=!1,l&&e.pop(),this},n.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},n.Renderer2D.prototype.smooth=function(){
return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},n.Renderer2D.prototype.strokeCap=function(t){return t!==o.ROUND&&t!==o.SQUARE&&t!==o.PROJECT||(this.drawingContext.lineCap=t),this},n.Renderer2D.prototype.strokeJoin=function(t){return t!==o.ROUND&&t!==o.BEVEL&&t!==o.MITER||(this.drawingContext.lineJoin=t),this},n.Renderer2D.prototype.strokeWeight=function(t){return"undefined"==typeof t||0===t?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=t,this},n.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},n.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},n.Renderer2D.prototype.bezier=function(t,e,r,n,i,o,s,a){return this._pInst.beginShape(),this._pInst.vertex(t,e),this._pInst.bezierVertex(r,n,i,o,s,a),this._pInst.endShape(),this},n.Renderer2D.prototype.curve=function(t,e,r,n,i,o,s,a){return this._pInst.beginShape(),this._pInst.curveVertex(t,e),this._pInst.curveVertex(r,n),this._pInst.curveVertex(i,o),this._pInst.curveVertex(s,a),this._pInst.endShape(),this},n.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},n.Renderer2D.prototype.applyMatrix=function(t,e,r,n,i,o){this.drawingContext.transform(t,e,r,n,i,o)},n.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.Renderer2D.prototype.rotate=function(t){this.drawingContext.rotate(t)},n.Renderer2D.prototype.scale=function(t,e){return this.drawingContext.scale(t,e),this},n.Renderer2D.prototype.shearX=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,0,this._pInst.tan(t),1,0,0),this},n.Renderer2D.prototype.shearY=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,this._pInst.tan(t),0,1,0,0),this},n.Renderer2D.prototype.translate=function(t,e){return this.drawingContext.translate(t,e),this},n.Renderer2D.prototype.text=function(t,e,r,n,i){var s,a,u,l,c,h,p,f,d,m,g=this._pInst,y=Number.MAX_VALUE;if(this._doFill||this._doStroke){if("string"!=typeof t&&(t=t.toString()),t=t.replace(/(\t)/g,"  "),s=t.split("\n"),"undefined"!=typeof n){for(d=0,u=0;u<s.length;u++)for(c="",f=s[u].split(" "),a=0;a<f.length;a++)h=c+f[a]+" ",p=this.textWidth(h),p>n?(c=f[a]+" ",d+=g.textLeading()):c=h;switch(this._rectMode===o.CENTER&&(e-=n/2,r-=i/2),this.drawingContext.textAlign){case o.CENTER:e+=n/2;break;case o.RIGHT:e+=n}if("undefined"!=typeof i){switch(this.drawingContext.textBaseline){case o.BOTTOM:r+=i-d;break;case o._CTX_MIDDLE:r+=(i-d)/2;break;case o.BASELINE:m=!0,this.drawingContext.textBaseline=o.TOP}y=r+i-g.textAscent()}for(u=0;u<s.length;u++){for(c="",f=s[u].split(" "),a=0;a<f.length;a++)h=c+f[a]+" ",p=this.textWidth(h),p>n&&c.length>0?(this._renderText(g,c,e,r,y),c=f[a]+" ",r+=g.textLeading()):c=h;this._renderText(g,c,e,r,y),r+=g.textLeading()}}else{var v=(.5*s.length-.5)*g.textLeading();for(l=0;l<s.length;l++)this._renderText(g,s[l],e,r-v,y),r+=g.textLeading()}return m&&(this.drawingContext.textBaseline=o.BASELINE),g}},n.Renderer2D.prototype._renderText=function(t,e,r,n,i){return n>=i?void 0:(t.push(),this._isOpenType()?this._textFont._renderPath(e,r,n,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(e,r,n),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:o._DEFAULT_TEXT_FILL,this.drawingContext.fillText(e,r,n))),t.pop(),t)},n.Renderer2D.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t):this.drawingContext.measureText(t).width},n.Renderer2D.prototype.textAlign=function(t,e){if(arguments.length)return t!==o.LEFT&&t!==o.RIGHT&&t!==o.CENTER||(this.drawingContext.textAlign=t),e!==o.TOP&&e!==o.BOTTOM&&e!==o.CENTER&&e!==o.BASELINE||(e===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=e),this._pInst;var r=this.drawingContext.textBaseline;return r===o._CTX_MIDDLE&&(r=o.CENTER),{horizontal:this.drawingContext.textAlign,vertical:r}},n.Renderer2D.prototype._applyTextProperties=function(){var t,e=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+t,e},n.Renderer2D.prototype.push=function(){this.drawingContext.save()},n.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},e.exports=n.Renderer2D},{"../image/filters":66,"./canvas":47,"./constants":48,"./core":49,"./p5.Renderer":55}],57:[function(t,e,r){var n=t("./core"),i=t("./constants");t("./p5.Graphics"),t("./p5.Renderer2D"),t("../3d/p5.Renderer3D");var o="defaultCanvas0";n.prototype.createCanvas=function(t,e,r){var s,a,u=r||i.P2D;if(arguments[3]&&(s="boolean"==typeof arguments[3]?arguments[3]:!1),u===i.WEBGL)a=document.getElementById(o),a&&a.parentNode.removeChild(a),a=document.createElement("canvas"),a.id=o;else if(s){a=document.createElement("canvas");for(var l=0;document.getElementById("defaultCanvas"+l);)l++;o="defaultCanvas"+l,a.id=o}else a=this.canvas;return this._setupDone||(a.dataset.hidden=!0,a.style.visibility="hidden"),this._userNode?this._userNode.appendChild(a):document.body.appendChild(a),u===i.WEBGL?(this._setProperty("_renderer",new n.Renderer3D(a,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new n.Renderer2D(a,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(t,e),this._renderer._applyDefaults(),s&&this._elements.push(this._renderer),this._renderer},n.prototype.resizeCanvas=function(t,e,r){if(this._renderer){var n={};for(var i in this.drawingContext){var o=this.drawingContext[i];"object"!=typeof o&&"function"!=typeof o&&(n[i]=o)}this._renderer.resize(t,e);for(var s in n)this.drawingContext[s]=n[s];r||this.redraw()}},n.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},n.prototype.createGraphics=function(t,e,r){return new n.Graphics(t,e,r,this)},n.prototype.blendMode=function(t){if(t!==i.BLEND&&t!==i.DARKEST&&t!==i.LIGHTEST&&t!==i.DIFFERENCE&&t!==i.MULTIPLY&&t!==i.EXCLUSION&&t!==i.SCREEN&&t!==i.REPLACE&&t!==i.OVERLAY&&t!==i.HARD_LIGHT&&t!==i.SOFT_LIGHT&&t!==i.DODGE&&t!==i.BURN&&t!==i.ADD&&t!==i.NORMAL)throw new Error("Mode "+t+" not recognized.");this._renderer.blendMode(t)},e.exports=n},{"../3d/p5.Renderer3D":37,"./constants":48,"./core":49,"./p5.Graphics":54,"./p5.Renderer2D":56}],58:[function(t,e,r){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var t=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-t}}(),function(){"use strict";"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],59:[function(t,e,r){"use strict";var n=t("./core");n.prototype.exit=function(){throw"exit() not implemented, see remove()"},n.prototype.noLoop=function(){this._loop=!1},n.prototype.loop=function(){this._loop=!0,this._draw()},n.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_strokeSet:this._renderer._strokeSet,_doFill:this._renderer._doFill,_fillSet:this._renderer._fillSet,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},n.prototype.pop=function(){this._renderer.pop();var t=this._styles.pop();for(var e in t)this._renderer[e]=t[e]},n.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.prototype.redraw=function(){var t=this.setup||window.setup,e=this.draw||window.draw;if("function"==typeof e){this.resetMatrix.bind(this),"undefined"==typeof t&&this.scale(this._pixelDensity,this._pixelDensity);var r=this;this._registeredMethods.pre.forEach(function(t){t.call(r)}),e(),this._registeredMethods.post.forEach(function(t){t.call(r)})}},n.prototype.size=function(){var t="size() is not a valid p5 function, to set the size of the ";throw t+="drawing canvas, please use createCanvas() instead"},e.exports=n},{"./core":49}],60:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants");n.prototype.applyMatrix=function(t,e,r,n,i,o){return this._renderer.applyMatrix(t,e,r,n,i,o),this},n.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},n.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},n.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},n.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.prototype.rotate=function(){var t=arguments[0];return this._angleMode===i.DEGREES&&(t=this.radians(t)),arguments.length>1?this._renderer.rotate(t,arguments[1]):this._renderer.rotate(t),this},n.prototype.rotateX=function(t){for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._validateParameters("rotateX",e,[["Number"]]),this._renderer.rotateX(t),this},n.prototype.rotateY=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return this._validateParameters("rotateY",e,[["Number"]]),this._renderer.rotateY(t),this},n.prototype.rotateZ=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];return this._validateParameters("rotateZ",e,[["Number"]]),this._renderer.rotateZ(t),this},n.prototype.scale=function(){for(var t,e,r,i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return i[0]instanceof n.Vector?(t=i[0].x,e=i[0].y,r=i[0].z):i[0]instanceof Array?(t=i[0][0],e=i[0][1],r=i[0][2]||1):1===i.length?t=e=r=i[0]:(t=i[0],e=i[1],r=i[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,t,e,r):this._renderer.scale.call(this._renderer,t,e),this},n.prototype.shearX=function(t){return this._angleMode===i.DEGREES&&(t=this.radians(t)),this._renderer.shearX(t),this},n.prototype.shearY=function(t){return this._angleMode===i.DEGREES&&(t=this.radians(t)),this._renderer.shearY(t),this},n.prototype.translate=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];return this._renderer.isP3D?(this._validateParameters("translate",n,[["Number","Number","Number"]]),this._renderer.translate(t,e,r)):(this._validateParameters("translate",n,[["Number","Number"]]),this._renderer.translate(t,e)),this},e.exports=n},{"./constants":48,"./core":49}],61:[function(t,e,r){"use strict";var n=t("./core"),i=t("./constants"),o=null,s=[],a=[],u=!1,l=!1,c=!1,h=!1,p=!0;n.prototype.beginContour=function(){return a=[],h=!0,this},n.prototype.beginShape=function(t){return o=t===i.POINTS||t===i.LINES||t===i.TRIANGLES||t===i.TRIANGLE_FAN||t===i.TRIANGLE_STRIP||t===i.QUADS||t===i.QUAD_STRIP?t:null,this._renderer.isP3D?this._renderer.beginShape(t):(s=[],a=[]),this},n.prototype.bezierVertex=function(t,e,r,n,i,o){if(0===s.length)throw"vertex() must be used once before calling bezierVertex()";u=!0;for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return l.isVert=!1,h?a.push(l):s.push(l),this},n.prototype.curveVertex=function(t,e){return l=!0,this.vertex(t,e),this},n.prototype.endContour=function(){var t=a[0].slice();t.isVert=a[0].isVert,t.moveTo=!1,a.push(t),p&&(s.push(s[0]),p=!1);for(var e=0;e<a.length;e++)s.push(a[e]);return this},n.prototype.endShape=function(t){if(this._renderer.isP3D)this._renderer.endShape(t,l,u,c,h,o);else{if(0===s.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var e=t===i.CLOSE;e&&!h&&s.push(s[0]),this._renderer.endShape(t,s,l,u,c,h,o),l=!1,u=!1,c=!1,h=!1,p=!0,e&&s.pop()}return this},n.prototype.quadraticVertex=function(t,e,r,n){if(this._contourInited){var o={};return o.x=t,o.y=e,o.x3=r,o.y3=n,o.type=i.QUADRATIC,this._contourVertices.push(o),this}if(!(s.length>0))throw"vertex() must be used once before calling quadraticVertex()";c=!0;for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.isVert=!1,h?a.push(u):s.push(u),this},n.prototype.vertex=function(t,e,r){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];if(this._renderer.isP3D)this._validateParameters("vertex",n,[["Number","Number","Number"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2]);else{this._validateParameters("vertex",n,[["Number","Number"],["Number","Number","Number"]]);var o=[];o.isVert=!0,o[0]=t,o[1]=e,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),r&&(o.moveTo=r),h?(0===a.length&&(o.moveTo=!0),a.push(o)):s.push(o)}return this},e.exports=n},{"./constants":48,"./core":49}],62:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.deviceOrientation=void 0,n.prototype.accelerationX=0,n.prototype.accelerationY=0,n.prototype.accelerationZ=0,n.prototype.pAccelerationX=0,n.prototype.pAccelerationY=0,n.prototype.pAccelerationZ=0,n.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},n.prototype.rotationX=0,n.prototype.rotationY=0,n.prototype.rotationZ=0,n.prototype.pRotationX=0,n.prototype.pRotationY=0,n.prototype.pRotationZ=0;var i,o,s,a=0,u=0,l=0,c="clockwise",h="clockwise",p="clockwise";n.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},n.prototype.turnAxis=void 0;var f=.5,d=30;n.prototype.setMoveThreshold=function(t){"number"==typeof t&&(f=t)},n.prototype.setShakeThreshold=function(t){"number"==typeof t&&(d=t)},n.prototype._ondeviceorientation=function(t){this._updatePRotations(),this._setProperty("rotationX",t.beta),this._setProperty("rotationY",t.gamma),this._setProperty("rotationZ",t.alpha),this._handleMotion()},n.prototype._ondevicemotion=function(t){this._updatePAccelerations(),this._setProperty("accelerationX",2*t.acceleration.x),this._setProperty("accelerationY",2*t.acceleration.y),this._setProperty("accelerationZ",2*t.acceleration.z),this._handleMotion()},n.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var t=this.deviceMoved||window.deviceMoved;"function"==typeof t&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&t();var e=this.deviceTurned||window.deviceTurned;if("function"==typeof e){var r=this.rotationX+180,n=this.pRotationX+180,m=a+180;r-n>0&&270>r-n||-270>r-n?c="clockwise":(0>r-n||r-n>270)&&(c="counter-clockwise"),c!==i&&(m=r),Math.abs(r-m)>90&&Math.abs(r-m)<270&&(m=r,this._setProperty("turnAxis","X"),e()),i=c,a=m-180;var g=this.rotationY+180,y=this.pRotationY+180,v=u+180;g-y>0&&270>g-y||-270>g-y?h="clockwise":(0>g-y||g-this.pRotationY>270)&&(h="counter-clockwise"),h!==o&&(v=g),Math.abs(g-v)>90&&Math.abs(g-v)<270&&(v=g,this._setProperty("turnAxis","Y"),e()),o=h,u=v-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(p="counter-clockwise"),p!==s&&(l=this.rotationZ),Math.abs(this.rotationZ-l)>90&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),e()),s=p,this._setProperty("turnAxis",void 0)}var _=this.deviceShaken||window.deviceShaken;if("function"==typeof _){var b,w;null!==this.pAccelerationX&&(b=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),b+w>d&&_()}},e.exports=n},{"../core/core":49}],63:[function(t,e,r){"use strict";var n=t("../core/core"),i={};n.prototype.isKeyPressed=!1,n.prototype.keyIsPressed=!1,n.prototype.key="",n.prototype.keyCode=0,n.prototype._onkeydown=function(t){if(!i[t.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",t.which),i[t.which]=!0;var e=String.fromCharCode(t.which);e||(e=t.which),this._setProperty("key",e);var r=this.keyPressed||window.keyPressed;if("function"==typeof r&&!t.charCode){var n=r(t);n===!1&&t.preventDefault()}}},n.prototype._onkeyup=function(t){var e=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodeTyped",null),i[t.which]=!1;var r=String.fromCharCode(t.which);if(r||(r=t.which),this._setProperty("key",r),this._setProperty("keyCode",t.which),"function"==typeof e){var n=e(t);n===!1&&t.preventDefault()}},n.prototype._onkeypress=function(t){if(t.which!==this._lastKeyCodeTyped){this._setProperty("keyCode",t.which),this._setProperty("_lastKeyCodeTyped",t.which),this._setProperty("key",String.fromCharCode(t.which));var e=this.keyTyped||window.keyTyped;if("function"==typeof e){var r=e(t);r===!1&&t.preventDefault()}}},n.prototype._onblur=function(t){i={}},n.prototype.keyIsDown=function(t){return i[t]},e.exports=n},{"../core/core":49}],64:[function(t,e,r){"use strict";function n(t,e){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}var i=t("../core/core"),o=t("../core/constants");i.prototype._nextMouseX=0,i.prototype._nextMouseY=0,i.prototype.mouseX=0,i.prototype.mouseY=0,i.prototype.pmouseX=0,i.prototype.pmouseY=0,i.prototype.winMouseX=0,i.prototype.winMouseY=0,i.prototype.pwinMouseX=0,i.prototype.pwinMouseY=0,i.prototype.mouseButton=0,i.prototype.mouseIsPressed=!1,i.prototype.isMousePressed=!1,i.prototype._updateNextMouseCoords=function(t){if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||t.touches)this._setProperty("_nextMouseX",this._nextTouchX),this._setProperty("_nextMouseY",this._nextTouchY);else if(null!==this._curElement){var e=n(this._curElement.elt,t);this._setProperty("_nextMouseX",e.x),this._setProperty("_nextMouseY",e.y)}this._setProperty("winMouseX",t.pageX),this._setProperty("winMouseY",t.pageY)},i.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("mouseX",this._nextMouseX),this._setProperty("mouseY",this._nextMouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY)},i.prototype._setMouseButton=function(t){1===t.button?this._setProperty("mouseButton",o.CENTER):2===t.button?this._setProperty("mouseButton",o.RIGHT):this._setProperty("mouseButton",o.LEFT)},i.prototype._onmousemove=function(t){var e,r=this._isGlobal?window:this;this._updateNextMouseCoords(t),this._updateNextTouchCoords(t),this.isMousePressed?"function"==typeof r.mouseDragged?(e=r.mouseDragged(t),e===!1&&t.preventDefault()):"function"==typeof r.touchMoved&&(e=r.touchMoved(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseMoved&&(e=r.mouseMoved(t),e===!1&&t.preventDefault())},i.prototype._onmousedown=function(t){var e,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!0),this._setProperty("mouseIsPressed",!0),this._setMouseButton(t),this._updateNextMouseCoords(t),this._updateNextTouchCoords(t),"function"==typeof r.mousePressed?(e=r.mousePressed(t),e===!1&&t.preventDefault()):"function"==typeof r.touchStarted&&(e=r.touchStarted(t),e===!1&&t.preventDefault())},i.prototype._onmouseup=function(t){var e,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!1),this._setProperty("mouseIsPressed",!1),"function"==typeof r.mouseReleased?(e=r.mouseReleased(t),e===!1&&t.preventDefault()):"function"==typeof r.touchEnded&&(e=r.touchEnded(t),e===!1&&t.preventDefault())},i.prototype._ondragend=i.prototype._onmouseup,i.prototype._ondragover=i.prototype._onmousemove,i.prototype._onclick=function(t){var e=this._isGlobal?window:this;if("function"==typeof e.mouseClicked){var r=e.mouseClicked(t);r===!1&&t.preventDefault()}},i.prototype._onwheel=function(t){var e=this._isGlobal?window:this;if("function"==typeof e.mouseWheel){t.delta=t.deltaY;var r=e.mouseWheel(t);r===!1&&t.preventDefault()}},e.exports=i},{"../core/constants":48,"../core/core":49}],65:[function(t,e,r){"use strict";function n(t,e,r){r=r||0;var n=t.getBoundingClientRect(),i=e.touches[r]||e.changedTouches[r];return{x:i.clientX-n.left,y:i.clientY-n.top,id:i.identifier}}var i=t("../core/core");i.prototype._nextTouchX=0,i.prototype._nextTouchY=0,i.prototype.touchX=0,i.prototype.touchY=0,i.prototype.ptouchX=0,i.prototype.ptouchY=0,i.prototype.touches=[],i.prototype.touchIsDown=!1,i.prototype._updateNextTouchCoords=function(t){if("mousedown"!==t.type&&"mousemove"!==t.type&&"mouseup"!==t.type&&t.touches){if(null!==this._curElement){var e=n(this._curElement.elt,t,0);this._setProperty("_nextTouchX",e.x),this._setProperty("_nextTouchY",e.y);for(var r=[],i=0;i<t.touches.length;i++)r[i]=n(this._curElement.elt,t,i);this._setProperty("touches",r)}}else this._setProperty("_nextTouchX",this._nextMouseX),this._setProperty("_nextTouchY",this._nextMouseY)},i.prototype._updateTouchCoords=function(){this._setProperty("ptouchX",this.touchX),this._setProperty("ptouchY",this.touchY),this._setProperty("touchX",this._nextTouchX),this._setProperty("touchY",this._nextTouchY)},i.prototype._ontouchstart=function(t){var e,r=this._isGlobal?window:this;this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),this._setProperty("touchIsDown",!0),"function"==typeof r.touchStarted?(e=r.touchStarted(t),e===!1&&t.preventDefault()):"function"==typeof r.mousePressed&&(e=r.mousePressed(t),e===!1&&t.preventDefault())},i.prototype._ontouchmove=function(t){var e,r=this._isGlobal?window:this;this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),"function"==typeof r.touchMoved?(e=r.touchMoved(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseDragged&&(e=r.mouseDragged(t),e===!1&&t.preventDefault())},i.prototype._ontouchend=function(t){this._updateNextTouchCoords(t),this._updateNextMouseCoords(t),0===this.touches.length&&this._setProperty("touchIsDown",!1);var e,r=this._isGlobal?window:this;"function"==typeof r.touchEnded?(e=r.touchEnded(t),e===!1&&t.preventDefault()):"function"==typeof r.mouseReleased&&(e=r.mouseReleased(t),e===!1&&t.preventDefault())},e.exports=i},{"../core/core":49}],66:[function(t,e,r){"use strict";function n(t){var e=3.5*t|0;if(e=1>e?1:248>e?e:248,s!==e){s=e,a=1+s<<1,u=new Int32Array(a),l=new Array(a);for(var r=0;a>r;r++)l[r]=new Int32Array(256);for(var n,i,o,c,h=1,p=e-1;e>h;h++){u[e+h]=u[p]=i=p*p,o=l[e+h],c=l[p--];for(var f=0;256>f;f++)o[f]=c[f]=i*f}n=u[e]=e*e,o=l[e];for(var d=0;256>d;d++)o[d]=n*d}}function i(t,e){for(var r=o._toPixels(t),i=t.width,c=t.height,h=i*c,p=new Int32Array(h),f=0;h>f;f++)p[f]=o._getARGB(r,f);var d,m,g,y,v,_,b,w,x,S,T=new Int32Array(h),E=new Int32Array(h),A=new Int32Array(h),C=new Int32Array(h),M=0;n(e);var R,P,I,O;for(P=0;c>P;P++){for(R=0;i>R;R++){if(y=g=m=v=d=0,_=R-s,0>_)S=-_,_=0;else{if(_>=i)break;S=0}for(I=S;a>I&&!(_>=i);I++){var D=p[_+M];O=l[I],v+=O[(-16777216&D)>>>24],m+=O[(16711680&D)>>16],g+=O[(65280&D)>>8],y+=O[255&D],d+=u[I],_++}b=M+R,T[b]=v/d,E[b]=m/d,A[b]=g/d,C[b]=y/d}M+=i}for(M=0,w=-s,x=w*i,P=0;c>P;P++){for(R=0;i>R;R++){if(y=g=m=v=d=0,0>w)S=b=-w,_=R;else{if(w>=c)break;S=0,b=w,_=R+x}for(I=S;a>I&&!(b>=c);I++)O=l[I],v+=O[T[_]],m+=O[E[_]],g+=O[A[_]],y+=O[C[_]],d+=u[I],b++,_+=i;p[R+M]=v/d<<24|m/d<<16|g/d<<8|y/d}M+=i,x+=i,w++}o._setPixels(r,p)}var o={};o._toPixels=function(t){return t instanceof ImageData?t.data:t.getContext("2d").getImageData(0,0,t.width,t.height).data},o._getARGB=function(t,e){var r=4*e;return t[r+3]<<24&4278190080|t[r]<<16&16711680|t[r+1]<<8&65280|255&t[r+2]},o._setPixels=function(t,e){for(var r=0,n=0,i=t.length;i>n;n++)r=4*n,t[r+0]=(16711680&e[n])>>>16,t[r+1]=(65280&e[n])>>>8,t[r+2]=255&e[n],t[r+3]=(4278190080&e[n])>>>24},o._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},o._createImageData=function(t,e){return o._tmpCanvas=document.createElement("canvas"),o._tmpCtx=o._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,e)},o.apply=function(t,e,r){var n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),o=e(i,r);o instanceof ImageData?n.putImageData(o,0,0,0,0,t.width,t.height):n.putImageData(i,0,0,0,0,t.width,t.height)},o.threshold=function(t,e){var r=o._toPixels(t);void 0===e&&(e=.5);for(var n=Math.floor(255*e),i=0;i<r.length;i+=4){var s,a=r[i],u=r[i+1],l=r[i+2],c=.2126*a+.7152*u+.0722*l;s=c>=n?255:0,r[i]=r[i+1]=r[i+2]=s}},o.gray=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4){var n=e[r],i=e[r+1],s=e[r+2],a=.2126*n+.7152*i+.0722*s;e[r]=e[r+1]=e[r+2]=a}},o.opaque=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r+3]=255;return e},o.invert=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},o.posterize=function(t,e){var r=o._toPixels(t);if(2>e||e>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var n=e-1,i=0;i<r.length;i+=4){var s=r[i],a=r[i+1],u=r[i+2];r[i]=255*(s*e>>8)/n,r[i+1]=255*(a*e>>8)/n,r[i+2]=255*(u*e>>8)/n}},o.dilate=function(t){for(var e,r,n,i,s,a,u,l,c,h,p,f,d,m,g,y,v,_=o._toPixels(t),b=0,w=_.length?_.length/4:0,x=new Int32Array(w);w>b;)for(e=b,r=b+t.width;r>b;)n=i=o._getARGB(_,b),u=b-1,a=b+1,l=b-t.width,c=b+t.width,e>u&&(u=b),a>=r&&(a=b),0>l&&(l=0),c>=w&&(c=b),f=o._getARGB(_,l),p=o._getARGB(_,u),d=o._getARGB(_,c),h=o._getARGB(_,a),s=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),v=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),g>s&&(i=p,s=g),m>s&&(i=h,s=m),y>s&&(i=f,s=y),v>s&&(i=d,s=v),x[b++]=i;o._setPixels(_,x)},o.erode=function(t){for(var e,r,n,i,s,a,u,l,c,h,p,f,d,m,g,y,v,_=o._toPixels(t),b=0,w=_.length?_.length/4:0,x=new Int32Array(w);w>b;)for(e=b,r=b+t.width;r>b;)n=i=o._getARGB(_,b),u=b-1,a=b+1,l=b-t.width,c=b+t.width,e>u&&(u=b),a>=r&&(a=b),0>l&&(l=0),c>=w&&(c=b),f=o._getARGB(_,l),p=o._getARGB(_,u),d=o._getARGB(_,c),h=o._getARGB(_,a),s=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),v=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),s>g&&(i=p,s=g),s>m&&(i=h,s=m),s>y&&(i=f,s=y),s>v&&(i=d,s=v),x[b++]=i;o._setPixels(_,x)};var s,a,u,l;o.blur=function(t,e){i(t,e)},e.exports=o},{}],67:[function(t,e,r){"use strict";var n=t("../core/core"),i=[];n.prototype.createImage=function(t,e){return new n.Image(t,e)},n.prototype.saveCanvas=function(){var t,e,r;if(3===arguments.length?(t=arguments[0],e=arguments[1],r=arguments[2]):2===arguments.length?"object"==typeof arguments[0]?(t=arguments[0],e=arguments[1]):(e=arguments[0],r=arguments[1]):1===arguments.length&&("object"==typeof arguments[0]?t=arguments[0]:e=arguments[0]),t instanceof n.Element&&(t=t.elt),t instanceof HTMLCanvasElement||(t=null),r||(r=n.prototype._checkFileExtension(e,r)[1],""===r&&(r="png")),t||this._curElement&&this._curElement.elt&&(t=this._curElement.elt),n.prototype._isSafari()){var i="Hello, Safari user!\n";i+="Now capturing a screenshot...\n",i+="To save this image,\n",i+="go to File --> Save As.\n",alert(i),window.location.href=t.toDataURL()}else{var o;if("undefined"==typeof r)r="png",o="image/png";else switch(r){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}var s="image/octet-stream",a=t.toDataURL(o);a=a.replace(o,s),n.prototype.downloadFile(a,e,r)}},n.prototype.saveFrames=function(t,e,r,o,s){var a=r||3;a=n.prototype.constrain(a,0,15),a=1e3*a;var u=o||15;u=n.prototype.constrain(u,0,22);var l=0,c=n.prototype._makeFrame,h=this._curElement.elt,p=setInterval(function(){c(t+l,e,h),l++},1e3/u);setTimeout(function(){if(clearInterval(p),s)s(i);else for(var t=0;t<i.length;t++){var e=i[t];n.prototype.downloadFile(e.imageData,e.filename,e.ext)}i=[]},a+.01)},n.prototype._makeFrame=function(t,e,r){var n;n=this?this._curElement.elt:r;var o;if(e)switch(e.toLowerCase()){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}else e="png",o="image/png";var s="image/octet-stream",a=n.toDataURL(o);a=a.replace(o,s);var u={};u.imageData=a,u.filename=t,u.ext=e,i.push(u)},e.exports=n},{"../core/core":49}],68:[function(t,e,r){"use strict";function n(t,e){return t>0&&e>t?t:e}var i=t("../core/core"),o=t("./filters"),s=t("../core/canvas"),a=t("../core/constants");t("../core/error_helpers"),i.prototype.loadImage=function(t,e,r){var n=new Image,o=new i.Image(1,1,this),s=i._getDecrementPreload.apply(this,arguments);return n.onload=function(){o.width=o.canvas.width=n.width,o.height=o.canvas.height=n.height,o.drawingContext.drawImage(n,0,0),"function"==typeof e&&e(o),s&&e!==s&&s()},n.onerror=function(t){i._friendlyFileLoadError(0,n.src),"function"==typeof r&&r!==s&&r(t)},0!==t.indexOf("data:image/")&&(n.crossOrigin="Anonymous"),n.src=t,o},i.prototype.image=function(t,e,r,i,o,a,u,l,c){if(arguments.length<=5)if(a=e||0,u=r||0,e=0,r=0,t.elt&&t.elt.videoWidth&&!t.canvas){var h=t.elt.videoWidth,p=t.elt.videoHeight;l=i||t.elt.width,c=o||t.elt.width*p/h,i=h,o=p}else l=i||t.width,c=o||t.height,i=t.width,o=t.height;else{if(9!==arguments.length)throw"Wrong number of arguments to image()";e=e||0,r=r||0,i=n(i,t.width),o=n(o,t.height),a=a||0,u=u||0,l=l||t.width,c=c||t.height}var f=s.modeAdjust(a,u,l,c,this._renderer._imageMode);this._renderer.image(t,e,r,i,o,f.x,f.y,f.w,f.h)},i.prototype.tint=function(){var t=this.color.apply(this,arguments);this._renderer._tint=t.levels},i.prototype.noTint=function(){this._renderer._tint=null},i.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=o._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var n=r.getContext("2d"),i=n.createImageData(t.canvas.width,t.canvas.height),s=i.data,a=0;a<e.length;a+=4){var u=e[a],l=e[a+1],c=e[a+2],h=e[a+3];s[a]=u*this._renderer._tint[0]/255,s[a+1]=l*this._renderer._tint[1]/255,s[a+2]=c*this._renderer._tint[2]/255,s[a+3]=h*this._renderer._tint[3]/255}return n.putImageData(i,0,0),r},i.prototype.imageMode=function(t){t!==a.CORNER&&t!==a.CORNERS&&t!==a.CENTER||(this._renderer._imageMode=t)},e.exports=i},{"../core/canvas":47,"../core/constants":48,
"../core/core":49,"../core/error_helpers":52,"./filters":66}],69:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./filters");n.Image=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},n.Image.prototype._setProperty=function(t,e){this[t]=e},n.Image.prototype.loadPixels=function(){n.Renderer2D.prototype.loadPixels.call(this)},n.Image.prototype.updatePixels=function(t,e,r,i){n.Renderer2D.prototype.updatePixels.call(this,t,e,r,i)},n.Image.prototype.get=function(t,e,r,i){return n.Renderer2D.prototype.get.call(this,t,e,r,i)},n.Image.prototype.set=function(t,e,r){n.Renderer2D.prototype.set.call(this,t,e,r)},n.Image.prototype.resize=function(t,e){0===t&&0===e?(t=this.canvas.width,e=this.canvas.height):0===t?t=this.canvas.width*e/this.canvas.height:0===e&&(e=this.canvas.height*t/this.canvas.width);var r=document.createElement("canvas");r.width=t,r.height=e,r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=t,this.canvas.height=this.height=e,this.drawingContext.drawImage(r,0,0,t,e,0,0,t,e),this.pixels.length>0&&this.loadPixels()},n.Image.prototype.copy=function(){n.prototype.copy.apply(this,arguments)},n.Image.prototype.mask=function(t){void 0===t&&(t=this);var e=this.drawingContext.globalCompositeOperation,r=1;t instanceof n.Renderer&&(r=t._pInst._pixelDensity);var i=[t,0,0,r*t.width,r*t.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",this.copy.apply(this,i),this.drawingContext.globalCompositeOperation=e},n.Image.prototype.filter=function(t,e){i.apply(this.canvas,i[t.toLowerCase()],e)},n.Image.prototype.blend=function(){n.prototype.blend.apply(this,arguments)},n.Image.prototype.save=function(t,e){var r;if(e)switch(e.toLowerCase()){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png"}else e="png",r="image/png";var i="image/octet-stream",o=this.canvas.toDataURL(r);o=o.replace(r,i),n.prototype.downloadFile(o,t,e)},n.Image.prototype.createTexture=function(t){return this},e.exports=n.Image},{"../core/core":49,"./filters":66}],70:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./filters");t("../color/p5.Color"),n.prototype.pixels=[],n.prototype.blend=function(){this._renderer?this._renderer.blend.apply(this._renderer,arguments):n.Renderer2D.prototype.blend.apply(this,arguments)},n.prototype.copy=function(){n.Renderer2D._copyHelper.apply(this,arguments)},n.prototype.filter=function(t,e){i.apply(this.canvas,i[t.toLowerCase()],e)},n.prototype.get=function(t,e,r,n){return this._renderer.get(t,e,r,n)},n.prototype.loadPixels=function(){this._renderer.loadPixels()},n.prototype.set=function(t,e,r){this._renderer.set(t,e,r)},n.prototype.updatePixels=function(t,e,r,n){0!==this.pixels.length&&this._renderer.updatePixels(t,e,r,n)},e.exports=n},{"../color/p5.Color":43,"../core/core":49,"./filters":66}],71:[function(t,e,r){"use strict";function n(t,e){var r={};if(e=e||[],"undefined"==typeof e)for(var n=0;n<t.length;n++)e[n.toString()]=n;for(var i=0;i<e.length;i++){var o=e[i],s=t[i];r[o]=s}return r}function i(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(t,e){e&&e!==!0&&"true"!==e||(e=""),t||(t="untitled");var r="";return t&&t.indexOf(".")>-1&&(r=t.split(".").pop()),e&&r!==e&&(r=e,t=t+"."+r),[t,r]}function s(t){document.body.removeChild(t.target)}var a=t("../core/core"),u=t("reqwest"),l=t("opentype.js");t("../core/error_helpers"),a._getDecrementPreload=function(){var t=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&"function"==typeof t?t:null},a.prototype.loadFont=function(t,e,r){var n=new a.Font(this),i=a._getDecrementPreload.apply(this,arguments);return l.load(t,function(o,s){if(o){if("undefined"!=typeof r&&r!==i)return r(o);throw o}n.font=s,"undefined"!=typeof e&&e(n),i&&e!==i&&i();var a,u,l=["ttf","otf","woff","woff2"],c=t.split("\\").pop().split("/").pop(),h=c.lastIndexOf("."),p=1>h?null:c.substr(h+1);l.indexOf(p)>-1&&(a=c.substr(0,h),u=document.createElement("style"),u.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+a+";\nsrc: url("+t+");\n}\n")),document.head.appendChild(u))}),n},a.prototype.createInput=function(){throw"not yet implemented"},a.prototype.createReader=function(){throw"not yet implemented"},a.prototype.loadBytes=function(){throw"not yet implemented"},a.prototype.loadJSON=function(){for(var t,e=arguments[0],r=arguments[1],n=a._getDecrementPreload.apply(this,arguments),i=[],o="json",s=2;s<arguments.length;s++){var l=arguments[s];"string"==typeof l?"jsonp"!==l&&"json"!==l||(o=l):"function"==typeof l&&(t=l)}return u({url:e,type:o,crossOrigin:!0,error:function(e){t?t(e):console.log(e.statusText)},success:function(t){for(var e in t)i[e]=t[e];"undefined"!=typeof r&&r(t),n&&r!==n&&n()}}),i},a.prototype.loadStrings=function(t,e,r){var n=[],i=new XMLHttpRequest,o=a._getDecrementPreload.apply(this,arguments);return i.addEventListener("error",function(t){r?r(t):console.log(t.responseText)}),i.open("GET",t,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var t=i.responseText.match(/[^\r\n]+/g);for(var s in t)n[s]=t[s];"undefined"!=typeof e&&e(n),o&&e!==o&&o()}else r?r(i):console.log(i.statusText)},i.send(null),n},a.prototype.loadTable=function(t){for(var e=null,r=[],i=!1,o=",",s=!1,l=a._getDecrementPreload.apply(this,arguments),c=1;c<arguments.length;c++)if("function"==typeof arguments[c]&&arguments[c]!==l)e=arguments[c];else if("string"==typeof arguments[c])if(r.push(arguments[c]),"header"===arguments[c]&&(i=!0),"csv"===arguments[c]){if(s)throw new Error("Cannot set multiple separator types.");o=",",s=!0}else if("tsv"===arguments[c]){if(s)throw new Error("Cannot set multiple separator types.");o="	",s=!0}var h=new a.Table;return u({url:t,crossOrigin:!0,type:"csv"}).then(function(t){t=t.responseText;for(var r,s={},u=0,p=1,f=2,d=4,m='"',g="\r",y="\n",v=[],_=0,b=null,w=function(){s.escaped=!1,b=[],S()},x=function(){s.currentState=d,v.push(b),b=null},S=function(){s.currentState=u,s.token=""},T=function(){b.push(s.token),S()};;){if(r=t[_++],null==r){if(s.escaped)throw new Error("Unclosed quote in file.");if(b){T(),x();break}}if(null===b&&w(),s.currentState===u){if(r===m){s.escaped=!0,s.currentState=p;continue}s.currentState=p}s.currentState===p&&s.escaped?r===m?t[_]===m?(s.token+=m,_++):(s.escaped=!1,s.currentState=f):s.token+=r:r===g?(t[_]===y&&_++,T(),x()):r===y?(T(),x()):r===o?T():s.currentState===p&&(s.token+=r)}if(i)h.columns=v.shift();else for(c=0;c<v[0].length;c++)h.columns[c]="null";var E;for(c=0;c<v.length&&(c!==v.length-1||1!==v[c].length||"undefined"!==v[c][0]);c++)E=new a.TableRow,E.arr=v[c],E.obj=n(v[c],h.columns),h.addRow(E);null!==e&&e(h),l&&e!==l&&l()}).fail(function(r,n){a._friendlyFileLoadError(2,t),"undefined"!=typeof e&&e!==l&&e(!1)}),h},a.prototype.parseXML=function(t){var e,r=new a.XML;if(t.children.length){for(e=0;e<t.children.length;e++){var n=parseXML(t.children[e]);r.addChild(n)}r.setName(t.nodeName),r._setCont(t.textContent),r._setAttributes(t);for(var i=0;i<r.children.length;i++)r.children[i].parent=r;return r}return r.setName(t.nodeName),r._setCont(t.textContent),r._setAttributes(t),r},a.prototype.loadXML=function(t,e,r){var n={},i=a._getDecrementPreload.apply(this,arguments);return u({url:t,type:"xml",crossOrigin:!0,error:function(t){r?r(t):console.log(t.statusText)}}).then(function(t){var r=parseXML(t.documentElement);for(var o in r)n[o]=r[o];"undefined"!=typeof e&&e(n),i&&e!==i&&i()}),n},a.prototype.selectFolder=function(){throw"not yet implemented"},a.prototype.selectInput=function(){throw"not yet implemented"},a.prototype.httpGet=function(){var t=Array.prototype.slice.call(arguments);t.push("GET"),a.prototype.httpDo.apply(this,t)},a.prototype.httpPost=function(){var t=Array.prototype.slice.call(arguments);t.push("POST"),a.prototype.httpDo.apply(this,t)},a.prototype.httpDo=function(){if("object"==typeof arguments[0])u(arguments[0]);else{for(var t,e,r="GET",n=arguments[0],i={},o="",s=1;s<arguments.length;s++){var a=arguments[s];"string"==typeof a?"GET"===a||"POST"===a||"PUT"===a?r=a:o=a:"object"==typeof a?i=a:"function"==typeof a&&(t?e=a:t=a)}""===o&&(o=-1!==n.indexOf("json")?"json":-1!==n.indexOf("xml")?"xml":"text"),u({url:n,method:r,data:i,type:o,crossOrigin:!0,success:function(e){"undefined"!=typeof t&&t("text"===o?e.response:e)},error:function(t){e?e(t):console.log(t.statusText)}})}},window.URL=window.URL||window.webkitURL,a.prototype._pWriters=[],a.prototype.beginRaw=function(){throw"not yet implemented"},a.prototype.beginRecord=function(){throw"not yet implemented"},a.prototype.createOutput=function(){throw"not yet implemented"},a.prototype.createWriter=function(t,e){var r;for(var n in a.prototype._pWriters)if(a.prototype._pWriters[n].name===t)return r=new a.PrintWriter(t+window.millis(),e),a.prototype._pWriters.push(r),r;return r=new a.PrintWriter(t,e),a.prototype._pWriters.push(r),r},a.prototype.endRaw=function(){throw"not yet implemented"},a.prototype.endRecord=function(){throw"not yet implemented"},a.PrintWriter=function(t,e){var r=this;this.name=t,this.content="",this.print=function(t){this.content+=t},this.println=function(t){this.content+=t+"\n"},this.flush=function(){this.content=""},this.close=function(){var n=[];n.push(this.content),a.prototype.writeFile(n,t,e);for(var i in a.prototype._pWriters)a.prototype._pWriters[i].name===this.name&&a.prototype._pWriters.splice(i,1);r.flush(),r={}}},a.prototype.saveBytes=function(){throw"not yet implemented"},a.prototype.save=function(t,e,r){var n=arguments,i=this._curElement.elt;if(0===n.length)return void a.prototype.saveCanvas(i);if(n[0]instanceof a.Renderer||n[0]instanceof a.Graphics)return void a.prototype.saveCanvas(n[0].elt,n[1],n[2]);if(1===n.length&&"string"==typeof n[0])a.prototype.saveCanvas(i,n[0]);else{var s=o(n[1],n[2])[1];switch(s){case"json":return void a.prototype.saveJSON(n[0],n[1],n[2]);case"txt":return void a.prototype.saveStrings(n[0],n[1],n[2]);default:n[0]instanceof Array?a.prototype.saveStrings(n[0],n[1],n[2]):n[0]instanceof a.Table?a.prototype.saveTable(n[0],n[1],n[2],n[3]):n[0]instanceof a.Image?a.prototype.saveCanvas(n[0].canvas,n[1]):n[0]instanceof a.SoundFile&&a.prototype.saveSound(n[0],n[1],n[2],n[3])}}},a.prototype.saveJSON=function(t,e,r){var n;n=r?JSON.stringify(t):JSON.stringify(t,void 0,2),console.log(n),this.saveStrings(n.split("\n"),e,"json")},a.prototype.saveJSONObject=a.prototype.saveJSON,a.prototype.saveJSONArray=a.prototype.saveJSON,a.prototype.saveStream=function(){throw"not yet implemented"},a.prototype.saveStrings=function(t,e,r){for(var n=r||"txt",i=this.createWriter(e,n),o=0;o<t.length;o++)o<t.length-1?i.println(t[o]):i.print(t[o]);i.close(),i.flush()},a.prototype.saveXML=function(){throw"not yet implemented"},a.prototype.selectOutput=function(){throw"not yet implemented"},a.prototype.saveTable=function(t,e,r){var n=this.createWriter(e,r),o=t.columns,s=",";if("tsv"===r&&(s="	"),"html"!==r){if("0"!==o[0])for(var a=0;a<o.length;a++)a<o.length-1?n.print(o[a]+s):n.println(o[a]);for(var u=0;u<t.rows.length;u++){var l;for(l=0;l<t.rows[u].arr.length;l++)l<t.rows[u].arr.length-1?n.print(t.rows[u].arr[l]+s):u<t.rows.length-1?n.println(t.rows[u].arr[l]):n.print(t.rows[u].arr[l])}}else{n.println("<html>"),n.println("<head>");var c='  <meta http-equiv="content-type" content';if(c+='="text/html;charset=utf-8" />',n.println(c),n.println("</head>"),n.println("<body>"),n.println("  <table>"),"0"!==o[0]){n.println("    <tr>");for(var h=0;h<o.length;h++){var p=i(o[h]);n.println("      <td>"+p),n.println("      </td>")}n.println("    </tr>")}for(var f=0;f<t.rows.length;f++){n.println("    <tr>");for(var d=0;d<t.columns.length;d++){var m=t.rows[f].getString(d),g=i(m);n.println("      <td>"+g),n.println("      </td>")}n.println("    </tr>")}n.println("  </table>"),n.println("</body>"),n.print("</html>")}n.close(),n.flush()},a.prototype.writeFile=function(t,e,r){var n="application/octet-stream";a.prototype._isSafari()&&(n="text/plain");var i=new Blob(t,{type:n}),o=window.URL.createObjectURL(i);a.prototype.downloadFile(o,e,r)},a.prototype.downloadFile=function(t,e,r){var n=o(e,r),i=n[0],u=n[1],l=document.createElement("a");if(l.href=t,l.download=i,l.onclick=s,l.style.display="none",document.body.appendChild(l),a.prototype._isSafari()){var c="Hello, Safari user! To download this file...\n";c+="1. Go to File --> Save As.\n",c+='2. Choose "Page Source" as the Format.\n',c+='3. Name it with this extension: ."'+u+'"',alert(c)}l.click(),t=null},a.prototype._checkFileExtension=o,a.prototype._isSafari=function(){var t=Object.prototype.toString.call(window.HTMLElement);return t.indexOf("Constructor")>0},e.exports=a},{"../core/core":49,"../core/error_helpers":52,"opentype.js":8,reqwest:27}],72:[function(t,e,r){"use strict";var n=t("../core/core");n.Table=function(t){this.columns=[],this.rows=[]},n.Table.prototype.addRow=function(t){var e=t||new n.TableRow;if("undefined"==typeof e.arr||"undefined"==typeof e.obj)throw"invalid TableRow: "+e;return e.table=this,this.rows.push(e),e},n.Table.prototype.removeRow=function(t){this.rows[t].table=null;var e=this.rows.splice(t+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(e)},n.Table.prototype.getRow=function(t){return this.rows[t]},n.Table.prototype.getRows=function(){return this.rows},n.Table.prototype.findRow=function(t,e){if("string"==typeof e){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[e]===t)return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[e]===t)return this.rows[n];return null},n.Table.prototype.findRows=function(t,e){var r=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)this.rows[n].obj[e]===t&&r.push(this.rows[n]);else for(var i=0;i<this.rows.length;i++)this.rows[i].arr[e]===t&&r.push(this.rows[i]);return r},n.Table.prototype.matchRow=function(t,e){if("number"==typeof e){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[e].match(t))return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[e].match(t))return this.rows[n];return null},n.Table.prototype.matchRows=function(t,e){var r=[];if("number"==typeof e)for(var n=0;n<this.rows.length;n++)this.rows[n].arr[e].match(t)&&r.push(this.rows[n]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[e].match(t)&&r.push(this.rows[i]);return r},n.Table.prototype.getColumn=function(t){var e=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)e.push(this.rows[r].obj[t]);else for(var n=0;n<this.rows.length;n++)e.push(this.rows[n].arr[t]);return e},n.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.Table.prototype.addColumn=function(t){var e=t||null;this.columns.push(e)},n.Table.prototype.getColumnCount=function(){return this.columns.length},n.Table.prototype.getRowCount=function(){return this.rows.length},n.Table.prototype.removeTokens=function(t,e){for(var r=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=[],i=0;i<t.length;i++)n.push(r(t.charAt(i)));var o=new RegExp(n.join("|"),"g");if("undefined"==typeof e)for(var s=0;s<this.columns.length;s++)for(var a=0;a<this.rows.length;a++){var u=this.rows[a].arr[s];u=u.replace(o,""),this.rows[a].arr[s]=u,this.rows[a].obj[this.columns[s]]=u}else if("string"==typeof e)for(var l=0;l<this.rows.length;l++){var c=this.rows[l].obj[e];c=c.replace(o,""),this.rows[l].obj[e]=c;var h=this.columns.indexOf(e);this.rows[l].arr[h]=c}else for(var p=0;p<this.rows.length;p++){var f=this.rows[p].arr[e];f=f.replace(o,""),this.rows[p].arr[e]=f,this.rows[p].obj[this.columns[e]]=f}},n.Table.prototype.trim=function(t){var e=new RegExp(" ","g");if("undefined"==typeof t)for(var r=0;r<this.columns.length;r++)for(var n=0;n<this.rows.length;n++){var i=this.rows[n].arr[r];i=i.replace(e,""),this.rows[n].arr[r]=i,this.rows[n].obj[this.columns[r]]=i}else if("string"==typeof t)for(var o=0;o<this.rows.length;o++){var s=this.rows[o].obj[t];s=s.replace(e,""),this.rows[o].obj[t]=s;var a=this.columns.indexOf(t);this.rows[o].arr[a]=s}else for(var u=0;u<this.rows.length;u++){var l=this.rows[u].arr[t];l=l.replace(e,""),this.rows[u].arr[t]=l,this.rows[u].obj[this.columns[t]]=l}},n.Table.prototype.removeColumn=function(t){var e,r;"string"==typeof t?(e=t,r=this.columns.indexOf(t),console.log("string")):(r=t,e=this.columns[t]);var n=this.columns.splice(r+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(n);for(var i=0;i<this.rows.length;i++){var o=this.rows[i].arr,s=o.splice(r+1,o.length);o.pop(),this.rows[i].arr=o.concat(s),delete this.rows[i].obj[e]}},n.Table.prototype.set=function(t,e,r){this.rows[t].set(e,r)},n.Table.prototype.setNum=function(t,e,r){this.rows[t].setNum(e,r)},n.Table.prototype.setString=function(t,e,r){this.rows[t].setString(e,r)},n.Table.prototype.get=function(t,e){return this.rows[t].get(e)},n.Table.prototype.getNum=function(t,e){return this.rows[t].getNum(e)},n.Table.prototype.getString=function(t,e){return this.rows[t].getString(e)},n.Table.prototype.getObject=function(t){for(var e,r,n,i={},o=0;o<this.rows.length;o++)if(e=this.rows[o].obj,"string"==typeof t){if(r=this.columns.indexOf(t),!(r>=0))throw'This table has no column named "'+t+'"';n=e[t],i[n]=e}else i[o]=this.rows[o].obj;return i},n.Table.prototype.getArray=function(){for(var t=[],e=0;e<this.rows.length;e++)t.push(this.rows[e].arr);return t},e.exports=n.Table},{"../core/core":49}],73:[function(t,e,r){"use strict";var n=t("../core/core");n.TableRow=function(t,e){var r=[],n={};t&&(e=e||",",r=t.split(e));for(var i=0;i<r.length;i++){var o=i,s=r[i];n[o]=s}this.arr=r,this.obj=n,this.table=null},n.TableRow.prototype.set=function(t,e){if("string"==typeof t){var r=this.table.columns.indexOf(t);if(!(r>=0))throw'This table has no column named "'+t+'"';this.obj[t]=e,this.arr[r]=e}else{if(!(t<this.table.columns.length))throw"Column #"+t+" is out of the range of this table";this.arr[t]=e;var n=this.table.columns[t];this.obj[n]=e}},n.TableRow.prototype.setNum=function(t,e){var r=parseFloat(e,10);this.set(t,r)},n.TableRow.prototype.setString=function(t,e){var r=e.toString();this.set(t,r)},n.TableRow.prototype.get=function(t){return"string"==typeof t?this.obj[t]:this.arr[t]},n.TableRow.prototype.getNum=function(t){var e;if(e="string"==typeof t?parseFloat(this.obj[t],10):parseFloat(this.arr[t],10),"NaN"===e.toString())throw"Error: "+this.obj[t]+" is NaN (Not a Number)";return e},n.TableRow.prototype.getString=function(t){return"string"==typeof t?this.obj[t].toString():this.arr[t].toString()},e.exports=n.TableRow},{"../core/core":49}],74:[function(t,e,r){"use strict";var n=t("../core/core");n.XML=function(){this.name=null,this.attributes={},this.children=[],this.parent=null,this.content=null},n.XML.prototype.getParent=function(){return this.parent},n.XML.prototype.getName=function(){return this.name},n.XML.prototype.setName=function(t){this.name=t},n.XML.prototype.hasChildren=function(){return this.children.length>0},n.XML.prototype.listChildren=function(){return this.children.map(function(t){return t.name})},n.XML.prototype.getChildren=function(t){return t?this.children.filter(function(e){return e.name===t}):this.children},n.XML.prototype.getChild=function(t){return"string"==typeof t?this.children.find(function(e){return e.name===t}):this.children[t]},n.XML.prototype.addChild=function(t){t instanceof n.XML&&this.children.push(t)},n.XML.prototype.removeChild=function(t){var e=-1;if("string"==typeof t){for(var r=0;r<this.children.length;r++)if(this.children[r].name===t){e=r;break}}else e=t;-1!==e&&this.children.splice(e,1)},n.XML.prototype.getAttributeCount=function(){return Object.keys(this.attributes).length},n.XML.prototype.listAttributes=function(){return Object.keys(this.attributes)},n.XML.prototype.hasAttribute=function(t){return!!this.attributes[t]},n.XML.prototype.getNumber=function(t,e){return Number(this.attributes[t])||e||0},n.XML.prototype.getString=function(t,e){return String(this.attributes[t])||e||null},n.XML.prototype.setAttribute=function(t,e){this.attributes[t]&&(this.attributes[t]=e)},n.XML.prototype.getContent=function(t){return this.content||t||null},n.XML.prototype.setContent=function(t){this.children.length||(this.content=t)},n.XML.prototype._setCont=function(t){var e;e=t,e=e.replace(/\s\s+/g,","),this.content=e},n.XML.prototype._setAttributes=function(t){var e,r={};for(e=0;e<t.attributes.length;e++)r[t.attributes[e].nodeName]=t.attributes[e].nodeValue;this.attributes=r},e.exports=n.XML},{"../core/core":49}],75:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.abs=Math.abs,n.prototype.ceil=Math.ceil,n.prototype.constrain=function(t,e,r){return Math.max(Math.min(t,r),e)},n.prototype.dist=function(t,e,r,n,i,o){return 4===arguments.length?Math.sqrt((r-t)*(r-t)+(n-e)*(n-e)):6===arguments.length?Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)+(o-r)*(o-r)):void 0},n.prototype.exp=Math.exp,n.prototype.floor=Math.floor,n.prototype.lerp=function(t,e,r){return r*(e-t)+t},n.prototype.log=Math.log,n.prototype.mag=function(t,e){return Math.sqrt(t*t+e*e)},n.prototype.map=function(t,e,r,n,i){return(t-e)/(r-e)*(i-n)+n},n.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},n.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},n.prototype.norm=function(t,e,r){return this.map(t,e,r,0,1)},n.prototype.pow=Math.pow,n.prototype.round=Math.round,n.prototype.sq=function(t){return t*t},n.prototype.sqrt=Math.sqrt,e.exports=n},{"../core/core":49}],76:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.createVector=function(t,e,r){return this instanceof n?new n.Vector(this,arguments):new n.Vector(t,e,r)},e.exports=n},{"../core/core":49}],77:[function(t,e,r){"use strict";var n,i=t("../core/core"),o=4,s=1<<o,a=8,u=1<<a,l=4095,c=4,h=.5,p=function(t){return.5*(1-Math.cos(t*Math.PI))};i.prototype.noise=function(t,e,r){if(e=e||0,r=r||0,null==n){n=new Array(l+1);for(var i=0;l+1>i;i++)n[i]=Math.random()}0>t&&(t=-t),0>e&&(e=-e),0>r&&(r=-r);for(var f,d,m,g,y,v=Math.floor(t),_=Math.floor(e),b=Math.floor(r),w=t-v,x=e-_,S=r-b,T=0,E=.5,A=0;c>A;A++){var C=v+(_<<o)+(b<<a);f=p(w),d=p(x),m=n[C&l],m+=f*(n[C+1&l]-m),g=n[C+s&l],g+=f*(n[C+s+1&l]-g),m+=d*(g-m),C+=u,g=n[C&l],g+=f*(n[C+1&l]-g),y=n[C+s&l],y+=f*(n[C+s+1&l]-y),g+=d*(y-g),m+=p(S)*(g-m),T+=m*E,E*=h,v<<=1,w*=2,_<<=1,x*=2,b<<=1,S*=2,w>=1&&(v++,w--),x>=1&&(_++,x--),S>=1&&(b++,S--)}return T},i.prototype.noiseDetail=function(t,e){t>0&&(c=t),e>0&&(h=e)},i.prototype.noiseSeed=function(t){var e=function(){var t,e,r=4294967296,n=1664525,i=1013904223;return{setSeed:function(n){e=t=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return t},rand:function(){return e=(n*e+i)%r,e/r}}}();e.setSeed(t),n=new Array(l+1);for(var r=0;l+1>r;r++)n[r]=e.rand()},e.exports=i},{"../core/core":49}],78:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./polargeometry"),o=t("../core/constants");n.Vector=function(){var t,e,r;arguments[0]instanceof n?(this.p5=arguments[0],t=arguments[1][0]||0,e=arguments[1][1]||0,r=arguments[1][2]||0):(t=arguments[0]||0,e=arguments[1]||0,r=arguments[2]||0),this.x=t,this.y=e,this.z=r},n.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"},n.Vector.prototype.set=function(t,e,r){return t instanceof n.Vector?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this):t instanceof Array?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0,this):(this.x=t||0,this.y=e||0,this.z=r||0,this)},n.Vector.prototype.copy=function(){return this.p5?new n.Vector(this.p5,[this.x,this.y,this.z]):new n.Vector(this.x,this.y,this.z)},n.Vector.prototype.add=function(t,e,r){return t instanceof n.Vector?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this):t instanceof Array?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0,this):(this.x+=t||0,this.y+=e||0,this.z+=r||0,this)},n.Vector.prototype.sub=function(t,e,r){return t instanceof n.Vector?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this):t instanceof Array?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0,this):(this.x-=t||0,this.y-=e||0,this.z-=r||0,this)},n.Vector.prototype.mult=function(t){return this.x*=t||0,this.y*=t||0,this.z*=t||0,this},n.Vector.prototype.div=function(t){return this.x/=t,this.y/=t,this.z/=t,this},n.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},n.Vector.prototype.magSq=function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},n.Vector.prototype.dot=function(t,e,r){return t instanceof n.Vector?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(e||0)+this.z*(r||0)},n.Vector.prototype.cross=function(t){var e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return this.p5?new n.Vector(this.p5,[e,r,i]):new n.Vector(e,r,i)},n.Vector.prototype.dist=function(t){var e=t.copy().sub(this);return e.mag()},n.Vector.prototype.normalize=function(){return this.div(this.mag())},n.Vector.prototype.limit=function(t){var e=this.magSq();return e>t*t&&(this.div(Math.sqrt(e)),this.mult(t)),this},n.Vector.prototype.setMag=function(t){return this.normalize().mult(t)},n.Vector.prototype.heading=function(){var t=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===o.RADIANS?t:i.radiansToDegrees(t):t},n.Vector.prototype.rotate=function(t){this.p5&&this.p5._angleMode===o.DEGREES&&(t=i.degreesToRadians(t));var e=this.heading()+t,r=this.mag();return this.x=Math.cos(e)*r,this.y=Math.sin(e)*r,this},n.Vector.prototype.lerp=function(t,e,r,i){return t instanceof n.Vector?this.lerp(t.x,t.y,t.z,e):(this.x+=(t-this.x)*i||0,this.y+=(e-this.y)*i||0,this.z+=(r-this.z)*i||0,this)},n.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},n.Vector.prototype.equals=function(t,e,r){var i,o,s;return t instanceof n.Vector?(i=t.x||0,o=t.y||0,s=t.z||0):t instanceof Array?(i=t[0]||0,o=t[1]||0,s=t[2]||0):(i=t||0,o=e||0,s=r||0),this.x===i&&this.y===o&&this.z===s},n.Vector.fromAngle=function(t){return this.p5&&this.p5._angleMode===o.DEGREES&&(t=i.degreesToRadians(t)),this.p5?new n.Vector(this.p5,[Math.cos(t),Math.sin(t),0]):new n.Vector(Math.cos(t),Math.sin(t),0)},n.Vector.random2D=function(){var t;return t=this.p5?this.p5._angleMode===o.DEGREES?this.p5.random(360):this.p5.random(o.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(t)},n.Vector.random3D=function(){var t,e;this.p5?(t=this.p5.random(0,o.TWO_PI),e=this.p5.random(-1,1)):(t=Math.random()*Math.PI*2,e=2*Math.random()-1);var r=Math.sqrt(1-e*e)*Math.cos(t),i=Math.sqrt(1-e*e)*Math.sin(t);return this.p5?new n.Vector(this.p5,[r,i,e]):new n.Vector(r,i,e)},n.Vector.add=function(t,e,r){return r?r.set(t):r=t.copy(),r.add(e),r},n.Vector.sub=function(t,e,r){return r?r.set(t):r=t.copy(),r.sub(e),r},n.Vector.mult=function(t,e,r){return r?r.set(t):r=t.copy(),r.mult(e),r},n.Vector.div=function(t,e,r){return r?r.set(t):r=t.copy(),r.div(e),r},n.Vector.dot=function(t,e){return t.dot(e)},n.Vector.cross=function(t,e){return t.cross(e)},n.Vector.dist=function(t,e){return t.dist(e)},n.Vector.lerp=function(t,e,r,n){return n?n.set(t):n=t.copy(),n.lerp(e,r),n},n.Vector.angleBetween=function(t,e){var r=Math.acos(t.dot(e)/(t.mag()*e.mag()));return this.p5&&this.p5._angleMode===o.DEGREES&&(r=i.radiansToDegrees(r)),r},n.Vector.mag=function(t){var e=t.x,r=t.y,n=t.z,i=e*e+r*r+n*n;return Math.sqrt(i)},e.exports=n.Vector},{"../core/constants":48,"../core/core":49,"./polargeometry":79}],79:[function(t,e,r){e.exports={degreesToRadians:function(t){return 2*Math.PI*t/360},radiansToDegrees:function(t){return 360*t/(2*Math.PI)}}},{}],80:[function(t,e,r){"use strict";var n=t("../core/core"),i=!1,o=function(){var t,e,r=4294967296,n=1664525,i=1013904223;return{setSeed:function(n){e=t=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return t},rand:function(){return e=(n*e+i)%r,e/r}}}();n.prototype.randomSeed=function(t){o.setSeed(t),i=!0},n.prototype.random=function(t,e){var r;if(r=i?o.rand():Math.random(),0===arguments.length)return r;if(1===arguments.length)return r*t;if(t>e){var n=t;t=e,e=n}return r*(e-t)+t};var s,a=!1;n.prototype.randomGaussian=function(t,e){var r,n,i,o;if(a)r=s,a=!1;else{do n=this.random(2)-1,i=this.random(2)-1,o=n*n+i*i;while(o>=1);o=Math.sqrt(-2*Math.log(o)/o),r=n*o,s=i*o,a=!0}var u=t||0,l=e||1;return r*l+u},e.exports=n},{"../core/core":49}],81:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("./polargeometry"),o=t("../core/constants");n.prototype._angleMode=o.RADIANS,n.prototype.acos=function(t){return this._angleMode===o.RADIANS?Math.acos(t):i.radiansToDegrees(Math.acos(t))},n.prototype.asin=function(t){return this._angleMode===o.RADIANS?Math.asin(t):i.radiansToDegrees(Math.asin(t))},n.prototype.atan=function(t){return this._angleMode===o.RADIANS?Math.atan(t):i.radiansToDegrees(Math.atan(t))},n.prototype.atan2=function(t,e){return this._angleMode===o.RADIANS?Math.atan2(t,e):i.radiansToDegrees(Math.atan2(t,e))},n.prototype.cos=function(t){return this._angleMode===o.RADIANS?Math.cos(t):Math.cos(this.radians(t))},n.prototype.sin=function(t){return this._angleMode===o.RADIANS?Math.sin(t):Math.sin(this.radians(t))},n.prototype.tan=function(t){return this._angleMode===o.RADIANS?Math.tan(t):Math.tan(this.radians(t))},n.prototype.degrees=function(t){return i.radiansToDegrees(t)},n.prototype.radians=function(t){return i.degreesToRadians(t)},n.prototype.angleMode=function(t){t!==o.DEGREES&&t!==o.RADIANS||(this._angleMode=t)},e.exports=n},{"../core/constants":48,"../core/core":49,"./polargeometry":79}],82:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.textAlign=function(t,e){return this._renderer.textAlign.apply(this._renderer,arguments)},n.prototype.textLeading=function(t){return this._renderer.textLeading.apply(this._renderer,arguments)},n.prototype.textSize=function(t){return this._renderer.textSize.apply(this._renderer,arguments)},n.prototype.textStyle=function(t){return this._renderer.textStyle.apply(this._renderer,arguments)},n.prototype.textWidth=function(t){return this._renderer.textWidth.apply(this._renderer,arguments)},n.prototype.textAscent=function(){return this._renderer.textAscent()},n.prototype.textDescent=function(){return this._renderer.textDescent()},n.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},e.exports=n},{"../core/core":49}],83:[function(t,e,r){"use strict";var n=t("../core/core"),i=t("../core/constants");t("../core/error_helpers"),n.prototype.text=function(t,e,r,n,i){for(var o=new Array(arguments.length),s=0;s<o.length;++s)o[s]=arguments[s];return this._validateParameters("text",o,[["*","Number","Number"],["*","Number","Number","Number","Number"]]),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},n.prototype.textFont=function(t,e){if(arguments.length){if(!t)throw Error("null font passed to textFont");return this._renderer._setProperty("_textFont",t),e&&(this._renderer._setProperty("_textSize",e),this._renderer._setProperty("_textLeading",e*i._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},e.exports=n},{"../core/constants":48,"../core/core":49,"../core/error_helpers":52}],84:[function(t,e,r){"use strict";function n(t,e){for(var r=a(e,{sampleFactor:.1,simplifyThreshold:0}),n=f(t,0,1),o=n/(n*r.sampleFactor),s=[],u=0;n>u;u+=o)s.push(f(t,u));return r.simplifyThreshold&&i(s,r.simplifyThreshold),s}function i(t,e){e="undefined"==typeof e?0:e;for(var r=0,n=t.length-1;t.length>3&&n>=0;--n)l(u(t,n-1),u(t,n),u(t,n+1),e)&&(t.splice(n%t.length,1),r++);return r}function o(t){for(var e,r=[],n=0;n<t.length;n++)"M"===t[n].type&&(e&&r.push(e),e=[]),e.push(s(t[n]));return r.push(e),r}function s(t){var e=[t.type];return"M"===t.type||"L"===t.type?e.push(t.x,t.y):"C"===t.type?e.push(t.x1,t.y1,t.x2,t.y2,t.x,t.y):"Q"===t.type&&e.push(t.x1,t.y1,t.x,t.y),
e}function a(t,e){if("object"!=typeof t)t=e;else for(var r in e)"undefined"==typeof t[r]&&(t[r]=e[r]);return t}function u(t,e){var r=t.length;return t[0>e?e%r+r:e%r]}function l(t,e,r,n){if(!n)return 0===c(t,e,r);"undefined"==typeof l.tmpPoint1&&(l.tmpPoint1=[],l.tmpPoint2=[]);var i=l.tmpPoint1,o=l.tmpPoint2;i.x=e.x-t.x,i.y=e.y-t.y,o.x=r.x-e.x,o.y=r.y-e.y;var s=i.x*o.x+i.y*o.y,a=Math.sqrt(i.x*i.x+i.y*i.y),u=Math.sqrt(o.x*o.x+o.y*o.y),h=Math.acos(s/(a*u));return n>h}function c(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function h(t,e,r,n,i,o,s,a,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),p=u*u,f=p*u,d=c*t+3*h*u*r+3*l*u*u*i+f*s,m=c*e+3*h*u*n+3*l*u*u*o+f*a,g=t+2*u*(r-t)+p*(i-2*r+t),y=e+2*u*(n-e)+p*(o-2*n+e),v=r+2*u*(i-r)+p*(s-2*i+r),_=n+2*u*(o-n)+p*(a-2*o+n),b=l*t+u*r,w=l*e+u*n,x=l*i+u*s,S=l*o+u*a,T=90-180*Math.atan2(g-v,y-_)/Math.PI;return(g>v||_>y)&&(T+=180),{x:d,y:m,m:{x:g,y:y},n:{x:v,y:_},start:{x:b,y:w},end:{x:x,y:S},alpha:T}}function p(t,e,r,n,i,o,s,a,u){return null==u?b(t,e,r,n,i,o,s,a):h(t,e,r,n,i,o,s,a,w(t,e,r,n,i,o,s,a,u))}function f(t,e,r){t=m(t);for(var n,i,o,s,a,u="",l={},c=0,f=0,d=t.length;d>f;f++){if(o=t[f],"M"===o[0])n=+o[1],i=+o[2];else{if(s=p(n,i,o[1],o[2],o[3],o[4],o[5],o[6]),c+s>e&&!r)return a=p(n,i,o[1],o[2],o[3],o[4],o[5],o[6],e-c),{x:a.x,y:a.y,alpha:a.alpha};c+=s,n=+o[5],i=+o[6]}u+=o.shift()+o}return l.end=u,a=r?c:h(n,i,o[0],o[1],o[2],o[3],o[4],o[5],1),a.alpha&&(a={x:a.x,y:a.y,alpha:a.alpha}),a}function d(t){var e=[],r=0,n=0,i=0,o=0,s=0;"M"===t[0][0]&&(r=+t[0][1],n=+t[0][2],i=r,o=n,s++,e[0]=["M",r,n]);for(var a,u,l,c=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),h=s,p=t.length;p>h;h++){if(e.push(u=[]),l=t[h],l[0]!==String.prototype.toUpperCase.call(l[0]))switch(u[0]=String.prototype.toUpperCase.call(l[0]),u[0]){case"A":u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=+(l[6]+r),u[7]=+(l[7]+n);break;case"V":u[1]=+l[1]+n;break;case"H":u[1]=+l[1]+r;break;case"R":a=[r,n].concat(l.slice(1));for(var f=2,d=a.length;d>f;f++)a[f]=+a[f]+r,a[++f]=+a[f]+n;e.pop(),e=e.concat(y(a,c));break;case"M":i=+l[1]+r,o=+l[2]+n;break;default:for(f=1,d=l.length;d>f;f++)u[f]=+l[f]+(f%2?r:n)}else if("R"===l[0])a=[r,n].concat(l.slice(1)),e.pop(),e=e.concat(y(a,c)),u=["R"].concat(l.slice(-2));else for(var m=0,g=l.length;g>m;m++)u[m]=l[m];switch(u[0]){case"Z":r=i,n=o;break;case"H":r=u[1];break;case"V":n=u[1];break;case"M":i=u[u.length-2],o=u[u.length-1];break;default:r=u[u.length-2],n=u[u.length-1]}}return e}function m(t,e){for(var r=d(t),n=e&&d(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,r){var n,i,o={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in o||(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(g.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*e.x-e.bx,i=2*e.y-e.by):(n=e.x,i=e.y),t=["C",n,i].concat(t.slice(1));break;case"T":"Q"===r||"T"===r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(_(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(_(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(v(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(v(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(v(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(v(e.x,e.y,e.X,e.Y))}return t}),a=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)l[e]="A",n&&(c[e]="A"),t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),m=Math.max(r.length,n&&n.length||0)}},u=function(t,e,i,o,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=t[s][1],i.y=t[s][2],m=Math.max(r.length,n&&n.length||0))},l=[],c=[],h="",p="",f=0,m=Math.max(r.length,n&&n.length||0);m>f;f++){r[f]&&(h=r[f][0]),"C"!==h&&(l[f]=h,f&&(p=l[f-1])),r[f]=s(r[f],i,p),"A"!==l[f]&&"C"===h&&(l[f]="C"),a(r,f),n&&(n[f]&&(h=n[f][0]),"C"!==h&&(c[f]=h,f&&(p=c[f-1])),n[f]=s(n[f],o,p),"A"!==c[f]&&"C"===h&&(c[f]="C"),a(n,f)),u(r,n,i,o,f),u(n,r,o,i,f);var y=r[f],b=n&&n[f],w=y.length,x=n&&b.length;i.x=y[w-2],i.y=y[w-1],i.bx=parseFloat(y[w-4])||i.x,i.by=parseFloat(y[w-3])||i.y,o.bx=n&&(parseFloat(b[x-4])||o.x),o.by=n&&(parseFloat(b[x-3])||o.y),o.x=n&&b[x-2],o.y=n&&b[x-1]}return n?[r,n]:r}function g(t,e,r,n,i,o,s,a,u,l){var c,h,p,f,d,m=Math.PI,y=120*m/180,v=m/180*(+i||0),_=[],b=function(t,e,r){var n=t*Math.cos(r)-e*Math.sin(r),i=t*Math.sin(r)+e*Math.cos(r);return{x:n,y:i}};if(l)c=l[0],h=l[1],p=l[2],f=l[3];else{d=b(t,e,-v),t=d.x,e=d.y,d=b(a,u,-v),a=d.x,u=d.y;var w=(t-a)/2,x=(e-u)/2,S=w*w/(r*r)+x*x/(n*n);S>1&&(S=Math.sqrt(S),r=S*r,n=S*n);var T=r*r,E=n*n,A=(o===s?-1:1)*Math.sqrt(Math.abs((T*E-T*x*x-E*w*w)/(T*x*x+E*w*w)));p=A*r*x/n+(t+a)/2,f=A*-n*w/r+(e+u)/2,c=Math.asin(((e-f)/n).toFixed(9)),h=Math.asin(((u-f)/n).toFixed(9)),c=p>t?m-c:c,h=p>a?m-h:h,0>c&&(c=2*m+c),0>h&&(h=2*m+h),s&&c>h&&(c-=2*m),!s&&h>c&&(h-=2*m)}var C=h-c;if(Math.abs(C)>y){var M=h,R=a,P=u;h=c+y*(s&&h>c?1:-1),a=p+r*Math.cos(h),u=f+n*Math.sin(h),_=g(a,u,r,n,i,0,s,R,P,[h,M,p,f])}C=h-c;var I=Math.cos(c),O=Math.sin(c),D=Math.cos(h),k=Math.sin(h),$=Math.tan(C/4),N=4/3*r*$,L=4/3*n*$,F=[t,e],U=[t+N*O,e-L*I],B=[a+N*k,u-L*D],H=[a,u];if(U[0]=2*F[0]-U[0],U[1]=2*F[1]-U[1],l)return[U,B,H].concat(_);_=[U,B,H].concat(_).join().split(",");for(var q=[],G=0,V=_.length;V>G;G++)q[G]=G%2?b(_[G-1],_[G],v).y:b(_[G],_[G+1],v).x;return q}function y(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?o[3]={x:+t[0],y:+t[1]}:i-2===n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}function v(t,e,r,n){return[t,e,r,n,r,n]}function _(t,e,r,n,i,o){var s=1/3,a=2/3;return[s*t+a*r,s*e+a*n,s*i+a*r,s*o+a*n,i,o]}function b(t,e,r,n,i,o,s,a,u){null==u&&(u=1),u=u>1?1:0>u?0:u;for(var l=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=0,f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;c>d;d++){var m=l*h[d]+l,g=x(m,t,r,i,s),y=x(m,e,n,o,a),v=g*g+y*y;p+=f[d]*Math.sqrt(v)}return l*p}function w(t,e,r,n,i,o,s,a,u){if(!(0>u||b(t,e,r,n,i,o,s,a)<u)){var l,c=1,h=c/2,p=c-h,f=.01;for(l=b(t,e,r,n,i,o,s,a,p);Math.abs(l-u)>f;)h/=2,p+=(u>l?1:-1)*h,l=b(t,e,r,n,i,o,s,a,p);return p}}function x(t,e,r,n,i){var o=-3*e+9*r-9*n+3*i,s=t*o+6*e-12*r+6*n;return t*s-3*e+3*r}function S(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];e=t.length;for(var r="";e--;)r+=t[e]===Object(t[e])?JSON.stringify(t[e]):t[e];return r}var T=t("../core/core"),E=t("../core/constants");T.Font=function(t){this.parent=t,this.cache={},this.font=void 0},T.Font.prototype.list=function(){throw"not yet implemented"},T.Font.prototype.textBounds=function(t,e,r,n,i){e=void 0!==e?e:0,r=void 0!==r?r:0,n=n||this.parent._renderer._textSize;var o=this.cache[S("textBounds",t,e,r,n)];if(!o){var s,a,u,l,c=[],h=[],p=this,f=this._scale(n);this.font.forEachGlyph(t,e,r,n,i,function(t,e,r,i){c.push(e),h.push(r);var o=t.getMetrics();"space"!==t.name?(c.push(e+o.xMax*f),h.push(r+-o.yMin*f),h.push(r+-o.yMax*f)):c.push(e+p.font.charToGlyph(" ").advanceWidth*p._scale(n))}),s=Math.max(0,Math.min.apply(null,c)),a=Math.max(0,Math.min.apply(null,h)),u=Math.max(0,Math.max.apply(null,c)),l=Math.max(0,Math.max.apply(null,h)),o={x:s,y:a,h:l-a,w:u-s,advance:s-e},this.cache[S("textBounds",t,e,r,n)]=o}return o},T.Font.prototype.textToPoints=function(t,e,r,i,s){var a=0,u=[],l=this._getGlyphs(t);i=i||this.parent._renderer._textSize;for(var c=0;c<l.length;c++){for(var h=l[c].getPath(e,r,i),p=o(h.commands),f=0;f<p.length;f++)for(var d=n(p[f],s),m=0;m<d.length;m++)d[m].x+=a,u.push(d[m]);a+=l[c].advanceWidth*this._scale(i)}return u},T.Font.prototype._getGlyphs=function(t){return this.font.stringToGlyphs(t)},T.Font.prototype._getPath=function(t,e,r,n){var i=this.parent,o=i._renderer.drawingContext,s=this._handleAlignment(i,o,t,e,r);return this.font.getPath(t,s.x,s.y,i._renderer._textSize,n)},T.Font.prototype._getPathData=function(t,e,r,n){var i=3;return"string"==typeof t&&arguments.length>2?t=this._getPath(t,e,r,n):"object"==typeof e&&(n=e),n&&"number"==typeof n.decimals&&(i=n.decimals),t.toPathData(i)},T.Font.prototype._getSVG=function(t,e,r,n){var i=3;return"string"==typeof t&&arguments.length>2?t=this._getPath(t,e,r,n):"object"==typeof e&&(n=e),n&&("number"==typeof n.decimals&&(i=n.decimals),"number"==typeof n.strokeWidth&&(t.strokeWidth=n.strokeWidth),"undefined"!=typeof n.fill&&(t.fill=n.fill),"undefined"!=typeof n.stroke&&(t.stroke=n.stroke)),t.toSVG(i)},T.Font.prototype._renderPath=function(t,e,r,n){var i,o=n&&n.renderer||this.parent._renderer,s=o.drawingContext;i="object"==typeof t&&t.commands?t.commands:this._getPath(t,e,r,o._textSize,n).commands,s.beginPath();for(var a=0;a<i.length;a+=1){var u=i[a];"M"===u.type?s.moveTo(u.x,u.y):"L"===u.type?s.lineTo(u.x,u.y):"C"===u.type?s.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,u.x,u.y):"Q"===u.type?s.quadraticCurveTo(u.x1,u.y1,u.x,u.y):"Z"===u.type&&s.closePath()}return o._doStroke&&o._strokeSet&&s.stroke(),o._doFill&&(s.fillStyle=o._fillSet?s.fillStyle:E._DEFAULT_TEXT_FILL,s.fill()),this},T.Font.prototype._textWidth=function(t,e){if(" "===t)return this.font.charToGlyph(" ").advanceWidth*this._scale(e);var r=this.textBounds(t,0,0,e);return r.w+r.advance},T.Font.prototype._textAscent=function(t){return this.font.ascender*this._scale(t)},T.Font.prototype._textDescent=function(t){return-this.font.descender*this._scale(t)},T.Font.prototype._scale=function(t){return 1/this.font.unitsPerEm*(t||this.parent._renderer._textSize)},T.Font.prototype._handleAlignment=function(t,e,r,n,i){var o=this._textWidth(r),s=this._textAscent(),a=this._textDescent(),u=s+a;return e.textAlign===E.CENTER?n-=o/2:e.textAlign===E.RIGHT&&(n-=o),e.textBaseline===E.TOP?i+=u:e.textBaseline===E._CTX_MIDDLE?i+=u/2-a:e.textBaseline===E.BOTTOM&&(i-=a),{x:n,y:i}},e.exports=T.Font},{"../core/constants":48,"../core/core":49}],85:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.append=function(t,e){return t.push(e),t},n.prototype.arrayCopy=function(t,e,r,n,i){var o,s;"undefined"!=typeof i?(s=Math.min(i,t.length),o=n,t=t.slice(e,s+e)):("undefined"!=typeof r?(s=r,s=Math.min(s,t.length)):s=t.length,o=0,r=e,t=t.slice(0,s)),Array.prototype.splice.apply(r,[o,s].concat(t))},n.prototype.concat=function(t,e){return t.concat(e)},n.prototype.reverse=function(t){return t.reverse()},n.prototype.shorten=function(t){return t.pop(),t},n.prototype.shuffle=function(t,e){var r=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t);t=e||r?t:t.slice();for(var n,i,o=t.length;o>1;)n=Math.random()*o|0,i=t[--o],t[o]=t[n],t[n]=i;return t},n.prototype.sort=function(t,e){var r=e?t.slice(0,Math.min(e,t.length)):t,n=e?t.slice(Math.min(e,t.length)):[];return r="string"==typeof r[0]?r.sort():r.sort(function(t,e){return t-e}),r.concat(n)},n.prototype.splice=function(t,e,r){return Array.prototype.splice.apply(t,[r,0].concat(e)),t},n.prototype.subset=function(t,e,r){return"undefined"!=typeof r?t.slice(e,e+r):t.slice(e,t.length)},e.exports=n},{"../core/core":49}],86:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype["float"]=function(t){return parseFloat(t)},n.prototype["int"]=function(t,e){return"string"==typeof t?(e=e||10,parseInt(t,e)):"number"==typeof t?0|t:"boolean"==typeof t?t?1:0:t instanceof Array?t.map(function(t){return n.prototype["int"](t,e)}):void 0},n.prototype.str=function(t){return t instanceof Array?t.map(n.prototype.str):String(t)},n.prototype["boolean"]=function(t){return"number"==typeof t?0!==t:"string"==typeof t?"true"===t.toLowerCase():"boolean"==typeof t?t:t instanceof Array?t.map(n.prototype["boolean"]):void 0},n.prototype["byte"]=function(t){var e=n.prototype["int"](t,10);return"number"==typeof e?(e+128)%256-128:e instanceof Array?e.map(n.prototype["byte"]):void 0},n.prototype["char"]=function(t){return"number"!=typeof t||isNaN(t)?t instanceof Array?t.map(n.prototype["char"]):"string"==typeof t?n.prototype["char"](parseInt(t,10)):void 0:String.fromCharCode(t)},n.prototype.unchar=function(t){return"string"==typeof t&&1===t.length?t.charCodeAt(0):t instanceof Array?t.map(n.prototype.unchar):void 0},n.prototype.hex=function(t,e){if(e=void 0===e||null===e?e=8:e,t instanceof Array)return t.map(function(t){return n.prototype.hex(t,e)});if("number"==typeof t){0>t&&(t=4294967295+t+1);for(var r=Number(t).toString(16).toUpperCase();r.length<e;)r="0"+r;return r.length>=e&&(r=r.substring(r.length-e,r.length)),r}},n.prototype.unhex=function(t){return t instanceof Array?t.map(n.prototype.unhex):parseInt("0x"+t,16)},e.exports=n},{"../core/core":49}],87:[function(t,e,r){"use strict";function n(){var t=arguments[0],e=0>t,r=e?t.toString().substring(1):t.toString(),n=r.indexOf("."),i=-1!==n?r.substring(0,n):r,o=-1!==n?r.substring(n+1):"",s=e?"-":"";if(3===arguments.length){var a="";(-1!==n||arguments[2]-o.length>0)&&(a="."),o.length>arguments[2]&&(o=o.substring(0,arguments[2]));for(var u=0;u<arguments[1]-i.length;u++)s+="0";s+=i,s+=a,s+=o;for(var l=0;l<arguments[2]-o.length;l++)s+="0";return s}for(var c=0;c<Math.max(arguments[1]-i.length,0);c++)s+="0";return s+=r}function i(){var t=arguments[0].toString(),e=t.indexOf("."),r=-1!==e?t.substring(e):"",n=-1!==e?t.substring(0,e):t;if(n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===arguments[1])r="";else if(void 0!==arguments[1])if(arguments[1]>r.length){r+=-1===e?".":"";for(var i=arguments[1]-r.length+1,o=0;i>o;o++)r+="0"}else r=r.substring(0,arguments[1]+1);return n+r}function o(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function s(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var a=t("../core/core");a.prototype.join=function(t,e){return t.join(e)},a.prototype.match=function(t,e){return t.match(e)},a.prototype.matchAll=function(t,e){for(var r=new RegExp(e,"g"),n=r.exec(t),i=[];null!==n;)i.push(n),n=r.exec(t);return i},a.prototype.nf=function(){if(arguments[0]instanceof Array){var t=arguments[1],e=arguments[2];return arguments[0].map(function(r){return n(r,t,e)})}var r=Object.prototype.toString.call(arguments[0]);return"[object Arguments]"===r?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):n.apply(this,arguments)},a.prototype.nfc=function(){if(arguments[0]instanceof Array){var t=arguments[1];return arguments[0].map(function(e){return i(e,t)})}return i.apply(this,arguments)},a.prototype.nfp=function(){var t=this.nf.apply(this,arguments);return t instanceof Array?t.map(o):o(t)},a.prototype.nfs=function(){var t=this.nf.apply(this,arguments);return t instanceof Array?t.map(s):s(t)},a.prototype.split=function(t,e){return t.split(e)},a.prototype.splitTokens=function(){var t,e,r,n;return n=arguments[1],arguments.length>1?(r=/\]/g.exec(n),e=/\[/g.exec(n),e&&r?(n=n.slice(0,r.index)+n.slice(r.index+1),e=/\[/g.exec(n),n=n.slice(0,e.index)+n.slice(e.index+1),t=new RegExp("[\\["+n+"\\]]","g")):r?(n=n.slice(0,r.index)+n.slice(r.index+1),t=new RegExp("["+n+"\\]]","g")):e?(n=n.slice(0,e.index)+n.slice(e.index+1),t=new RegExp("["+n+"\\[]","g")):t=new RegExp("["+n+"]","g")):t=/\s/g,arguments[0].split(t).filter(function(t){return t})},a.prototype.trim=function(t){return t instanceof Array?t.map(this.trim):t.trim()},e.exports=a},{"../core/core":49}],88:[function(t,e,r){"use strict";var n=t("../core/core");n.prototype.day=function(){return(new Date).getDate()},n.prototype.hour=function(){return(new Date).getHours()},n.prototype.minute=function(){return(new Date).getMinutes()},n.prototype.millis=function(){return window.performance.now()},n.prototype.month=function(){return(new Date).getMonth()+1},n.prototype.second=function(){return(new Date).getSeconds()},n.prototype.year=function(){return(new Date).getFullYear()},e.exports=n},{"../core/core":49}]},{},[40])(40)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e,r){!function(t,n){if("object"==typeof r&&"object"==typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var i=n();for(var o in i)("object"==typeof r?r:t)[o]=i[o]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){(function(e){"use strict";var n=r(4),i=r(8),o=r(2),s=r(9),a=r(1).Promise,u=r(15),l=r(16);t.exports=e.SC={initialize:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o.set("oauth_token",t.oauth_token),o.set("client_id",t.client_id),o.set("redirect_uri",t.redirect_uri),o.set("baseURL",t.baseURL),o.set("connectURL",t.connectURL)},get:function(t,e){return n.request("GET",t,e)},post:function(t,e){return n.request("POST",t,e)},put:function(t,e){return n.request("PUT",t,e)},"delete":function(t){return n.request("DELETE",t)},upload:function(t){return n.upload(t)},connect:function(t){return s(t)},isConnected:function(){return void 0!==o.get("oauth_token")},oEmbed:function(t,e){return n.oEmbed(t,e)},resolve:function(t){return n.resolve(t)},Recorder:u,Promise:a,stream:function(t,e){return l(t,e)},connectCallback:function(){i.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(t,e,r){var n;(function(t,i,o,s){(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){Y=t}function h(t){Q=t}function p(){var e=t.nextTick,r=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(e=i),function(){e(y)}}function f(){return function(){W(y)}}function d(){var t=0,e=new et(y),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function m(){var t=new MessageChannel;return t.port1.onmessage=y,function(){t.port2.postMessage(0)}}function g(){return function(){setTimeout(y,1)}}function y(){for(var t=0;Z>t;t+=2){var e=it[t],r=it[t+1];e(r),it[t]=void 0,it[t+1]=void 0}Z=0}function v(){try{var t=r(26);return W=t.runOnLoop||t.runOnContext,f()}catch(e){return g()}}function _(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function x(t){try{return t.then}catch(e){return ut.error=e,ut}}function S(t,e,r,n){try{t.call(e,r,n)}catch(i){return i}}function T(t,e,r){Q(function(t){var n=!1,i=S(r,e,function(r){n||(n=!0,e!==r?C(t,r):R(t,r))},function(e){n||(n=!0,P(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,P(t,i))},t)}function E(t,e){e._state===st?R(t,e._result):e._state===at?P(t,e._result):I(e,void 0,function(e){C(t,e)},function(e){P(t,e)})}function A(t,e){if(e.constructor===t.constructor)E(t,e);else{var r=x(e);r===ut?P(t,ut.error):void 0===r?R(t,e):u(r)?T(t,e,r):R(t,e)}}function C(t,e){t===e?P(t,b()):a(e)?A(t,e):R(t,e)}function M(t){t._onerror&&t._onerror(t._result),O(t)}function R(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&Q(O,t))}function P(t,e){t._state===ot&&(t._state=at,t._result=e,Q(M,t))}function I(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+st]=r,i[o+at]=n,0===o&&t._state&&Q(O,t)}function O(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n,i,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?$(r,n,i,o):i(o);t._subscribers.length=0}}function D(){this.error=null}function k(t,e){try{return t(e)}catch(r){return lt.error=r,lt}}function $(t,e,r,n){var i,o,s,a,l=u(r);if(l){if(i=k(r,n),i===lt?(a=!0,o=i.error,i=null):s=!0,e===i)return void P(e,w())}else i=n,s=!0;e._state!==ot||(l&&s?C(e,i):a?P(e,o):t===st?R(e,i):t===at&&P(e,i))}function N(t,e){try{e(function(e){C(t,e)},function(e){P(t,e)})}catch(r){P(t,r)}}function L(t,e){var r=this;r._instanceConstructor=t,r.promise=new t(_),r._validateInput(e)?(r._input=e,r.length=e.length,r._remaining=e.length,r._init(),0===r.length?R(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&R(r.promise,r._result))):P(r.promise,r._validationError())}function F(t){return new ct(this,t).promise}function U(t){function e(t){C(i,t)}function r(t){P(i,t)}var n=this,i=new n(_);if(!K(t))return P(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,s=0;i._state===ot&&o>s;s++)I(n.resolve(t[s]),void 0,e,r);return i}function B(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(_);return C(r,t),r}function H(t){var e=this,r=new e(_);return P(r,t),r}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=mt++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==t&&(u(t)||q(),this instanceof V||G(),N(this,t))}function j(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(t.Promise=gt)}var z;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W,Y,X,K=z,Z=0,Q=({}.toString,function(t,e){it[Z]=t,it[Z+1]=e,Z+=2,2===Z&&(Y?Y(y):X())}),J="undefined"!=typeof window?window:void 0,tt=J||{},et=tt.MutationObserver||tt.WebKitMutationObserver,rt="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,it=new Array(1e3);X=rt?p():et?d():nt?m():void 0===J?v():g();var ot=void 0,st=1,at=2,ut=new D,lt=new D;L.prototype._validateInput=function(t){return K(t)},L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=new Array(this.length)};var ct=L;L.prototype._enumerate=function(){for(var t=this,e=t.length,r=t.promise,n=t._input,i=0;r._state===ot&&e>i;i++)t._eachEntry(n[i],i)},L.prototype._eachEntry=function(t,e){var r=this,n=r._instanceConstructor;l(t)?t.constructor===n&&t._state!==ot?(t._onerror=null,r._settledAt(t._state,e,t._result)):r._willSettleAt(n.resolve(t),e):(r._remaining--,r._result[e]=t)},L.prototype._settledAt=function(t,e,r){var n=this,i=n.promise;i._state===ot&&(n._remaining--,t===at?P(i,r):n._result[e]=r),0===n._remaining&&R(i,n._result)},L.prototype._willSettleAt=function(t,e){var r=this;I(t,void 0,function(t){r._settledAt(st,e,t)},function(t){r._settledAt(at,e,t)})};var ht=F,pt=U,ft=B,dt=H,mt=0,gt=V;V.all=ht,V.race=pt,V.resolve=ft,V.reject=dt,V._setScheduler=c,V._setAsap=h,V._asap=Q,V.prototype={constructor:V,then:function(t,e){var r=this,n=r._state;if(n===st&&!t||n===at&&!e)return this;var i=new this.constructor(_),o=r._result;if(n){var s=arguments[n-1];Q(function(){$(n,i,s,o)})}else I(r,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var yt=j,vt={Promise:gt,polyfill:yt};r(19).amd?(n=function(){return vt}.call(e,r,e,s),!(void 0!==n&&(s.exports=n))):"undefined"!=typeof s&&s.exports?s.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),yt()}).call(this)}).call(e,r(6),r(3).setImmediate,function(){return this}(),r(20)(t))},function(t,e){"use strict";var r={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};t.exports={get:function(t){return r[t]},set:function(t,e){e&&(r[t]=e)}}},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(6).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},l=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=l++,n=arguments.length<2?!1:a.call(arguments,1);return u[r]=!0,o(function(){u[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(e,r(3).setImmediate,r(3).clearImmediate)},function(t,e,r){(function(e){"use strict";var n=r(2),i=r(17),o=r(1).Promise,s=function(t,r,n,i){var s=void 0,a=new o(function(o){var a=e.FormData&&n instanceof FormData;s=new XMLHttpRequest,s.upload&&s.upload.addEventListener("progress",i),s.open(t,r,!0),a||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===s.readyState&&o({responseText:s.responseText,request:s})},s.send(n)});return a.request=s,a},a=function(t){var e=t.responseText,r=t.request,n=void 0,i=void 0;try{i=JSON.parse(e)}catch(o){}return i?i.errors&&(n={message:""},i.errors[0]&&i.errors[0].error_message&&(n={message:i.errors[0].error_message})):n=r?{message:"HTTP Error: "+r.status}:{message:"Unknown error"},n&&(n.status=r.status),{json:i,error:n}},u=function c(t,e,r,n){var i=s(t,e,r,n),o=i.then(function(t){var e=t.responseText,r=t.request,n=a({responseText:e,request:r});if(n.json&&"302 - Found"===n.json.status)return c("GET",n.json.location,null);if(200!==r.status&&n.error)throw n.error;return n.json});return o.request=i.request,o},l=function(t,e,r){Object.keys(e).forEach(function(n){r?t.append(n,e[n]):t[n]=e[n]})};t.exports={request:function(t,r){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],a=n.get("oauth_token"),c=n.get("client_id"),h={},p=e.FormData&&o instanceof FormData,f=void 0,d=void 0;return h.format="json",a?h.oauth_token=a:h.client_id=c,l(o,h,p),"GET"!==t&&(f=p?o:i.encode(o),o={oauth_token:a}),r="/"!==r[0]?"/"+r:r,d=""+n.get("baseURL")+r+"?"+i.encode(o),u(t,d,f,s)},oEmbed:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e.element;delete e.element,e.url=t;var n="https://soundcloud.com/oembed.json?"+i.encode(e);return u("GET",n,null).then(function(t){return r&&t.html&&(r.innerHTML=t.html),t})},upload:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.asset_data||t.file,r=n.get("oauth_token")&&t.title&&e;if(!r)return new o(function(t,e){e({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var i=Object.keys(t),s=new FormData;return i.forEach(function(e){var r=t[e];"file"===e&&(e="asset_data",r=t.file),s.append("track["+e+"]",r)}),this.request("POST","/tracks",s,t.progress)},resolve:function(t){return this.request("GET","/resolve",{url:t})}}}).call(e,function(){return this}())},function(t,e){"use strict";var r={};t.exports={get:function(t){return r[t]},set:function(t,e){r[t]=e}}},function(t,e){function r(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&n())}function n(){if(!l){var t=setTimeout(r);l=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,l=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],l=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new i(t,e)),1!==u.length||l||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,r){"use strict";var n=r(18);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var r=e.replace(/\+/g," ").split("="),n=r.shift(),i=r.length>0?r.join("="):void 0;return n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),t.hasOwnProperty(n)?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var r=t[e];return Array.isArray(r)?r.sort().map(function(t){return n(e)+"="+n(t)}).join("&"):n(e)+"="+n(r)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,r){"use strict";var n=r(7),i=r(5);t.exports={notifyDialog:function(t){var e=n.parse(t.search),r=n.parse(t.hash),o={oauth_token:e.access_token||r.access_token,dialog_id:e.state||r.state,error:e.error||r.error,error_description:e.error_description||r.error_description},s=i.get(o.dialog_id);s&&s.handleConnectResponse(o)}}},function(t,e,r){"use strict";var n=r(2),i=r(11),o=r(1).Promise,s=function(t){return n.set("oauth_token",t.oauth_token),t};t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=n.get("oauth_token");if(e)return new o(function(t){t({oauth_token:e})});var r={client_id:t.client_id||n.get("client_id"),redirect_uri:t.redirect_uri||n.get("redirect_uri"),response_type:"code_and_token",scope:t.scope||"non-expiring",display:"popup"};if(!r.client_id||!r.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");var a=new i(r);return a.open().then(s)}},function(t,e,r){"use strict";var n=r(1).Promise;t.exports=function(){var t={};return t.promise=new n(function(e,r){t.resolve=e,t.reject=r}),t}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(10),s=r(5),a=r(12),u=r(7),l="SoundCloud_Dialog",c=function(){return[l,Math.ceil(1e6*Math.random()).toString(16)].join("_")},h=function(t){return"https://soundcloud.com/connect?"+u.stringify(t)},p=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t),this.id=c(),this.options=e,this.options.state=this.id,this.width=456,this.height=510,this.deferred=o()}return i(t,[{key:"open",value:function(){var t=h(this.options);return this.popup=a.open(t,this.width,this.height),s.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(t){var e=t.error;e?this.deferred.reject(t):this.deferred.resolve(t),this.popup.close()}}]),t}();t.exports=p},function(t,e){"use strict";t.exports={open:function(t,e,r){var n={},i=void 0;return n.location=1,n.width=e,n.height=r,n.left=window.screenX+(window.outerWidth-e)/2,n.top=window.screenY+(window.outerHeight-r)/2,n.toolbar="no",n.scrollbars="yes",i=Object.keys(n).map(function(t){return t+"="+n[t]}).join(", "),window.open(t,n.name,i)}}},function(t,e){(function(e){"use strict";var r=e.AudioContext||e.webkitAudioContext,n=null;
t.exports=function(){return n?n:n=new r}}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";var r=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia;t.exports=function(t,n,i){r.call(e.navigator,t,n,i)}}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(13),s=r(14),a=r(1).Promise,u=r(24),l=function(){var t=this,e=this.context;return new a(function(r,n){t.source?t.source instanceof AudioNode?r(t.source):n(new Error("source needs to be an instance of AudioNode")):s({audio:!0},function(n){t.stream=n,t.source=e.createMediaStreamSource(n),r(t.source)}.bind(t),n)})},c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t),this.context=e.context||o(),this._recorder=null,this.source=e.source,this.stream=null}return i(t,[{key:"start",value:function(){var t=this;return l.call(this).then(function(e){return t._recorder=new u(e),t._recorder.record(),e})}},{key:"stop",value:function(){if(this._recorder&&this._recorder.stop(),this.stream)if(this.stream.stop)this.stream.stop();else if(this.stream.getTracks){var t=this.stream.getTracks()[0];t&&t.stop()}}},{key:"getBuffer",value:function(){var t=this;return new a(function(e,r){t._recorder?t._recorder.getBuffer(function(r){var n=t.context.sampleRate,i=t.context.createBuffer(2,r[0].length,n);i.getChannelData(0).set(r[0]),i.getChannelData(1).set(r[1]),e(i)}.bind(t)):r(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var t=this;return new a(function(e,r){t._recorder?t._recorder.exportWAV(function(t){e(t)}):r(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var t=this;return this.getBuffer().then(function(e){var r=t.context.createBufferSource();return r.buffer=e,r.connect(t.context.destination),r.start(0),r})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){u.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),t}();t.exports=c},function(t,e,r){"use strict";var n=r(4),i=r(23),o=new i({flashAudioPath:"https://connect.soundcloud.com/sdk/flashAudio.swf"}),s=r(2),a=r(25);t.exports=function(t,e){var r=e?{secret_token:e}:{};return n.request("GET",t,r).then(function(t){var r=s.get("baseURL"),n=s.get("client_id"),i=r+"/tracks/"+t.id+"/streams?client_id="+n,u=r+"/tracks/"+t.id+"/plays?client_id="+n;return e&&(i+="&secret_token="+e,u+="&secret_token="+e),new a(o,{soundId:t.id,duration:t.duration,streamUrlsEndpoint:i,registerEndpoint:u})})}},function(t,e){t.exports={encode:function(t,e){function r(t){return t.filter(function(t){return"string"==typeof t&&t.length}).join("&")}function n(t){var e=Object.keys(t);return h?e.sort():e}function i(t,e){var i=":name[:prop]";return r(n(e).map(function(r){return s(i.replace(/:name/,t).replace(/:prop/,r),e[r])}))}function o(t,e){var n=":name[]";return r(e.map(function(e){return s(n.replace(/:name/,t),e)}))}function s(t,e){var r=/%20/g,n=encodeURIComponent,s=typeof e,a=null;return Array.isArray(e)?a=o(t,e):"string"===s?a=n(t)+"="+u(e):"number"===s?a=n(t)+"="+n(e).replace(r,"+"):"boolean"===s?a=n(t)+"="+e:"object"===s&&(null!==e?a=i(t,e):c||(a=n(t)+"=null")),a}function a(t){return"%"+("0"+t.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}function u(t){return t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,a)}var l="object"==typeof e?e:{},c=l.ignorenull||!1,h=l.sorted||!1;return r(n(t).map(function(e){return s(e,t[e])}))}}},function(t,e){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new i,n.append(t),n=n.getBlob()}catch(o){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(o){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(o){return new Worker(e)}}},function(t,e,r){t.exports=function(){return r(21)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;v>n;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;v>e;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;v>n;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;v>t;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;e>a;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,0>a?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',r.p+"9f9aac32c9a7432b5555.worker.js")}},function(t,e){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var r=e.slice(1),n=t[e[0]];return function(t,e,i){n.apply(this,[t,e,i].concat(r))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,r){var n,i=r(1),o=r(12),s=r(14),a=r(38),u=r(43),l=r(39),c=r(16),h=r(42),p=r(128),f=r(129);t.exports=n=function(t){t=t||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=u,this._settings=o({},t,n.defaults)},n.MimeTypes=f,n.Protocols=p,n.Events=l,n.States=a,n.Errors=u,n.BrowserUtils=c,n.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,streamUrlProvider:null,debug:!1},n.capabilities=h.names,n.createDefaultMediaDescriptor=function(t,e,r){if(!t||!e||!e.length)throw new Error("invalid input to create media descriptor");return r||(r=0),{id:t,src:e,duration:r,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},n.prototype.getAudioPlayer=function(t){return this._players[t]},n.prototype.hasAudioPlayer=function(t){return void 0!==this._players[t]},n.prototype.removeAudioPlayer=function(t){this.hasAudioPlayer(t)&&delete this._players[t]},n.prototype.setVolume=function(t){t=Math.min(1,t),this._volume=Math.max(0,t);for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setVolume(this._volume)},n.prototype.getVolume=function(){return this._volume},n.prototype.setMute=function(t){this._muted=t;for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setMute(this._muted)},n.prototype.getMute=function(){return this._muted},n.prototype.createAudioPlayer=function(t,e){var r,n=i({},this._settings,e);if(!t)throw"AudioManager: No media descriptor object passed, can`t build any player";if(t.id||(t.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!t.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[t.id]){if(r=s.createAudioPlayer(t,n),!r)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[t.id]=r}return this._players[t.id].setVolume(this._volume),this._players[t.id].setMute(this._muted),this._players[t.id].on(l.STATE_CHANGE,this._onStateChange,this),this._players[t.id]},n.prototype._onStateChange=function(t,e){e.getState()===a.DEAD&&this.removeAudioPlayer(e.getId())}},[130,2,8,4],[131,3,4],function(t,e){function r(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}t.exports=r},[132,5,6,7],function(t,e){function r(t){return!!t&&"object"==typeof t}function n(t,e){var r=null==t?void 0:t[e];return s(r)?r:void 0}function i(t){return o(t)&&p.call(t)==a}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:i(t)?f.test(c.call(t)):r(t)&&u.test(t)}var a="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,h=l.hasOwnProperty,p=l.toString,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e){function r(t){return!!t&&"object"==typeof t}function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&o(h(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){return r(t)&&i(t)&&u.call(t,"callee")&&!l.call(t,"callee")}var a=Object.prototype,u=a.hasOwnProperty,l=a.propertyIsEnumerable,c=9007199254740991,h=n("length");t.exports=s},function(t,e){function r(t){return!!t&&"object"==typeof t}function n(t,e){var r=null==t?void 0:t[e];return a(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function o(t){return s(t)&&d.call(t)==l}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?m.test(p.call(t)):r(t)&&c.test(t)}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,h=Object.prototype,p=Function.prototype.toString,f=h.hasOwnProperty,d=h.toString,m=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=n(Array,"isArray"),y=9007199254740991,v=g||function(t){return r(t)&&i(t.length)&&d.call(t)==u};t.exports=v},[133,9,10,11],function(t,e){function r(t,e,r){if("function"!=typeof t)return n;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,s){return t.call(e,r,n,i,o,s)}}return function(){return t.apply(e,arguments)}}function n(t){return t}t.exports=r},function(t,e){function r(t){return function(e){return null==e?void 0:e[t]}}function n(t){return null!=t&&s(c(t))}function i(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?l:e,t>-1&&t%1==0&&e>t}function o(t,e,r){if(!a(r))return!1;var o=typeof e;if("number"==o?n(r)&&i(e,r.length):"string"==o&&e in r){var s=r[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,l=9007199254740991,c=r("length");t.exports=o},function(t,e){function r(t,e){if("function"!=typeof t)throw new TypeError(n);return e=i(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,o=i(r.length-e,0),s=Array(o);++n<o;)s[n]=r[e+n];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,r[0],s);case 2:return t.call(this,r[0],r[1],s)}var a=Array(e+1);for(n=-1;++n<e;)a[n]=r[n];return a[e]=s,t.apply(this,a)}}var n="Expected a function",i=Math.max;t.exports=r},function(t,e,r){function n(t,e){return void 0===t?e:t}function i(t,e){return s(function(r){var n=r[0];return null==n?n:(r.push(e),t.apply(void 0,r))})}var o=r(1),s=r(13),a=i(o,n);t.exports=a},11,function(t,e,r){t.exports=r(15)},function(t,e,r){var n,i=r(16),o=r(17),s=r(45),a=r(49),u=r(46),l=r(48),c=r(50),h=r(129);t.exports=n=function(){},n.createAudioPlayer=function(t,e){var r;if(r=t.src.split(":")[0],("rtmp"===r||"rtmpt"===r||t.forceFlash)&&!t.forceHTML5)return new o(t,e);if(t.mimeType=n.getMimeType(t),t.mimeType===h.M3U8){if(i.isMSESupportMPEG()||i.isMSESupportMP4())return new c(t,e);if(i.isNativeHlsSupported()&&!t.forceCustomHLS)return i.isMobile()||t.forceSingle?new a(t,e):new s(t,e)}else{if(i.supportHTML5Audio()&&i.canPlayType(t.mimeType)||t.forceHTML5)return i.isMobile()||t.forceSingle?new l(t,e):new u(t,e);if(t.mimeType===h.MP3)return new o(t,e)}return null},n.getMimeType=function(t){if(t.mimeType)return t.mimeType;var e=t.src.split("?")[0];return e=e.substring(e.lastIndexOf(".")+1,e.length),h.getTypeByExtension(e)}},function(t,e){function r(){return!(!window.MediaSource&&!window.WebKitMediaSource)}t.exports={supportHTML5Audio:function(){var t;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return t=new Audio,!0}catch(e){return!1}},createAudioElement:function(){var t=document.createElement("audio");return t.setAttribute("msAudioCategory","BackgroundCapableMedia"),t.mozAudioChannelType="content",t},isMobile:function(t){var e=window.navigator.userAgent,r=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return r.some(function(t){return t=new RegExp(t,"i"),t.test(e)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(t){var e=document.createElement("audio");return!!(e&&e.canPlayType&&e.canPlayType(t).match(/maybe|probably/i))},isNativeHlsSupported:function(){var t,e,r,n=navigator.userAgent,i=["iPhone","iPad","iPod"];return t=function(t){return t.test(n)},e=!t(/chrome/i)&&!t(/opera/i)&&t(/safari/i),r=i.some(function(e){return t(new RegExp(e,"i"))}),r||e},isMSESupported:r,isMSESupportMPEG:function(){return r()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return r()&&MediaSource.isTypeSupported("audio/mp4")}}},function(t,e,r){function n(t,e){a.call(this,"FlashAudioProxy",t,e),n.players[t.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,n.creatingFlashAudio||(n.flashAudio?this._createFlashAudio():n.createFlashObject(e))}var i=r(1),o=r(18),s=r(29),a=r(35),u=r(39),l=r(43),c=r(38),h=r(44);t.exports=n,i(n.prototype,a.prototype),n.players={},n.createFlashObject=function(t){n.creatingFlashAudio=!0,n.containerElement=document.createElement("div"),n.containerElement.setAttribute("id",t.flashObjectID+"-container"),n.flashElementTarget=document.createElement("div"),n.flashElementTarget.setAttribute("id",t.flashObjectID+"-target"),n.containerElement.appendChild(n.flashElementTarget),document.body.appendChild(n.containerElement);var e=function(e){if(e.success)n.flashAudio=document.getElementById(t.flashObjectID),window.setTimeout(function(){if(n.flashAudio&&!("PercentLoaded"in n.flashAudio))for(var t in n.players)n.players.hasOwnProperty(t)&&(n.players[t]._errorID=l.FLASH_PROXY_FLASH_BLOCKED,n.players[t]._errorMessage="Flash object blocked",n.players[t]._setState(c.ERROR),n.players[t]._logger.type=n.players[t].getType(),n.players[t]._logger.log(n.players[t]._errorMessage))},t.flashLoadTimeout),n.flashAudio.triggerEvent=function(t,e){n.players[t]._triggerEvent(e)},n.flashAudio.onPositionChange=function(t,e,r,i){n.players[t]._onPositionChange(e,r,i)},n.flashAudio.onDebug=function(t,e,r){n.players[t]._logger.type=e,n.players[t]._logger.log(r)},n.flashAudio.onStateChange=function(t,e){n.players[t]._setState(e),e===c.DEAD&&delete n.players[t]},n.flashAudio.onInit=function(t){n.creatingFlashAudio=!1,o(s(n.players),"_createFlashAudio")};else for(var r in n.players)n.players.hasOwnProperty(r)&&(n.players[r]._errorID=l.FLASH_PROXY_CANT_LOAD_FLASH,n.players[r]._errorMessage="Cannot create flash object",n.players[r]._setState(c.ERROR))};document.getElementById(t.flashObjectID)||h.embedSWF(t.flashAudioPath,t.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(t))},{allowscriptaccess:"always"},{id:t.flashObjectID,tabIndex:"-1"},e)},n._ready=function(){return n.flashAudio&&!n.creatingFlashAudio},n.prototype._createFlashAudio=function(){n.flashAudio.createAudio(this.getDescriptor()),this._state=n.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},n.prototype._triggerEvent=function(t){this._logger.log("Flash element triggered event: "+t),this.trigger(t,this)},n.prototype._setState=function(t){this._state!==t&&(this._state=t,this.trigger(u.STATE_CHANGE,t,this))},n.prototype._onPositionChange=function(t,e,r){this.trigger(u.POSITION_CHANGE,t,e,r,this)},n.prototype.getType=function(){return n._ready()?n.flashAudio.getType(this.getId()):this._type},n.prototype.getContainerElement=function(){return n.containerElement},n.prototype.play=function(t){if(n._ready()){if(this.getState()===c.PAUSED)return void this.resume();t=void 0===t?0:t,n.flashAudio.playAudio(this.getId(),t)}},n.prototype.pause=function(){n._ready()&&n.flashAudio.pauseAudio(this.getId())},n.prototype.seek=function(t){n._ready()&&n.flashAudio.seekAudio(this.getId(),t)},n.prototype.resume=function(){n._ready()&&n.flashAudio.resumeAudio(this.getId())},n.prototype.setVolume=function(t){this._volume=t,n._ready()&&n.flashAudio.setVolume(this.getId(),t)},n.prototype.getVolume=function(){return n._ready()?n.flashAudio.getVolume(this.getId()):this._volume},n.prototype.setMute=function(t){this._muted=t,n._ready()&&n.flashAudio.setMute(this.getId(),t)},n.prototype.getMute=function(){return n._ready()?n.flashAudio.getMute(this.getId()):this._muted},n.prototype.getState=function(){return this._state},n.prototype.getCurrentPosition=function(){return n._ready()?n.flashAudio.getCurrentPosition(this.getId()):0},n.prototype.getLoadedPosition=function(){return n._ready()?n.flashAudio.getLoadedPosition(this.getId()):0},n.prototype.getDuration=function(){return n._ready()?n.flashAudio.getDuration(this.getId()):0},n.prototype.kill=function(){return n._ready()?void n.flashAudio.killAudio(this.getId()):0},n.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:n.flashAudio.getErrorMessage(this.getId())},n.prototype.getErrorID=function(){return this._errorID?this._errorID:n.flashAudio.getErrorID(this.getId())},n.prototype.getLevelNum=function(){return n._ready()?n.flashAudio.getLevelNum(this.getId()):0},n.prototype.getLevel=function(){return n._ready()?n.flashAudio.getLevel(this.getId()):0},n.prototype.setLevel=function(t){return n._ready()?n.flashAudio.setLevel(this.getId(),t):0}},function(t,e,r){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&s(g(t))}function o(t,e){var r=typeof t;if("string"==r&&d.test(t)||"number"==r)return!0;if(h(t))return!1;var n=!f.test(t);return n||null!=e&&t in a(e)}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function a(t){return u(t)?t:Object(t)}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=r(19),c=r(24),h=r(23),p=r(28),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,d=/^\w*$/,m=9007199254740991,g=n("length"),y=p(function(t,e,r){var n=-1,s="function"==typeof e,a=o(e),u=i(t)?Array(t.length):[];return l(t,function(t){var i=s?e:a&&null!=t?t[e]:void 0;u[++n]=i?i.apply(t,r):c(t,e,r)}),u});t.exports=y},[134,20],[132,21,22,23],5,6,7,function(t,e,r){function n(t,e,r){null==t||i(e,t)||(e=c(e),t=1==e.length?t:u(t,l(e,0,-1)),e=s(e));var n=null==t?t:t[e];return null==n?void 0:n.apply(t,r)}function i(t,e){var r=typeof t;if("string"==r&&f.test(t)||"number"==r)return!0;if(h(t))return!1;var n=!p.test(t);return n||null!=e&&t in o(e)}function o(t){return a(t)?t:Object(t)}function s(t){var e=t?t.length:0;return e?t[e-1]:void 0}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=r(25),l=r(26),c=r(27),h=r(23),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/;t.exports=n},function(t,e){function r(t,e,r){if(null!=t){void 0!==r&&r in n(t)&&(e=[r]);for(var i=0,o=e.length;null!=t&&o>i;)t=t[e[i++]];return i&&i==o?t:void 0}}function n(t){return i(t)?t:Object(t)}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=r},function(t,e){function r(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),r=void 0===r||r>i?i:+r||0,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}t.exports=r},function(t,e,r){function n(t){return null==t?"":t+""}function i(t){if(o(t))return t;var e=[];return n(t).replace(s,function(t,r,n,i){e.push(n?i.replace(a,"$1"):r||t)}),e}var o=r(23),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=i},11,function(t,e,r){function n(t){return i(t,o(t))}var i=r(30),o=r(31);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t[e[r]];return i}t.exports=r},[132,32,33,34],5,6,7,function(t,e,r){function n(t,e,r,n){this._type=t,this._id=e.id,this._descriptor=e,this._settings=r,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=i({},l.createDefaults(),n),this._logger=new u(this.getType(),this.getId(),e.title,r);try{l.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var i=r(1),o=r(36),s=r(38),a=r(39),u=r(40),l=r(42);t.exports=n,i(n.prototype,o),n.prototype.canPlay=function(){return!1},n.prototype.getCapabilities=function(){return this._capabilities},n.prototype.getLogger=function(){return this._logger},n.prototype.getSettings=function(){return this._settings},n.prototype.getDescriptor=function(){return this._descriptor},n.prototype.getType=function(){return this._type},n.prototype.getId=function(){return this._id+""},n.prototype.beforeStateChange=function(t,e){return!0},n.prototype.notifyStateChange=function(t,e){return!0},n.prototype.afterStateChange=function(t,e){},n.prototype.updateState=function(t){var e=this._state;e!==t&&e!==s.DEAD&&this.beforeStateChange(e,t)&&(this._state=t,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(e,t)&&this.trigger(a.STATE_CHANGE,t,this),this.afterStateChange(e,t))},n.prototype.getState=function(){return this._state},n.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this.getState())return!0;return!1},n.prototype.getCurrentPosition=function(){return this._currentPosition},n.prototype.getLoadedPosition=function(){return this._loadedPosition},n.prototype.getDuration=function(){return this._duration}},function(t,e,r){t.exports=r(37)},function(t,e,r){!function(){function r(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,r=[];for(e in t)t.hasOwnProperty(e)&&(r[r.length]=e);return r},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,r){if(null!=t)if(i&&t.forEach===i)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,o=t.length;o>n;n++)e.call(r,t[n],n,t);else for(var s in t)this.has(t,s)&&e.call(r,t[s],s,t)},once:function(t){var e,r=!1;return function(){return r?e:(r=!0,e=t.apply(this,arguments),t=null,e)}}}}var n,i=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=r();n={on:function(t,e,r){if(!c(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var n=this,i=u.once(function(){n.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,r)},off:function(t,e,r){var n,i,o,s,a,l,h,p;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,l=s.length;l>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=n=[],e||r)for(h=0,p=o.length;p>h;h++)i=o[h],(e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&h(r,e),n&&h(n,arguments),this},stopListening:function(t,e,r){var n=this._listeners;if(!n)return this;var i=!e&&!r;"object"==typeof e&&(r=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,r,this),i&&delete this._listeners[o];return this}};var l=/\s+/,c=function(t,e,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)t[e].apply(t,[i,r[i]].concat(n));return!1}if(l.test(r)){for(var o=r.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},h=function(t,e){var r,n=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};u.each(p,function(t,e){n[e]=function(e,r,n){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return i[o]=e,"object"==typeof r&&(n=this),e[t](r,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.BackboneEvents=n}(this)},function(t,e){t.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(t,e){t.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(t,e,r){var n,i=r(41),o=null;t.exports=function(t,e,r,s){if(!n&&(n=i(!!s.debug,"audiomanager"),o)){var a=n;n=function(){a(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return r=r&&r.length?" ["+r.replace(/\s/g,"").substr(0,6)+"]":"",{log:n.bind(null,"%s (%s)%s",t,e,r)}}},function(t,e){function r(){function t(t,r){for(var n,i=arguments.length,o=Array(i>2?i-2:0),s=2;i>s;s++)o[s-2]=arguments[s];"string"==typeof r?r=" "+r:(o.unshift(r),r=""),(n=window.console)[t].apply(n,[e()+" |"+c+"%c"+r].concat(h,o))}function e(){var t=new Date,e=null===l?0:t-l;return l=+t,"%c"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+"."+n(t.getMilliseconds(),"0",3)+"%c (%c"+n("+"+e+"ms"," ",8)+"%c)"}var r=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!r)return s;var l=null,c=a(o),h=["color: green","color: grey","color: blue","color: grey",u(o),""],p=t.bind(null,"log");return p.log=p,["info","warn","error"].forEach(function(e){p[e]=t.bind(null,e)}),p}function n(t,e,r){return o(e,r-(""+t).length)+t}function i(t){return n(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=r,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(r){return r?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e){function r(t){for(var e in i)if(i.hasOwnProperty(e)&&void 0===t[i[e]])throw new Error("Caps lack required field: "+e);if(!(t[i.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(t[i.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function n(){var t={};return t[i.MIMETYPES]=[],t[i.PROTOCOLS]=[],t[i.AUDIO_ONLY]=!0,t[i.CAN_SEEK_ALWAYS]=!0,t[i.NEEDS_URL_REFRESH]=!0,t}var i={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:n,names:i,validate:r};t.exports=o},function(t,e){t.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(t,e){function r(){if(!Y&&document.getElementsByTagName("body")[0]){try{var t,e=_("span");e.style.display="none",t=H.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(r){return}Y=!0;for(var n=V.length,i=0;n>i;i++)V[i]()}}function n(t){Y?t():V[V.length]=t}function i(t){if(typeof B.addEventListener!=D)B.addEventListener("load",t,!1);else if(typeof H.addEventListener!=D)H.addEventListener("load",t,!1);else if(typeof B.attachEvent!=D)w(B,"onload",t);else if("function"==typeof B.onload){var e=B.onload;B.onload=function(){e(),t()}}else B.onload=t}function o(){var t=H.getElementsByTagName("body")[0],e=_(k);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",L);var r=t.appendChild(e);if(r){var n=0;!function i(){if(typeof r.GetVariable!=D)try{var o=r.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Q.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(a){Q.pv=[8,0,0]}else if(10>n)return n++,void window.setTimeout(i,10);t.removeChild(e),r=null,s()}()}else s()}function s(){var t=j.length;if(t>0)for(var e=0;t>e;e++){var r=j[e].id,n=j[e].callbackFn,i={success:!1,id:r};if(Q.pv[0]>0){var o=v(r);if(o)if(!x(j[e].swfVersion)||Q.wk&&Q.wk<312)if(j[e].expressInstall&&u()){var s={};s.data=j[e].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var h={},p=o.getElementsByTagName("param"),f=p.length,d=0;f>d;d++)"movie"!==p[d].getAttribute("name").toLowerCase()&&(h[p[d].getAttribute("name")]=p[d].getAttribute("value"));
l(s,h,r,n)}else c(o),n&&n(i);else T(r,!0),n&&(i.success=!0,i.ref=a(r),i.id=r,n(i))}else if(T(r,!0),n){var m=a(r);m&&typeof m.SetVariable!=D&&(i.success=!0,i.ref=m,i.id=m.id),n(i)}}}function a(t){var e=null,r=v(t);return r&&"OBJECT"===r.nodeName.toUpperCase()&&(e=typeof r.SetVariable!==D?r:r.getElementsByTagName(k)[0]||r),e}function u(){return!X&&x("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function l(t,e,r,n){var i=v(r);if(r=y(r),X=!0,R=n||null,P={success:!1,id:r},i){"OBJECT"===i.nodeName.toUpperCase()?(C=h(i),M=null):(C=i,M=r),t.id=F,(typeof t.width==D||!/%$/.test(t.width)&&b(t.width)<310)&&(t.width="310"),(typeof t.height==D||!/%$/.test(t.height)&&b(t.height)<137)&&(t.height="137");var o=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(B.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(H.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=D?e.flashvars+="&"+s:e.flashvars=s,Q.ie&&4!==i.readyState){var a=_("div");r+="SWFObjectNew",a.setAttribute("id",r),i.parentNode.insertBefore(a,i),i.style.display="none",m(i)}f(t,e,r)}}function c(t){if(Q.ie&&4!==t.readyState){t.style.display="none";var e=_("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(h(t),e),m(t)}else t.parentNode.replaceChild(h(t),t)}function h(t){var e=_("div");if(Q.win&&Q.ie)e.innerHTML=t.innerHTML;else{var r=t.getElementsByTagName(k)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,o=0;i>o;o++)1===n[o].nodeType&&"PARAM"===n[o].nodeName||8===n[o].nodeType||e.appendChild(n[o].cloneNode(!0))}}return e}function p(t,e){var r=_("div");return r.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",r.firstChild}function f(t,e,r){var n,i=v(r);if(r=y(r),Q.wk&&Q.wk<312)return n;if(i){var o,s,a,u=_(Q.ie?"div":k);typeof t.id==D&&(t.id=r);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&d(u,a,e[a]);Q.ie&&(u=p(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));Q.ie?z[z.length]=t.id:(u.setAttribute("type",L),u.setAttribute("data",t.data)),i.parentNode.replaceChild(u,i),n=u}return n}function d(t,e,r){var n=_("param");n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}function m(t){var e=v(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(Q.ie?(e.style.display="none",function r(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else window.setTimeout(r,10)}()):e.parentNode.removeChild(e))}function g(t){return t&&t.nodeType&&1===t.nodeType}function y(t){return g(t)?t.id:t}function v(t){if(g(t))return t;var e=null;try{e=H.getElementById(t)}catch(r){}return e}function _(t){return H.createElement(t)}function b(t){return parseInt(t,10)}function w(t,e,r){t.attachEvent(e,r),W[W.length]=[t,e,r]}function x(t){t+="";var e=Q.pv,r=t.split(".");return r[0]=b(r[0]),r[1]=b(r[1])||0,r[2]=b(r[2])||0,e[0]>r[0]||e[0]===r[0]&&e[1]>r[1]||e[0]===r[0]&&e[1]===r[1]&&e[2]>=r[2]}function S(t,e,r,n){var i=H.getElementsByTagName("head")[0];if(i){var o="string"==typeof r?r:"screen";if(n&&(I=null,O=null),!I||O!==o){var s=_("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),I=i.appendChild(s),Q.ie&&typeof H.styleSheets!=D&&H.styleSheets.length>0&&(I=H.styleSheets[H.styleSheets.length-1]),O=o}I&&(typeof I.addRule!=D?I.addRule(t,e):typeof H.createTextNode!=D&&I.appendChild(H.createTextNode(t+" {"+e+"}")))}}function T(t,e){if(K){var r=e?"visible":"hidden",n=v(t);Y&&n?n.style.visibility=r:"string"==typeof t&&S("#"+t,"visibility:"+r)}}function E(t){var e=/[\\\"<>\.;]/,r=null!=e.exec(t);return r&&typeof encodeURIComponent!=D?encodeURIComponent(t):t}var A,C,M,R,P,I,O,D="undefined",k="object",$="Shockwave Flash",N="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",F="SWFObjectExprInst",U="onreadystatechange",B=window,H=document,q=navigator,G=!1,V=[],j=[],z=[],W=[],Y=!1,X=!1,K=!0,Z=!1,Q=function(){var t=typeof H.getElementById!=D&&typeof H.getElementsByTagName!=D&&typeof H.createElement!=D,e=q.userAgent.toLowerCase(),r=q.platform.toLowerCase(),n=r?/win/.test(r):/win/.test(e),i=r?/mac/.test(r):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===q.appName,a=[0,0,0],u=null;if(typeof q.plugins!=D&&typeof q.plugins[$]==k)u=q.plugins[$].description,u&&typeof q.mimeTypes!=D&&q.mimeTypes[L]&&q.mimeTypes[L].enabledPlugin&&(G=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=b(u.replace(/^(.*)\..*$/,"$1")),a[1]=b(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?b(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof B.ActiveXObject!=D)try{var l=new ActiveXObject(N);l&&(u=l.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[b(u[0]),b(u[1]),b(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:n,mac:i}}();!function(){Q.w3&&((typeof H.readyState!=D&&("complete"===H.readyState||"interactive"===H.readyState)||typeof H.readyState==D&&(H.getElementsByTagName("body")[0]||H.body))&&r(),Y||(typeof H.addEventListener!=D&&H.addEventListener("DOMContentLoaded",r,!1),Q.ie&&(H.attachEvent(U,function t(){"complete"===H.readyState&&(H.detachEvent(U,t),r())}),B===top&&!function e(){if(!Y){try{H.documentElement.doScroll("left")}catch(t){return void window.setTimeout(e,0)}r()}}()),Q.wk&&!function n(){return Y?void 0:/loaded|complete/.test(H.readyState)?void r():void window.setTimeout(n,0)}()))}(),V[0]=function(){G?o():s()},function(){Q.ie&&window.attachEvent("onunload",function(){for(var t=W.length,e=0;t>e;e++)W[e][0].detachEvent(W[e][1],W[e][2]);for(var r=z.length,n=0;r>n;n++)m(z[n]);for(var i in Q)Q[i]=null;Q=null;for(var o in A)A[o]=null;A=null})}(),t.exports=A={registerObject:function(t,e,r,n){if(Q.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=r,i.callbackFn=n,j[j.length]=i,T(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){return Q.w3?a(t):void 0},embedSWF:function(t,e,r,i,o,s,a,c,h,p){var d=y(e),m={success:!1,id:d};Q.w3&&!(Q.wk&&Q.wk<312)&&t&&e&&r&&i&&o?(T(d,!1),n(function(){r+="",i+="";var n={};if(h&&typeof h===k)for(var g in h)n[g]=h[g];n.data=t,n.width=r,n.height=i;var y={};if(c&&typeof c===k)for(var v in c)y[v]=c[v];if(a&&typeof a===k)for(var _ in a)if(a.hasOwnProperty(_)){var b=Z?encodeURIComponent(_):_,w=Z?encodeURIComponent(a[_]):a[_];typeof y.flashvars!=D?y.flashvars+="&"+b+"="+w:y.flashvars=b+"="+w}if(x(o)){var S=f(n,y,e);n.id===d&&T(d,!0),m.success=!0,m.ref=S,m.id=S.id}else{if(s&&u())return n.data=s,void l(n,y,e,p);T(d,!0)}p&&p(m)})):p&&p(m)},switchOffAutoHideShow:function(){K=!1},enableUriEncoding:function(t){Z=typeof t===D?!0:t},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:x,createSWF:function(t,e,r){return Q.w3?f(t,e,r):void 0},showExpressInstall:function(t,e,r,n){Q.w3&&u()&&l(t,e,r,n)},removeSWF:function(t){Q.w3&&m(t)},createCSS:function(t,e,r,n){Q.w3&&S(t,e,r,n)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(t){var e=H.location.search||H.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return E(e);for(var r=e.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))===t)return E(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=v(F);t&&C&&(t.parentNode.replaceChild(C,t),M&&(T(M,!0),Q.ie&&(C.style.display="block")),R&&R(P)),X=!1}},version:"2.3"}},function(t,e,r){function n(t,e,r,n){if(r!==s&&r!==o&&void 0!==r)throw new Error("Can not use the provided base class");this._baseclass=r||o,this._baseclass.call(this,t,e,n||"HLSAudioPlayer"),this._seekPosition=0}var i=r(1),o=r(46),s=r(48),a=r(38);t.exports=n,i(n.prototype,o.prototype),n.prototype.seek=function(t){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(a.LOADING,a.SEEKING)&&(this._seekPosition=t)},n.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(a.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(a.PLAYING,a.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(t,e,r){function n(t,e,r){this._duration=0,this._currentPosition=0,this._loadedPosition=0,l.prototype.constructor.call(this,r||"HTML5AudioPlayer",t,e),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var i=r(1),o=r(47).bindAll,s=r(38),a=r(39),u=r(43),l=r(35),c=r(16);t.exports=n,i(n.prototype,l.prototype),n.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],n.prototype.play=function(t){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+t),this._startFromPosition=t||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},n.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},n.prototype.seek=function(t){var e,r=!1,n=t/1e3,i=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(t)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)r=!0;else for(e=0;e<i.length;e++)if(n<=i.end(e)&&n>=i.start(e)){r=!0;break}if(!r)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=n,this._currentPosition=t,this._lastMediaClockCheck=null}},n.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===s.ENDED&&this._html5Audio.play(0)))},n.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},n.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},n.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},n.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},n.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(s.DEAD),this._logger.log("dead"))},n.prototype.getErrorMessage=function(){return this._errorMessage},n.prototype.getErrorID=function(){return this._errorID},n.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},n.prototype._initMediaElement=function(){this._html5Audio=c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},n.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},n.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this._state)return!0;return!1},n.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";n.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},n.prototype._trySeekToStartPosition=function(){var t;return this._startFromPosition>0&&(this._logger.log("seek to start position: "+this._startFromPosition),t=this._startFromPosition/1e3,this._html5Audio.currentTime=t,this._html5Audio.currentTime===t)?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1},n.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},n.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},n.prototype._resetPositionInterval=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},n.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var t;return Date.now(),this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),this._isInOneOfStates(s.PLAYING,s.LOADING)?0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!c.isIE10Mobile)?void this._onHtml5MediaEvent({type:"ended"}):this.getState()!==s.PLAYING||this._mediasHasProgressed()?void(this.getState()!==s.PLAYING&&this._mediasHasProgressed()&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING)):void(this._state===s.SEEKING&&t>0&&this.updateState(s.PLAYING))}},n.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var r=e-this._lastMediaClockCheck,n=this._currentPosition-this._lastMediaClockValue;if(.1*r>n){if(0===n&&50>r)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},n.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log("HTML5 media event: "+t.type),t.type){case"playing":if(this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"waiting":if(this.getState()===s.SEEKING)break;this.updateState(s.LOADING);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange(t);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},n.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},n.prototype._error=function(t,e){var r="error: ";e&&(r="error (native): "),this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(r+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},n.prototype._getErrorMessage=function(t){var e={};return e[u.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",e[u.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",e[t]}},function(t,e){function r(t,e){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(e),t.byteLength),r}t.exports={bindAll:function(t,e){e.forEach(function(e){t[e]=t[e].bind(t)})},concatBuffersToUint8Array:r}},function(t,e,r){function n(t,e,r){u.prototype.constructor.call(this,t,e,r||"HTML5SingleAudioPlayer")}var i,o=r(1),s=r(16),a=r(39),u=r(46),l=r(38),c={};t.exports=n,o(n.prototype,u.prototype),n._onLoaded=function(t){n._pauseOthersAndForwardEvent("_onLoaded",t)},n._onLoadedMetadata=function(t){n._pauseOthersAndForwardEvent("_onLoadedMetadata",t)},n._onHtml5MediaEvent=function(t){n._pauseOthersAndForwardEvent("_onHtml5MediaEvent",t)},n._pauseOthersAndForwardEvent=function(t,e){Object.keys(c).forEach(function(r){var n=c[r];r===i?n[t](e):n.pause()})},n.prototype._initMediaElement=function(){n._html5Audio||(n._html5Audio=s.createAudioElement(),n._html5Audio.id=this.getSettings().audioObjectID+"_Single",u.prototype._toggleEventListeners.call(n,!0)),this._toggleEventListeners(!0),this._html5Audio=n._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},n.prototype._toggleEventListeners=function(t){t?c[this.getId()]=this:delete c[this.getId()]},n.prototype.play=function(t){this._logger.log("singleton play at: "+t),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),i=this.getId(),this._isInOneOfStates(l.PAUSED)&&(this._logger.log("state was paused"),t=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),u.prototype.play.call(this,t)},n.prototype.resume=function(){return this._isInOneOfStates(l.ERROR,l.DEAD)?void 0:i!==this.getId()?void this.play(this._currentPosition):void u.prototype.resume.apply(this,arguments)},n.prototype.pause=function(){this._isInOneOfStates(l.ERROR,l.DEAD)||(this._logger.log("singleton pause"),i===this.getId()?u.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(l.PAUSED)||this.updateState(l.PAUSED),this._resetPositionInterval(!1)))},n.prototype.seek=function(t){return i!==this.getId()?(this._currentPosition=t,void this.trigger(a.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void u.prototype.seek.apply(this,arguments)}},function(t,e,r){function n(t,e){o.call(this,t,e,s,"HLSSingleAudioPlayer")}var i=r(1),o=r(45),s=r(48);t.exports=n,i(n.prototype,s.prototype,o.prototype)},function(t,e,r){function n(t,e){return u.prototype.constructor.call(this,"HLSMSEPlayer",t,e,S()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._minPreBufferLengthForPlayback=5e3,this._maxBufferLength=3e4,this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._mimeType=T(),this._mimeType?(this._mseToolkit=new h(this._logger,this._mimeType),this._mseToolkit.on(h.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(h.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(h.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(h.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._hlsToolkit.on(c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(a.MSE_NOT_SUPPORTED)}var i=r(1),o=r(47).bindAll,s=r(39),a=r(43),u=r(35),l=r(46),c=r(51),h=r(66),p=r(67),f=r(38),d=r(42),m=r(128),g=r(129),y=r(16),v=200,_=500,b=3,w=1e4,x=function(t){var e=t/b,r=_*(Math.pow(Math.E,e)/Math.E);return r+=Math.random()*v,r>w&&(r=w),r},S=function(){var t={};return t[d.names.PROTOCOLS]=[m.HLS],t[d.names.MIMETYPES]=[g.HLS,g.M3U8,g.MP3],t[d.names.NEEDS_URL_REFRESH]=!1,t},T=function(){return y.isMSESupportMPEG()&&!y.isNativeHlsSupported()?"audio/mpeg":y.isMSESupportMP4()?"audio/mp4":null};t.exports=n,i(n.prototype,u.prototype),n.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this.trigger(s.DATA)},n.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},n.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var r=e-this._lastMediaClockCheck,n=this._currentPosition-this._lastMediaClockValue;if(.1*r>n){if(0===n&&50>r)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},n.prototype._onPositionChange=function(){return this._html5Audio&&this.getState()!==f.SEEKING?(this._currentPosition=1e3*this._html5Audio.currentTime,this.getState()!==f.PLAYING||this._mediasHasProgressed()?(this.getState()!==f.PLAYING&&this._mediasHasProgressed()&&this.updateState(f.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(f.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(f.LOADING))):void 0},n.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(f.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},n.prototype._onMediaSourceDestroy=function(){this.kill()},n.prototype._onMediaSourceError=function(t){this._logger.log("MediaSource API error: "+t.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},n.prototype._onMediaSourceAppend=function(t){this._logger.log("segment appended: "+t.index),this.trigger(s.DATA,t),this._loadedPosition=t.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.play(this._currentPosition))},n.prototype._onSegmentProgress=function(t){var e=Math.round(t.loaded/t.total*100);this._logger.log("segment "+t.index+" loaded "+t.loaded+" of "+t.total+" bytes ("+e+"%)"),this._loadedPosition=t.endPosition-t.duration*(t.loaded/t.total)},n.prototype._onSegmentLoaded=function(t){return this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},n.prototype._onSegmentFailed=function(t){switch(this._logger.log("segment loading failed handler: "+t.status),t.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._refreshPlaylist();break;case c.Status.TIMEOUT:this.trigger(s.NETWORK_TIMEOUT);case c.Status.SERVER_ERROR:if(t.aborted){this._logger.log("aborted segment has been prevented from being retried");break}t.scheduleRetry(x(t.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+t.status)}},n.prototype._onPlaylistLoaded=function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._playlistRefreshInProgress&&(this._cancelNextScheduling(),this._runScheduling()),this._playlistRefreshInProgress=!1,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._inspectEncryptionData(),this._setDuration(this._hlsToolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")},n.prototype._onPlaylistFailed=function(t){return this._logger.log("playlist loading failed handler. HTTP status code is "+t),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist()}.bind(this),x(this._playlistTimesFailed)),void(0===t&&this.trigger(s.NETWORK_TIMEOUT))):void this._logger.log("we have been disposed while loading the playlist, noop")},n.prototype.afterStateChange=function(t,e){switch(e){case f.PLAYING:this._runScheduling();break;case f.PAUSED:this._cancelNextScheduling()}},n.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log('HTML5 media event "'+t.type+'"'),this._waitingToPause=!1,t.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(f.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(f.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(f.ENDED);break;case"waiting":if(this.getState()===f.SEEKING)break;this.updateState(f.LOADING);break;case"seeking":this._triggerPositionEvent(),this.updateState(f.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(f.PAUSED):this.updateState(f.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},n.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";l.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},n.prototype._loadInitialPlaylist=function(){this.updateState(f.LOADING),this._hlsToolkit.updatePlaylist()},n.prototype._refreshPlaylist=function(){this.hasStreamUrlProvider()&&(this._playlistRefreshfInProgress||(this._playlistRefreshInProgress=!0,this._streamUrlProvider().done(function(t){this._logger.log("got new M3u8 URL: "+t),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(t),this._hlsToolkit.updatePlaylist()}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),x(++this._streamUrlTimesFailed))}.bind(this))))},n.prototype._setDuration=function(t){this._duration=t;try{this._mseToolkit.duration(this._duration)}catch(e){this._onMediaSourceError(e)}},n.prototype._resetPositionTimer=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},n.prototype._triggerPositionEvent=function(){this.trigger(s.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},n.prototype._initTransmuxerOnce=function(t,e){if(!this._transmuxer){var r=this._mimeType!==t.mimeType?p.Configs.MP3_TO_FMP4:p.Configs.VOID;this._transmuxer=new p(r),this._transmuxer.on("segment",function(t){this._logger.log("transmuxed data ready, "+t.data.length+" bytes for segment "+t.index),e(t)}.bind(this))}},n.prototype._transmuxSegment=function(t,e){this._logger.log("transmuxing segment "+t.index),this._initTransmuxerOnce(t,e),this._transmuxer.process(t)},n.prototype._appendSegments=function(){var t=!0;this._segmentsDownloading.slice().forEach(function(e){e.isComplete()&&t?(this._decryptSegment(e),this._transmuxSegment(e,function(t){this._mseToolkit.append(t)}.bind(this)),this._segmentsDownloading.shift()):t=!1},this)},n.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},n.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},n.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},n.prototype._runScheduling=function(){function t(){var e=!1,r=this._getBufferUntilTime(),n=this._getCurrentSegment(),i=n?n.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+r+" ms"),!n)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+n.index);n.endPosition<=r;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+n.index),this._requestSegment(n),n.isLast){e=!0,this._logger.log("end of playlist reached");break}this._schedulingSegmentIndex=n.index+1,n=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(f.DEAD,f.PAUSED)||e?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+i+" ms"),this._nextSchedulingTimeout=window.setTimeout(t.bind(this),i))}this._nextSchedulingTimeout||t.call(this)},n.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._segmentsDownloading.forEach(function(t){t.isComplete()||t.cancel()}),this._segmentsDownloading=[]},n.prototype._requestSegment=function(t){return this._segmentsDownloading.push(t),t.isComplete()?(this._logger.log("requested data is already loaded from segment "+t.index),void this._onSegmentLoaded(t)):t.hasBeenRequested()||t.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+t.timesFailed+" times"):void this._hlsToolkit.loadSegment(t)},n.prototype._decryptSegment=function(t){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(t)},n.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},n.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},n.prototype._error=function(t,e){this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),e&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(f.ERROR),this._toggleEventListeners(!1)},n.prototype._getErrorMessage=function(t){var e={};return e[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",e[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",e[t]?"Error: "+t+" ("+e[t]+")":"Error: "+t},n.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},n.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},n.prototype.setMute=function(t){
this._html5Audio&&(this._html5Audio.muted=t)},n.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},n.prototype.getErrorID=function(){return this._errorID},n.prototype.play=function(t){return this._isInOneOfStates(f.ERROR,f.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(f.IDLE,f.INITIALIZE)?(t=t||0,this._logger.log("play from "+t),this._playRequested=!0,this.seek(t),this.getState()===f.INITIALIZE?void(this._loadOnInit=!0):void this._loadInitialPlaylist()):void this.resume()},n.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},n.prototype.seek=function(t){if(!this._isInOneOfStates(f.ERROR,f.DEAD)){if(!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(t)}.bind(this));if(t>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+t+" ms"),this.updateState(f.SEEKING),this._lastMediaClockCheck=null,this._currentPosition=t;try{this._html5Audio.currentTime=t/1e3}catch(e){this._logger.log("error seeking: "+e.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},n.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.play(1e3*this._currentPosition))},n.prototype.kill=function(){this.getState()!==f.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(f.DEAD))},n.prototype.getErrorMessage=function(){return this._errorMessage},n.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(t,e,r){var n,i=r(1),o=r(52),s=r(58),a=null,u=r(36),l={NEW:"new",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};t.exports=n=function(t,e){this._logger=t,this._duration=0,this.setUri(e)},n.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},n.Status=l,i(n.prototype,u),n.Segment=function(t,e,r,n,o){i(this,{toolkit:t,uri:e,startPosition:r,endPosition:r+n,duration:n,index:o,data:null,status:l.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=t._logger},n.Segment.prototype.containsTime=function(t){return t>=this.startPosition&&t<=this.endPosition},n.Segment.prototype.isComplete=function(){return this.status===l.COMPLETE},n.Segment.prototype.hasFailed=function(){return this.status===l.TIMEOUT||this.status===l.FORBIDDEN||this.status===l.NOT_FOUND||this.status===l.SERVER_ERROR||this.status===l.FAILED},n.Segment.prototype.isNew=function(){return this.status===l.NEW},n.Segment.prototype.hasBeenRequested=function(){return this.status===l.REQUESTED},n.Segment.prototype.scheduleRetry=function(t,e,r){var n=this;this._retryTimer=window.setTimeout(function(){e.call(r,n)},t)},n.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=l.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(n.Events.SEGMENT_CANCELED,this))},n.prototype.setUri=function(t){var e=this._uri=t;e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),this._baseURI=e.substr(0,e.lastIndexOf("/")+1)},n.prototype.updatePlaylist=function(){var t=!1,e=new XMLHttpRequest;e.open("GET",this._uri,!0),e.responseType="text",this._logger.log("downloading playlist");var r=function(r){t||(t=!0,this.trigger(n.Events.PLAYLIST_FAILED,e.status))}.bind(this);e.onload=function(t){return 200!==e.status?void r():(this._segments=[],this._duration=0,this._parsePlaylist(e.responseText)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(n.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(n.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),e.onerror=function(t){r(t)}.bind(this),e.send()},n.prototype._parsePlaylist=function(t){for(var e,r,i,o=t.split("\n"),s=!1,a=0,u=0;a<o.length;)e=o[a++],0===e.indexOf(c.SEGMENT)?(i=1e3*Number(e.substr(8,e.indexOf(",")-8)),r=this._createSegmentURL(o[a]),this._addSegment(new n.Segment(this,r,this._duration,i,u++)),a++):0===e.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(e):0===e.indexOf(c.END_TAG)&&(s=!0);return!(0===this.getNumSegments()||!s)},n.prototype._addSegment=function(t){this._segments.push(t),this._duration+=t.duration},n.prototype._parsePlaylistEncryptionHeader=function(t){var e,r,n,i=t.substr(c.ENCRYPTION.length).split(",");if(s(i,function(t){t.indexOf("METHOD")>=0?r=t.split("=")[1]:t.indexOf("URI")>=0?e=t.split("=")[1]:t.indexOf("IV")>=0&&(n=t.split("=")[1])}),!(r&&e&&r.length&&e.length))throw new Error("Failed to parse M3U8 encryption header");r=r.trim(),e=e.trim().replace(/"/g,""),this._encryptionMethod=r,this._encryptionKeyUri=e,n&&n.length?(this._encryptionIvHexString=n.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},n.prototype._parseEncryptionIvHexString=function(){var t,e=this._encryptionIvHexString.replace("0x",""),r=new Uint16Array(8),n=0;if(e.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;n<e.length;n+=4){if(t=parseInt(e.substr(n,4),16),isNaN(t))throw new Error("Failed to parse hex number in IV string");r[n/4]=t}this._encryptionIv=r},n.prototype._encryptionIvForSegment=function(t){var e=new DataView(new ArrayBuffer(16));return e.setUint32(0,t.index,!0),e.buffer},n.prototype._retrieveEncryptionKey=function(t){if(t){if(!this._encryptionKeyUri)return void t.call(this);var e=this._encryptionKeyUri,r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=o(function(n){200===r.status?this._encryptionKey=new Uint8Array(r.response):this._logger.log("Failed to retrieve encryption key from "+e+", returned status "+r.status),t.call(this)},this),r.send(),this._logger.log("Downloading encryption key from "+e)}},n.prototype._removeEncryptionPaddingBytes=function(t){var e=t.data[t.data.byteLength-1];e?(this._logger.log("Detected PKCS7 padding length of "+e+" bytes, slicing segment."),t.data=t.data.subarray(0,t.data.byteLength-e)):this._logger.log("No padding detected (last byte is zero)")},n.prototype.decryptSegmentAES128=function(t){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var e=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),r=0,n=t.data.byteLength,i=this._encryptionIv||this._encryptionIvForSegment(t);for(this._logger.log("Using IV ->"),e.start({iv:a.util.createBuffer(i)}),e.update(a.util.createBuffer(t.data)),e.finish(),t.data=new Uint8Array(n);n>r;r++)t.data[r]=e.output.getByte();this._removeEncryptionPaddingBytes(t)},n.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},n.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},n.prototype.getEncryptionIv=function(){return this._encryptionIv},n.prototype.getEncryptionKey=function(){return this._encryptionKey},n.prototype._createSegmentURL=function(t){return"http://"===t.substr(0,7)||"https://"===t.substr(0,8)||"/"===t.substr(0,1)?t:this._baseURI+t},n.prototype._handleLoadSegmentFailure=function(t,e,r){t.aborted||(this._logger.log("segment aborted: "+t.aborted),this._logger.log("segment loading failure: HTTP response status: "+e.status),0===e.status?t.status=l.TIMEOUT:403===e.status?t.status=l.FORBIDDEN:404===e.status?t.status=l.NOT_FOUND:e.status>=500?t.status=l.SERVER_ERROR:t.status=l.FAILED,t.timesFailed++,this.trigger(n.Events.SEGMENT_FAILED,t))},n.prototype.loadSegment=function(t){var e=!1,r=new XMLHttpRequest,i=t.uri,o=function(n){e||(e=!0,this._handleLoadSegmentFailure(t,r,n))}.bind(this);(t.hasBeenRequested()||t.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!t.hasBeenRequested()," complete: ",t.isComplete()),r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=function(){if(!t.aborted){if(200!==r.status)return void o();this._logger.log("download of segment "+t.index+" complete"),t.status=l.COMPLETE,t.data=new Uint8Array(r.response),t.downloadTime=Date.now()-t.downloadStartTime,this.trigger(n.Events.SEGMENT_LOADED,t)}}.bind(this),r.onprogress=function(e){t.aborted||e.loaded&&e.total&&(t.loaded=e.loaded,t.total=e.total,this.trigger(n.Events.SEGMENT_PROGRESS,t))}.bind(this),r.onerror=function(t){o(t)}.bind(this),this._logger.log("requesting segment "+t.index+" from "+i),t.xhr=r,t.aborted=!1,t.downloadStartTime=Date.now(),t.status=l.REQUESTED,r.send()},n.prototype.getSegment=function(t){return this._segments&&this._segments[t]?this._segments[t]:null},n.prototype.getSegmentIndexForTime=function(t){var e,r;if(t>this._duration||0>t||!this._segments||0===this._segments.length)return-1;for(e=Math.floor(this._segments.length*(t/this._duration)),r=this._segments[e];!(r.startPosition<=t&&r.startPosition+r.duration>t);)r.startPosition+r.duration>=t?e--:e++,r=this._segments[e];return e},n.prototype.getSegmentForTime=function(t){var e=this.getSegmentIndexForTime(t);return e>=0?this._segments[e]:null},n.prototype.getDuration=function(){return this._duration},n.prototype.getNumSegments=function(){return this._segments.length},n.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null}},function(t,e,r){var n=r(53),i=r(56),o=r(57),s=1,a=32,u=o(function(t,e,r){var o=s;if(r.length){var l=i(r,u.placeholder);o|=a}return n(t,o,e,r,l)});u.placeholder={},t.exports=u},function(t,e,r){(function(e){function n(t,e,r){for(var n=r.length,i=-1,o=A(t.length-n,0),s=-1,a=e.length,u=Array(a+o);++s<a;)u[s]=e[s];for(;++i<n;)u[r[i]]=t[i];for(;o--;)u[s++]=t[i++];return u}function i(t,e,r){for(var n=-1,i=r.length,o=-1,s=A(t.length-i,0),a=-1,u=e.length,l=Array(s+u);++o<s;)l[o]=t[o];for(var c=o;++a<u;)l[c+a]=e[a];for(;++n<i;)l[c+r[n]]=t[o++];return l}function o(t,r){function n(){var o=this&&this!==e&&this instanceof n?i:t;return o.apply(r,arguments)}var i=s(t);return n}function s(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=d(t.prototype),n=t.apply(r,e);return p(n)?n:r}}function a(t,r,o,u,l,c,p,d,T,E){function C(){for(var v=arguments.length,_=v,b=Array(v);_--;)b[_]=arguments[_];if(u&&(b=n(b,u,l)),c&&(b=i(b,c,p)),I||D){var S=C.placeholder,$=m(b,S);if(v-=$.length,E>v){var N=d?f(d):void 0,L=A(E-v,0),F=I?$:void 0,U=I?void 0:$,B=I?b:void 0,H=I?void 0:b;r|=I?w:x,r&=~(I?x:w),O||(r&=~(g|y));var q=a(t,r,o,B,F,H,U,N,T,L);return q.placeholder=S,q}}var G=R?o:this,V=P?G[t]:t;return d&&(b=h(b,d)),M&&T<b.length&&(b.length=T),this&&this!==e&&this instanceof C&&(V=k||s(t)),V.apply(G,b)}var M=r&S,R=r&g,P=r&y,I=r&_,O=r&v,D=r&b,k=P?void 0:s(t);return C}function u(t,r,n,i){function o(){for(var r=-1,s=arguments.length,l=-1,c=i.length,h=Array(c+s);++l<c;)h[l]=i[l];for(;s--;)h[l++]=arguments[++r];var p=this&&this!==e&&this instanceof o?u:t;return p.apply(a?n:this,h)}var a=r&g,u=s(t);return o}function l(t,e,r,n,i,s,l,c){var h=e&y;if(!h&&"function"!=typeof t)throw new TypeError(T);var p=n?n.length:0;if(p||(e&=~(w|x),n=i=void 0),p-=i?i.length:0,e&x){var f=n,d=i;n=i=void 0}var m=[t,e,r,n,i,f,d,s,l,c];if(m[9]=null==c?h?0:t.length:A(c-p,0)||0,e==g)var v=o(m[0],m[2]);else v=e!=w&&e!=(g|w)||m[4].length?a.apply(void 0,m):u.apply(void 0,m);return v}function c(t,e){return t="number"==typeof t||E.test(t)?+t:-1,e=null==e?M:e,t>-1&&t%1==0&&e>t}function h(t,e){for(var r=t.length,n=C(e.length,r),i=f(t);n--;){var o=e[n];t[n]=c(o,r)?i[o]:void 0}return t}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=r(54),d=r(55),m=r(56),g=1,y=2,v=4,_=8,b=16,w=32,x=64,S=128,T="Expected a function",E=/^\d+$/,A=Math.max,C=Math.min,M=9007199254740991;t.exports=l}).call(e,function(){return this}())},function(t,e){function r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}t.exports=r},function(t,e){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var n=function(){function t(){}return function(e){if(r(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();t.exports=n},function(t,e){function r(t,e){for(var r=-1,i=t.length,o=-1,s=[];++r<i;)t[r]===e&&(t[r]=n,s[++o]=r);return s}var n="__lodash_placeholder__";t.exports=r},11,function(t,e,r){function n(t,e){return function(r,n,i){return"function"==typeof n&&void 0===i&&a(r)?t(r,n):e(r,s(n,i,3))}}var i=r(59),o=r(60),s=r(65),a=r(64),u=n(i,o);t.exports=u},function(t,e){function r(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}t.exports=r},[134,61],[132,62,63,64],5,6,7,9,function(t,e,r){var n,i=r(36),o=r(16),s=r(47).bindAll,a=r(1);t.exports=n=function(t,e){s(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=e,this._logger=t,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=o.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},n.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},a(n.prototype,i),a(n.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(n.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(t){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(t);t.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=t,this._sourceBuffer.timestampOffset=t.startPosition/1e3,this._sourceBuffer.appendBuffer(t.data),this._logger.log("appending segment "+t.index)}catch(e){this._logger.log("error while appending to SourceBuffer: "+e.message+")"),this.trigger(n.Events.SOURCE_ERROR,e)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(t){this._logger.log("SourceBuffer endOfStream() call failed with error: "+t.message),this.trigger(n.Events.SOURCE_ERROR,t)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(n.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(t){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(t)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(t){return this._mediaSource.duration=t/1e3,1e3*this._mediaSource.duration}})},function(t,e,r){var n,i=r(47).concatBuffersToUint8Array,o=r(1),s=r(36),a=r(68);t.exports=n=function(t){this.config=t,this.reset(),this.segments=[],this.pushedInitData=!1},o(n.prototype,s),n.prototype.process=function(t){switch(this.segments.push(t),this.config){case n.Configs.VOID:this.trigger("segment",t);break;case n.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(t.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},n.prototype.dequeue=function(){return this.segments.shift()},n.prototype.reset=function(){switch(this.config){case n.Configs.VOID:break;case n.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var t,e=this.sink.dequeue().data;return this.gotInitData?(t=this.dequeue(),t.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(t.data=i(this.initData,e),this.pushedInitData=!0):t.data=e,this.trigger("segment",t),void this.reset()):(this.gotInitData=!0,void(this.initData=e))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},n.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(t,e,r){var n,i=r(69),o=r(115),s=r(118),a=r(121),u=r(124),l=r(125);t.exports=n={Unit:i,Units:{File:l,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:u}}},function(t,e,r){(function(e){var n,i,o,s,a,u,l,c,h,p,f=r(74),d=r(76),m=r(85),g=r(96),y=r(97);t.exports=n=function(){g.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},n.create=function(t){return d(n.prototype,t)},n.createBaseSrc=function(t){return d(u.prototype,t)},n.createBasePushSrc=function(t){return d(l.prototype,t)},n.createBaseSink=function(t){return d(c.prototype,t)},n.createBaseTransform=function(t){return d(a.prototype,t)},n.createBaseParser=function(t){return d(h.prototype,t)},n.link=function(t,e){if(arguments.length>2)return n.linkArray(arguments);for(var r=0;r<Math.min(t.numberOfOuts(),e.numberOfIns());r++)t.out(r).pipe(e["in"](r));return e},n.linkArray=function(t){var e,r,i;for(i=0;i<t.length;i++)e=t[i],t.length>i+1&&(r=t[i+1],n.link(e,r));return r};var v=n.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};n.prototype=d(g.prototype,{constructor:n,"in":function(t){return this.inputs[t]},out:function(t){return this.outputs[t]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(t){return t instanceof i?this.addInput(t):t instanceof o&&this.addOutput(t),this},remove:function(t){t instanceof i?this.removeInput(t):t instanceof o&&this.removeOutput(t)},addInput:function(t){this._installEventForwarder(t,v.FINISH),this._installEventForwarder(t,v.OPEN),this._installEventForwarder(t,v.PIPE),this._installEventForwarder(t,v.UNPIPE),this._installEventForwarder(t,v.ERROR),this._installEventForwarder(t,v.CHAIN),this.inputs.push(t)},addOutput:function(t){this._installEventForwarder(t,v.END),this._installEventForwarder(t,v.OPEN),this._installEventForwarder(t,v.CLOSE),this._installEventForwarder(t,v.ERROR),this._installEventForwarder(t,v.NEED_DATA),this.outputs.push(t)},removeInput:function(t){removePut(this.inputs,t)},removeOutput:function(t){removePut(this.outputs,t)},removePut:function(t,e){t.slice().forEach(function(r,n){r==e&&t.splice(n,1)})},_installEventForwarder:function(t,e){t.on(e,function(r){this.emit(e,t,r)}.bind(this))}}),n.Transfer=s=function(t,r,n){r||(r=t instanceof e?"buffer":t instanceof String?"utf8":"object"),this.resolved=!1,this.data=t,this.encoding=r,this.doneCallback=n},s.prototype=d(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(t){return this.data.flush=t,this},setEmpty:function(t){return this.data.empty=t,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},n.Input=i=function(t,e){y.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},i.prototype=d(y.Writable.prototype,{constructor:i,_write:function(t,e,r){f("_write: "+e),this.emit(n.Event.CHAIN,new s(t,e,r))}}),n.Output=o=function(t){y.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(t){t.push(null,"null")},o.prototype=d(y.Readable.prototype,{constructor:o,_read:function(t){this._dataRequested++,this.emit(v.NEED_DATA,this)},push:function(t,e){return this._dataRequested--,this._shouldPushMore=y.Readable.prototype.push.call(this,t,e),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){y.Readable.prototype.push.call(this,null,"null")}}),n.BaseTransform=a=function(){n.prototype.constructor.apply(this,arguments),this.add(new i).add(new o),this.on(v.CHAIN,this._onChain.bind(this)),this.on(v.FINISH,this._onFinish.bind(this))},a.prototype=d(n.prototype,{constructor:a,_onChain:function(t,e){this._transform(e),this.out(0).push(e.data,e.encoding),e.resolve()},_onFinish:function(t){o.eos(this.out(0))},_transform:function(t){}}),n.BaseSrc=u=function(){n.prototype.constructor.apply(this,arguments),this.add(new o),this.on(v.NEED_DATA,this.squeeze.bind(this))},u.prototype=d(n.prototype,{constructor:u,squeeze:function(){f("squeeze");var t=this._source();t&&(this.out(0).push(t.data,t.encoding),t.resolve())},_source:function(){}}),n.BasePushSrc=l=function(){u.prototype.constructor.apply(this,arguments),this._bufferOut=[]},l.prototype=d(u.prototype,{constructor:l,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(t){this._bufferOut.push(t),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),n.BaseSink=c=function(){n.prototype.constructor.apply(this,arguments),this.add(new i),this.on(v.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=d(n.prototype,{constructor:c,_onChain:function(t,e){f("BaseSink._onChain: "+e.encoding),this._bufferIn.push(e),this._onData(),e.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),n.BaseParser=h=function(){l.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},m(h.prototype,n.prototype,g.prototype,u.prototype,l.prototype,c.prototype,{constructor:h,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){f("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(t){}}),n.InputSelector=p=function(t){for(a.prototype.constructor.apply(this,arguments),t=(t||1)-1;t-- >0;)this.add(new i);this.selectedInputIndex=0},m(p.prototype,a.prototype,{constructor:p,_onChain:function(t,e){var r=this["in"](this.selectedInputIndex);return t!==r?void e.resolve():(this._transform(e),this.out(0).push(e.data,e.encoding),void e.resolve())},_onFinish:function(t){var e=this["in"](this.selectedInputIndex);t===e&&o.eos(this.out(0))}})}).call(e,r(70).Buffer)},function(t,e,r){(function(t,n){function i(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,r){if(e=m(e,0>r?0:0|g(r)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;r>n;n++)e[n]=0;return e}function a(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|v(e,r);return t=m(t,n),t.write(e,r),t}function u(e,r){if(t.isBuffer(r))return l(e,r);if(K(r))return c(e,r);if(null==r)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(r.buffer instanceof ArrayBuffer)return h(e,r);if(r instanceof ArrayBuffer)return p(e,r)}return r.length?f(e,r):d(e,r)}function l(t,e){var r=0|g(e.length);return t=m(t,r),e.copy(t,0,0,r),t}function c(t,e){var r=0|g(e.length);t=m(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function h(t,e){var r=0|g(e.length);t=m(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function p(e,r){return t.TYPED_ARRAY_SUPPORT?(r.byteLength,e=t._augment(new Uint8Array(r))):e=h(e,new Uint8Array(r)),e}function f(t,e){var r=0|g(e.length);t=m(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function d(t,e){var r,n=0;"Buffer"===e.type&&K(e.data)&&(r=e.data,n=0|g(r.length)),t=m(t,n);for(var i=0;n>i;i+=1)t[i]=255&r[i];return t}function m(e,r){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(r)),e.__proto__=t.prototype):(e.length=r,e._isBuffer=!0);var n=0!==r&&r<=t.poolSize>>>1;return n&&(e.parent=Z),e}function g(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function y(e,r){if(!(this instanceof y))return new y(e,r);var n=new t(e,r);return delete n.parent,n}function v(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase(),n=!0}}function _(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return R(this,e,r);case"binary":return P(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function w(t,e,r,n){return W(G(e,t.length-r),t,r,n)}function x(t,e,r,n){return W(V(e),t,r,n)}function S(t,e,r,n){return x(t,e,r,n)}function T(t,e,r,n){return W(z(e),t,r,n)}function E(t,e,r,n){return W(j(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;r>i;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r>=i+a){var u,l,c,h;switch(a){case 1:128>o&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(s=h));break;case 3:u=t[i+1],l=t[i+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(55296>h||h>57343)&&(s=h));break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&1114112>h&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return M(n)}function M(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var r="",n=0;e>n;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Q));return r}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=q(t[o]);return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(r>o||s>r)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function $(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function N(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function F(t,e,r,n,i){return i||L(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,i){return i||L(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,r,n,52,8),r+8}function B(t){if(t=H(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return 16>t?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;n>s;s++){if(r=t.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function j(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function z(t){return Y.toByteArray(B(t))}function W(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}var Y=r(71),X=r(72),K=r(73);e.Buffer=t,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var Z={};t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:i(),t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);s>o&&e[o]===r[o];)++o;return o!==s&&(n=e[o],i=r[o]),i>n?-1:n>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;n++)r+=e[n].length;var i=new t(r),o=0;for(n=0;n<e.length;n++){
var s=e[n];s.copy(i,o),o+=s.length}return i},t.byteLength=v,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):_.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,r){function n(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),r>>=0,0===this.length)return-1;if(r>=this.length)return-1;if(0>r&&(r=Math.max(this.length+r,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,r);if(t.isBuffer(e))return n(this,e,r);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,r):n(this,[e],r);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return x(this,t,e,r);case"binary":return S(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>r?(r+=n,0>r&&(r=0)):r>n&&(r=n),e>r&&(r=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=t._augment(this.subarray(e,r));else{var o=r-e;i=new t(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},t.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||D(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||k(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||k(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},t.prototype.writeUInt8=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):$(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):$(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):N(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):N(this,e,r,!1),r+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<r&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeInt8=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[r]=255&e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):$(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):$(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):N(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r=0|r,n||k(this,e,r,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):N(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&r>n&&i>r)for(o=s-1;o>=0;o--)e[o+r]=this[o+n];else if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+r]=this[o+n];else e._set(this.subarray(n,n+s),r);return s},t.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=G(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),r=0,n=e.length;n>r;r+=1)e[r]=this[r];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.equals=J.equals,e.compare=J.compare,e.indexOf=J.indexOf,e.copy=J.copy,e.slice=J.slice,e.readUIntLE=J.readUIntLE,e.readUIntBE=J.readUIntBE,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readIntLE=J.readIntLE,e.readIntBE=J.readIntBE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUIntLE=J.writeUIntLE,e.writeUIntBE=J.writeUIntBE,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeIntLE=J.writeIntLE,e.writeIntBE=J.writeIntBE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,r(70).Buffer,function(){return this}())},function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===p?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function r(t){function r(t){l[h++]=t}var n,i,s,a,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===u&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),l}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),h="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}(e)},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?i-1:0,p=r?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:(f?-1:1)*(1/0);s+=Math.pow(2,n),o-=l}return(f?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?p/u:p*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+f]=255&s,f+=d,s/=256,l-=8);t[r+f-d]|=128*m}},function(t,e){var r=Array.isArray,n=Object.prototype.toString;t.exports=r||function(t){return!!t&&"[object Array]"==n.call(t)}},function(t,e,r){var n=r(75);t.exports=function(){n.loggingEnabled()&&console.log.apply(console,arguments)}},function(t,e){var r=!1;t.exports={loggingEnabled:function(t){return void 0!==t&&(r=t),r}}},function(t,e,r){function n(t,e,r){var n=o(t);return r&&s(t,e,r)&&(e=void 0),e?i(n,e):n}var i=r(77),o=r(83),s=r(84);t.exports=n},[131,78,79],3,[132,80,81,82],5,6,7,55,10,[130,86,92,88],[131,87,88],3,[132,89,90,91],5,6,7,[133,93,94,95],9,10,11,function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;i>u;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){function n(){i.call(this)}t.exports=n;var i=r(96).EventEmitter,o=r(98);o(n,i),n.Readable=r(99),n.Writable=r(111),n.Duplex=r(112),n.Transform=r(113),n.PassThrough=r(114),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){l.removeListener("data",r),t.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",s),l.removeListener("error",a),t.removeListener("error",a),l.removeListener("end",u),l.removeListener("close",u),t.removeListener("close",u)}var l=this;l.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(l.on("end",o),l.on("close",s));var c=!1;return l.on("error",a),t.on("error",a),l.on("end",u),l.on("close",u),t.on("close",u),t.emit("pipe",l),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){e=t.exports=r(100),e.Stream=r(97),e.Readable=e,e.Writable=r(107),e.Duplex=r(106),e.Transform=r(109),e.PassThrough=r(110)},function(t,e,r){(function(e){function n(t,e){var n=r(106);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(M||(M=r(108).StringDecoder),this.decoder=new M(t.encoding),this.encoding=t.encoding)}function i(t){return r(106),this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void A.call(this)):new i(t)}function o(t,e,r,n,i){var o=l(e,r);if(o)t.emit("error",o);else if(C.isNullOrUndefined(r))e.reading=!1,e.ended||c(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&h(t)),f(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=P)t=P;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||C.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var r=null;return C.isBuffer(e)||C.isString(e)||C.isNullOrUndefined(e)||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,h(t)}function h(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(R("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(function(){p(t)}):p(t))}function p(t){R("emit readable"),t.emit("readable"),v(t)}function f(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(function(){d(t,r)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(R("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;R("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&E.listenerCount(t,"data")&&(e.flowing=!0,v(t))}}function g(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(function(){y(t,r)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){var e=t._readableState;if(R("flow",e.flowing),e.flowing)do var r=t.read();while(null!==r&&e.flowing)}function _(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):T.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new T(t);for(var u=0,l=0,c=n.length;c>l&&t>u;l++){var a=n[0],h=Math.min(t-u,a.length);o?r+=a.slice(0,h):a.copy(r,u,0,h),h<a.length?n[0]=a.slice(h):n.shift(),u+=h}}return r}function b(t){var r=t._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");r.endEmitted||(r.ended=!0,e.nextTick(function(){r.endEmitted||0!==r.length||(r.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function x(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}t.exports=i;var S=r(102),T=r(70).Buffer;i.ReadableState=n;var E=r(96).EventEmitter;E.listenerCount||(E.listenerCount=function(t,e){return t.listeners(e).length});var A=r(97),C=r(103);C.inherits=r(104);var M,R=r(105);R=R&&R.debuglog?R.debuglog("stream"):function(){},C.inherits(i,A),i.prototype.push=function(t,e){var r=this._readableState;return C.isString(t)&&!r.objectMode&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=new T(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(t){return M||(M=r(108).StringDecoder),this._readableState.decoder=new M(t),this._readableState.encoding=t,this};var P=8388608;i.prototype.read=function(t){R("read",t);var e=this._readableState,r=t;if((!C.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return R("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):h(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var n=e.needReadable;R("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&(n=!0,R("length less than watermark",n)),(e.ended||e.reading)&&(n=!1,R("reading or ended",n)),n&&(R("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=u(r,e));var i;return i=t>0?_(t,e):null,C.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),r!==t&&e.ended&&0===e.length&&b(this),C.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,r){function n(t){R("onunpipe"),t===h&&o()}function i(){R("onend"),t.end()}function o(){R("cleanup"),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("drain",g),t.removeListener("error",a),t.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",o),h.removeListener("data",s),!p.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function s(e){R("ondata");var r=t.write(e);!1===r&&(R("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(e){R("onerror",e),c(),t.removeListener("error",a),0===E.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",l),c()}function l(){R("onfinish"),t.removeListener("close",u),c()}function c(){R("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,R("pipe count=%d opts=%j",p.pipesCount,r);var f=(!r||r.end!==!1)&&t!==e.stdout&&t!==e.stderr,d=f?i:o;p.endEmitted?e.nextTick(d):h.once("end",d),t.on("unpipe",n);var g=m(h);return t.on("drain",g),h.on("data",s),t._events&&t._events.error?S(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",l),t.emit("pipe",h),p.flowing||(R("pipe resume"),h.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=x(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,r){var n=A.prototype.on.call(this,t,r);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&h(this,i);else{var o=this;e.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(R("resume"),t.flowing=!0,t.reading||(R("resume read 0"),this.read(0)),g(this,t)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(R("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(R("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)C.isFunction(t[i])&&C.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){R("wrapped _read",e),r&&(r=!1,t.resume())},n},i._fromList=_}).call(e,r(101))},function(t,e){function r(){l=!1,s.length?u=s.concat(u):c=-1,u.length&&n()}function n(){if(!l){var t=setTimeout(r);l=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,l=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],l=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new i(t,e)),1!==u.length||l||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,r){(function(t){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return"[object RegExp]"===g(t)}function h(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===g(t)}function f(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function m(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=n,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=l,e.isRegExp=c,e.isObject=h,e.isDate=p,e.isError=f,e.isFunction=d,e.isPrimitive=m,e.isBuffer=t.isBuffer}).call(e,r(70).Buffer)},98,function(t,e){},function(t,e,r){(function(e){function n(t){return this instanceof n?(u.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}t.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=r(103);a.inherits=r(104);var u=r(100),l=r(107);a.inherits(n,u),o(s(l.prototype),function(t){n.prototype[t]||(n.prototype[t]=l.prototype[t])})}).call(e,r(101))},function(t,e,r){(function(e){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){var n=r(106);t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){f(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=r(106);return this instanceof o||this instanceof e?(this._writableState=new i(t,this),this.writable=!0,void S.call(this)):new o(t)}function s(t,r,n){var i=new Error("write after end");t.emit("error",i),e.nextTick(function(){n(i)})}function a(t,r,n,i){var o=!0;if(!(x.isBuffer(n)||x.isString(n)||x.isNullOrUndefined(n)||r.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&x.isString(e)&&(e=new w(e,r)),e}function l(t,e,r,i,o){r=u(e,r,i),x.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new n(r,i,o)):c(t,e,!1,s,r,i,o),a}function c(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,r,n,i,o){n?e.nextTick(function(){r.pendingcb--,o(i)}):(r.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function f(t,r){var n=t._writableState,i=n.sync,o=n.writecb;if(p(n),r)h(t,n,i,r,o);else{
var s=y(t,n);s||n.corked||n.bufferProcessing||!n.buffer.length||g(t,n),i?e.nextTick(function(){d(t,n,s,o)}):d(t,n,s,o)}}function d(t,e,r,n){r||m(t,e),e.pendingcb--,n(),_(t,e)}function m(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var r=[],n=0;n<e.buffer.length;n++)r.push(e.buffer[n].callback);e.pendingcb++,c(t,e,!0,e.length,e.buffer,"",function(t){for(var n=0;n<r.length;n++)e.pendingcb--,r[n](t)}),e.buffer=[]}else{for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,u=e.objectMode?1:o.length;if(c(t,e,!1,u,o,s,a),e.writing){n++;break}}n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function v(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _(t,e){var r=y(t,e);return r&&(0===e.pendingcb?(v(t,e),e.finished=!0,t.emit("finish")):v(t,e)),r}function b(t,r,n){r.ending=!0,_(t,r),n&&(r.finished?e.nextTick(n):t.once("finish",n)),r.ended=!0}t.exports=o;var w=r(70).Buffer;o.WritableState=i;var x=r(103);x.inherits=r(104);var S=r(97);x.inherits(o,S),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return x.isFunction(e)&&(r=e,e=null),x.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),x.isFunction(r)||(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(n.pendingcb++,i=l(this,n,t,e,r)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||g(this,t))},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,r){var n=this._writableState;x.isFunction(t)?(r=t,t=null,e=null):x.isFunction(e)&&(r=e,e=null),x.isNullOrUndefined(t)||this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||b(this,n,r)}}).call(e,r(101))},function(t,e,r){function n(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=r(70).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,u.isNullOrUndefined(r)||t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new n(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=r(106),u=r(103);u.inherits=r(104),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("not implemented")},o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}t.exports=n;var i=r(109),o=r(103);o.inherits=r(104),o.inherits(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(107)},function(t,e,r){t.exports=r(106)},function(t,e,r){t.exports=r(109)},function(t,e,r){t.exports=r(110)},function(t,e,r){(function(e){var n,i=r(74),o=r(69),s=(o.BaseTransform,o.BaseParser),a=r(116);t.exports=n=function(t,e){o.BaseParser.prototype.constructor.apply(this,arguments),t||(t={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(t),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,e&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(t){this._onMp4Data(t.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:t}))},n.Profiles=a.Profiles,n.prototype=o.createBaseParser({constructor:n,_onMp4Data:function(t){i("_onMp4Data"),this.enqueue(new o.Transfer(new e(t),"buffer"))},_onCodecInfo:function(t){i("Codec info: "+t),this._codecInfo=t},_onFinish:function(t){i("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,t)},_parse:function(t){var e;t.data&&(e=this._timestamp=t.data.timestamp),t.data.flush&&(this._needFlush=!0),i("UnitMP4Mux Timestamp: "+this._timestamp),i("UnitMP4Mux._parse: Payload type: "+typeof t.data),this.worker?(t.data.empty||this.worker.postMessage({data:t.data,meta:t.data.meta,timestamp:e,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(t.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(t.data),e,t.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(e,r(70).Buffer)},function(t,e,r){function n(t){for(var e=t.length>>1,r=new Uint8Array(e),n=0;e>n;n++)r[n]=parseInt(t.substr(2*n,2),16);return r}function i(t,e){var r,n=0,i=s.RAW;switch(e.codecId){case h:var o=t[n++];i=o,r=1024;break;case c:var u=t[n+1]>>3&3,p=t[n+1]>>1&3;r=1===p?3===u?1152:576:3===p?384:1152}return info={codecDescription:l[e.codecId],codecId:e.codecId,data:t.subarray(n),rate:e.sampleRate,size:e.sampleSize,channels:e.channels,samples:r,packetType:i},a("parsed audio packet with %d samples",r),info}function o(t){var e=0,r=t[e]>>4,n=15&t[e];e++;var i={frameType:r,codecId:n,codecDescription:f[n]};switch(n){case m:var o=t[e++];i.packetType=o,i.compositionTime=(t[e]<<24|t[e+1]<<16|t[e+2]<<8)>>8,e+=3;break;case d:i.packetType=g.NALU,i.horizontalOffset=t[e]>>4&15,i.verticalOffset=15&t[e],i.compositionTime=0,e++}return i.data=t.subarray(e),i}var s,a=r(74),u=r(117),l=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,h=10;!function(t){t[t.HEADER=0]="HEADER",t[t.RAW=1]="RAW"}(s||(s={}));var p,f=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],d=4,m=7;!function(t){t[t.KEY=1]="KEY",t[t.INNER=2]="INNER",t[t.DISPOSABLE=3]="DISPOSABLE",t[t.GENERATED=4]="GENERATED",t[t.INFO=5]="INFO"}(p||(p={}));var g;!function(t){t[t.HEADER=0]="HEADER",t[t.NALU=1]="NALU",t[t.END=2]="END"}(g||(g={}));var y,v=8,_=9,b=!0;!function(t){t[t.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",t[t.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",t[t.MAIN_PACKETS=2]="MAIN_PACKETS"}(y||(y={}));var w=function(){function t(t){var e=this;this.oncodecinfo=function(t){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(t){throw new Error("MP4Mux.ondata is not set")},this.metadata=t,this.trackStates=this.metadata.tracks.map(function(t,r){var n={trackId:r+1,trackInfo:t,cachedDuration:0,samplesProcessed:0,initializationData:[]};return e.metadata.audioTrackId===r&&(e.audioTrackState=n),e.metadata.videoTrackId===r&&(e.videoTrackState=n),n},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return t.prototype.pushPacket=function(t,e,r,n){switch(this.state===y.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),t){case v:var a=this.audioTrackState,u=i(e,n);if(!a||a.trackInfo.codecId!==u.codecId)throw new Error("Unexpected audio packet codec: "+u.codecDescription);switch(u.codecId){default:throw new Error("Unsupported audio codec: "+u.codecDescription);case c:break;case h:if(u.packetType===s.HEADER)return void a.initializationData.push(u.data)}this.cachedPackets.push({packet:u,timestamp:r,trackId:a.trackId});break;case _:var l=this.videoTrackState,p=o(e);if(!l||l.trackInfo.codecId!==p.codecId)throw new Error("Unexpected video packet codec: "+p.codecDescription);switch(p.codecId){default:throw new Error("unsupported video codec: "+p.codecDescription);case d:break;case m:if(p.packetType===g.HEADER)return void l.initializationData.push(p.data)}this.cachedPackets.push({packet:p,timestamp:r,trackId:l.trackId});break;default:throw new Error("unknown packet type: "+t)}this.state===y.NEED_HEADER_DATA&&this._tryGenerateHeader()},t.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},t.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(t){return t.trackInfo.codecId===h||t.trackInfo.codecId===m})?this.state=y.NEED_HEADER_DATA:this.state=y.CAN_GENERATE_HEADER},t.prototype._tryGenerateHeader=function(){var t=this.trackStates.every(function(t){switch(t.trackInfo.codecId){case h:case m:return t.initializationData.length>0;default:return!0}});if(t){for(var e=["isom"],r=1,i=1,o=[],s=0;s<this.trackStates.length;s++){var a,l=this.trackStates[s],p=l.trackInfo;switch(p.codecId){case h:var f=l.initializationData[0];a=new u.AudioSampleEntry("mp4a",r,p.channels,p.samplesize,p.samplerate);var g=new Uint8Array(41+f.length);g.set(n("0000000003808080"),0),g[8]=32+f.length,g.set(n("00020004808080"),9),g[16]=18+f.length,g.set(n("40150000000000FA000000000005808080"),17),g[34]=f.length,g.set(f,35),g.set(n("068080800102"),35+f.length),a.otherBoxes=[new u.RawTag("esds",g)];var v=f[0]>>3;l.mimeTypeCodec="mp4a.40."+v;break;case c:a=new u.AudioSampleEntry(".mp3",r,p.channels,p.samplesize,p.samplerate),l.mimeTypeCodec="mp3";break;case m:var _=l.initializationData[0];a=new u.VideoSampleEntry("avc1",i,p.width,p.height),a.otherBoxes=[new u.RawTag("avcC",_)];var b=_[1]<<16|_[2]<<8|_[3];l.mimeTypeCodec="avc1."+(16777216|b).toString(16).substr(1),e.push("iso2","avc1","mp41");break;case d:a=new u.VideoSampleEntry("VP6F",i,p.width,p.height),a.otherBoxes=[new u.RawTag("glbl",n("00"))],l.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var w,x=u.TrackHeaderFlags.TRACK_ENABLED|u.TrackHeaderFlags.TRACK_IN_MOVIE;l===this.audioTrackState?w=new u.TrackBox(new u.TrackHeaderBox(x,l.trackId,-1,0,0,1,s),new u.MediaBox(new u.MediaHeaderBox(p.timescale,-1,p.language),new u.HandlerBox("soun","SoundHandler"),new u.MediaInformationBox(new u.SoundMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",n("0000000000000000")),new u.RawTag("stsc",n("0000000000000000")),new u.RawTag("stsz",n("000000000000000000000000")),new u.RawTag("stco",n("0000000000000000")))))):l===this.videoTrackState&&(w=new u.TrackBox(new u.TrackHeaderBox(x,l.trackId,-1,p.width,p.height,0,s),new u.MediaBox(new u.MediaHeaderBox(p.timescale,-1,p.language),new u.HandlerBox("vide","VideoHandler"),new u.MediaInformationBox(new u.VideoMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",n("0000000000000000")),new u.RawTag("stsc",n("0000000000000000")),new u.RawTag("stsz",n("000000000000000000000000")),new u.RawTag("stco",n("0000000000000000"))))))),o.push(w)}var S=new u.MovieExtendsBox(null,[new u.TrackExtendsBox(1,1,0,0,0),new u.TrackExtendsBox(2,1,0,0,0)],null),T=new u.BoxContainerBox("udat",[new u.MetaBox(new u.RawTag("hdlr",n("00000000000000006D6469726170706C000000000000000000")),[new u.RawTag("ilst",n("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),E=new u.MovieHeaderBox(1e3,0,this.trackStates.length+1),A=new u.MovieBox(E,o,S,T),C=new u.FileTypeBox("isom",512,e),M=C.layout(0),R=A.layout(M),P=new Uint8Array(M+R);C.write(P),A.write(P),this.oncodecinfo(this.trackStates.map(function(t){return t.mimeTypeCodec})),this.ondata(P),this.filePos+=P.length,this.state=y.MAIN_PACKETS}},t.prototype._chunk=function(){var t=this.cachedPackets;if(b&&this.videoTrackState){for(var e=t.length-1,r=this.videoTrackState.trackId;e>0&&(t[e].trackId!==r||t[e].packet.frameType!==p.KEY);)e--;e>0&&(t=t.slice(0,e))}if(0!==t.length){for(var n=[],i=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var l=this.trackStates[a],f=l.trackInfo,g=l.trackId,y=t.filter(function(t){return t.trackId===g});if(0!==y.length){var v,_,w,x=new u.TrackFragmentBaseMediaDecodeTimeBox(l.cachedDuration);switch(s.push(i),f.codecId){case h:case c:w=[];for(var e=0;e<y.length;e++){var S=y[e].packet,T=Math.round(S.samples*f.timescale/f.samplerate);n.push(S.data),i+=S.data.length,w.push({duration:T,size:S.data.length}),l.samplesProcessed+=S.samples}var E=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new u.TrackFragmentHeaderBox(E,g,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var A=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT;_=new u.TrackRunBox(A,w,0,0),l.cachedDuration=Math.round(l.samplesProcessed*f.timescale/f.samplerate);break;case m:case d:w=[];for(var C=l.samplesProcessed,M=C*f.timescale/f.framerate,R=Math.round(M),e=0;e<y.length;e++){var P=y[e].packet;C++;var I=Math.round(C*f.timescale/f.framerate),O=I-R;R=I;var D=Math.round(C*f.timescale/f.framerate+P.compositionTime*f.timescale/1e3);n.push(P.data),i+=P.data.length;var k=P.frameType===p.KEY?u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:u.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|u.SampleFlags.SAMPLE_IS_NOT_SYNC;w.push({duration:O,size:P.data.length,flags:k,compositionTimeOffset:D-I})}var E=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;v=new u.TrackFragmentHeaderBox(E,g,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var A=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT|u.TrackRunFlags.SAMPLE_FLAGS_PRESENT|u.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;_=new u.TrackRunBox(A,w,0,0),l.cachedDuration=R,l.samplesProcessed=C;break;default:throw new Error("Un codec")}var $=new u.TrackFragmentBox(v,x,_);o.push($)}}this.cachedPackets.splice(0,t.length);for(var N=new u.MovieFragmentHeaderBox(++this.chunkIndex),L=new u.MovieFragmentBox(N,o),F=L.layout(0),U=new u.MediaDataBox(n),B=U.layout(F),H=F+8,a=0;a<o.length;a++)o[a].run.dataOffset=H+s[a];var q=new Uint8Array(F+B);L.write(q),U.write(q),this.ondata(q),this.filePos+=q.length}},t}();t.exports=w,w.MP3_SOUND_CODEC_ID=c,w.AAC_SOUND_CODEC_ID=h,w.TYPE_AUDIO_PACKET=v,w.TYPE_VIDEO_PACKET=_,w.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:w.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(t,e){function r(t){for(var e=new Uint8Array(4*t.length),r=0,n=0,i=t.length;i>n;n++){var o=t.charCodeAt(n);if(127>=o)e[r++]=o;else{if(o>=55296&&56319>=o){var s=t.charCodeAt(n+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++n)}0!==(4292870144&o)?(e[r++]=248|o>>>24&3,e[r++]=128|o>>>18&63,e[r++]=128|o>>>12&63,e[r++]=128|o>>>6&63,e[r++]=128|63&o):0!==(4294901760&o)?(e[r++]=240|o>>>18&7,e[r++]=128|o>>>12&63,e[r++]=128|o>>>6&63,e[r++]=128|63&o):0!==(4294965248&o)?(e[r++]=224|o>>>12&15,e[r++]=128|o>>>6&63,e[r++]=128|63&o):(e[r++]=192|o>>>6&31,e[r++]=128|63&o)}}return e.subarray(0,r)}function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Array.prototype.concat.apply(t,e)}function i(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function o(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function s(t){return(t-f)/1e3|0}function a(t){return 65536*t|0}function u(t){return 1073741824*t|0}function l(t){return 256*t|0}function c(t){return(31&t.charCodeAt(0))<<10|(31&t.charCodeAt(1))<<5|31&t.charCodeAt(2)}var h,p=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};t.exports=h={};var f=-20828448e5,d=[1,0,0,0,1,0,0,0,1],m=[0,0,0],g=function(){function t(t,e){this.boxtype=t,"uuid"===t&&(this.userType=e)}return t.prototype.layout=function(t){this.offset=t;var e=8;return this.userType&&(e+=16),this.size=e,e},t.prototype.write=function(t){return i(t,this.offset,this.size),i(t,this.offset+4,o(this.boxtype)),this.userType?(t.set(this.userType,this.offset+8),24):8},t.prototype.toUint8Array=function(){var t=this.layout(0),e=new Uint8Array(t);return this.write(e),e},t}();h.Box=g;var y=function(t){function e(e,r,n){void 0===r&&(r=0),void 0===n&&(n=0),t.call(this,e),this.version=r,this.flags=n}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.version<<24|this.flags),r+4},e}(g);h.FullBox=y;var v=function(t){function e(e,r,n){t.call(this,"ftype"),this.majorBrand=e,this.minorVersion=r,this.compatibleBrands=n}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(e){var r=this,n=t.prototype.write.call(this,e);return i(e,this.offset+n,o(this.majorBrand)),i(e,this.offset+n+4,this.minorVersion),n+=8,this.compatibleBrands.forEach(function(t){i(e,r.offset+n,o(t)),n+=4},this),n},e}(g);h.FileTypeBox=v;var _=function(t){function e(e,r){t.call(this,e),this.children=r}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return this.children.forEach(function(t){t&&(r+=t.layout(e+r))}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return this.children.forEach(function(t){t&&(r+=t.write(e))}),r},e}(g);h.BoxContainerBox=_;var b=function(t){function e(e,r,i,o){t.call(this,"moov",n([e],r,[i,o])),this.header=e,this.tracks=r,this.extendsBox=i,this.userData=o}return p(e,t),e}(_);h.MovieBox=b;var w=function(t){function e(e,r,n,i,o,s,a,u){void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=d),void 0===a&&(a=f),void 0===u&&(u=f),t.call(this,"mvhd",0,0),this.timescale=e,this.duration=r,this.nextTrackId=n,this.rate=i,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=u}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,s(this.creationTime)),i(e,this.offset+r+4,s(this.modificationTime)),i(e,this.offset+r+8,this.timescale),i(e,this.offset+r+12,this.duration),r+=16,i(e,this.offset+r,a(this.rate)),i(e,this.offset+r+4,l(this.volume)<<16),i(e,this.offset+r+8,0),i(e,this.offset+r+12,0),r+=16,i(e,this.offset+r,a(this.matrix[0])),i(e,this.offset+r+4,a(this.matrix[1])),i(e,this.offset+r+8,a(this.matrix[2])),i(e,this.offset+r+12,a(this.matrix[3])),i(e,this.offset+r+16,a(this.matrix[4])),i(e,this.offset+r+20,a(this.matrix[5])),i(e,this.offset+r+24,u(this.matrix[6])),i(e,this.offset+r+28,u(this.matrix[7])),i(e,this.offset+r+32,u(this.matrix[8])),r+=36,i(e,this.offset+r,0),i(e,this.offset+r+4,0),i(e,this.offset+r+8,0),i(e,this.offset+r+12,0),i(e,this.offset+r+16,0),i(e,this.offset+r+20,0),r+=24,i(e,this.offset+r,this.nextTrackId),r+=4},e}(y);h.MovieHeaderBox=w,function(t){t[t.TRACK_ENABLED=1]="TRACK_ENABLED",t[t.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",t[t.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(h.TrackHeaderFlags||(h.TrackHeaderFlags={}));var x=(h.TrackHeaderFlags,function(t){function e(e,r,n,i,o,s,a,u,l,c,h){void 0===a&&(a=0),void 0===u&&(u=0),void 0===l&&(l=d),void 0===c&&(c=f),void 0===h&&(h=f),t.call(this,"tkhd",0,e),this.trackId=r,this.duration=n,this.width=i,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=u,this.matrix=l,this.creationTime=c,this.modificationTime=h}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,s(this.creationTime)),i(e,this.offset+r+4,s(this.modificationTime)),i(e,this.offset+r+8,this.trackId),i(e,this.offset+r+12,0),i(e,this.offset+r+16,this.duration),r+=20,i(e,this.offset+r,0),i(e,this.offset+r+4,0),i(e,this.offset+r+8,this.layer<<16|this.alternateGroup),i(e,this.offset+r+12,l(this.volume)<<16),r+=16,i(e,this.offset+r,a(this.matrix[0])),i(e,this.offset+r+4,a(this.matrix[1])),i(e,this.offset+r+8,a(this.matrix[2])),i(e,this.offset+r+12,a(this.matrix[3])),i(e,this.offset+r+16,a(this.matrix[4])),i(e,this.offset+r+20,a(this.matrix[5])),i(e,this.offset+r+24,u(this.matrix[6])),i(e,this.offset+r+28,u(this.matrix[7])),i(e,this.offset+r+32,u(this.matrix[8])),r+=36,i(e,this.offset+r,a(this.width)),i(e,this.offset+r+4,a(this.height)),r+=8},e}(y));h.TrackHeaderBox=x;var S=function(t){function e(e,r,n,i,o){void 0===n&&(n="unk"),void 0===i&&(i=f),void 0===o&&(o=f),t.call(this,"mdhd",0,0),this.timescale=e,this.duration=r,this.language=n,this.creationTime=i,this.modificationTime=o}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,s(this.creationTime)),i(e,this.offset+r+4,s(this.modificationTime)),i(e,this.offset+r+8,this.timescale),i(e,this.offset+r+12,this.duration),i(e,this.offset+r+16,c(this.language)<<16),r+20},e}(y);h.MediaHeaderBox=S;var T=function(t){function e(e,n){t.call(this,"hdlr",0,0),this.handlerType=e,this.name=n,this._encodedName=r(this.name)}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,0),i(e,this.offset+r+4,o(this.handlerType)),i(e,this.offset+r+8,0),i(e,this.offset+r+12,0),i(e,this.offset+r+16,0),r+=20,e.set(this._encodedName,this.offset+r),e[this.offset+r+this._encodedName.length]=0,r+=this._encodedName.length+1},e}(y);h.HandlerBox=T;var E=function(t){function e(e){void 0===e&&(e=0),t.call(this,"smhd",0,0),this.balance=e}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,l(this.balance)<<16),r+4},e}(y);h.SoundMediaHeaderBox=E;var A=function(t){function e(e,r){void 0===e&&(e=0),void 0===r&&(r=m),t.call(this,"vmhd",0,0),this.graphicsMode=e,this.opColor=r}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.graphicsMode<<16|this.opColor[0]),i(e,this.offset+r+4,this.opColor[1]<<16|this.opColor[2]),r+8},e}(y);h.VideoMediaHeaderBox=A,h.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var C=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,"url ",0,e),this.location=n,e&h.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=r(n))}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return this._encodedLocation&&(r+=this._encodedLocation.length+1),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+r),e[this.offset+r+this._encodedLocation.length]=0,r+=this._encodedLocation.length),r},e}(y);h.DataEntryUrlBox=C;var M=function(t){function e(e){t.call(this,"dref",0,0),this.entries=e}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+4;return this.entries.forEach(function(t){r+=t.layout(e+r)}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.entries.length),this.entries.forEach(function(t){r+=t.write(e)}),r},e}(y);h.DataReferenceBox=M;var R=function(t){function e(e){t.call(this,"dinf",[e]),this.dataReference=e}return p(e,t),e}(_);h.DataInformationBox=R;var P=function(t){function e(e){t.call(this,"stsd",0,0),this.entries=e}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return r+=4,this.entries.forEach(function(t){r+=t.layout(e+r)}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.entries.length),r+=4,this.entries.forEach(function(t){r+=t.write(e)}),r},e}(y);h.SampleDescriptionBox=P;var I=function(t){function e(e,r,n,i,o){t.call(this,"stbl",[e,r,n,i,o]),this.sampleDescriptions=e,this.timeToSample=r,this.sampleToChunk=n,this.sampleSizes=i,this.chunkOffset=o}return p(e,t),e}(_);h.SampleTableBox=I;var O=function(t){function e(e,r,n){t.call(this,"minf",[e,r,n]),this.header=e,this.info=r,this.sampleTable=n}return p(e,t),e}(_);h.MediaInformationBox=O;var D=function(t){function e(e,r,n){t.call(this,"mdia",[e,r,n]),this.header=e,this.handler=r,this.info=n}return p(e,t),e}(_);h.MediaBox=D;var k=function(t){function e(e,r){t.call(this,"trak",[e,r]),this.header=e,this.media=r}return p(e,t),e}(_);h.TrackBox=k;var $=function(t){function e(e,r,n,i,o){t.call(this,"trex",0,0),this.trackId=e,this.defaultSampleDescriptionIndex=r,this.defaultSampleDuration=n,this.defaultSampleSize=i,this.defaultSampleFlags=o}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.trackId),i(e,this.offset+r+4,this.defaultSampleDescriptionIndex),i(e,this.offset+r+8,this.defaultSampleDuration),i(e,this.offset+r+12,this.defaultSampleSize),i(e,this.offset+r+16,this.defaultSampleFlags),r+20},e}(y);h.TrackExtendsBox=$;var N=function(t){function e(e,r,i){t.call(this,"mvex",n([e],r,[i])),this.header=e,this.tracDefaults=r,this.levels=i}return p(e,t),e}(_);h.MovieExtendsBox=N;var L=function(t){function e(e,r){t.call(this,"meta",0,0),this.handler=e,this.otherBoxes=r}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return r+=this.handler.layout(e+r),this.otherBoxes.forEach(function(t){r+=t.layout(e+r)}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return r+=this.handler.write(e),this.otherBoxes.forEach(function(t){r+=t.write(e)}),r},e}(y);h.MetaBox=L;var F=function(t){function e(e){t.call(this,"mfhd",0,0),this.sequenceNumber=e}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.sequenceNumber),r+4},e}(y);h.MovieFragmentHeaderBox=F,function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(h.TrackFragmentFlags||(h.TrackFragmentFlags={}));var U=h.TrackFragmentFlags,B=function(t){function e(e,r,n,i,o,s,a){t.call(this,"tfhd",0,e),this.trackId=r,this.baseDataOffset=n,this.sampleDescriptionIndex=i,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+4,n=this.flags;return n&U.BASE_DATA_OFFSET_PRESENT&&(r+=8),n&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r+=4),n&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(r+=4),n&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(r+=4),n&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r+=4),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e),n=this.flags;return i(e,this.offset+r,this.trackId),r+=4,n&U.BASE_DATA_OFFSET_PRESENT&&(i(e,this.offset+r,0),i(e,this.offset+r+4,this.baseDataOffset),r+=8),n&U.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(i(e,this.offset+r,this.sampleDescriptionIndex),r+=4),n&U.DEFAULT_SAMPLE_DURATION_PRESENT&&(i(e,this.offset+r,this.defaultSampleDuration),r+=4),n&U.DEFAULT_SAMPLE_SIZE_PRESENT&&(i(e,this.offset+r,this.defaultSampleSize),r+=4),n&U.DEFAULT_SAMPLE_FLAGS_PRESENT&&(i(e,this.offset+r,this.defaultSampleFlags),r+=4),r},e}(y);h.TrackFragmentHeaderBox=B;var H=function(t){function e(e){t.call(this,"tfdt",0,0),this.baseMediaDecodeTime=e}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,this.baseMediaDecodeTime),r+4},e}(y);h.TrackFragmentBaseMediaDecodeTimeBox=H;var q=function(t){function e(e,r,n){t.call(this,"traf",[e,r,n]),this.header=e,this.decodeTime=r,this.run=n}return p(e,t),e}(_);h.TrackFragmentBox=q,function(t){t[t.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",t[t.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",t[t.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",t[t.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",t[t.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",t[t.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",t[t.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",t[t.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",
t[t.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(h.SampleFlags||(h.SampleFlags={})),h.SampleFlags,!function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(h.TrackRunFlags||(h.TrackRunFlags={}));var G=h.TrackRunFlags,V=function(t){function e(e,r,n,i){t.call(this,"trun",1,e),this.samples=r,this.dataOffset=n,this.firstSampleFlags=i}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+4,n=this.samples.length,i=this.flags;return i&G.DATA_OFFSET_PRESENT&&(r+=4),i&G.FIRST_SAMPLE_FLAGS_PRESENT&&(r+=4),i&G.SAMPLE_DURATION_PRESENT&&(r+=4*n),i&G.SAMPLE_SIZE_PRESENT&&(r+=4*n),i&G.SAMPLE_FLAGS_PRESENT&&(r+=4*n),i&G.SAMPLE_COMPOSITION_TIME_OFFSET&&(r+=4*n),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e),n=this.samples.length,o=this.flags;i(e,this.offset+r,n),r+=4,o&G.DATA_OFFSET_PRESENT&&(i(e,this.offset+r,this.dataOffset),r+=4),o&G.FIRST_SAMPLE_FLAGS_PRESENT&&(i(e,this.offset+r,this.firstSampleFlags),r+=4);for(var s=0;n>s;s++){var a=this.samples[s];o&G.SAMPLE_DURATION_PRESENT&&(i(e,this.offset+r,a.duration),r+=4),o&G.SAMPLE_SIZE_PRESENT&&(i(e,this.offset+r,a.size),r+=4),o&G.SAMPLE_FLAGS_PRESENT&&(i(e,this.offset+r,a.flags),r+=4),o&G.SAMPLE_COMPOSITION_TIME_OFFSET&&(i(e,this.offset+r,a.compositionTimeOffset),r+=4)}return r},e}(y);h.TrackRunBox=V;var j=function(t){function e(e,r){t.call(this,"moof",n([e],r)),this.header=e,this.trafs=r}return p(e,t),e}(_);h.MovieFragmentBox=j;var z=function(t){function e(e){t.call(this,"mdat"),this.chunks=e}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e);return this.chunks.forEach(function(t){r+=t.length}),this.size=r},e.prototype.write=function(e){var r=this,n=t.prototype.write.call(this,e);return this.chunks.forEach(function(t){e.set(t,r.offset+n),n+=t.length},this),n},e}(g);h.MediaDataBox=z;var W=function(t){function e(e,r){t.call(this,e),this.dataReferenceIndex=r}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,0),i(e,this.offset+r+4,this.dataReferenceIndex),r+8},e}(g);h.SampleEntry=W;var Y=function(t){function e(e,r,n,i,o,s){void 0===n&&(n=2),void 0===i&&(i=16),void 0===o&&(o=44100),void 0===s&&(s=null),t.call(this,e,r),this.channelCount=n,this.sampleSize=i,this.sampleRate=o,this.otherBoxes=s}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(t){r+=t.layout(e+r)}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return i(e,this.offset+r,0),i(e,this.offset+r+4,0),i(e,this.offset+r+8,this.channelCount<<16|this.sampleSize),i(e,this.offset+r+12,0),i(e,this.offset+r+16,this.sampleRate<<16),r+=20,this.otherBoxes&&this.otherBoxes.forEach(function(t){r+=t.write(e)}),r},e}(W);h.AudioSampleEntry=Y,h.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(t){function e(e,r,n,i,o,s,a,u,l,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===u&&(u=1),void 0===l&&(l=h.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),t.call(this,e,r),this.width=n,this.height=i,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=u,this.depth=l,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return p(e,t),e.prototype.layout=function(e){var r=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){r+=t.layout(e+r)}),this.size=r},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);i(e,this.offset+r,0),i(e,this.offset+r+4,0),i(e,this.offset+r+8,0),i(e,this.offset+r+12,0),r+=16,i(e,this.offset+r,this.width<<16|this.height),i(e,this.offset+r+4,a(this.horizResolution)),i(e,this.offset+r+8,a(this.vertResolution)),r+=12,i(e,this.offset+r,0),i(e,this.offset+r+4,this.frameCount<<16),r+=6,e[this.offset+r]=this.compressorName.length;for(var n=0;31>n;n++)e[this.offset+r+n+1]=n<this.compressorName.length?127&this.compressorName.charCodeAt(n):0;return r+=32,i(e,this.offset+r,this.depth<<16|65535),r+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){r+=t.write(e)}),r},e}(W);h.VideoSampleEntry=X;var K=function(t){function e(e,r){t.call(this,e),this.data=r}return p(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var r=t.prototype.write.call(this,e);return e.set(this.data,this.offset+r),r+this.data.length},e}(g);h.RawTag=K},function(t,e,r){(function(e){var n,i=r(74),o=r(69),s=(o.BaseTransform,r(119));r(120),t.exports=n=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},n.prototype=o.createBaseParser({constructor:n,_onMp3Frame:function(t,r,n){i("Found frame length "+t.length+" bitRate="+r+", sampleRate="+n);var s=new e(t),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:r,sampleRate:n,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=r,this._timestamp+=a},_onNoise:function(){i("mp3 has noise")},_onClose:function(){i("parser closed")},_parse:function(t){return i("parse called"),t.data.empty?(i("empty transfer"),void this.enqueue(t)):void this.parser.push(new Uint8Array(t.data))}})}).call(e,r(70).Buffer)},function(t,e,r){var n=r(74),i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function t(){this.buffer=null,this.bufferSize=0}return t.prototype.push=function(t){var e;if(this.bufferSize>0){var r=t.length+this.bufferSize;if(!this.buffer||this.buffer.length<r){var i=new Uint8Array(r);this.bufferSize>0&&i.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=i}this.buffer.set(t,this.bufferSize),this.bufferSize=r,t=this.buffer,e=r}else e=t.length;n("push "+e);for(var o,s=0;e>s&&(o=this._parse(t,s,e))>0;)s+=o;var a=e-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(t.subarray(s,e)):this.buffer.set(t.subarray(s,e))),this.bufferSize=a},t.prototype._parse=function(t,e,r){if(n("_parse"),e+2>r)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>r)return-1;var s=t[e+1]>>3&3,a=t[e+1]>>1&3,u=t[e+2]>>4&15,l=t[e+2]>>2&3,c=!!(2&t[e+2]);if(1!==s&&0!==u&&15!==u&&3!==l){var h=3===s?3-a:3===a?3:4,p=1e3*i[14*h+u-1],f=3===s?0:2===s?1:2,d=o[3*f+l],m=c?1:0,g=3===a?(3===s?12:6)*p/d+m<<2:(3===s?144:72)*p/d+m|0;return e+g>r?-1:(this.onFrame&&(n("onFrame"),this.onFrame(t.subarray(e,e+g),p,d)),g)}}for(var y=e+2;r>y;){if(255===t[y-1]&&224===(224&t[y]))return this.onNoise&&this.onNoise(t.subarray(e,y-1)),y-e-1;y++}return-1},t.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},t}();t.exports=s},function(t,e){var r=1e9;t.exports={TIMESCALE_SECONDS:r}},function(t,e,r){var n,i=r(122),o=r(69),s=o.BaseSink,a=r(123);t.exports=n=function(t){if(s.prototype.constructor.call(this),!i.haveMediaSourceSupportMimeType(t))throw new Error("Local MediaSource doesn't support provided MIME type: "+t);var e;e=arguments.length>1?Array.prototype.slice.call(arguments):t instanceof Array?t:[t],this.mimeTypes=e,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(t){var e={mimeType:t};this.mseWriter.listen(e),this.dataSources.push(e)}.bind(this))},n.prototype=o.createBaseSink({constructor:n,_onData:function(){var t=this.dataSources[this.selectedDataSourceIndex];if(!t||!t.onData)throw new Error("DataSource is not existing or has no onData function defined");var e=this.dequeue();e&&t.onData(e.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(t,e){var r;t.exports=r={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return r.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(t){return r.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(t)}}},function(t,e){var r=function(){function t(t,e){this.mediaSource=t,this.dataSource=e,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return t.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},t.prototype.pushData=function(t){this.buffer.push(t),this.update()},t.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var t=this.buffer.shift();if(null===t)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);t.timestamp&&(this.sourceBuffer.timestampOffset=t.timestamp/1e9),this.sourceBuffer.appendBuffer(t)}},t.prototype._sourceBufferUpdated=function(t){this.updateEnabled=!0,this.update()},t.prototype.finish=function(){this.buffer.push(null),this.update()},t}(),n=function(){function t(t){this.bufferWriters=[],this.mediaSource=t,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(t){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(t){t.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(t){this.mediaSourceOpened=!1}.bind(this))}return t.prototype.listen=function(t){var e=new r(this.mediaSource,t);this.bufferWriters.push(e),this.mediaSourceOpened&&e.allowWriting()},t}();t.exports=n},function(t,e,r){var n,i,o=r(69);i=function(t){o.BasePushSrc.prototype.constructor.call(this);var e=this.req=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(t){this.enqueue(new o.Transfer(new Uint8Array(e.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),e.send()},i.prototype=o.createBasePushSrc({constructor:i}),t.exports=n={Src:i}},function(t,e,r){var n,i,o,s=r(69),a=r(126);r(76),i=function(t,e){s.prototype.constructor.call(this);var r=a.createReadStream(t,e);this.on("end",function(){r.close()}),this.addOutput(r)},i.prototype=s.create({constructor:i}),o=function(t,e){s.prototype.constructor.call(this);var r=a.createWriteStream(t,e);this.on("finish",function(){r.close()}),this.addInput(r)},o.prototype=s.create({constructor:o}),t.exports=n={Src:i,Sink:o}},function(t,e,r){var n=r(122);t.exports=n.haveGlobalWindow()?new(r(127)):r(!function(){var t=new Error('Cannot find module "fs"');throw t.code="MODULE_NOT_FOUND",t}())},function(t,e,r){var n;n=function(){function t(){return!1}function e(t){return!(!(t&&t.data instanceof Object)||r(t))}function r(t){return!!(t&&t.data instanceof ArrayBuffer)}function n(t,r){var n,i=t.length,o=r;for(n=0;i>n;++n){if(!e(o))throw new Error("ENOENT");o=o.data[t[n]]}return o}String.prototype.trim||!function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}();var i=function(){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}}};return i.prototype.join=function(){var t=[],e=arguments||[];return t=this.parse(Array.prototype.slice.call(e).join("/")),("/"===e[0][0]?"/":"")+t.join("/")},i.prototype.parse=function(t){var e=[];return t=t||"/",t.split(/\/+/).forEach(function(t){t=t.trim(),t.length&&"."!==t&&(".."===t?e.pop():e.push(t))}),e},i.prototype.fileSizeSI=function(t,e,r,n,i){return(e=Math,r=e.log,n=1e3,i=r(t)/r(n)|0,t/e.pow(n,i)).toFixed(i?2:0)+" "+(i?"kMGTPEZY"[--i]+"B":"Bytes")},i.prototype.fileSizeIEC=function(t,e,r,n,i){return(e=Math,r=e.log,n=1024,i=r(t)/r(n)|0,t/e.pow(n,i)).toFixed(i?2:0)+" "+(i?"KMGTPEZY"[--i]+"iB":"Bytes")},i.prototype.statSync=function(r){var i=this.parse(r),o=n(i,this.root),s=e(o);if(!o||!o.data)throw new Error("ENOENT");return{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:t,isCharacterDevice:t,isSymbolicLink:t,isFIFO:t,isSocket:t}},i.prototype.existsSync=function(t){var r,n=this.parse(t),i=n.length,o=this.root;for(r=0;i>r;++r){if(!e(o))return!1;o=o.data[n[r]]}return!!o},i.prototype.mkdirSync=function(t){var r=this.parse(t),i=n(r.slice(0,r.length-1),this.root),o=Date.now();if(!r.length||!e(i))throw new Error("ENODIR");i.data[r[r.length-1]]={data:{},ctime:o,mtime:o,atime:o},i.mtime=o},i.prototype.mkdirpSync=function(t){var i,o,s,a=this.parse(t),u=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;u>o;++o){if(i=a.slice(0,o+1),s=n(i,this.root),r(s))throw new Error("ENODIR");e(s)||this.mkdirSync(i.join("/"))}},i.prototype.readdirSync=function(t){var r=this.parse(t),i=n(r,this.root);if(!e(i))throw new Error("ENODIR");return i.atime=Date.now(),Object.keys(i.data)},i.prototype.rmdirSync=function(t){var r=this.parse(t),i=n(r,this.root);if(dirname=r.pop(),parentDir=n(r,this.root),!e(i))throw new Error("ENODIR");if(Object.keys(i.data).length)throw new Error("ENOTEMPTY");delete parentDir.data[dirname],parentDir.mtime=Date.now()},i.prototype.rmrfSync=function(t){var r=this.parse(t),i=r.pop(),o=n(r,this.root);if(!e(o))throw new Error("ENODIR");i?delete o.data[i]:o.data={},o.mtime=Date.now()},i.prototype.writeFileSync=function(t,r,i){var o,s,a=this.parse(t),u=a.pop(),l=this.existsSync(t),c=n(a,this.root);if(!e(c))throw new Error("ENODIR");if(!u)throw new Error("EINVALIDPATH");if(i=i||{encoding:!0},"string"==typeof r){o=new ArrayBuffer(2*r.length);for(var h=new Uint16Array(o),p=0,f=r.length;f>p;++p)h[p]=r.charCodeAt(p)}else o=r;s=Date.now(),c.data[u]={data:o,ctime:s,mtime:s,atime:s},l||(c.mtime=s),c.atime=s},i.prototype.readFileSync=function(t,e){var i=this.parse(t),o=n(i,this.root),e=e||{encoding:!1};if(!r(o))throw new Error("ENOENT");return o.atime=Date.now(),e.encoding?String.fromCharCode.apply(null,new Uint16Array(o.data)):o.data},i.prototype.renameSync=function(t,r){var i=this.parse(t),o=n(i,this.root),s=n(i.slice(0,i.length-1),this.root),a=i[i.length-1],u=this.parse(r),l=n(u,this.root),c=n(u.slice(0,u.length-1),this.root),h=u[u.length-1],p=Date.now();if(!i.length||!u.length)throw new Error("ENOENT");if(!e(s||!e(c)))throw new Error("ENODIR");if(l)throw new Error("EEXISTS");c.data[h]=l=o,l.ctime=p,c.mtime=p,delete s.data[a],s.mtime=p},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(t){i.prototype[t]=function(e,r){try{var n=this[t+"Sync"](e)}catch(i){return r(i)}return r(null,n)}}),["writeFile","readFile"].forEach(function(t){i.prototype[t]=function(e,r,n){n||(n=r,r=void 0);try{var i=this[t+"Sync"](e,r)}catch(o){return n(o)}return n(null,i)}}),["rename"].forEach(function(t){i.prototype[t]=function(e,r,n){try{var i=this[t+"Sync"](e,r)}catch(o){return n(o)}return n(null,i)}}),i}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){var r={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=r},function(t,e){t.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(t){var e={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return e[t]||null}}},function(t,e,r,n,i,o){function s(t,e,r){for(var n=-1,i=l(e),o=i.length;++n<o;){var s=i[n],a=t[s],u=r(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(void 0!==a||s in t)||(t[s]=u)}return t}var a=r(n),u=r(i),l=r(o),c=u(function(t,e,r){return r?s(t,e,r):a(t,e)});t.exports=c},function(t,e,r,n,i){function o(t,e){return null==e?t:s(e,a(e),t)}var s=r(n),a=r(i);t.exports=o},function(t,e,r,n,i,o){function s(t){return function(e){return null==e?void 0:e[t]}}function a(t){return null!=t&&l(w(t))}function u(t,e){return t="number"==typeof t||g.test(t)?+t:-1,e=null==e?b:e,t>-1&&t%1==0&&e>t}function l(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function c(t){for(var e=p(t),r=e.length,n=r&&t.length,i=!!n&&l(n)&&(m(t)||d(t)),o=-1,s=[];++o<r;){var a=e[o];(i&&u(a,n)||v.call(t,a))&&s.push(a)}return s}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function p(t){if(null==t)return[];h(t)||(t=Object(t));var e=t.length;e=e&&l(e)&&(m(t)||d(t))&&e||0;for(var r=t.constructor,n=-1,i="function"==typeof r&&r.prototype===t,o=Array(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&u(a,e)||"constructor"==a&&(i||!v.call(t,a))||o.push(a);return o}var f=r(n),d=r(i),m=r(o),g=/^\d+$/,y=Object.prototype,v=y.hasOwnProperty,_=f(Object,"keys"),b=9007199254740991,w=s("length"),x=_?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&a(t)?c(t):h(t)?_(t):[]}:c;t.exports=x},function(t,e,r,n,i,o){function s(t){return l(function(e,r){var n=-1,i=null==e?0:r.length,o=i>2?r[i-2]:void 0,s=i>2?r[2]:void 0,l=i>1?r[i-1]:void 0;for("function"==typeof o?(o=a(o,l,5),i-=2):(o="function"==typeof l?l:void 0,i-=o?1:0),s&&u(r[0],r[1],s)&&(o=3>i?void 0:o,i=1);++n<i;){var c=r[n];c&&t(e,c,o)}return e})}var a=r(n),u=r(i),l=r(o);t.exports=s},function(t,e,r,n){function i(t,e){return d(t,e,h)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(r,n){var i=r?m(r):0;if(!u(i))return t(r,n);for(var o=e?i:-1,s=l(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}function a(t){return function(e,r,n){for(var i=l(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(r(i[u],u,i)===!1)break}return e}}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function l(t){return c(t)?t:Object(t)}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=r(n),p=9007199254740991,f=s(i),d=a(),m=o("length");t.exports=f}]))},function(t,e,r){var n=r(22),i=function(t,e){var r=e||{},i=r.bufferLen||4096,o=r.numChannels||2;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,i,o,o);var s=new n;s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:o}});var a,u=!1;this.node.onaudioprocess=function(t){if(u){for(var e=[],r=0;o>r;r++)e.push(t.inputBuffer.getChannelData(r));s.postMessage({command:"record",buffer:e})}},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},this.record=function(){u=!0},this.stop=function(){u=!1},this.clear=function(){s.postMessage({command:"clear"})},this.getBuffer=function(t){a=t||r.callback,s.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(a=t||r.callback,e=e||r.type||"audio/wav",!a)throw new Error("Callback not set");s.postMessage({command:"exportWAV",type:e})},s.onmessage=function(t){var e=t.data;a(e)},t.connect(this.node),this.node.connect(this.context.destination)};i.forceDownload=function(t,e){var r=(window.URL||window.webkitURL).createObjectURL(t),n=window.document.createElement("a");n.href=r,n.download=e||"output.wav";var i=document.createEvent("Event");i.initEvent("click",!0,!0),n.dispatchEvent(i)},t.exports=i},function(t,e){t.exports=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){function n(){return this._hooksPause.every(function(t){return t.call()})}function i(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function o(t){N=t,t&&($.AudioManagerStates=t.States)}function s(){var t=q();return d.call(this,!0).done(function(e){t.resolve(e.url)}).fail(function(){t.reject()}),t.promise()}function a(t){var e,r=this.options;return e={id:this.getId(),src:t.url,duration:K.result(r.duration),title:this.options.title,mimeType:t.mimeType,forceSingle:r.useSinglePlayer},N.createAudioPlayer(e,{streamUrlProvider:s.bind(this)})}function u(t,e){var r=e?"on":"off";t[r]("state-change",M,this)[r]("position-change",c,this)[r]("metadata",l,this)}function l(){this.trigger(G.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(G.TIME),this._prevPosition=this.currentTime())}function h(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function p(){h.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(G.RESET))}function f(){this._registerPlays=!0,this.pause(),this.trigger(G.FINISH)}function d(t){var e=q(),r=this.streamInfo&&!t;return r?e.resolve(this.streamInfo):m.call(this).done(function(t){var r=Y.choosePreferredStream(t,this.options);r?e.resolve(r):(this.trigger(G.NO_PROTOCOL),L.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),e.reject())}.bind(this)).fail(function(t){L.warn("(%s) Stream request failed with status: %d",this.getId(),t.status),g.call(this,t),y.call(this,t),e.reject()}.bind(this)),e.promise()}function m(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t,e=q();return this._usedPrefetchUrls=!0,t=K.result(this.options.streamUrls),e.resolve(t),e.promise()}return this.ajax({type:"GET",url:K.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?rt:et})}function g(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(G.GEO_BLOCKED)}function y(t){0===t.status&&this.trigger(G.NO_CONNECTION)}function v(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function _(t){if(!v.call(this))return!0;var e=this._initAudioDefer&&this._initAudioDefer.state(),r=Y.streamValidForPlayingFrom(this.streamInfo,t);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:e&&("pending"===e||"resolved"===e&&r)}function b(t){t&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(G.BUFFERRING_START)}.bind(this),nt):t||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(G.BUFFERRING_END)))}function w(){this.off(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEKED),this.seekTimeEventHandler=null}function x(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),at)}function S(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function T(){var t=this.isPlaying(),e=Date.now();return S.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+ot>e&&this._errorRecoveryCounts>st?void this.trigger(G.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,p.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function E(t){this.logAudioError({error_code:t,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?X.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function A(){var t,e=N.Errors;if(!this.controller)return L.error("(%s) Controller is null, aborting error handler.",this.getId(),this),E.call(this,null),void T.call(this);switch(t=this.controller&&this.controller.getErrorID(),L.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),I(t,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&E.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(G.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(G.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:K.without(this.options.protocols,z.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.GENERIC_AUDIO_ENDED_EARLY:case e.MSE_BAD_OBJECT_STATE:case e.MSE_NOT_SUPPORTED:case e.MSE_MP3_NOT_SUPPORTED:case e.MSE_HLS_NOT_VALID_PLAYLIST:case e.MSE_HLS_PLAYLIST_NOT_FOUND:case e.MSE_HLS_SEGMENT_NOT_FOUND:T.call(this);break;case e.GENERIC_AUDIO_OVERRUN:f.call(this);break;default:L.error("(%s) Unhandled audio error code: %s",this.getId(),t,this)}}function C(t,e){switch(this.options.debug&&R.call(this,t,e),t){case G.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case G.PLAY:var r=e;this.toggleMute(J.muted),this.setVolume(J.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==r.userInitiated?!!r.userInitiated:!0,O.call(this);break;case G.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case G.BUFFERRING_START:case G.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case G.BUFFERRING_END:case G.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case G.NO_CONNECTION:this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case G.NO_STREAMS:this.pause(),b.call(this,!1),h.call(this),k.call(this);break;case G.STREAMS:this._noConnectionSince=null,this._hasNoConnection=!1;break;case G.ONLINE:D.call(this);break;case G.OFFLINE:}}function M(t){var e=N.States,r=N.Errors;switch(t){case e.IDLE:P.call(this),this.controller&&this.controller.getErrorID()===r.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(G.FLASH_UNBLOCK);break;case e.PAUSED:P.call(this),b.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&w.call(this),this.isPlaying()&&this.trigger(G.PAUSE,{position:this.currentTime()});break;case e.PLAYING:P.call(this),b.call(this,!1),x.call(this),this.trigger(G.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:P.call(this),b.call(this,!0);break;case e.ENDED:P.call(this),f.call(this);break;case e.ERROR:b.call(this,!1),A.call(this)}this.trigger(G.STATE_CHANGE,t)}function R(t,e){var r=this.options.title;r=r&&r.length?" ["+r.replace(/\s/g,"").substr(0,6)+"]":"",t===G.STATE_CHANGE?L("(%s)%s Event: %s (%s)",this.getId(),r,t,e):t!==G.TIME||this._loggedTime?t!==G.TIME&&L("(%s)%s Event: %s",this.getId(),r,t):L("(%s)%s Event: %s %dms",this.getId(),r,t,this.currentTime()),this._loggedTime=t===G.TIME}function P(){this._initAudioDefer&&this._initAudioDefer.resolve()}function I(t){return void 0===N.Errors[t]?!1:Array.prototype.slice.call(arguments,1).some(function(e){return 0===t.indexOf(e)})}function O(){function t(){var t=window.navigator.onLine;L("Navigator `onLine` status is now: "+t),window.setTimeout(function(){window.navigator.onLine===t&&this.trigger(t?G.ONLINE:G.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",t.bind(this)),window.addEventListener("offline",t.bind(this)))}function D(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var t=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,t<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function k(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var $,N,L,F=r(1),U=r(6),B=r(8),H=r(9),q=r(2).Deferred,G=r(7),V=r(14),j=r(10),z=r(15),W=r(16),Y=r(18),X=r(12),K=r(13),Z=r(19),Q={},J={muted:!1,volume:1},tt={soundId:Q,duration:Q,title:null,registerEndpoint:Q,streamUrlsEndpoint:Q,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[z.HLS,z.RTMP,z.HTTP],extensions:[V.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutOnPause:!1,fadeOutAlgo:Z.VolumeAutomator.Algos.EaseInOut},et=6e3,rt=6e3,nt=400,it=6e4,ot=6e3,st=3,at=3e4,ut=[];$=t.exports=function(t,e){if(1===arguments.length?e=t:$.setAudioManager(t),!N)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=K.extend({},tt,e);var r=Object.keys(this.options).filter(function(t){return this.options[t]===Q},this);if(r.length)throw new Error("SCAudio: pass into constructor the following options: "+r.join(", "));W.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new B(this,this.logAudioPerformance.bind(this)),this.audioLogger=new U(this),this.volumeAutomator=new Z.VolumeAutomator(this),L=L||H(e.debug,"scaudio")},K.extend($.prototype,j,{constructor:$,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=q(),d.call(this).done(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(G.STREAMS),this.controller=a.call(this,t),u.call(this,this.controller,!0),M.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(G.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(G.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===ut.indexOf(t)&&(ut.push(t),window.setTimeout(function(){var e=ut.indexOf(t);e>-1&&ut.splice(e,1)},it),this.ajax({type:"POST",url:K.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(G.REGISTERED),e=!0),e},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(t){var e;if(t&&null!=t.seek)e=t.seek;else{if(this.isPlaying())return;e=this.currentTime()}t=K.extend({},t,{position:e}),this.trigger(G.PLAY,t),_.call(this,e)||(p.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(G.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),b.call(this,!0)},pause:function(t){this.isPaused()||(t=K.extend({},t,{position:this.currentTime()}),n.call(this)&&(this.trigger(G.PAUSE,t),this.controller&&this.controller.pause()))},registerHook:function(t,e){switch(t){case"pause":this._hooksPause.push(e);break;default:throw new Error("can`t register hook for "+t)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,K.without(ut,this.options.soundId),window.clearTimeout(this._bufferingTimeout),h.call(this),this.controller&&(this.controller.kill(),
this.controller=null),delete this.controller,this.trigger(G.DESTROYED),this.off()},seek:function(t){return this.controller?t>=K.result(this.options.duration)?void f.call(this):(this.seekTimeEventHandler&&this.off(G.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=K.after(2,function(){w.call(this)}.bind(this)),this.on(G.TIME,this.seekTimeEventHandler),this.trigger(G.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!_.call(this,t)?(p.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==N.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},toggleMute:function(t){$.toggleMute(t)},isMuted:function(){return $.isMuted()},setVolume:function(t){$.setVolume(t)},getVolume:function(){return $.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return N.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var r=i(t);if(this._modelListeners[r])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[r]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=i(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):F(t)},trigger:function(t,e){C.call(this,t,e),j.trigger.call(this,t,e)}}),K.extend($,{getSettings:function(){return J},setSettings:function(t){K.extend(J,t)},setAudioManager:o,setAudioManagerOnce:K.once(o),toggleMute:function(t){J.muted=void 0===t?!J.muted:!!t,N&&N.setVolume(J.muted?0:1)},isMuted:function(){return J.muted},setVolume:function(t){J.volume=void 0===t?1:t,N&&N.setVolume(J.volume)},getVolume:function(){return J.volume},Extensions:V,Protocols:z,Events:G,BUFFER_DELAY:nt,PLAY_REGISTRATION_TIMEOUT:it})},function(t,e,r){var n=r(2).Deferred,i=4;t.exports=function(t){var e,r,o,s,a,u,l,c;t&&(o=t.data||null,r=t.url||"",e=t.type||"GET",s=t.dataType||"text",a=t.async,u=t.timeout,l=t.beforeSend||null);var h=n();a=a!==!1;var p=new XMLHttpRequest;return p.open(e,r,a),a&&(p.responseType="text"),l&&l(p),p.onreadystatechange=function(){if(p.readyState===i)if(clearTimeout(c),0!==p.status&&p.status<400){var t=p.responseText;if("json"===s)try{t=JSON.parse(t)}catch(e){return void h.reject(p)}h.resolve(t)}else h.reject(p)},null!=u&&(c=setTimeout(function(){p.readyState!==i&&(p.abort(),h.reject(p))},u)),p.send(o),h.promise()}},function(t,e,r){t.exports=r(3)},function(t,e,r){var n=t.exports=r(4),i=Array.prototype.slice;n.extend({Deferred:function(t){var e=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n.Deferred(function(r){n.each(e,function(e,i){var s=i[0],a=t[e];o[i[1]](n.isFunction(a)?function(){var t=a.apply(this,arguments);t&&n.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[s+"With"](this===o?r:this,[t])}:r[s])}),t=null}).promise()},promise:function(t){return null!=t?n.extend(t,i):i}},o={};return i.pipe=i.then,n.each(e,function(t,n){var s=n[2],a=n[3];i[n[1]]=s.add,a&&s.add(function(){r=a},e[1^t][2].disable,e[2][2].lock),o[n[0]]=s.fire,o[n[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,r,o,s=0,a=i.call(arguments),u=a.length,l=1!==u||t&&n.isFunction(t.promise)?u:0,c=1===l?t:n.Deferred(),h=function(t,r,n){return function(o){r[t]=this,n[t]=arguments.length>1?i.call(arguments):o,n===e?c.notifyWith(r,n):--l||c.resolveWith(r,n)}};if(u>1)for(e=new Array(u),r=new Array(u),o=new Array(u);u>s;s++)a[s]&&n.isFunction(a[s].promise)?a[s].promise().done(h(s,o,a)).fail(c.reject).progress(h(s,r,e)):--l;return l||c.resolveWith(o,a),c.promise()}})},function(t,e,r){function n(t){var e=s[t]={};return i.each(t.split(o),function(t,r){e[r]=!0}),e}var i=t.exports=r(5),o=/\s+/,s={};i.Callbacks=function(t){t="string"==typeof t?s[t]||n(t):i.extend({},t);var e,r,o,a,u,l,c=[],h=!t.once&&[],p=function(n){for(e=t.memory&&n,r=!0,l=a||0,a=0,u=c.length,o=!0;c&&u>l;l++)if(c[l].apply(n[0],n[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(h?h.length&&p(h.shift()):e?c=[]:f.disable())},f={add:function(){if(c){var r=c.length;!function n(e){i.each(e,function(e,r){var o=i.type(r);"function"===o?t.unique&&f.has(r)||c.push(r):r&&r.length&&"string"!==o&&n(r)})}(arguments),o?u=c.length:e&&(a=r,p(e))}return this},remove:function(){return c&&i.each(arguments,function(t,e){for(var r;(r=i.inArray(e,c,r))>-1;)c.splice(r,1),o&&(u>=r&&u--,l>=r&&l--)}),this},has:function(t){return i.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=h=e=void 0,this},disabled:function(){return!c},lock:function(){return h=void 0,e||f.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||r&&!h||(o?h.push(e):p(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f}},function(t,e){function r(t){return null==t?String(t):c[l.call(t)]||"object"}function n(t){return"function"===u.type(t)}function i(t){return"array"===u.type(t)}function o(t,e,r){var i,o=0,s=t.length,a=void 0===s||n(t);if(r)if(a){for(i in t)if(e.apply(t[i],r)===!1)break}else for(;s>o&&e.apply(t[o++],r)!==!1;);else if(a){for(i in t)if(e.call(t[i],i,t[i])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return!(!t||"object"!==u.type(t))}function a(){var t,e,r,n,i,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),l===a&&(s=this,--a);l>a;a++)if(null!=(t=arguments[a]))for(e in t)r=s[e],n=t[e],s!==n&&(c&&n&&(u.isPlainObject(n)||(i=u.isArray(n)))?(i?(i=!1,o=r&&u.isArray(r)?r:[]):o=r&&u.isPlainObject(r)?r:{},s[e]=u.extend(c,o,n)):void 0!==n&&(s[e]=n));return s}var u=t.exports={type:r,isArray:i,isFunction:n,isPlainObject:s,each:o,extend:a,noop:function(){}},l=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,r){function n(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function i(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=r(7);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,n,this).on(a.PLAY_START,o,this).on(a.PAUSE,i,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e){var r={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};t.exports=r},function(t,e,r){function n(){return this.scAudio.controller?this.controller?void y.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(y("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=w.getUrlHost(this.scAudio.streamInfo.url))):void y.warn("Can´t initialize when controller is null")}function i(){this.controller&&(y("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&p.call(this):x.isNull(this.bufferingStartTime)||f.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return x.isNull(this.metadataLoadStartTime)?void y.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function u(){this.playClickTime=Date.now()}function l(){if(!this.timeToPlayMeasured){if(x.isNull(this.playClickTime))return void y.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function h(){if(!this.scAudio.isPaused()){if(x.isNull(this.seekStartTime))return void y.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function p(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function f(){return x.isNull(this.bufferingStartTime)?void y.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(d.call(this),void(this.bufferingStartTime=null))}function d(){x.isNull(this.bufferingStartTime)||(x.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function m(){d.call(this),x.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var g,y,v=r(9),_=r(7),b=r(10),w=r(12),x=r(13);g=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),y=y||v(t.options.debug,"audioperf"),t.on(_.CREATED,n,this).on(_.RESET,i,this).on(_.DESTROYED,i,this).on(_.SEEK,c,this).on(_.SEEKED,h,this).on(_.PLAY,u,this).on(_.PLAY_START,s,this).on(_.PLAY_RESUME,l,this).on(_.PAUSE,m,this).on(_.FINISH,m,this).on(_.STATE_CHANGE,o,this).on(_.METADATA,a,this)},x.extend(g.prototype,b,{constructor:g,log:function(t){return this.controller?(x.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),y("(%s) %s latency: %d protocol: %s host: %s playertype: %s",this.scAudio.getId(),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void y.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(t,e){function r(){function t(t,r){for(var n,i=arguments.length,o=Array(i>2?i-2:0),s=2;i>s;s++)o[s-2]=arguments[s];"string"==typeof r?r=" "+r:(o.unshift(r),r=""),(n=window.console)[t].apply(n,[e()+" |"+c+"%c"+r].concat(h,o))}function e(){var t=new Date,e=null===l?0:t-l;return l=+t,"%c"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+"."+n(t.getMilliseconds(),"0",3)+"%c (%c"+n("+"+e+"ms"," ",8)+"%c)"}var r=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!r)return s;var l=null,c=a(o),h=["color: green","color: grey","color: blue","color: grey",u(o),""],p=t.bind(null,"log");return p.log=p,["info","warn","error"].forEach(function(e){p[e]=t.bind(null,e)}),p}function n(t,e,r){return o(e,r-(""+t).length)+t}function i(t){return n(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=r,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(r){return r?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e,r){t.exports=r(11)},function(t,e,r){!function(){function r(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,r=[];for(e in t)t.hasOwnProperty(e)&&(r[r.length]=e);return r},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,r){if(null!=t)if(i&&t.forEach===i)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,o=t.length;o>n;n++)e.call(r,t[n],n,t);else for(var s in t)this.has(t,s)&&e.call(r,t[s],s,t)},once:function(t){var e,r=!1;return function(){return r?e:(r=!0,e=t.apply(this,arguments),t=null,e)}}}}var n,i=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=r();n={on:function(t,e,r){if(!c(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var n=this,i=u.once(function(){n.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,r)},off:function(t,e,r){var n,i,o,s,a,l,h,p;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,l=s.length;l>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=n=[],e||r)for(h=0,p=o.length;p>h;h++)i=o[h],(e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&h(r,e),n&&h(n,arguments),this},stopListening:function(t,e,r){var n=this._listeners;if(!n)return this;var i=!e&&!r;"object"==typeof e&&(r=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,r,this),i&&delete this._listeners[o];return this}};var l=/\s+/,c=function(t,e,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)t[e].apply(t,[i,r[i]].concat(n));return!1}if(l.test(r)){for(var o=r.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},h=function(t,e){var r,n=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<i;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=t[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=t[n]).callback.apply(r.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};u.each(p,function(t,e){n[e]=function(e,r,n){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return i[o]=e,"object"==typeof r&&(n=this),e[t](r,n,this),this}}),n.bind=n.on,n.unbind=n.off,n.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.BackboneEvents=n}(this)},function(t,e){var r={getUrlParams:function(t){var e={},r=t.indexOf("?");return r>-1&&t.substr(r+1).split("&").forEach(function(t){var r=t.split("=");e[r[0]]=r[1]}),e},getUrlHost:function(t){var e,r=t.split("//");return e=r[0]===t?r[0].split("/")[0]:r[1]?r[1].split("/")[0]:""}};t.exports=r},function(t,e){var r={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),t},each:function(t,e,r){Object.keys(t).forEach(function(n){e.call(r||null,t[n],n)})},without:function(t,e){var r=t.indexOf(e);r>-1&&t.splice(r,1)},result:function(t){var e=t;return r.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,r=!1;return function(){return r?e:(r=!0,void(e=t.apply(this,arguments)))}}};t.exports=r},function(t,e){var r={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=r},function(t,e){var r={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=r},function(t,e,r){function n(t){return l.supportsMediaSourceExtensions()&&t.mediaSourceEnabled&&(l.isChrome()&&l.getChromeVersion()>=35||l.isFirefox()&&t.mseFirefox||l.isSafari()&&t.mseSafari)}function i(t){return function(e){var r=!1;switch(e){case u.RTMP:r=l.supportsFlash();break;case u.HTTP:r=l.supportsHTML5Audio()||l.supportsFlash();break;case u.HLS:r=n(t)}return r}}function o(t){return l.isSafari()||l.isFirefox()?[u.HLS,u.HTTP,u.RTMP]:t}function s(t){t.protocols=o(t.protocols).filter(i(t))}var a,u=r(15),l=r(17);a={prioritizeAndFilter:s},t.exports=a},function(t,e){function r(t){return t.test(window.navigator.userAgent.toLowerCase())}function n(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(r){return null}}function i(){try{return parseInt(n(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(t){return NaN}}function o(){return!l()&&r(/safari/)}function s(){return o()&&r(/version\/7\.1/)}function a(){return o()&&r(/version\/8/)&&!r(/version\/80/)}function u(){return o()&&r(/version\/9\./)}function l(){return r(/chrom(e|ium)/)}function c(){return r(/firefox/)}function h(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function p(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function f(){try{var t=o()&&r(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(n){return!1}}function d(){return g(m())>=v}function m(){var t,e,r,n;if("undefined"!=typeof window.ActiveXObject)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),n&&(t=n.GetVariable("$version"))}catch(i){t=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(r="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[r]&&e[r].enabledPlugin&&e[r].enabledPlugin.description&&(t=e[r].enabledPlugin.description));return t}function g(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var y,v=9;y={flashPlugin:m,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:u,isChrome:l,getChromeVersion:i,isFirefox:c,supportsNativeHLSAudio:f,supportsHTML5Audio:p,supportsFlash:d,supportsMediaSourceExtensions:h},t.exports=y},function(t,e,r){function n(t){var e=p.getUrlHost(t);return d.every(function(t){return 0!==e.indexOf(t)})}function i(t,e){return!(t===c.HLS&&!n(e))}function o(t,e){if(!t)return!1;var r=t.issuedAt+s(t.protocol,t.duration);return a(t.protocol)?Date.now()+t.duration-(e||0)<r:Date.now()<r}function s(t,e){var r=a(t);return m+(r?h.result(e):0)}function a(t){return t===c.HTTP||t===c.HLS}function u(t,e){function r(t){return-1*t}function n(t,e){return Math.abs(e-y)-Math.abs(t-y)}var o,s,a,u,l,c,p,f,d,m,g={},y=e.maxBitrate,v=e.protocols,_=e.extensions;for(h.each(t,function(t,e){var r=e.split("_"),n=r[0],i=r[1],o=r[2];g[n]=g[n]||{},g[n][i]=g[n][i]||{},g[n][i][o]=t}),l=0,c=v.length;c>l;++l)for(u=v[l],f=0,d=_.length;d>f;++f)if(p=_[f],g[u]&&g[u][p]){if(o=Object.keys(g[u][p]).map(Number).sort(r),s=y===1/0,a=y===-(1/0),y=s||a?o[s?"pop":"shift"]():o.sort(n).pop(),m=g[u][p][y],!i(u,m))continue;return{url:m,bitrate:y,protocol:u,extension:p,issuedAt:Date.now(),duration:h.result(e.duration)}}return null}var l,c=r(15),h=r(13),p=r(12),f=.9,d=[],m=Math.floor(12e4*f);l={choosePreferredStream:u,streamValidForPlayingFrom:o},t.exports=l},function(t,e,r){var n,i,o=r(7),s=r(13),a={Linear:0,EaseOut:1,EaseInOut:2},u=600,l=25;t.exports=n={},n.VolumeAutomator=i=function(t){this.scAudio=t,this.fadeOutAlgo=this.scAudio.options.fadeOutAlgo,this.fadeOutTimer=null,this.initialVolume=void 0,this.scAudio.options.fadeOutOnPause&&i.isSupported()&&(this.scAudio.on(o.PLAY,this.onPlay,this),this.scAudio.registerHook("pause",this.hookPause.bind(this)))},n.VolumeAutomator.isSupported=function(){var t=new window.Audio,e=t.volume,r=0===e?1:e/2;return t.volume=r,t.volume===r},n.VolumeAutomator.Algos=a,s.extend(i.prototype,{fadeOutAndPause:function(){var t=Date.now(),e=function(){var r,n=(Date.now()-t)/u,i=this.initialVolume;if(n>=1)this.scAudio.controller&&this.scAudio.controller.pause(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case a.Linear:r=i*(1-n);break;case a.EaseOut:r=i*(1/(10*(n+.1))-.05);break;case a.EaseInOut:default:r=i*(Math.cos(n*Math.PI)/2+.5)}this.scAudio.setVolume(r),window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=window.setTimeout(e,l)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){this.fadeOutTimer&&(window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},hookPause:function(t){return this.fadeOutAndPause(),!1},onPlay:function(){this.cancelFadeout()}})}])},function(t,e){}])})},{}]},{},[1]);